/*! For license information please see lr-importer.18d74cd04181232e5463.js.LICENSE.txt */
(()=>{var e,t,r,i,n={71371:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(901073);const n=r.n(i)()},901073:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let i=0,n=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(i++,"%c"===e&&(n=i))})),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if(window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(716655)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},716655:(e,t,r)=>{e.exports=function(e){function t(e){let r,n,s,o=null;function a(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];if(!a.enabled)return;const s=a,o=Number(new Date),l=o-(r||o);s.diff=l,s.prev=r,s.curr=o,r=o,i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");let u=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,((e,r)=>{if("%%"===e)return"%";u++;const n=t.formatters[r];if("function"==typeof n){const t=i[u];e=n.call(s,t),i.splice(u,1),u--}return e})),t.formatArgs.call(s,i);(s.log||t.log).apply(s,i)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=i,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==t.namespaces&&(n=t.namespaces,s=t.enabled(e)),s),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function i(e,r){const i=t(this.namespace+(void 0===r?":":r)+e);return i.log=this.log,i}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),n=i.length;for(r=0;r<n;r++)i[r]&&("-"===(e=i[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,i;for(r=0,i=t.skips.length;r<i;r++)if(t.skips[r].test(e))return!1;for(r=0,i=t.names.length;r<i;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(223384),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},467006:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},i(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(228554),a=r(860731),l=r(195037),u=r(447622),c=r(182475),d=function(e){function t(t){void 0===t&&(t=null);var r=e.call(this,t)||this;r.onAccessTokenHasExpired=null,r.onAccessToken=null,r.onReauthAccessToken=null,r.onError=null,r.handlers={triggerOnAccessToken:function(e){r.onAccessToken&&r.onAccessToken(e)},triggerOnReauthAccessToken:function(e){r.onReauthAccessToken&&r.onReauthAccessToken(e)},triggerOnAccessTokenHasExpired:function(){r.onAccessTokenHasExpired&&r.onAccessTokenHasExpired()},triggerOnReady:function(e){void 0===e&&(e=null),r.onReady&&r.onReady(e)},triggerOnError:function(e,t){r.onError&&r.onError(e,t)}};var i=t||window[o.AdobeIdKey];if(!i)throw new Error("Please provide adobeId information");var n=i.standalone,s=i.autoValidateToken,u=i.modalSettings,c=void 0===u?{}:u,d=i.modalMode,h=void 0!==d&&d,p=i.onAccessToken,f=i.onReauthAccessToken,g=i.onAccessTokenHasExpired,m=i.onReady,y=i.onError,v=i.overrideErrorHandler;return n&&n.token&&(r.standalone=new l.StandaloneToken(n)),r.modalSettings=new a.PopupSettings(c),r.modalMode=h,r.autoValidateToken=!!s,r.onAccessToken=p||null,r.onReauthAccessToken=f||null,r.onAccessTokenHasExpired=g||null,r.onReady=m||null,r.onError=y||null,r.overrideErrorHandler=v,r}return n(t,e),t.prototype.createSocialProviderRedirectRequest=function(e,t,r,i,n){void 0===n&&(n=c.IGrantTypes.token);var o={idp_flow:"social.deep_link.web",provider_id:e},a=s(s({},t),o);return this.createRedirectRequest(a,r,i,n)},t.prototype.createReAuthenticateRedirectRequest=function(e,t,r,i,n){void 0===i&&(i=u.IReauth.check),void 0===n&&(n=c.IGrantTypes.token);var o={reauth:i},a=s(s({},e),o);return this.createRedirectRequest(a,t,r,n)},t.prototype.createSignUpRedirectRequest=function(e,t,r,i){void 0===i&&(i=c.IGrantTypes.token);var n=s(s({},e),{idp_flow:"create_account"});return this.createRedirectRequest(n,t,r,i)},t}(r(416850).AdobeIdThinData);t.AdobeIdData=d},416850:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(228554),o=r(688438),a=n(r(216718)),l=r(779722),u=n(r(216389)),c=r(447622),d=r(182475),h=r(717429),p=function(){function e(e){void 0===e&&(e=null),this.analyticsParameters=new l.AnalyticsParameters,this.api_parameters={},this.locale="",this.scope="AdobeID",this.client_id="",this.environment=o.IEnvironment.PROD,this.useLocalStorage=!1,this.onReady=null;var t=e||window[s.AdobeIdKey];if(!t)throw new Error("Please provide adobeId information");var r=t.api_parameters,i=t.client_id,n=t.locale,c=t.scope,d=t.ijt,h=t.environment,p=void 0===h?o.IEnvironment.PROD:h,f=t.redirect_uri,g=t.useLocalStorage,m=t.logsEnabled,y=t.onReady,v=t.rideRedirectUri;this.environment=p,this.api_parameters=r||{},this.client_id=i,this.locale=n||s.DEFAULT_LANGUAGE,this.scope=c?c.replace(/\s/gi,""):"",this.redirect_uri=f,this.ijt=d,this.useLocalStorage=g,m?u.default.enableLogging():u.default.disableLogging(),this.onReady=y||null,this.rideRedirectUri=v,this.fillAnalityticsParameters(t),a.default.loadEnvironment(p)}return e.prototype.fillAnalityticsParameters=function(e){var t=e.analytics,r=void 0===t?{}:t,i=r.appCode,n=void 0===i?"":i,s=r.appVersion,o=void 0===s?"":s,a=this.analyticsParameters;a.appCode=n,a.appVersion=o},e.prototype.createSocialProviderRedirectRequest=function(e,t,r,n,s){var o={idp_flow:"social.deep_link.web",provider_id:e},a=i(i({},t),o);return this.createRedirectRequest(a,r,n,s)},e.prototype.createReAuthenticateRedirectRequest=function(e,t,r,n,s){void 0===n&&(n=c.IReauth.check),void 0===s&&(s=d.IGrantTypes.token);var o={reauth:n},a=i(i({},e),o);return this.createRedirectRequest(a,t,r,s)},e.prototype.createSignUpRedirectRequest=function(e,t,r){var n=i(i({},e),{idp_flow:"create_account"});return this.createRedirectRequest(n,t,r,d.IGrantTypes.token)},e.prototype.createRedirectRequest=function(e,t,r,i){var n=this,s=this,o=s.api_parameters,a=void 0===o?{}:o,l=s.client_id,u=s.redirect_uri,c=void 0===u?"":u,p=s.scope,f=s.locale,g=this.createRedirectState(t,r),m={adobeIdRedirectUri:c,apiParameters:a,clientId:l,externalParameters:e,scope:p,locale:f,response_type:i,state:g};return i===d.IGrantTypes.token?Promise.resolve(m):(new h.CodeChallenge).createCodeChallenge(r).then((function(i){e.code_challenge=i.challenge,e.code_challenge_method="S256";var s=n.createRedirectState(t,r);return m.state=s,Promise.resolve(m)}))},e.prototype.createRedirectState=function(e,t){var r=this.analyticsParameters,i=r.appCode,n=void 0===i?"":i,s=r.appVersion,o=void 0===s?"":s,l=void 0===e?{}:{context:e};return n&&(l.ac=n),o&&(l.av=o),l.jslibver=a.default.jslibver,l.nonce=t,Object.keys(l).length?l:null},e.prototype.triggerOnReady=function(){this.onReady&&this.onReady(void 0)},e.prototype.computeRideRedirectUri=function(e){return this.rideRedirectUri?"string"==typeof this.rideRedirectUri?"DEFAULT"===this.rideRedirectUri?null:this.rideRedirectUri:this.rideRedirectUri(e):window.location.href},e}();t.AdobeIdThinData=p},779722:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){this.appCode="",this.appVersion=""};t.AnalyticsParameters=r},688438:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.STAGE="stg1",e.PROD="prod"}(t.IEnvironment||(t.IEnvironment={}))},497365:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.INITIALIZE_ERROR="initialize_error",e.HTTP="http",e.FRAGMENT="fragment",e.CSRF="csrf",e.NOT_AUTHORIZE="not_authorize",e.PROFILE_EXCEPTION="profile_exception",e.TOKEN_EXPIRED="token_expired",e.SOCIAL_PROVIDERS="SOCIAL_PROVIDERS",e.RIDE_EXCEPTION="ride_exception"}(t.IErrorType||(t.IErrorType={}))},972586:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(910813),l=o(r(216389)),u=r(267083),c=r(64209),d=r(773778),h=r(467006),p=r(330340),f=r(447622),g=r(956690),m=r(970323),y=r(447813),v=o(r(833164)),b=o(r(295677)),_=r(497365),w=r(681214),P=r(785713),A=r(58993),S=o(r(384695)),x=r(228554),C=o(r(216718)),O=r(182475),k=r(474514),E=r(717429),T=function(){function e(e){var t=this;void 0===e&&(e=null),this.initialized=!1,this.onPopupMessage=function(e){return v.default.replaceUrl(e),t.initialize()},this.signIn=function(e,r,i){void 0===e&&(e={}),void 0===i&&(i=O.IGrantTypes.token),t.checkInitialized();var n=t,s=n.adobeIdData,o=n.csrfService.initialize();return s.createRedirectRequest(e,r,o,i).then((function(e){t.signInservice.signIn(e)}))},this.authorizeToken=function(e,r,i,n){void 0===e&&(e=""),void 0===r&&(r={}),void 0===n&&(n=O.IGrantTypes.token);var s=t,o=s.adobeIdData,a=s.csrfService.initialize();return o.createRedirectRequest(r,i,a,n).then((function(t){(new u.SignInService).authorizeToken(e,t)}))},this.reAuthenticate=function(e,r,i,n){void 0===e&&(e={}),void 0===r&&(r=f.IReauth.check),void 0===n&&(n=O.IGrantTypes.token),t.checkInitialized();var s=t,o=s.adobeIdData,a=s.csrfService.initialize();return o.createReAuthenticateRedirectRequest(e,i,a,r,n).then((function(e){t.signInservice.signIn(e)}))},this.signInWithSocialProvider=function(e,r,i,n){if(void 0===r&&(r={}),void 0===n&&(n=O.IGrantTypes.token),t.checkInitialized(),!e)throw new Error("please provide the provider name");var s=t,o=s.adobeIdData,a=s.csrfService.initialize();o.createSocialProviderRedirectRequest(e,r,i,a,n).then((function(e){t.signInservice.signIn(e)}))},this.signOut=function(e){void 0===e&&(e={}),t.checkInitialized(),t.tokenService.purge(),t.profileService.removeProfile();var r=t.adobeIdData,i=r.api_parameters,n=void 0===i?{}:i,s=r.client_id,o={adobeIdRedirectUri:r.redirect_uri,apiParameters:n,clientId:s,externalParameters:e};(new d.SignOutService).signOut(o)},this.refreshToken=function(e,r){if(void 0===e&&(e={}),void 0===r&&(r=!1),!r&&e.userInactiveSince){var i=e.userInactiveSince,n=Date.now()-1e3*i;n>S.default.lastUserInteraction&&(S.default.lastUserInteraction=n)}return t.tokenService.refreshToken(e).then((function(e){return t.onTokenProfileReceived(e)})).catch((function(e){if(l.default.error("refresh token error",e),e instanceof A.HttpErrorResponse)return Promise.reject(e);var r=t.verifyRideErrorExceptionStrict(e);return r||(t.profileService.removeProfile(),t.onTokenExpired(),Promise.reject(e))}))},this.switchProfile=function(e,r){return void 0===r&&(r={}),e?t.tokenService.switchProfile(e,r).then((function(e){return t.onTokenProfileReceived(e)})).catch((function(e){return t.verifyRideErrorException(e)})):Promise.reject(new Error("Please provide the user id for switchProfile"))},this.triggerOnImsInstance=function(e){var r=document.createEvent("CustomEvent"),i={clientId:t.adobeIdData.client_id,instance:e};r.initCustomEvent(x.ON_IMSLIB_INSTANCE,!1,!1,i),window.dispatchEvent(r)},this.processInitializeException=function(e){void 0===e&&(e={});var r=t.adobeIdData.handlers;return l.default.warn("initialize",e),e instanceof k.ModalSignInEvent?t.notifyParentAboutModalSignIn(e):(t.restoreHash(),e instanceof w.TokenExpiredException&&r.triggerOnAccessTokenHasExpired(),Promise.reject(e))},this.verifyRideErrorException=function(e){return n(t,void 0,void 0,(function(){return s(this,(function(t){if(e instanceof P.RideException){if(this.adobeIdData.overrideErrorHandler&&!this.adobeIdData.overrideErrorHandler(e))return[2,Promise.reject(e)];e.isPbaExpiredIdleSessionWorkaround?this.signIn():e.jump&&v.default.replaceUrl(e.jump)}return[2,Promise.reject(e)]}))}))},this.verifyRideErrorExceptionStrict=function(e){return e instanceof P.RideException?t.verifyRideErrorException(e):null},this.verifyCsrfException=function(e){var r=e.type;return r&&r===_.IErrorType.CSRF&&t.signOut(),Promise.reject(e)},this.processTokenResponse=function(e){var r=t.adobeIdData.handlers,i=e.tokenFields,n=e.profile,s=i.tokenValue,o=i.state,a=i.expire,u=i.sid,c=i.user_id,d=i.other,h=void 0===d?{}:d,p=i.impersonatorId,f=i.isImpersonatedSession;l.default.info("token",s),h.from_ims&&v.default.setHash(h.old_hash||""),t.profileService.removeProfileIfOtherUser(c);var g={token:s,expire:a,sid:u,impersonatorId:p,isImpersonatedSession:f};return i.isReauth()?r.triggerOnReauthAccessToken(g):t.tokenReceived(g),n&&t.profileService.saveProfileToStorage(n),Promise.resolve(o)},this.exchangeIjt=function(e){var r=t.adobeIdData.ijt;return e||r?t.tokenService.exchangeIjt(e||r).then((function(e){return t.profileService.removeProfile(),Promise.resolve(e)})):Promise.reject(new Error("please set the adobeid.ijt value"))},this.adobeIdData=new h.AdobeIdData(e);var r=this.adobeIdData,o=r.api_parameters,g=void 0===o?{}:o,b=r.client_id,C=r.scope,E=r.useLocalStorage,T=r.autoValidateToken,I=r.modalMode,D=r.modalSettings;this.imsApis=new p.ImsApis(g),this.csrfService=new a.CsrfService(b),this.serviceRequest={clientId:b,scope:C,imsApis:this.imsApis},this.tokenService=new y.TokenService(i(i({},this.serviceRequest),{useLocalStorage:E,autoValidateToken:T}),this.csrfService),this.profileService=new m.ProfileService(this.serviceRequest),this.signInservice=I?new c.SignInModalService(this.onPopupMessage,D):new u.SignInService}return Object.defineProperty(e.prototype,"version",{get:function(){return C.default.jslibver},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adobeid",{get:function(){return i({},this.adobeIdData)},enumerable:!0,configurable:!0}),e.prototype.enableLogging=function(){l.default.enableLogging()},e.prototype.disableLogging=function(){l.default.disableLogging()},e.prototype.checkInitialized=function(){this.initialized},e.prototype.signUp=function(e,t){var r=this;void 0===e&&(e={}),this.checkInitialized();var i=this.adobeIdData,n=this.csrfService;if(!i)throw new Error("no adobeId on reAuthenticate");var s=n.initialize();return i.createSignUpRedirectRequest(e,t,s).then((function(e){r.signInservice.signIn(e)}))},e.prototype.isSignedInUser=function(){return!(!this.getAccessToken()&&!this.getReauthAccessToken())},e.prototype.getProfile=function(){var e=this,t=this.profileService.getProfileFromStorage();if(t)return Promise.resolve(t);var r=this.getAccessToken()||this.getReauthAccessToken();if(!r){return Promise.reject(new g.ProfileException("please login before getting the profile"))}return this.profileService.getProfile(r.token).then((function(e){return Promise.resolve(e)})).catch((function(t){return l.default.error("get profile exception ",t),t instanceof A.HttpErrorResponse?e.refreshToken().then((function(e){return Promise.resolve(e.profile)})):Promise.reject(new g.ProfileException(t.message||t))}))},e.prototype.avatarUrl=function(e){return this.imsApis.avatarUrl(e)},e.prototype.getReleaseFlags=function(e){return void 0===e&&(e=!1),e?this.tokenService.getDecodedReleaseFlags():this.tokenService.getReleaseFlags()},e.prototype.getAccessToken=function(){return this.getTokenFromStorage(!1)},e.prototype.getReauthAccessToken=function(){return this.getTokenFromStorage(!0)},e.prototype.getTokenFromStorage=function(e){var t=this.tokenService.getTokenFieldsFromStorage(e);return t?{token:t.tokenValue,expire:t.expire,sid:t.sid,impersonatorId:t.impersonatorId,isImpersonatedSession:t.isImpersonatedSession}:null},e.prototype.listSocialProviders=function(){var e=this;return new Promise((function(t,r){var i=e.adobeIdData.client_id;e.imsApis.listSocialProviders({client_id:i}).then((function(e){t(e)})).catch((function(e){r(e)}))}))},e.prototype.tokenReceived=function(e){this.adobeIdData.handlers.triggerOnAccessToken(e),S.default.startAutoRefreshFlow({expire:e.expire,refreshTokenMethod:this.refreshToken})},e.prototype.onTokenProfileReceived=function(e){var t=e.tokenInfo,r=e.profile;return l.default.info("token",t),this.tokenReceived(t),this.profileService.saveProfileToStorage(r),Promise.resolve(e)},e.prototype.validateToken=function(){var e=this;return this.tokenService.validateToken().then((function(){return Promise.resolve(!0)})).catch((function(t){return l.default.warn("validate token exception",t),t instanceof A.HttpErrorResponse||e.profileService.removeProfile(),Promise.reject(!1)}))},e.prototype.onTokenExpired=function(){var e=this.adobeIdData.handlers;this.tokenService.purge(),e.triggerOnAccessTokenHasExpired()},e.prototype.setStandAloneToken=function(e){return this.tokenService.setStandAloneToken(e)},e.prototype.initialize=function(){var e=this,t=this.adobeIdData,r=t.handlers,i=t.standalone,n=t.ijt,s=null;return i&&this.setStandAloneToken(i),(n?this.exchangeIjt:this.tokenService.getTokenAndProfile)().then(this.processTokenResponse,(function(t){return e.processInitializeException(t).catch((function(t){return e.verifyRideErrorException(t)})).catch((function(t){return e.verifyCsrfException(t).catch((function(e){return l.default.info("initialize exception ended",e)}))}))})).then((function(e){s=e})).finally((function(){return l.default.info("onReady initialization"),window.addEventListener(x.ASK_FOR_IMSLIB_INSTANCE_DOM_EVENT_NAME,(function(){e.triggerOnImsInstance(e)}),!1),r.triggerOnReady(s?s.context:null),e.triggerOnImsInstance(e),e.initialized=!0,Promise.resolve(s)}))},e.prototype.notifyParentAboutModalSignIn=function(e){var t=window.location.href.replace("imslibmodal","wasmodal");return window.opener?(window.opener.postMessage(t,window.location.origin),window.close()):window[""+e.wndRedirectPropName]=t,Promise.reject("popup")},e.prototype.restoreHash=function(){var e=b.default.fragmentToObject();e&&e.from_ims&&v.default.setHash(e.old_hash||"")},e.prototype.getTransitoryAuthorizationCode=function(e,t){return void 0===t&&(t={}),(e=e||{}).response_type=e.response_type||"code",e.target_client_id=e.target_client_id||this.adobeIdData.client_id,e.target_scope=e.target_scope||this.adobeIdData.scope,this.imsApis.getTransitoryAuthorizationCode(e,t,this.adobeIdData.client_id)},e.prototype.jumpToken=function(e,t){return void 0===t&&(t={}),e.target_client_id=e.target_client_id||this.adobeIdData.client_id,e.target_scope=e.target_scope||this.adobeIdData.scope,this.imsApis.jumpToken(e,t,this.adobeIdData.client_id)},e.prototype.getVerifierByKey=function(e){return(new E.CodeChallenge).getVerifierByKey(e)},e}();t.AdobeIMS=T},765599:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){this.profile=null,this.tokenFields=e,this.profile=t};t.TokenProfileResponse=r},910813:function(e,t,r){"use strict";r(467111),r(357866),r(460626),r(54923),r(249560);var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(75314)),s=r(625132);t.ONE_HOUR=1296e4;var o=function(){function e(e){this.storageInstance=null,this.nonceStorageKey="",this.nonceStorageKey="nonce"+e}return Object.defineProperty(e.prototype,"storage",{get:function(){return this.storageInstance||(this.storageInstance=n.default.getAvailableStorage()),this.storageInstance},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){if(!this.isStorageAvailable())return"";var t=e.generateNonce(),r=this.getNonceFromStorage()||{};return r=this.clearOlderNonceKeys(r),this.addNonceToObject(r,t),this.saveNonceValuesToStorage(r),t.value},e.prototype.addNonceToObject=function(e,t){e[t.value]=t.expiry},e.prototype.clearOlderNonceKeys=function(e,r){void 0===r&&(r=t.ONE_HOUR);var i=Date.now()-r;return Object.keys(e).forEach((function(t){parseInt(e[t])<i&&delete e[t]})),e},e.prototype.verify=function(e){if(!this.isStorageAvailable())return!0;var t=this.getNonceFromStorage();if(!t)return!1;var r=this.clearOlderNonceKeys(t),i=null!==(r[e]||null);return i&&this.clearNonceValueFromStorage(r,e),i},e.prototype.clearNonceValueFromStorage=function(e,t){delete e[t],this.saveNonceValuesToStorage(e)},e.prototype.getNonceFromStorage=function(){var e=this.storage.getItem(this.nonceStorageKey);return e?JSON.parse(e):null},e.prototype.saveNonceValuesToStorage=function(e){this.storage.setItem(this.nonceStorageKey,JSON.stringify(e))},e.prototype.isStorageAvailable=function(){return!(this.storage instanceof s.MemoryStorage)},e.cryptoRndomString=function(){if(!window.crypto)return"";var e=new Uint32Array(3);return window.crypto.getRandomValues(e),e.join("").substr(0,16)},e.randomString=function(){var t=e.cryptoRndomString();if(t)return t;for(var r="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<16;n++)r+=i.charAt(Math.floor(62*Math.random()));return r},e.generateNonce=function(){return{value:e.randomString(),expiry:(new Date).getTime().toString()}},e}();t.CsrfService=o},216718:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(688438),n=function(){function e(){this.baseUrlAdobe="",this.baseUrlServices="",this.jslibver="v2-v0.31.0-2-g1e8a8a8"}return e.prototype.loadEnvironment=function(e){if(e===i.IEnvironment.STAGE)return this.baseUrlAdobe="https://ims-na1-stg1.adobelogin.com",void(this.baseUrlServices="https://adobeid-na1-stg1.services.adobe.com");this.baseUrlAdobe="https://ims-na1.adobelogin.com",this.baseUrlServices="https://adobeid-na1.services.adobe.com"},e}();t.default=new n},182475:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.token="token",e.code="code"}(t.IGrantTypes||(t.IGrantTypes={}))},447622:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.force="force",e.check="check"}(t.IReauth||(t.IReauth={}))},190281:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(290829)),s=r(528202),o=function(){function e(){}return e.getInitialRedirectUri=function(e,t){var r=e.redirect_uri||t||window.location.href,i="function"==typeof r?r():r,n=i.indexOf("from_ims");return-1===n?i:("#"===i[n-1]&&n--,i.substr(0,n))},e.createDefaultRedirectUrl=function(e,t,r,i){var n=this.getInitialRedirectUri(r,e),s=this.createOldHash(n);return s.indexOf("?")>0?s+"&client_id="+t+"&api="+i:s+"?client_id="+t+"&api="+i},e.createRedirectUrl=function(e,t,r,i,n){void 0===n&&(n="");var s=this.createDefaultRedirectUrl(e,t,r,i);(n=n||r.scope||"")&&(s=s+"&scope="+n);var o=r.reauth||"";return o&&(s=s+"&reauth="+o),s},e.createOldHash=function(e){var t=e.indexOf("#");return t<0?e+"#old_hash=&from_ims=true":e.substring(0,t)+"#old_hash="+e.substring(t+1)+"&from_ims=true"},e.mergeApiParamsWithExternalParams=function(e,t,r){return s.merge(n.default.getCustomApiParameters(e,r),t)},e}();t.RedirectHelper=o},717429:function(e,t,r){"use strict";r(179795),r(467111),r(357866),r(460626),r(54923),r(249560);var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=s(r(75314));t.ONE_HOUR=1296e4;var a=function(){function e(){this.storage=o.default.getAvailableStorage()}return e.prototype.b64Uri=function(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},e.prototype.createCodeChallenge=function(e,t){var r=this;void 0===t&&(t=43);for(var i=window.msCrypto||window.crypto,s=this.b64Uri(Array.prototype.map.call(i.getRandomValues(new Uint8Array(t)),(function(e){return String.fromCharCode(e)})).join("")).substring(0,t),o=new Uint8Array(s.length),a=0;a<s.length;a++)o[a]=s.charCodeAt(a);var l=i.subtle.digest("SHA-256",o);return new Promise((function(t,i){window.CryptoOperation?(l.onerror=function(e){return i(e)},l.oncomplete=function(i){var o=new Uint8Array(i.target.result),a=r.b64Uri(String.fromCharCode.apply(String,n(o)));return t(r.saveVerifierAndReturn(e,{verifier:s,challenge:a}))}):l.then((function(i){var o=new Uint8Array(i),a=r.b64Uri(String.fromCharCode.apply(String,n(o)));return t(r.saveVerifierAndReturn(e,{verifier:s,challenge:a}))}))}))},e.prototype.saveVerifierAndReturn=function(e,t){var r=this.getVerifierValuesFromStorage(),i={verifier:t.verifier||"",expiry:(new Date).getTime().toString()};return r[e]=i,this.storage.setItem("verifiers",JSON.stringify(r)),Promise.resolve(t)},e.prototype.getVerifierValuesFromStorage=function(){var e=this.storage.getItem("verifiers"),t=e?JSON.parse(e):{};return this.clearOlderVerifiers(t)},e.prototype.clearOlderVerifiers=function(e,r){void 0===r&&(r=t.ONE_HOUR);var i=Date.now()-r;return Object.keys(e).forEach((function(t){parseInt(e[t])<i&&delete e[t]})),e},e.prototype.getVerifierByKey=function(e){var t=this.getVerifierValuesFromStorage(),r=t?t[e]:{};return delete t[e],this.storage.setItem("verifiers",JSON.stringify(t)),r?r.verifier:""},e}();t.CodeChallenge=a},742138:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(r(833164)),o=n(r(216718)),a=r(190281),l=r(528202),u=function(){var e=this;this.composeRedirectUrl=function(e){var t="authorize",r=e.apiParameters,n=e.externalParameters,s=void 0===n?{}:n,u=e.adobeIdRedirectUri,c=void 0===u?"":u,d=e.clientId,h=e.locale,p=e.state,f=void 0===p?{}:p,g=e.scope,m=void 0===g?s.scope||r.scope||"":g,y=a.RedirectHelper.mergeApiParamsWithExternalParams(r,s,t);f&&(y.state=l.merge(y.state||{},f));var v=a.RedirectHelper.createRedirectUrl(c,d,y,t,m),b=s.locale||h||"",_=e.response_type,w=void 0===_?y.response_type||"":_;return i(i({},y),{client_id:d,scope:m,locale:b,response_type:w,jslVersion:o.default.jslibver,redirect_uri:v})},this.createRedirectUrl=function(t){var r=e.composeRedirectUrl(t),i=s.default.uriEncodeData(r);return o.default.baseUrlAdobe+"/ims/authorize/v1?"+i}};t.BaseSignInService=u},261097:function(e,t,r){"use strict";r(315258);var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/,o=["https://auth.services.adobe.com","https://auth-stg1.services.adobe.com","https://localhost.corp.adobe.com:9000"],a=function(){var e=this;this.windowObjectReference=null,this.previousUrl="",this.openSignInWindow=function(t,r,i,n){e.onProcessLocation=n,e.allowOrigin=i.allowOrigin,e.timerId&&clearInterval(e.timerId),window.removeEventListener("message",e.receiveMessage),window.addEventListener("message",e.receiveMessage);var s="toolbar=no, menubar=no, width="+i.width+", height="+i.height+", top="+i.top+", left="+i.left;!e.windowObjectReference||e.windowObjectReference&&e.windowObjectReference.closed?e.windowObjectReference=window.open(t,i.title,s):e.previousUrl!==t?(e.windowObjectReference=window.open(t,i.title,s),e.windowObjectReference&&e.windowObjectReference.focus()):e.windowObjectReference.focus();var o=e.windowObjectReference||{};o.opener||(e.timerId=setInterval((function(){o[r]&&(clearInterval(e.timerId),e.onProcessLocation&&e.onProcessLocation(o[r]),delete o[r],e.windowObjectReference&&e.windowObjectReference.close())}),500)),e.previousUrl=t},this.receiveMessage=function(t){if(n(o,[e.allowOrigin]).includes(t.origin)){try{if(!s.test(t.data))return}catch(e){return}e.onProcessLocation&&e.onProcessLocation(t.data)}}};t.default=new a},860731:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){void 0===e&&(e={}),this.title="Adobe ID",this.width=600,this.top=100,this.left=100;var t=e.title,r=void 0===t?"Adobe ID":t,i=e.width,n=void 0===i?600:i,s=e.height,o=void 0===s?700:s,a=e.top,l=void 0===a?100:a,u=e.left,c=void 0===u?100:u,d=e.allowedOrigin;this.title=r,this.width=n,this.height=o,this.top=l,this.left=c,this.allowOrigin=d};t.PopupSettings=r},64209:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},i(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(261097)),l=function(e){function t(t,r){var i=e.call(this)||this;return i.signIn=function(e){e.state=s(s({},e.state),{imslibmodal:!0});var t=e.state.nonce,r=i.createRedirectUrl(e);a.default.openSignInWindow(r,t,i.popupSettings,i.onPopupMessage)},i.onPopupMessage=t,i.popupSettings=r,i}return n(t,e),t}(r(742138).BaseSignInService);t.SignInModalService=l},267083:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},i(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=s(r(833164)),a=s(r(216718)),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.signIn=function(e){var r=t.createRedirectUrl(e);o.default.setHrefUrl(r)},t.authorizeToken=function(e,r){var i=t.composeRedirectUrl(r);e&&(i.user_assertion=e,i.user_assertion_type="urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),t.createAuthorizeForm(i).submit()},t}return n(t,e),t.prototype.createAuthorizeForm=function(e){var t=a.default.baseUrlAdobe+"/ims/authorize/v1",r=document.createElement("form");r.style.display="none",r.setAttribute("method","post"),r.setAttribute("action",t);var i=null,n=null,s="";for(var o in e){if("object"==typeof(n=e[o])){if(0===Object.keys(n).length)continue;s=JSON.stringify(n)}else s=n;""!==s&&(i=this.createFormElement("input","text",o,s),r.appendChild(i))}return document.getElementsByTagName("body")[0].appendChild(r),r},t.prototype.createFormElement=function(e,t,r,i){var n=document.createElement(e);return n.setAttribute("type",t),n.setAttribute("name",r),n.setAttribute("value",i),n},t}(r(742138).BaseSignInService);t.SignInService=l},773778:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(190281),o=n(r(833164)),a=n(r(216718)),l=function(){this.signOut=function(e){var t="logout",r=e.apiParameters,n=e.externalParameters,l=e.adobeIdRedirectUri,u=void 0===l?"":l,c=e.clientId,d=s.RedirectHelper.mergeApiParamsWithExternalParams(r,n,t),h=s.RedirectHelper.createDefaultRedirectUrl(u,c,d,t),p=i(i({},d),{client_id:c,redirect_uri:h,jslVersion:a.default.jslibver}),f=o.default.uriEncodeData(p),g=a.default.baseUrlAdobe+"/ims/logout/v1?"+f;o.default.replaceUrl(g)}};t.SignOutService=l},384695:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(216389)),s=["keyup","mousemove"],o=function(){function e(){var e=this;this.lastUserInteraction=Date.now(),this.userActive=!1,this.userInteractionHandler=function(){e.lastUserInteraction=Date.now(),e.userActive=!0},this.initializeDomEvents=function(){s.forEach((function(t){return window.addEventListener(t,e.userInteractionHandler)}))},this.clearDomEvents=function(){s.forEach((function(t){return window.removeEventListener(t,e.userInteractionHandler)}))}}return e.prototype.startAutoRefreshFlow=function(e){var t,r=this;if(e&&e.expire&&e.refreshTokenMethod){this.refreshParameters=e,this.refreshTimerId&&(n.default.info("Auto-refresh timer already set, clearing"),clearTimeout(this.refreshTimerId)),this.clearDomEvents(),this.initializeDomEvents();var i=this.fromNowToNMinutesBeforeDate(null===(t=this.refreshParameters)||void 0===t?void 0:t.expire,1);n.default.info("Auto-refresh timer will run after (seconds)",i/1e3),this.refreshTimerId=setTimeout((function(){var e;if(r.userActive){var t=Math.floor((Date.now()-r.lastUserInteraction)/1e3);null===(e=r.refreshParameters)||void 0===e||e.refreshTokenMethod({userInactiveSince:t},!0),n.default.info("Auto-refresh performed, user was inactive for (seconds)",t)}else n.default.info("Auto-refresh skipped, user was never active")}),i)}else n.default.info("Won't schedule token auto-refresh",!e,!e.expire,!e.refreshTokenMethod)},e.prototype.fromNowToNMinutesBeforeDate=function(e,t){var r=e.getTime()-Date.now()-6e4*t;return r<=0?6e4*t:r},e}();t.default=new o},290829:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(528202),n=function(){function e(){this.getCustomApiParameters=function(e,t){return e[t]||{}}}return e.prototype.mergeExternalParameters=function(e,t,r){return i.merge(this.getCustomApiParameters(t,r),e)},e.prototype.toJson=function(e){try{return"string"!=typeof e?e:JSON.parse(e)}catch(e){return null}},e}();t.default=new n},228554:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdobeIdKey="adobeid",t.AdobeIMSKey="adobeIMS",t.AdobeImsFactory="adobeImsFactory",t.DEFAULT_LANGUAGE="en_US",function(e){e.LocalStorage="local",e.SessionStorage="session",e.MemoryStorage="memory"}(t.STORAGE_MODE||(t.STORAGE_MODE={})),t.HEADERS={AUTHORIZATION:"Authorization",X_IMS_CLIENT_ID:"X-IMS-ClientId",RETRY_AFTER:"Retry-after"},t.PROFILE_STORAGE_KEY="adobeid_ims_profile",t.TOKEN_STORAGE_KEY="adobeid_ims_access_token",t.ON_IMSLIB_INSTANCE="onImsLibInstance",t.ASK_FOR_IMSLIB_INSTANCE_DOM_EVENT_NAME="getImsLibInstance"},459916:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){var e=this;this.DEBOUNCE_TIME=1e3,this.cache={},this.storeApiResponse=function(t,r,i){void 0===t&&(t=""),void 0===r&&(r=""),e.cacheApiResponse(t,r,i)}}return e.prototype.getCachedApiResponse=function(e,t){void 0===t&&(t="");var r="string"==typeof t?t:JSON.stringify(t),i=this.cache[e];if(!i)return null;var n=i[r];return n?n.data:null},e.prototype.cacheApiResponse=function(e,t,i){void 0===e&&(e=""),void 0===t&&(t="");var n=this.cache[e];n||(n={},this.cache[e]=n);var s=this.createClearCachedDataTimer(e,t);n[t]={timerId:s,data:r({},i)}},e.prototype.createClearCachedDataTimer=function(e,t){var r=this;return setTimeout((function(){var i=r.cache[e]||{},n=i[t];n&&n&&n.timerId&&(clearTimeout(n.timerId),delete i[t])}),this.DEBOUNCE_TIME)},e}();t.default=new i},527253:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(416850),n=r(785713),s=r(58993),o=function(){function e(){this.adobeIdThinData=null}return e.prototype.verify=function(e,t){void 0===t&&(t="");var r=e.status,i=e.data;if(!r)return new s.HttpErrorResponse({error:"networkError",message:i||""});if(401==r)return new s.HttpErrorResponse({error:"unauthorized"});var n=this.parseTokenResponseForRideErrors(i,t);return n||(409==r?i:429==r?new s.HttpErrorResponse({error:"rate_limited",retryAfter:i.retryAfter?parseInt(i.retryAfter):10}):r.toString().match(/5\d{2}/g)?new s.HttpErrorResponse({error:"server_error"}):null)},e.prototype.parseTokenResponseForRideErrors=function(e,t){if(!e)return null;var r=e.error,i=e.jump;if(!r)return null;if(!(0===r.indexOf("ride_")))return"token_expired"===r&&t.indexOf("check/v6/token")>=0?new n.RideException("ride_pba_idle_session","",!0):null;var s=this.addRedirectUriToJump(r,i);return new n.RideException(r,s)},e.prototype.addRedirectUriToJump=function(e,t){if(!t||"string"!=typeof t)return"";var r=t;this.adobeIdThinData||(this.adobeIdThinData=new i.AdobeIdThinData);var n=this.adobeIdThinData.computeRideRedirectUri(e);if(!n||0===n.length)return r;try{var s=new URL(r);return s.searchParams.append("redirect_uri",n),s.toString()}catch(e){return r}},e.prototype.isUnauthorizedException=function(e){var t=e.status;return 401===(void 0===t?0:t)},e}();t.default=new o},58993:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){var t=e.error,r=e.retryAfter,i=void 0===r?0:r,n=e.message,s=void 0===n?"":n;this.error=t,this.retryAfter=i,this.message=s};t.HttpErrorResponse=r},330340:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(228554),o=n(r(833164)),a=n(r(290829)),l=n(r(216718)),u=n(r(991822)),c=function(){function e(e){void 0===e&&(e={}),this.CONTENT_FORM_ENCODED="application/x-www-form-urlencoded;charset=utf-8",this.apiParameters=e}return e.prototype.validateToken=function(e){var t=e.token,r=e.client_id,n=o.default.uriEncodeData(i(i({},a.default.getCustomApiParameters(this.apiParameters,"validate_token")),{type:"access_token",client_id:r,token:t})),s=l.default.baseUrlAdobe+"/ims/validate_token/v1?jslVersion="+l.default.jslibver;return u.default.post(s,n,this.formEncoded())},e.prototype.getProfile=function(e){var t=e.token,r=e.client_id,n=i({},a.default.getCustomApiParameters(this.apiParameters,"profile")),s=this.createAuthorizationHeader(t),c=o.default.uriEncodeData(i({client_id:r},n)),d=l.default.baseUrlAdobe+"/ims/profile/v1?"+c+"&jslVersion="+l.default.jslibver;return u.default.get(d,s)},e.prototype.getUserInfo=function(e){var t=e.token,r=e.client_id,n=i({},a.default.getCustomApiParameters(this.apiParameters,"userinfo")),s=this.createAuthorizationHeader(t),c=o.default.uriEncodeData(i({client_id:r},n)),d=l.default.baseUrlAdobe+"/ims/userinfo/v1?"+c+"&jslVersion="+l.default.jslibver;return u.default.get(d,s)},e.prototype.logoutToken=function(e){var t=e.client_id,r=e.token,n=i({},a.default.getCustomApiParameters(this.apiParameters,"logout_token")),s=l.default.baseUrlServices+"/ims/logout/v1?jslVersion="+l.default.jslibver;return u.default.post(s,i({client_id:t,access_token:r},n))},e.prototype.checkStatus=function(){var e=l.default.baseUrlServices+"/ims/check/v1/status";return u.default.get(e)},e.prototype.checkToken=function(e,t,r){var n=e.client_id,s=e.scope,c=i({},a.default.mergeExternalParameters(t,this.apiParameters,"check_token")),d=l.default.baseUrlServices+"/ims/check/v6/token?jslVersion="+l.default.jslibver,h=i(i({},c),{client_id:n,scope:s});r&&(h.user_id=r);var p=o.default.uriEncodeData(h);return u.default.post(d,p,this.formEncoded())},e.prototype.switchProfile=function(e,t,r){void 0===r&&(r="");var n=e.client_id,s=e.scope,c=void 0===s?"":s,d=i({},a.default.mergeExternalParameters(t,this.apiParameters,"check_token")),h=l.default.baseUrlServices+"/ims/check/v6/token?jslVersion="+l.default.jslibver,p=o.default.uriEncodeData(i(i({},d),{client_id:n,scope:c,user_id:r}));return u.default.post(h,p,this.formEncoded())},e.prototype.listSocialProviders=function(e){var t=e.client_id,r=i({},a.default.getCustomApiParameters(this.apiParameters,"providers")),n=o.default.uriEncodeData(i({client_id:t},r)),s=l.default.baseUrlServices+"/ims/social/v1/providers?"+n+"&jslVersion="+l.default.jslibver;return u.default.get(s)},e.prototype.exchangeIjt=function(e,t){var r=e.client_id,n=i({},a.default.getCustomApiParameters(this.apiParameters,"ijt")),s=l.default.baseUrlServices+"/ims/jump/implicit/"+t,c=o.default.uriEncodeData(i({client_id:r},n)),d=s+"?"+c+"&jslVersion="+l.default.jslibver;return d.length>2048&&(delete n.redirect_uri,d=s+"?"+(c=o.default.uriEncodeData(n))),u.default.get(d)},e.prototype.avatarUrl=function(e){return l.default.baseUrlAdobe+"/ims/avatar/download/"+e},e.prototype.getReleaseFlags=function(e){var t=e.token,r=e.client_id,n=i({},a.default.getCustomApiParameters(this.apiParameters,"fg_value")),s=this.createAuthorizationHeader(t),c=o.default.uriEncodeData(i({client_id:r},n)),d=l.default.baseUrlAdobe+"/ims/fg/value/v1?"+c+"&jslVersion="+l.default.jslibver;return u.default.get(d,s)},e.prototype.getTransitoryAuthorizationCode=function(e,t,r){void 0===t&&(t={});var n=i({},a.default.mergeExternalParameters(t,this.apiParameters,"check_token")),s=l.default.baseUrlServices+"/ims/check/v6/token?client_id="+r+"&jslVersion="+l.default.jslibver,c=o.default.uriEncodeData(i(i({},n),e));return u.default.post(s,c,this.formEncoded())},e.prototype.getTokenFromCode=function(e,t){void 0===t&&(t={});var r=i({},a.default.mergeExternalParameters(t,this.apiParameters,"token"));r.grant_type="authorization_code",delete e.other;var n=l.default.baseUrlServices+"/ims/token/v3?jslVersion="+l.default.jslibver,s=o.default.uriEncodeData(i(i({},r),e));return u.default.post(n,s,this.formEncoded())},e.prototype.jumpToken=function(e,t,r){void 0===t&&(t={});var n=i({},a.default.mergeExternalParameters(t,this.apiParameters,"jumptoken")),s=l.default.baseUrlServices+"/ims/jumptoken/v1?client_id="+r+"&jslVersion="+l.default.jslibver,c=o.default.uriEncodeData(i(i({},n),e));return u.default.post(s,c,this.formEncoded())},e.prototype.createAuthorizationHeader=function(e){var t={};return e&&(t[s.HEADERS.AUTHORIZATION]="Bearer "+e),t},e.prototype.formEncoded=function(e){return void 0===e&&(e={}),e["content-type"]=this.CONTENT_FORM_ENCODED,e},e}();t.ImsApis=c},190578:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.status=0,this.data="",this.status=e,this.data=this.toJson(t)}return e.prototype.toJson=function(e){try{return"string"!=typeof e?e:JSON.parse(e)}catch(t){return e}},e}();t.ApiResponse=r},991822:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(459916)),s=i(r(527253)),o=i(r(19027));t.default=new(function(){function e(){this.triggerOnError=null}return e.prototype.post=function(e,t,r){var i=this;void 0===r&&(r={});var s=n.default.getCachedApiResponse(e,t);if(s){var a=s.status,l=s.data;return 200===a?Promise.resolve(l):Promise.reject(l)}return o.default.post(e,t,r).then((function(r){return i.storeApiResponse(e,JSON.stringify(t),r)})).catch((function(r){return i.verifyError(e,JSON.stringify(t),r)}))},e.prototype.get=function(e,t){var r=this;void 0===t&&(t={});var i=n.default.getCachedApiResponse(e);if(i){var s=i.status,a=i.data;return 200===s?Promise.resolve(a):Promise.reject(a)}return o.default.get(e,t).then((function(t){return r.storeApiResponse(e,"",t)})).catch((function(t){return r.verifyError(e,"",t)}))},e.prototype.verifyError=function(e,t,r){this.storeApiResponse(e,t,r);var i=s.default.verify(r,e);return Promise.reject(i||r.data)},e.prototype.storeApiResponse=function(e,t,r){return void 0===t&&(t=""),n.default.storeApiResponse(e,t,r),Promise.resolve(r.data)},e}())},19027:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(190578);t.default=new(function(){function e(){}return e.prototype.http=function(e){return new Promise((function(t,r){var n=new(0,window.XMLHttpRequest);n.withCredentials=!0,n.open(e.method,e.url,!0);var s;n.onload=function(){return this.status>=200&&this.status<300?t(new i.ApiResponse(this.status,this.response)):r(new i.ApiResponse(this.status,this.response))},n.onerror=function(){var e=new i.ApiResponse(this.status,this.response);return r(e)},(s=e.headers)&&Object.keys(s).forEach((function(e){n.setRequestHeader(e,s[e])})),n.send(e.data)}))},e.prototype.post=function(e,t,r){return void 0===r&&(r={}),this.http({headers:r,method:"POST",url:e,data:t})},e.prototype.get=function(e,t){return void 0===t&&(t={}),this.http({headers:t,method:"GET",url:e})},e}())},216389:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.logEnabled=!1,this.print=function(t,r){e.logEnabled&&t.apply(void 0,i(r))},this.assert=function(t,r){e.print(console.assert,[t,r])},this.assertCondition=function(t,r){t()||e.print(console.error,[r])},this.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.print(console.error,t)},this.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.print(console.warn,t)},this.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.print(console.info,t)}}return e.prototype.enableLogging=function(){this.logEnabled=!0},e.prototype.disableLogging=function(){this.logEnabled=!1},e}();t.default=new n},956690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(497365),n=function(e){this.message=null,this.errorType=i.IErrorType.PROFILE_EXCEPTION,this.message=e};t.ProfileException=n},970323:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(75314)),s=r(228554),o=r(956690),a=r(58993),l=r(677008),u=function(){function e(e){this.profileServiceRequest=e,this.storage=n.default.getStorageByName(s.STORAGE_MODE.SessionStorage)}return e.prototype.getProfile=function(e){var t=this,r=this.profileServiceRequest,i=r.clientId,n=r.imsApis,s=this.getProfileFromStorage();return s?Promise.resolve(s):n.getProfile({client_id:i,token:e}).then((function(e){if(!e)throw new o.ProfileException("NO profile response");if(0===Object.keys(e).length)throw new o.ProfileException("NO profile value");return t.saveProfileToStorage(e),Promise.resolve(e)})).catch((function(e){return e instanceof a.HttpErrorResponse||t.removeProfile(),Promise.reject(e)}))},e.prototype.getProfileStorageKey=function(e){void 0===e&&(e=!1);var t=this.profileServiceRequest,r=t.clientId,i=t.scope;return s.PROFILE_STORAGE_KEY+"/"+r+"/"+!1+"/"+(e?l.sortScopes(i):i)},e.prototype.getProfileFromStorage=function(){var e=this.getProfileStorageKey(),t=this.getProfileStorageKey(!0),r=this.storage.getItem(e);return r||(r=this.storage.getItem(t)),r&&JSON.parse(r)},e.prototype.saveProfileToStorage=function(e){var t=this.getProfileStorageKey(),r=this.getProfileStorageKey(!0);this.storage.setItem(t,JSON.stringify(e)),this.storage.setItem(r,JSON.stringify(e))},e.prototype.removeProfile=function(){var e=this.getProfileStorageKey(),t=this.getProfileStorageKey(!0);this.storage.removeItem(e),this.storage.removeItem(t)},e.prototype.removeProfileIfOtherUser=function(e){if(e){var t=this.getProfileFromStorage();t&&t.userId!==e&&this.removeProfile()}},e}();t.ProfileService=u},625132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.data={},this.length=0}return e.prototype.clear=function(){this.data={},this.length=0},e.prototype.getItem=function(e){var t=this.data[e];return t||null},e.prototype.removeItem=function(e){return!!this.data[e]&&(delete this.data[e],--this.length,!0)},e.prototype.setItem=function(e,t){this.data[e]||++this.length,this.data[e]=t},e.prototype.key=function(e){throw new Error("Method not implemented. "+e)},e}();t.MemoryStorage=r},75314:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(625132),s=r(228554),o=i(r(216389)),a=function(){function e(){this.memoryStorageInstance=null}return Object.defineProperty(e.prototype,"memoryStorage",{get:function(){return this.memoryStorageInstance||(this.memoryStorageInstance=new n.MemoryStorage),this.memoryStorageInstance},enumerable:!0,configurable:!0}),e.prototype.getStorageByName=function(e){var t=this.getStorageInstanceByName(e);return t&&this.verifyStorage(t)?t:this.memoryStorage},e.prototype.getStorageInstanceByName=function(e){if(e===s.STORAGE_MODE.MemoryStorage)return this.memoryStorage;try{return e===s.STORAGE_MODE.LocalStorage?window.localStorage:window.sessionStorage}catch(e){return o.default.warn("Please change your cookies settings in order to allow local data to be set"),null}},e.prototype.getAvailableStorage=function(){var e=this.getStorageByName(s.STORAGE_MODE.LocalStorage);return e instanceof n.MemoryStorage?this.getStorageByName(s.STORAGE_MODE.SessionStorage):e},e.prototype.verifyStorage=function(e){var t="test";try{return e.setItem(t,"true"),"true"===e.getItem(t)&&(e.removeItem(t),!0)}catch(e){return!1}},e}();t.default=new a},595644:function(e,t){"use strict";var r=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){this.client_id="",this.scope="",this.code="",this.state=null,this.code_verifier="",this.other=null;var t=e.code,i=e.state,n=e.client_id,s=e.scope,o=e.verifier,a=r(e,["code","state","client_id","scope","verifier"]);this.state=i,this.client_id=n,this.code=t,this.scope=s,this.code_verifier=o,this.other=a};t.AuthorizationCode=i},703890:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){this.message="",this.type="",this.type=e,this.message=t};t.FragmentException=r},951847:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.FRAGMENT="fragment",e.CSRF="csrf",e.NOT_AUTHORIZE="not_authorize"}(t.IFragmentExceptionType||(t.IFragmentExceptionType={}))},474514:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.wndRedirectPropName="",this.wndRedirectPropName=e};t.ModalSignInEvent=r},785713:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,r){void 0===r&&(r=!1),this.jump="",this.code=e,this.jump=t,this.isPbaExpiredIdleSessionWorkaround=r};t.RideException=r},195037:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.token="",this.sid="",this.expirems=0;var t=e.token,r=e.expirems;this.token=t,this.expirems=r};t.StandaloneToken=r},681214:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.exception=null,this.exception=e};t.TokenExpiredException=r},956911:function(e,t,r){"use strict";r(179795);var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(290829)),s=i(r(216389)),o=r(677008),a=function(){function e(e,t){var r=this;this.REAUTH_SCOPE="reauthenticated",this.valid=!1,this.isReauth=function(){return r.scope.indexOf(r.REAUTH_SCOPE)>=0},this.client_id="",this.scope="",this.expire=new Date,this.user_id="",this.tokenValue="",this.sid="",this.state=null,this.fromFragment=!1,this.impersonatorId="",this.isImpersonatedSession=!1;var i=e.valid,s=e.tokenValue,o=e.access_token,a=e.state,l=e.other,u=s||o,c=this.parseJwt(u);if(!c)throw new Error("token cannot be decoded "+u);this.state=n.default.toJson(a);var d=c.client_id,h=c.user_id,p=c.scope,f=c.sid,g=c.imp_id,m=c.imp_sid;this.client_id=d,this.expire=t,this.user_id=h,this.scope=p,this.valid=i,this.tokenValue=u,this.sid=f,this.other=l,this.impersonatorId=g||"",this.isImpersonatedSession=!!m}return e.prototype.parseJwt=function(e){if(!e)return null;try{return JSON.parse(atob(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/")))}catch(t){return s.default.error("error on decoding token ",e,t),null}},e.prototype.validate=function(e,t){var r=this,i=r.valid,n=r.client_id,a=r.scope,l=r.expire;return l<new Date?(s.default.error("token invalid  --\x3e expires_at",l),!1):null==i||i?n!==e?(s.default.error("token invalid  --\x3e client id",n,e),!1):!!o.validateScopeInclusion(t,a)||(s.default.error("token invalid  --\x3e scope"," token scope =",a,"vs adobeIdScope =",t,"."),!1):(s.default.error("token invalid  --\x3e valid"),!1)},e}();t.TokenFields=a},447813:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=s(r(75314)),a=r(228554),l=r(956911),u=s(r(295677)),c=r(703890),d=r(951847),h=r(765599),p=r(785713),f=r(681214),g=s(r(216389)),m=r(58993),y=r(595644),v=r(474514),b=r(717429),_=r(677008),w=r(148856),P=function(){function e(e,t){var r=this;this.getTokenAndProfile=function(e){void 0===e&&(e={});var t=r.getTokenFields();return t instanceof v.ModalSignInEvent||t instanceof c.FragmentException?Promise.reject(t):t instanceof y.AuthorizationCode?r.tokenServiceRequest.imsApis.getTokenFromCode(t,e).then((function(e){var r=e.access_token,i=e.state,s=e.expires_in,o=e.scope,a=void 0===o?"":o,u=n(e,["access_token","state","expires_in","scope"]),c=new l.TokenFields({scope:a,tokenValue:r,valid:!0,state:i,other:t.other},new Date((new Date).getTime()+parseFloat(s)));return Promise.resolve(new h.TokenProfileResponse(c,u))})):t instanceof l.TokenFields?t.fromFragment||!r.tokenServiceRequest.autoValidateToken?Promise.resolve(new h.TokenProfileResponse(t,null)):r.callValidateTokenApi(t.tokenValue).then((function(){return new h.TokenProfileResponse(t,null)})).catch((function(){return r.callRefreshToken(e)})):r.callRefreshToken(e)};var i=e.useLocalStorage;this.csrfService=t,this.tokenServiceRequest=e,this.storage=o.default.getStorageByName(i?a.STORAGE_MODE.LocalStorage:a.STORAGE_MODE.SessionStorage)}return e.prototype.getTokenFields=function(){var e=this.tokenServiceRequest,t=e.clientId,r=e.scope,i=this.getTokenFromFragment();return i instanceof v.ModalSignInEvent||i instanceof c.FragmentException||i instanceof y.AuthorizationCode?i:i&&i.validate(t,r)?(i.fromFragment=!0,this.addTokenToStorage(i),i):this.getTokenFieldsFromStorage()},e.prototype.validateToken=function(){var e=this.getTokenFieldsFromStorage();return e?this.callValidateTokenApi(e.tokenValue):Promise.reject(null)},e.prototype.getReleaseFlags=function(){var e=this.tokenServiceRequest,t=e.clientId,r=e.imsApis,i=this.getTokenFieldsFromStorage();return i?r.getReleaseFlags({token:i.tokenValue,client_id:t}):Promise.reject(null)},e.prototype.getDecodedReleaseFlags=function(){return this.getReleaseFlags().then((function(e){return w.decodeToBitstring(e.releaseFlags,!0)}))},e.prototype.callValidateTokenApi=function(e){var t=this,r=this.tokenServiceRequest,n=r.clientId,s=r.scope;return r.imsApis.validateToken({client_id:n,token:e}).then((function(r){g.default.info("validateToken response",r);var o=new l.TokenFields(i(i({},r),{tokenValue:e}),new Date(parseFloat(r.expires_at)));if(o.validate(n,s))return t.addTokenToStorage(o),Promise.resolve(o);throw new Error("could not validate tokenFields")})).catch((function(e){return g.default.error("validateToken response",e),e instanceof m.HttpErrorResponse||t.removeTokenFromLocalStorage(),Promise.reject(e)}))},e.prototype.getTokenFromFragment=function(){var e=u.default.fragmentToObject();if(!e)return null;g.default.info("fragment value "+e);var t=e.access_token,r=e.scope,s=e.error,o=e.api,a=e.state,h=void 0===a?{}:a,p=e.expires_in,f=e.client_id,m=e.code,_=void 0===m?"":m,w=n(e,["access_token","scope","error","api","state","expires_in","client_id","code"]),P=h||{},A=P.imslibmodal,S=P.nonce;if(!0===A)return new v.ModalSignInEvent(S);if(!e.from_ims)return null;if(f!==this.tokenServiceRequest.clientId)return null;if(s)return new c.FragmentException(d.IFragmentExceptionType.FRAGMENT,s);if("authorize"!==o)return new c.FragmentException(d.IFragmentExceptionType.NOT_AUTHORIZE,"api should be authorize and "+o+" is used");if(!this.csrfService.verify(S))return new c.FragmentException(d.IFragmentExceptionType.CSRF,"CSRF exception");if(_){var x=(new b.CodeChallenge).getVerifierByKey(S);if(!x)throw new Error("no verifier value has been found");return new y.AuthorizationCode(i(i({},e),{verifier:x}))}return t?new l.TokenFields({scope:r,tokenValue:t,valid:!0,state:h,other:w},new Date((new Date).getTime()+parseFloat(p))):null},e.prototype.getDataFromStorageWithSortedScopesFallback=function(e){var t=this.getAccessTokenKey(e),r=this.storage.getItem(t);if(!r){var i=this.getAccessTokenKey(e,!0);r=this.storage.getItem(i)}return r},e.prototype.getStorageKeyValue=function(e){return this.storage.getItem(e)},e.prototype.getTokenFieldsFromStorage=function(e){void 0===e&&(e=!1);var t=this.tokenServiceRequest,r=t.clientId,i=t.scope,n=this.getDataFromStorageWithSortedScopesFallback(e);if(!n)return null;var s=JSON.parse(n),o=s.expire?new Date(Date.parse(s.expire)):new Date(s.expiresAtMilliseconds),a=new l.TokenFields(s,o);return a.validate(r,i)?a:null},e.prototype.getAccessTokenKey=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var r=this.tokenServiceRequest,i=r.clientId,n=r.scope;return a.TOKEN_STORAGE_KEY+"/"+i+"/"+e+"/"+(t?_.sortScopes(n):n)},e.prototype.addTokenToStorage=function(e){if(e){var t=e.isReauth(),r=this.getAccessTokenKey(t),n=this.getAccessTokenKey(t,!0),s=i({},e);s.state={},s.other="{}";var o=JSON.stringify(s);this.storage.setItem(r,o),this.storage.setItem(n,o)}},e.prototype.removeTokenFromLocalStorage=function(){var e=this.getAccessTokenKey(),t=this.getAccessTokenKey(!1,!0);this.storage.removeItem(e),this.storage.removeItem(t)},e.prototype.removeReauthTokenFromLocalStorage=function(){var e=this.getAccessTokenKey(!0),t=this.getAccessTokenKey(!0,!0);this.storage.removeItem(e),this.storage.removeItem(t)},e.prototype.refreshToken=function(e){var t=this;void 0===e&&(e={});var r=this.tokenServiceRequest,s=r.clientId,o=r.imsApis,a=r.scope,l=this.getTokenFieldsFromStorage(),u=l?l.user_id:"";return o.checkToken({client_id:s,scope:a},e,u).then((function(e){if(!e)throw new Error("refresh token --\x3e no response");var r=e.access_token,s=e.expires_in,o=e.token_type,a=e.error,l=e.error_description,u=void 0===l?"":l,c=e.sid,d=n(e,["access_token","expires_in","token_type","error","error_description","sid"]);if(a)throw new Error(a+" "+u);var h=Object.keys(d).length?d:null,p={token:r,expire:new Date(Date.now()+parseFloat(s)),token_type:o,sid:c},f=t.updateToken(p)||{},g={tokenInfo:i(i({},p),{impersonatorId:f.impersonatorId||"",isImpersonatedSession:f.isImpersonatedSession||!1}),profile:h};return Promise.resolve(g)})).catch((function(e){return void 0===e&&(e={}),e instanceof m.HttpErrorResponse||e instanceof p.RideException?Promise.reject(e):(t.removeTokenFromLocalStorage(),Promise.reject(new f.TokenExpiredException(e)))}))},e.prototype.switchProfile=function(e,t){var r=this;void 0===t&&(t={});var s=this.tokenServiceRequest,o=s.clientId,a=s.imsApis,l=s.scope;return a.switchProfile({client_id:o,scope:l},t,e).then((function(e){if(!e)throw new Error("refresh token --\x3e no response");var t=e.access_token,s=e.expires_in,o=e.token_type,a=e.error,l=e.error_description,u=void 0===l?"":l,c=e.sid,d=n(e,["access_token","expires_in","token_type","error","error_description","sid"]);if(a)throw new Error(a+" "+u);var h=Object.keys(d).length?d:null,p={token:t,expire:new Date(Date.now()+parseFloat(s)),token_type:o,sid:c},f=r.updateToken(p)||{},g={tokenInfo:i(i({},p),{impersonatorId:f.impersonatorId||"",isImpersonatedSession:f.isImpersonatedSession||!1}),profile:h};return Promise.resolve(g)})).catch((function(e){return void 0===e&&(e={}),Promise.reject(e)}))},e.prototype.callRefreshToken=function(e){return void 0===e&&(e={}),this.refreshToken(e).then((function(e){var t=e.tokenInfo,r=t.token,i=t.expire,n=e.profile,s=new l.TokenFields({valid:!0,tokenValue:r},i),o=new h.TokenProfileResponse(s,n);return Promise.resolve(o)})).catch((function(e){return Promise.reject(e)}))},e.prototype.updateToken=function(e){var t=e.token,r=e.expire,i=new l.TokenFields({tokenValue:t},r);return i?(i.tokenValue=t,this.addTokenToStorage(i),i):null},e.prototype.purge=function(){this.removeTokenFromLocalStorage(),this.removeReauthTokenFromLocalStorage()},e.prototype.setStandAloneToken=function(e){var t=e.token,r=e.sid,i=e.expirems,n=void 0===i?-1:i,s=this.tokenServiceRequest,o=s.clientId,a=s.scope,u=new Date((new Date).getTime()+n);if(!new l.TokenFields({valid:!0,tokenValue:t},u).validate(o,a))return!1;var c={expire:u,token:t,sid:r};return this.updateToken(c),!0},e.prototype.exchangeIjt=function(e){var t=this.tokenServiceRequest,r={client_id:t.clientId,scope:t.scope};return t.imsApis.exchangeIjt(r,e).then((function(e){var t=e.valid,r=e.access_token,i=e.expires_in;if(!1===t)return Promise.reject(e);var n=new Date(Date.now()+1e3*parseFloat(i)),s=new l.TokenFields({valid:!0,tokenValue:r},n),o=new h.TokenProfileResponse(s,null);return Promise.resolve(o)}))},e}();t.TokenService=P},295677:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(290829)),s=function(){function e(){}return e.prototype.fragmentToObject=function(){var e=this.getHashFromURL();if(!e)return null;var t=this.processHashUrl(e),r=this.getOldHash(t),i=r?t.slice(t.indexOf("old_hash")):t,s=this.removeOldHash(i),o=this.getQueryParamsAsMap(s);r&&(o.old_hash=r);var a=o.state;return a&&(o.state=n.default.toJson(a)),o},e.prototype.getOldHash=function(e){if(!e)return"";var t=e.match("old_hash=(.*?)&from_ims=true");return t?t[1]:""},e.prototype.removeOldHash=function(e){return e?e.replace(/old_hash=(.*?)&from_ims=true/gi,"from_ims=true"):e},e.prototype.getHashFromURL=function(e){void 0===e&&(e=window.location.href);var t=e.indexOf("#");return-1!==t?e.substring(t+1):""},e.prototype.getQueryParamsAsMap=function(e){if(!e)return{};var t={};return(e=e.replace(/^(#\/|\/|#|\?|&)/,"")).split("&").forEach((function(e){if(e.length){var r=e.split("=");t[r[0]]=decodeURIComponent(r[1])}})),t},e.prototype.processHashUrl=function(e){return e.replace("?error","#error").replace(/#/gi,"&").replace("from_ims=true?","from_ims=true&")},e}();t.default=new s},833164:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.uriEncodeData=function(e){if("object"!=typeof e)return"";var t,r=[],i="";for(var n in e)void 0!==(t=e[n])&&(i=this.encodeValue(t),r.push(encodeURIComponent(n)+"="+i));return r.join("&")},e.prototype.encodeValue=function(e){return null===e?"null":"object"==typeof e?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(e)},e.prototype.replaceUrl=function(e){e&&window.location.replace(e)},e.prototype.setHrefUrl=function(e){e&&(window.location.href=e)},e.prototype.setHash=function(e){void 0===e&&(e=""),window.location.hash=e},e}();t.default=new r},148856:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="abcdefghijklmnopqrstuvwxyz234567".split("").reduce((function(e,t,r){return e[t]=r,e}),{"=":0}),i=function(e){return function(e,t,r){var i=t-r.length;return i>0&&(r=new Array(i+1).join(e)+r),r}("0",5,e.toString(2))};t.decodeToBitstring=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("Data is not a string");var n=e.toLowerCase().split("");!function(e){if(e.length%8!=0)throw new Error("Data length is not a multiple of 8");e.forEach((function(e){if(!(e in r))throw new Error("Unknown encoded character "+e)}));var t=!1;e.forEach((function(e){if("="!==e&&t)throw new Error("Found padding char in the middle of the string");"="===e&&(t=!0)}))}(n);var s=function(e){for(var t=e.length-1,r=0;"="===e[t];)++r,--t;return r}(n),o=[];n.forEach((function(e){o.push(i(r[e]))}));var a=o.join("");return s>0&&(a=a.slice(0,-5*s)),a.length%8!=0&&(a=a.slice(0,a.length%8*-1)),t?function(e){var t="";if(e.length%8!=0)throw new Error("Length must be a multiple of 8");for(var r=0,i=e.length;r<i;r+=8)t+=e.slice(r,r+8).split("").reverse().join("");return t}(a):a}},528202:(e,t)=>{"use strict";function r(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=r,t.merge=function e(t,i){if(null==t)return i;if(t===i)return t;if(!r(t))return t;var n=Object.assign({},t);return r(i)&&Object.keys(i).forEach((function(s){var o,a;r(i[s])?s in t?n[s]=e(t[s],i[s]):Object.assign(n,((o={})[s]=i[s],o)):Object.assign(n,((a={})[s]=i[s],a))})),n}},677008:(e,t,r)=>{"use strict";r(315258),Object.defineProperty(t,"__esModule",{value:!0});var i=",";t.sortScopes=function(e){return e.split(i).sort().join(i)},t.validateScopeInclusion=function(e,t){var r=(null==t?void 0:t.split(i))||[];return((null==e?void 0:e.split(i))||[]).every((function(e){return r.includes(e)}))}},36253:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(764785),n=r.n(i),s=r(880964),o=r.n(s)()(n());o.push([e.id,".ScrollBarInfo-xWYuQv1Wqb3j5A2y_Y_1 {\n\toverflow-y: scroll;\n\tvisibility: hidden;\n}\n",""]),o.locals={test_outer:"ScrollBarInfo-xWYuQv1Wqb3j5A2y_Y_1"};const a=o},880964:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",i=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),i&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),i&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,i,n,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);i&&o[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),r&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=r):c[2]=r),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},764785:e=>{"use strict";e.exports=function(e){return e[1]}},912601:e=>{"use strict";var t=[];function r(e){for(var r=-1,i=0;i<t.length;i++)if(t[i].identifier===e){r=i;break}return r}function i(e,i){for(var s={},o=[],a=0;a<e.length;a++){var l=e[a],u=i.base?l[0]+i.base:l[0],c=s[u]||0,d="".concat(u," ").concat(c);s[u]=c+1;var h=r(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=n(p,i);i.byIndex=a,t.splice(a,0,{identifier:d,updater:f,references:1})}o.push(d)}return o}function n(e,t){var r=t.domAPI(t);r.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,n){var s=i(e=e||[],n=n||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=r(s[o]);t[a].references--}for(var l=i(e,n),u=0;u<s.length;u++){var c=r(s[u]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}s=l}}},638695:e=>{"use strict";var t={};e.exports=function(e,r){var i=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(r)}},512170:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},16135:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},470864:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var i="";r.supports&&(i+="@supports (".concat(r.supports,") {")),r.media&&(i+="@media ".concat(r.media," {"));var n=void 0!==r.layer;n&&(i+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),i+=r.css,n&&(i+="}"),r.media&&(i+="}"),r.supports&&(i+="}");var s=r.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},178921:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},898544:e=>{function t(e,t){var r=e.toString();if(r.length<t){var i=[];i.length=t-r.length+1,r=i.join("0")+r}return r}function r(e,t){return Object.getOwnPropertyNames(t).forEach((function(i){if("object"==typeof t[i])"object"!=typeof e[i]&&(e[i]={}),r(e[i],t[i]);else{var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,n)}})),e}function i(e,t,r){e.forEach((function(e){setTimeout((function(){e(t,r)}))}))}var n={prod:"cc-api-data.adobe.io",stage:"cc-api-data-stage.adobe.io",dev:"cc-api-data-dev.adobe.io"},s="/ingest",o={ENVIRONMENT:"prod",ALLOW_NO_TOKEN:!1,ANALYTICS_INGEST_TYPE:"dunamis",ANALYTICS_MAX_QUEUED_EVENTS:50,ANALYTICS_DEBOUNCE:1e4,ANALYTICS_API_KEY:null,ANALYTICS_X_PRODUCT:null,ANALYTICS_X_PRODUCT_LOCATION:void 0,ANALYTICS_PROJECT:null,ANALYTICS_USER_REGION:"UNKNOWN",TIMESTAMP_PROPERTY_NAME:"event.dts_end"},a=["ANALYTICS_API_KEY","ANALYTICS_X_PRODUCT","ANALYTICS_PROJECT"];function l(e,t){e=e||{},t=t||{};var i=e=>{throw this._log(e),new Error("ERROR: "+e)};this._queuedEvents=[],this._queuedCallbacks=[],this._lastSendTime=0,this._isEnabled=!1,this._dependencies=r({},e),e.getAccessToken&&"function"==typeof e.getAccessToken||i("Missing dependency: getAccessToken"),this._options={},Object.keys(o).forEach((e=>{this._options[e]=t[e]||o[e]})),a.forEach((e=>{this._options[e]||i("Missing option: "+e)})),"undefined"==typeof fetch&&i("Ingest requires fetch - if in a node environment, set 'global.fetch = require('node-fetch');'")}l.prototype._log=function(e){var t=this._dependencies.log;t&&t("Ingest :: "+e)},l.prototype._getAgent=function(e,t){this._dependencies.getAgent?this._dependencies.getAgent(e,t):t(null,{})},l.prototype._getAccessToken=function(e){this._dependencies.getAccessToken(e)},l.prototype._clearAccessToken=function(){this._dependencies.clearAccessToken&&this._dependencies.clearAccessToken()},l.prototype._getEnvironment=function(){return n[this._options.ENVIRONMENT]?this._options.ENVIRONMENT:"prod"},l.prototype._getAnalyticsHost=function(){return n[this._getEnvironment()]},l.prototype._formatTimestamp=function(e){var r=e.getFullYear(),i=t(e.getMonth()+1,2),n=t(e.getDate(),2),s=t(e.getHours(),2),o=t(e.getMinutes(),2),a=t(e.getSeconds(),2),l=t(e.getMilliseconds(),3),u=e.getTimezoneOffset(),c=u<0?"+":"-",d=Math.floor(Math.abs(u)/60),h=Math.abs(u)%60;return r+"-"+i+"-"+n+"T"+s+":"+o+":"+a+"."+l+(c+t(d,2)+t(h,2))},l.prototype._updateDebounce=function(e){var t=e&&(e["retry-after"]||e["Retry-After"]),r=0;if(t){var i;try{i=parseInt(t,10)}catch(e){}if(i)r=Math.max(0,i);else{var n=Date.parse(t);if(n){var s=(new Date).valueOf();r=Math.max(0,n-s)/1e3+Math.floor(10*Math.random())}}}this._options.ANALYTICS_DEBOUNCE=Math.max(1e3*r,this._options.ANALYTICS_DEBOUNCE)},l.prototype._queueEvent=function(e){this._queuedEvents.length>=this._options.ANALYTICS_MAX_QUEUED_EVENTS&&this._queuedEvents.shift(),this._queuedEvents.push(e)},l.prototype._requeueEvents=function(e){this._queuedEvents=e.concat(this._queuedEvents),this._queuedEvents=function(e,t){var r=e;if(e&&e.length>t&&t>0){var i=e.length-t;r=e.slice(i,e.length)}return r}(this._queuedEvents,this._options.ANALYTICS_MAX_QUEUED_EVENTS)},l.prototype._sendAnalytics=function(e,t,n){if(n=n||0,t&&this._queuedCallbacks.push(t),!this._isEnabled||0===this._queuedEvents.length){var o=this._queuedCallbacks;return this._queuedCallbacks=[],void(this._isEnabled?i(o,null,0):i(o,new Error("Analytics Disabled")))}var a=this._options.ANALYTICS_DEBOUNCE;if(e&&(a=0,clearTimeout(this._pendingSendAnalyticsTimeout),this._pendingSendAnalyticsTimeout=void 0),this._sendingEvents||this._pendingSendAnalyticsTimeout)e&&(this._fastFollow=!0);else{var l=(new Date).valueOf();if(l-this._lastSendTime<a)this._pendingSendAnalyticsTimeout=setTimeout((()=>{this._pendingSendAnalyticsTimeout=void 0,this._sendAnalytics()}),a);else{this._lastSendTime=l,this._sendingEvents=this._queuedEvents,this._sendingCallbacks=this._queuedCallbacks,this._queuedEvents=[],this._queuedCallbacks=[];var u,c=(u=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)})()+u()+"-"+u()+"-"+u()+"-"+u()+"-"+u()+u()+u(),d="["+c+"] ",h={events:this._sendingEvents},p=e=>{var t=this._queuedEvents?this._queuedEvents.length:0;if(this._sendingEvents){var r=this._sendingEvents.length;e?(this._requeueEvents(this._sendingEvents),this._log(d+"Error sending "+r+" events: "+e)):this._log(d+"Success sending "+r+" events: "+JSON.stringify(this._sendingEvents)),delete this._sendingEvents;var n=this._sendingCallbacks;delete this._sendingCallbacks,e?i(n,e):i(n,null,r)}t>0&&this._sendAnalytics(this._fastFollow),this._fastFollow=!1},f=(e,t)=>{if(this._updateDebounce(t),401===e&&0===n)return this._clearAccessToken(),this._requeueEvents(this._sendingEvents),delete this._sendingEvents,this._queuedCallbacks=this._sendingCallbacks.concat(this._queuedCallbacks),delete this._sendingCallbacks,this._log(d+"Access token is expired. Retry one more time."),void this._sendAnalytics(!0,void 0,n+1);200===e?p():p(new Error("Unexpected Response: "+e))};this._getAccessToken(((e,t)=>{if(e&&!this._options.ALLOW_NO_TOKEN)return void p(e);if(!(t&&0!==t.length||this._options.ALLOW_NO_TOKEN))return void p(new Error("No access token"));var i="https://"+this._getAnalyticsHost();this._log(d+"Sending analytics to "+i+s);const n={"x-api-key":this._options.ANALYTICS_API_KEY,"X-Product":this._options.ANALYTICS_X_PRODUCT,"User-Agent":this._options.ANALYTICS_USER_AGENT||this._options.ANALYTICS_API_KEY,"X-Request-Id":c,"Content-Type":"application/json"};t&&(n.Authorization="Bearer "+t),this._options.ANALYTICS_X_PRODUCT_LOCATION&&(n["X-Product-Location"]=this._options.ANALYTICS_X_PRODUCT_LOCATION),this._getAgent(i,((e,t)=>{const o={method:"POST",headers:n,body:JSON.stringify(h)};t&&t.agent?o.agent=t&&t.agent:r(o,t||{}),fetch(i+s,o).then((e=>{f(e.status,e.headers)}),p)}))}))}}},l.prototype.enable=function(e){this._isEnabled=e,e&&this._sendAnalytics(!0)},l.prototype.postEvent=function(e,t,r){var n=r||{},s="event.dts_start",o="event.coll_dts",a=n.TIMESTAMP_PROPERTY_NAME||this._options.TIMESTAMP_PROPERTY_NAME,l=n.ANALYTICS_PROJECT||this._options.ANALYTICS_PROJECT,u=n.ANALYTICS_INGEST_TYPE||this._options.ANALYTICS_INGEST_TYPE;e[o]&&e[o]instanceof Date&&(e[o]=this._formatTimestamp(e[o])),e[s]&&e[s]instanceof Date&&(e[s]=this._formatTimestamp(e[s])),e[a]||(e[a]=this._formatTimestamp(new Date)),e[a]instanceof Date&&(e[a]=this._formatTimestamp(e[a]));var c={time:e[a],project:l,environment:this._getEnvironment(),ingesttype:u,data:e};e.simulate?(this._log("event sim:"+JSON.stringify(c)),t&&i([t],null,0)):(this._queueEvent(c),this._sendAnalytics(!1,t))},l.prototype.flush=function(e,t){this._sendAnalytics(e,t)},e.exports=l},349130:()=>{!function(){"use strict";var e,t,r=document,i=Object.defineProperty,n="replace",s=function(e){return e[n](/%2523access_token%253D.*?%2526/gim,"%2526")[n](/%23access_token%3D.*?%26/gim,"%26")[n](/#access_token=.*?&/gim,"&")[n](/information=[^\&]+/,"")[n](/puser=[^\&]+/,"")[n](/fnuser=[^\&]+/,"")[n](/lnuser=[^\&]+/,"")};try{var o="referrer",a=r[o],l=s(a);l!==a&&i(r,o,{configurable:!0,value:l})}catch(e){}e=window,t=function(){function e(e,t){h.add(e,t),d||(d=b(h.drain))}function t(e){var t,r=m(e);return null==e||r!=f&&r!=p||(t=e.then),m(t)==p&&t}function r(){for(var e=0;e<this.chain.length;e++)i(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function i(e,r,i){var n,s;try{!1===r?i.reject(e.msg):(n=!0===r?e.msg:r.call(void 0,e.msg))===i.promise?i.reject(y("Promise-chain cycle")):(s=t(n))?s.call(n,i.resolve,i.reject):i.resolve(n)}catch(e){i.reject(e)}}function n(i){var o,l=this;if(!l.triggered){l.triggered=!0,l.def&&(l=l.def);try{(o=t(i))?e((function(){var e=new a(l);try{o.call(i,(function(){n.apply(e,arguments)}),(function(){s.apply(e,arguments)}))}catch(t){s.call(e,t)}})):(l.msg=i,l.state=1,l.chain.length>0&&e(r,l))}catch(e){s.call(new a(l),e)}}}function s(t){var i=this;i.triggered||(i.triggered=!0,i.def&&(i=i.def),i.msg=t,i.state=2,i.chain.length>0&&e(r,i))}function o(e,t,r,i){for(var n=0;n<t.length;n++)!function(n){e.resolve(t[n]).then((function(e){r(n,e)}),i)}(n)}function a(e){this.def=e,this.triggered=!1}function l(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function u(t){if(m(t)!=p)throw y(g);if(0!==this.__NPO__)throw y("Not a promise");this.__NPO__=1;var i=new l(this);this.then=function(t,n){var s={success:m(t)!=p||t,failure:m(n)==p&&n};return s.promise=new this.constructor((function(e,t){if(m(e)!=p||m(t)!=p)throw y(g);s.resolve=e,s.reject=t})),i.chain.push(s),0!==i.state&&e(r,i),s.promise},this.catch=function(e){return this.then(void 0,e)};try{t.call(void 0,(function(e){n.call(i,e)}),(function(e){s.call(i,e)}))}catch(e){s.call(i,e)}}var c,d,h,p="function",f="object",g="Not a "+p,m=function(e){return typeof e},y=TypeError,v=Object.prototype.toString,b="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;c=function(e,t,r,i){return Object.defineProperty(e,t,{value:r,writable:!0,configurable:!1!==i})},h=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,r,i;return{add:function(n,s){i=new e(n,s),r?r.next=i:t=i,r=i,i=void 0},drain:function(){var e=t;for(t=r=d=void 0;e;)e.fn.call(e.self),e=e.next}}}();var _=c({},"constructor",u,!1);return u.prototype=_,c(_,"__NPO__",0,!1),c(u,"resolve",(function(e){return e&&m(e)==f&&1===e.__NPO__?e:new this((function(t,r){if(m(t)!=p||m(r)!=p)throw y(g);t(e)}))})),c(u,"reject",(function(e){return new this((function(t,r){if(m(t)!=p||m(r)!=p)throw y(g);r(e)}))})),c(u,"all",(function(e){var t=this;return"[object Array]"!=v.call(e)?t.reject(y("Not an array")):0===e.length?t.resolve([]):new t((function(r,i){if(m(r)!=p||m(i)!=p)throw y(g);var n=e.length,s=Array(n),a=0;o(t,e,(function(e,t){s[e]=t,++a===n&&r(s)}),i)}))})),c(u,"race",(function(e){var t=this;return"[object Array]"!=v.call(e)?t.reject(y("Not an array")):new t((function(r,i){if(m(r)!=p||m(i)!=p)throw y(g);o(t,e,(function(e,t){r(t)}),i)}))})),u},"undefined"==typeof Promise&&(e.Promise=t());var u=window,c=u.console.log;function d(e){throw Error(e)}var h,p,f,g,m,y,v,b,_,w=u.__satelliteEmbedCode,P=u.marketingtech,A="digitalData",S=A+".",x="object",C="array",O="function",k="sub-object not ",E=k+x,T=k+C,I=/^(.+?)((?:\[(?:n|\d+)\])+?)$/,D=/n|\d+/g,R=Array.isArray,j=0,Z=P&&P.digitalData&&P.digitalData.debug;if(b=function(e){return typeof e},_=function(e,t){return e.hasOwnProperty(t)},(f=(p=function(e,t){var r,n=this;if(i(n,"_id",{value:++j}),Z&&c(n._id+": CREATED"),i(n,"_pending",{value:{}}),i(n,"_listeners",{value:{}}),e&&n._set(A,e),t)for(r in t)_(t,r)&&n._set(r,t[r])}).prototype)._merge=g=function(e,t,r,i){var n,s,o,a,l;for(n in i=i||"",t)_(t,n)&&(s=e[n],null!=(o=t[n])&&(null==s?e[n]=o:(a=R(s)?C:b(s),l=R(o)?C:b(o),a===x||l===x?a===l&&(e[n]=g(s,o,r,i+"  ")):r||(a!==C&&(s=[s]),l===C?s=s.concat(o):s.push(o),e[n]=s))));return e},f._flatten=m=function(e,t,r,i){var n,s,o,a,l,u,c={},d={};for(e=e||this,e=JSON.parse(JSON.stringify(e)),n=0,s=(a=R(e)?e:Object.keys(e)).length;n<s;n++)l=R(e)?n:a[n],o=t?(R(e),t+"."+l):l+"",u=e[l],b(u)===x&&null!==u?c=g(c,m(u,o,r,i),!0):b(u)!==O&&(i?b(i)===x?R(i)?-1!==i.indexOf(o)&&(c[o]=u):i[o]&&(c[o]=u):b(i)===O?i(o)&&(c[o]=u):c[o]=u:c[o]=u);if(!R(e)||!r)return c;for(n=0,s=a.length;n<s;n++)u=e[l=n],b(u)===x&&(d=g(d,u));return c=g(c,m(d,o=t?t+".__collapsed":"__collapsed",r,i),!0),c=g(c,m(y(d,"|","|","|"),o,r,i),!0),c=g(c,m(d,o=t?t+".__joined":"__joined",r,i),!0),g(c,m(y(d,","),o,r,i),!0)},f._collapse=y=function(e,t,r,i){var n,s,o,a={};for(n in t=t||",",r=r||"",i=i||"",e)_(e,n)&&(s=e[n],o=R(s)?C:b(s),a[n]=o===C?r+s.join(t)+i:o===x?y(s,t,r,i):s);return a},f._recurse=v=function(e,t,r,i){var n,s,o,a,l,u;if(e&&b(e)===x)for(n=0,s=(a=R(e)?e:Object.keys(e)).length;n<s;n++)R(e)?(o=n,l=t+"[n]"):l=t+"."+(o=a[n]),u=e[o],r&&r({path:l,property:o,value:u},{path:t,value:e}),u&&b(u)===x&&v(u,l,r,i),i&&i({path:l,property:o,value:u},{path:t,value:e})},f._get=function(e){var t,r,i,n,s,o,a,l,u,d,h=this,p=h;if(Z&&c(h._id+': GET "'+e+'"'),!e||e===A)return h;for(0!==e.indexOf(A)&&(e=S+e),(t=e.split(".")).shift(),s=0,o=t.length;s<o;s++){if(u=s===o-1,n=(r=t[s]).match(I)){if(r=n[1],n=n[2].match(D),p=p[r],!R(p))return;for(a=0,l=n.length;a<l;a++)if(d=a===l-1,p=p[i="n"===(i=n[a])?p.length-1:parseInt(i)],!d&&!R(p))return}else p=p[r];if(!p||u)return p}},f._set=function(e,t){var r,i,n,s,o,a,l,u,h,p,f,g,m,y,w,P=this,C=P,k=[],j=P._pending;if(Z&&c(P._id+': SET "'+e+'" '+JSON.stringify(t)),e||(e=A),0!==e.indexOf(A)&&(e=S+e),e!==A||t!==P){if(j[e]&&(j[e].cancelled=!0,delete j[e]),null!=t&&(b(t)===x||b(t)===O)&&b(t.then)===O){if((i=t.then((function(t){return i.cancelled||P._set(e,t),t}),(function(){i.cancelled||delete j[e]}))).cancelled=!1,j[e]=i,!_(t,"unresolved"))return;r=t,t=t.unresolved,delete r.unresolved}if(e===A){if(b(t)!==x)return;for(l in v(P,A,(function(e){j[e.path]&&(j[e.path].cancelled=!0,delete j[e.path]),k.push(e.path)})),P)_(t,l)&&t[l]&&t[l]!==P[l]&&delete P[l];for(l in t)_(t,l)&&(P[l]=t[l])}else for((p=e.split(".")).shift(),n=0,s=p.length;n<s;n++)if(u=n===s-1,m=(f=p[n]).match(I))for(f=m[1],m=m[2].match(D),C=C[f]=C[f]||[],R(C)||d(T),o=0,a=m.length;o<a;o++)h=o===a-1,g="n"===(g=m[o])?C.length:parseInt(g),h?u?C[g]=t:(C=C[g]=C[g]||{},b(C)!==x&&d(E)):(C=C[g]=C[g]||[],R(C)||d(T));else u?C[f]=t:(C=C[f]=C[f]||{},b(C)!==x&&d(E));if(e===A)k.push(e);else for(y=[],n=0,s=(p=e.split(".")).length;n<s;n++)(m=(f=p[n]).match(I))&&(f=m[1],f+=m=m[2].replace(D,"n")),y.push(f),k.push(y.join("."));for(v(t,e,(function(e){j[e.path]&&(j[e.path].cancelled=!0,delete j[e.path]),-1===k.indexOf(e.path)&&k.push(e.path)})),n=k.length-1;n>=0;n--)w=k[n],P._trigger(w)}},f._unset=f._delete=function(e){return Z&&c(this._id+': DELETE "'+e+'"'),this._set(e,void 0)},f._on=function(e,t){var r;if(""===e)e=A;else if(!e)return!1;0!==e.indexOf(A)&&(e=S+e),(r=this._listeners[e])||(r=this._listeners[e]=[]),r.push(t)},f._off=function(e,t){var r,i;if(""===e)e=A;else if(!e)return!1;return 0!==e.indexOf(A)&&(e=S+e),!!(i=this._listeners[e])&&-1!==(r=i.indexOf(t))&&(i.splice(r,1),!0)},f._trigger=function(e){var t,r,i,n;if(""===e)e=A;else if(!e)return!1;if(0!==e.indexOf(A)&&(e=S+e),!(n=this._listeners[e]))return!1;for(t=0,r=n.length;t<r;t++)if(i=n[t])try{i(this._get(e))}catch(e){}},f._resolved=function(){var e,t=[],r=this._pending;for(e in r)_(r,e)&&t.push(r[e]);return Promise.all(t)},f._snapshot=f._copy=function(){return new p(JSON.parse(JSON.stringify(this)),this._pending)},u.DigitalData=p,!w){if(h=new p,u.digitalData){h._set(A,u.digitalData);try{delete u.digitalData}catch(e){}}i(u,A,{enumerable:!0,get:function(){return h},set:function(e){h._set(A,e)}})}var N=h,F=r.getElementsByTagName("head")[0],L=u.performance,M=decodeURIComponent;function U(e){var t,i,n,s;for(i=0,n=(t=r.cookie?r.cookie.split("; "):[]).length;i<n;i++)if(s=t[i],M(s.substr(0,s.indexOf("=")))===e)return M(s.substr(s.indexOf("=")+1))}var $,z,H,J="at-body-style",q="targetGlobalSettings",V="bodyHidingEnabled",B=U("OptanonConsent"),W=U("OptanonChoice"),G=u.location.search;if($=P&&P.adobe&&P.adobe.target,z=u[q]=u[q]||{},H=r.getElementById(J),w||!$||V in z&&!z[V]||-1!==G.indexOf("mboxDisable=1")||-1!==r.cookie.indexOf("adobe_optout")||W&&B&&-1!==B.indexOf("C0002:0"))H&&H.parentNode&&H.parentNode.removeChild(H);else{if(!H){(H=r.createElement("style")).id=J,H.innerHTML="body{opacity:0.01 !important}";try{L.mark("targetBodyHide"),F.appendChild(H)}catch(e){}}setTimeout((function(){z[V]=!1;try{F.removeChild(r.getElementById(J))}catch(e){}}),3e3)}function X(e,t){u.addEventListener(e,t)}function K(e,t){var r,i,n,s,o,a=u.location,l="https://assets.adobedtm.com/",c=l+"launch-",d="d4d114c60e50/a7f0c794cf07/launch-",h={globalDev:"EN9a7b3bd7db454856b44f27730f263fa0",globalStage:"EN2731bb0857084837b7142cd2017286bb",globalProd:"EN919758db9a654a17bac7d184b99c4820",ucDev:"ENed7cfab651fa4714a57bf937efb0cd23-development",ucStage:"EN1450794db7d0411a8b3f3b08dd706d00-staging",ucProd:"ENd6b040128459463bad781a5daa85ce0f",videoDev:"EN2d7bf2d8326b4ff1aa5335189a385023-development",videoStage:"EN60e5086def0d48e9ae2195234cb1b389-staging",videoProd:"EN58452fb8d9534cacbb8aeac0c8e15215",minimalDev:"EN876eeadff442464cb438819d695e077d-development",minimalStage:"ENa9d6ac46ca57441784434d28ceb9ddba-staging",minimalProd:"EN08637acac77f4e20b9e413aeb86f610e",editBillingDev:d+"f8f2a9a7669b-development",editBillingStage:d+"4f62e3c9406b-staging",editBillingProd:d+"247b8615afc6"};if(r=t||a.hostname,o=function(e){return-1!==r.indexOf(e)},P&&P.adobe&&P.adobe.launch&&(P.adobe.launch.embedCode||P.adobe.launch.environment||P.adobe.launch.property)){i=P.adobe.launch.embedCode,n=P.adobe.launch.property,s=P.adobe.launch.environment;i?0===i.indexOf("EN")?c+=i:c=l+i:function(e){"video analytics"==e&&(e="video"),"unified checkout"==e&&(e="uc"),"Payment Info Editor"==e&&(e="editBilling",c=l),"dev"===s?c+=h[e+"Dev"]:"stage"===s?c+=h[e+"Stage"]:"production"===s?c+=h[e+"Prod"]:(c+=h[e+"Prod"],console.warn('marketingtech.adobe.launch.environment invalid. Falling back to "production".'))}(n||"global")}else o("localhost.account.adobe.com")||o("prestage1.account.adobe.com")||o("prestage2.account.adobe.com")?c+=h.globalDev:o("stage.account.adobe.com")||o("prod-inactive.account.adobe.com")||o("prod-active.account.adobe.com")?c+=h.globalStage:o("account.adobe.com")?c+=h.globalProd:(o("localhost.")||console.error("unrecognized domain. Please email marketingtech@adobe.com."),c+=h.globalDev);return e&&(c+=".min"),c+".js"}var Y=encodeURIComponent;function Q(e,t,i,n){var s="";t=t||"",s+=n?e+"="+t:Y(e)+"="+Y(t),i.path&&(s+="; path="+i.path),i.expires&&(s+="; expires="+i.expires.toUTCString()),i.domain&&(s+="; domain="+i.domain),i.samesite&&(s+="; samesite="+i.samesite),r.cookie=s}var ee="";var te,re,ie,ne,se,oe,ae,le=[],ue="adobePrivacy:Privacy",ce="OptanonChoice",de=new Date,he={domain:function(){if(ee)return ee;var e=u.location.hostname.toLowerCase().split("."),t=[],r="",i=null,n=!1,s="sat_domain";for(r=e.pop(),t.unshift(r);e.length>0;){r=e.pop(),t.unshift(r),(i=new Date).setTime(i.getTime()+1e3);try{Q(s,"A",{expires:i,domain:t.join(".")})}catch(e){break}if("A"===U(s)){n=!0,ee=t.join(".");break}}return n?ee:""}(),path:"/",samesite:"Lax",expires:(de.setFullYear(de.getFullYear()+1),de)};function pe(e){var t=JSON.parse(JSON.stringify(e.location));return t.href=s(t.href),t.hash=s(t.hash),t.search=s(t.search),t}te=function(e){ne?e(u._satellite):le.push(e)},re=new Promise((function(e){te(e)})),ie=function(){var e,t,r;for(ne=!0,e=0,t=le.length;e<t;e++){r=le[e];try{r(u._satellite)}catch(e){}}},u.__satelliteLoadedCallback=te,u.__satelliteLoadedPromise=re,oe=function(e){r.write('<script src="'+e+'"><\/script>')},X(ue+"Consent",(function(){Q(ce,1,he)})),X(ue+"Reject",(function(){Q(ce,2,he)})),X(ue+"Custom",(function(){Q(ce,3,he)})),X(ue+"Consent",(function(){var e,t=ue+"Consent:DTM";"function"==typeof u.CustomEvent?e=new CustomEvent(t):(e=r.createEvent("CustomEvent")).initCustomEvent(t,!1,!1,void 0),te((function(){"complete"===r.readyState?r.body.dispatchEvent(e):X("load",(function(){r.body.dispatchEvent(e)}))}))})),w?(oe(w),(se=function(){u._satellite&&u._satellite.initialized?ie():setTimeout(se,100)})()):(ae=function(){!function(e,t){var i,n,s=r.createElement("script"),o=!1;s.src=e,s.async=!0,t&&(s.onload=s.onreadystatechange=function(e){var r=this.readyState;o||r&&"complete"!==r&&"loaded"!==r||(o=!0,t(e))}),(i=r.getElementsByTagName("script")[0])&&i.parentNode?(n=i.parentNode).insertBefore(s,i):(n=F)?n.appendChild(s):r.body?(n=r.body).appendChild(s):d("no script parent")}(K(!0),ie)},P&&P.adobe&&P.adobe.launch&&P.adobe.launch.load?P.adobe.launch.load(ae):ae());var fe,ge="initialPage.pageInfo.location",me="message",ye=u.top;function ve(e,t){try{e._set(t,pe(ye))}catch(r){X(me,(function(r){r.data.n===ge&&e._set(t,r.data.v)})),ye.postMessage({n:ge},"*")}}u===ye&&(fe=pe(u),X(me,(function(e){var t,r=e.origin,i=r.length;((t=function(e){return r.substring(i-e.length,i)===e})(".adobe.com")||t("//adobe.com"))&&e.data.n===ge&&e.source.postMessage({n:ge,v:fe},"*")})));var be=[];u._satellite=u._satellite||{},u._satellite.track=function(e,t){var r;(t=t||{})._beforeSatelliteLoaded=!0,w||((r=t.digitalData=t.digitalData||u.digitalData._snapshot())._set("page.pageInfo.location",pe(u)),ve(r,"page.topFrameInfo.location")),be.push([e,t])},u.__satelliteLoadedCallback((function(){var e,t,r;for(e=0,t=be.length;e<t;e++)r=be[e],u._satellite.track(r[0],r[1])}));w||(N._set("marketingtech.bootstrap.version","0.20.0"),N._set("initialPage.pageInfo.location",pe(u)),ve(N,"initialPage.topFrameInfo.location"))}()},167034:(e,t,r)=>{"use strict";var i=r(346530),n=r(180512),s=n(i("String.prototype.indexOf"));e.exports=function(e,t){var r=i(e,!!t);return"function"==typeof r&&s(e,".prototype.")>-1?n(r):r}},180512:(e,t,r)=>{"use strict";var i=r(868093),n=r(346530),s=r(191431),o=r(568570),a=n("%Function.prototype.apply%"),l=n("%Function.prototype.call%"),u=n("%Reflect.apply%",!0)||i.call(l,a),c=r(107287),d=n("%Math.max%");e.exports=function(e){if("function"!=typeof e)throw new o("a function is required");var t=u(i,l,arguments);return s(t,1+d(0,e.length-(arguments.length-1)),!0)};var h=function(){return u(i,a,arguments)};c?c(e.exports,"apply",{value:h}):e.exports.apply=h},964144:(e,t)=>{"use strict";t.Q=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var i={},s=t||{},a=e.split(n),l=s.decode||r,u=0;u<a.length;u++){var c=a[u],d=c.indexOf("=");if(!(d<0)){var h=c.substr(0,d).trim(),p=c.substr(++d,c.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),null==i[h]&&(i[h]=o(p,l))}}return i},t.q=function(e,t,r){var n=r||{},o=n.encode||i;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!s.test(e))throw new TypeError("argument name is invalid");var a=o(t);if(a&&!s.test(a))throw new TypeError("argument val is invalid");var l=e+"="+a;if(null!=n.maxAge){var u=n.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");l+="; Max-Age="+Math.floor(u)}if(n.domain){if(!s.test(n.domain))throw new TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!s.test(n.path))throw new TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");l+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(l+="; HttpOnly");n.secure&&(l+="; Secure");if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return l};var r=decodeURIComponent,i=encodeURIComponent,n=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(e,t){try{return t(e)}catch(t){return e}}},247285:(e,t,r)=>{"use strict";var i=r(107287),n=r(511050),s=r(568570),o=r(57048);e.exports=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new s("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new s("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new s("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new s("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new s("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new s("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,c=arguments.length>6&&arguments[6],d=!!o&&o(e,t);if(i)i(e,t,{configurable:null===u&&d?d.configurable:!u,enumerable:null===a&&d?d.enumerable:!a,value:r,writable:null===l&&d?d.writable:!l});else{if(!c&&(a||l||u))throw new n("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=r}}},107287:(e,t,r)=>{"use strict";var i=r(346530)("%Object.defineProperty%",!0)||!1;if(i)try{i({},"a",{value:1})}catch(e){i=!1}e.exports=i},612744:e=>{"use strict";e.exports=EvalError},527686:e=>{"use strict";e.exports=Error},782190:e=>{"use strict";e.exports=RangeError},311594:e=>{"use strict";e.exports=ReferenceError},511050:e=>{"use strict";e.exports=SyntaxError},568570:e=>{"use strict";e.exports=TypeError},478971:e=>{"use strict";e.exports=URIError},894314:e=>{"use strict";var t=Object.prototype.toString,r=Math.max,i=function(e,t){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var n=0;n<t.length;n+=1)r[n+e.length]=t[n];return r};e.exports=function(e){var n=this;if("function"!=typeof n||"[object Function]"!==t.apply(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var s,o=function(e,t){for(var r=[],i=t||0,n=0;i<e.length;i+=1,n+=1)r[n]=e[i];return r}(arguments,1),a=r(0,n.length-o.length),l=[],u=0;u<a;u++)l[u]="$"+u;if(s=Function("binder","return function ("+function(e,t){for(var r="",i=0;i<e.length;i+=1)r+=e[i],i+1<e.length&&(r+=t);return r}(l,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof s){var t=n.apply(this,i(o,arguments));return Object(t)===t?t:this}return n.apply(e,i(o,arguments))})),n.prototype){var c=function(){};c.prototype=n.prototype,s.prototype=new c,c.prototype=null}return s}},868093:(e,t,r)=>{"use strict";var i=r(894314);e.exports=Function.prototype.bind||i},346530:(e,t,r)=>{"use strict";var i,n=r(527686),s=r(612744),o=r(782190),a=r(311594),l=r(511050),u=r(568570),c=r(478971),d=Function,h=function(e){try{return d('"use strict"; return ('+e+").constructor;")()}catch(e){}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch(e){p=null}var f=function(){throw new u},g=p?function(){try{return f}catch(e){try{return p(arguments,"callee").get}catch(e){return f}}}():f,m=r(827155)(),y=r(835711)(),v=Object.getPrototypeOf||(y?function(e){return e.__proto__}:null),b={},_="undefined"!=typeof Uint8Array&&v?v(Uint8Array):i,w={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":m&&v?v([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?i:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":s,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":d,"%GeneratorFunction%":b,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":m&&v?v(v([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&m&&v?v((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":o,"%ReferenceError%":a,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&m&&v?v((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":m&&v?v(""[Symbol.iterator]()):i,"%Symbol%":m?Symbol:i,"%SyntaxError%":l,"%ThrowTypeError%":g,"%TypedArray%":_,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":c,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet};if(v)try{null.error}catch(e){var P=v(v(e));w["%Error.prototype%"]=P}var A=function e(t){var r;if("%AsyncFunction%"===t)r=h("async function () {}");else if("%GeneratorFunction%"===t)r=h("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=h("async function* () {}");else if("%AsyncGenerator%"===t){var i=e("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if("%AsyncIteratorPrototype%"===t){var n=e("%AsyncGenerator%");n&&v&&(r=v(n.prototype))}return w[t]=r,r},S={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=r(868093),C=r(14808),O=x.call(Function.call,Array.prototype.concat),k=x.call(Function.apply,Array.prototype.splice),E=x.call(Function.call,String.prototype.replace),T=x.call(Function.call,String.prototype.slice),I=x.call(Function.call,RegExp.prototype.exec),D=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,R=/\\(\\)?/g,j=function(e,t){var r,i=e;if(C(S,i)&&(i="%"+(r=S[i])[0]+"%"),C(w,i)){var n=w[i];if(n===b&&(n=A(i)),void 0===n&&!t)throw new u("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:n}}throw new l("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new u('"allowMissing" argument must be a boolean');if(null===I(/^%?[^%]*%?$/,e))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=T(e,0,1),r=T(e,-1);if("%"===t&&"%"!==r)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new l("invalid intrinsic syntax, expected opening `%`");var i=[];return E(e,D,(function(e,t,r,n){i[i.length]=r?E(n,R,"$1"):t||e})),i}(e),i=r.length>0?r[0]:"",n=j("%"+i+"%",t),s=n.name,o=n.value,a=!1,c=n.alias;c&&(i=c[0],k(r,O([0,1],c)));for(var d=1,h=!0;d<r.length;d+=1){var f=r[d],g=T(f,0,1),m=T(f,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new l("property names with quotes must have matching quotes");if("constructor"!==f&&h||(a=!0),C(w,s="%"+(i+="."+f)+"%"))o=w[s];else if(null!=o){if(!(f in o)){if(!t)throw new u("base intrinsic for "+e+" exists, but the property is not available.");return}if(p&&d+1>=r.length){var y=p(o,f);o=(h=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:o[f]}else h=C(o,f),o=o[f];h&&!a&&(w[s]=o)}}return o}},57048:(e,t,r)=>{"use strict";var i=r(346530)("%Object.getOwnPropertyDescriptor%",!0);if(i)try{i([],"length")}catch(e){i=null}e.exports=i},94105:(e,t,r)=>{"use strict";var i=r(107287),n=function(){return!!i};n.hasArrayLengthDefineBug=function(){if(!i)return null;try{return 1!==i([],"length",{value:1}).length}catch(e){return!0}},e.exports=n},835711:e=>{"use strict";var t={__proto__:null,foo:{}},r=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof r)}},827155:(e,t,r)=>{"use strict";var i="undefined"!=typeof Symbol&&Symbol,n=r(674309);e.exports=function(){return"function"==typeof i&&("function"==typeof Symbol&&("symbol"==typeof i("foo")&&("symbol"==typeof Symbol("bar")&&n())))}},674309:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(e,t);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},14808:(e,t,r)=>{"use strict";var i=Function.prototype.call,n=Object.prototype.hasOwnProperty,s=r(868093);e.exports=s.call(i,n)},982201:(e,t)=>{var r,i,n;i="undefined"!=typeof window?window:this,n=function(i,n){var s=[],o=s.slice,a=s.concat,l=s.push,u=s.indexOf,c={},d=c.toString,h=c.hasOwnProperty,p={},f=i.document,g="2.1.3",m=function(e,t){return new m.fn.init(e,t)},y=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,b=/-([\da-z])/gi,_=function(e,t){return t.toUpperCase()};function w(e){var t=e.length,r=m.type(e);return"function"!==r&&!m.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}m.fn=m.prototype={jquery:g,constructor:m,selector:"",length:0,toArray:function(){return o.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:o.call(this)},pushStack:function(e){var t=m.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return m.each(this,e,t)},map:function(e){return this.pushStack(m.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:l,sort:s.sort,splice:s.splice},m.extend=m.fn.extend=function(){var e,t,r,i,n,s,o=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[a]||{},a++),"object"==typeof o||m.isFunction(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)r=o[t],o!==(i=e[t])&&(u&&i&&(m.isPlainObject(i)||(n=m.isArray(i)))?(n?(n=!1,s=r&&m.isArray(r)?r:[]):s=r&&m.isPlainObject(r)?r:{},o[t]=m.extend(u,s,i)):void 0!==i&&(o[t]=i));return o},m.extend({expando:"jQuery"+(g+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===m.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!m.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return!("object"!==m.type(e)||e.nodeType||m.isWindow(e)||e.constructor&&!h.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[d.call(e)]||"object":typeof e},globalEval:function(e){var t,r=eval;(e=m.trim(e))&&(1===e.indexOf("use strict")?((t=f.createElement("script")).text=e,f.head.appendChild(t).parentNode.removeChild(t)):r(e))},camelCase:function(e){return e.replace(v,"ms-").replace(b,_)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i=0,n=e.length,s=w(e);if(r){if(s)for(;i<n&&!1!==t.apply(e[i],r);i++);else for(i in e)if(!1===t.apply(e[i],r))break}else if(s)for(;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(y,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(w(Object(e))?m.merge(r,"string"==typeof e?[e]:e):l.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:u.call(t,e,r)},merge:function(e,t){for(var r=+t.length,i=0,n=e.length;i<r;i++)e[n++]=t[i];return e.length=n,e},grep:function(e,t,r){for(var i=[],n=0,s=e.length,o=!r;n<s;n++)!t(e[n],n)!==o&&i.push(e[n]);return i},map:function(e,t,r){var i,n=0,s=e.length,o=[];if(w(e))for(;n<s;n++)null!=(i=t(e[n],n,r))&&o.push(i);else for(n in e)null!=(i=t(e[n],n,r))&&o.push(i);return a.apply([],o)},guid:1,proxy:function(e,t){var r,i,n;if("string"==typeof t&&(r=e[t],t=e,e=r),m.isFunction(e))return i=o.call(arguments,2),n=function(){return e.apply(t||this,i.concat(o.call(arguments)))},n.guid=e.guid=e.guid||m.guid++,n},now:Date.now,support:p}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){c["[object "+t+"]"]=t.toLowerCase()}));var P=function(e){var t,r,i,n,s,o,a,l,u,c,d,h,p,f,g,m,y,v,b,_="sizzle"+1*new Date,w=e.document,P=0,A=0,S=oe(),x=oe(),C=oe(),O=function(e,t){return e===t&&(d=!0),0},k=1<<31,E={}.hasOwnProperty,T=[],I=T.pop,D=T.push,R=T.push,j=T.slice,Z=function(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",M=L.replace("w","w#"),U="\\["+F+"*("+L+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+F+"*\\]",$=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",z=new RegExp(F+"+","g"),H=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),J=new RegExp("^"+F+"*,"+F+"*"),q=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),V=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),B=new RegExp($),W=new RegExp("^"+M+"$"),G={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L.replace("w","w*")+")"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,re=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),ie=function(e,t,r){var i="0x"+t-65536;return i!=i||r?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ne=function(){h()};try{R.apply(T=j.call(w.childNodes),w.childNodes),T[w.childNodes.length].nodeType}catch(e){R={apply:T.length?function(e,t){D.apply(e,j.call(t))}:function(e,t){for(var r=e.length,i=0;e[r++]=t[i++];);e.length=r-1}}}function se(e,t,i,n){var s,a,u,c,d,f,y,v,P,A;if((t?t.ownerDocument||t:w)!==p&&h(t),i=i||[],c=(t=t||p).nodeType,"string"!=typeof e||!e||1!==c&&9!==c&&11!==c)return i;if(!n&&g){if(11!==c&&(s=Q.exec(e)))if(u=s[1]){if(9===c){if(!(a=t.getElementById(u))||!a.parentNode)return i;if(a.id===u)return i.push(a),i}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(u))&&b(t,a)&&a.id===u)return i.push(a),i}else{if(s[2])return R.apply(i,t.getElementsByTagName(e)),i;if((u=s[3])&&r.getElementsByClassName)return R.apply(i,t.getElementsByClassName(u)),i}if(r.qsa&&(!m||!m.test(e))){if(v=y=_,P=t,A=1!==c&&e,1===c&&"object"!==t.nodeName.toLowerCase()){for(f=o(e),(y=t.getAttribute("id"))?v=y.replace(te,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",d=f.length;d--;)f[d]=v+me(f[d]);P=ee.test(e)&&fe(t.parentNode)||t,A=f.join(",")}if(A)try{return R.apply(i,P.querySelectorAll(A)),i}catch(e){}finally{y||t.removeAttribute("id")}}}return l(e.replace(H,"$1"),t,i,n)}function oe(){var e=[];return function t(r,n){return e.push(r+" ")>i.cacheLength&&delete t[e.shift()],t[r+" "]=n}}function ae(e){return e[_]=!0,e}function le(e){var t=p.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var r=e.split("|"),n=e.length;n--;)i.attrHandle[r[n]]=t}function ce(e,t){var r=t&&e,i=r&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||k)-(~e.sourceIndex||k);if(i)return i;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function pe(e){return ae((function(t){return t=+t,ae((function(r,i){for(var n,s=e([],r.length,t),o=s.length;o--;)r[n=s[o]]&&(r[n]=!(i[n]=r[n]))}))}))}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in r=se.support={},s=se.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=se.setDocument=function(e){var t,n,o=e?e.ownerDocument||e:w;return o!==p&&9===o.nodeType&&o.documentElement?(p=o,f=o.documentElement,(n=o.defaultView)&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",ne,!1):n.attachEvent&&n.attachEvent("onunload",ne)),g=!s(o),r.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),r.getElementsByTagName=le((function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length})),r.getElementsByClassName=Y.test(o.getElementsByClassName),r.getById=le((function(e){return f.appendChild(e).id=_,!o.getElementsByName||!o.getElementsByName(_).length})),r.getById?(i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}},i.filter.ID=function(e){var t=e.replace(re,ie);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(re,ie);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}}),i.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,i=[],n=0,s=t.getElementsByTagName(e);if("*"===e){for(;r=s[n++];)1===r.nodeType&&i.push(r);return i}return s},i.find.CLASS=r.getElementsByClassName&&function(e,t){if(g)return t.getElementsByClassName(e)},y=[],m=[],(r.qsa=Y.test(o.querySelectorAll))&&(le((function(e){f.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+N+")"),e.querySelectorAll("[id~="+_+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||m.push(".#.+[+~]")})),le((function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(r.matchesSelector=Y.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&le((function(e){r.disconnectedMatch=v.call(e,"div"),v.call(e,"[s!='']:x"),y.push("!=",$)})),m=m.length&&new RegExp(m.join("|")),y=y.length&&new RegExp(y.join("|")),t=Y.test(f.compareDocumentPosition),b=t||Y.test(f.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},O=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===o||e.ownerDocument===w&&b(w,e)?-1:t===o||t.ownerDocument===w&&b(w,t)?1:c?Z(c,e)-Z(c,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var r,i=0,n=e.parentNode,s=t.parentNode,a=[e],l=[t];if(!n||!s)return e===o?-1:t===o?1:n?-1:s?1:c?Z(c,e)-Z(c,t):0;if(n===s)return ce(e,t);for(r=e;r=r.parentNode;)a.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;a[i]===l[i];)i++;return i?ce(a[i],l[i]):a[i]===w?-1:l[i]===w?1:0},o):p},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']"),r.matchesSelector&&g&&(!y||!y.test(t))&&(!m||!m.test(t)))try{var i=v.call(e,t);if(i||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return se(t,p,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var n=i.attrHandle[t.toLowerCase()],s=n&&E.call(i.attrHandle,t.toLowerCase())?n(e,t,!g):void 0;return void 0!==s?s:r.attributes||!g?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,i=[],n=0,s=0;if(d=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(O),d){for(;t=e[s++];)t===e[s]&&(n=i.push(s));for(;n--;)e.splice(i[n],1)}return c=null,e},n=se.getText=function(e){var t,r="",i=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=n(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[i++];)r+=n(t);return r},i=se.selectors={cacheLength:50,createPseudo:ae,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(re,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(re,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&B.test(r)&&(t=o(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(re,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&S(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,r){return function(i){var n=se.attr(i,e);return null==n?"!="===t:!t||(n+="","="===t?n===r:"!="===t?n!==r:"^="===t?r&&0===n.indexOf(r):"*="===t?r&&n.indexOf(r)>-1:"$="===t?r&&n.slice(-r.length)===r:"~="===t?(" "+n.replace(z," ")+" ").indexOf(r)>-1:"|="===t&&(n===r||n.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,i,n){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===n?function(e){return!!e.parentNode}:function(t,r,l){var u,c,d,h,p,f,g=s!==o?"nextSibling":"previousSibling",m=t.parentNode,y=a&&t.nodeName.toLowerCase(),v=!l&&!a;if(m){if(s){for(;g;){for(d=t;d=d[g];)if(a?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&v){for(p=(u=(c=m[_]||(m[_]={}))[e]||[])[0]===P&&u[1],h=u[0]===P&&u[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===t){c[e]=[P,p,h];break}}else if(v&&(u=(t[_]||(t[_]={}))[e])&&u[0]===P)h=u[1];else for(;(d=++p&&d&&d[g]||(h=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++h||(v&&((d[_]||(d[_]={}))[e]=[P,h]),d!==t)););return(h-=n)===i||h%i==0&&h/i>=0}}},PSEUDO:function(e,t){var r,n=i.pseudos[e]||i.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return n[_]?n(t):n.length>1?(r=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ae((function(e,r){for(var i,s=n(e,t),o=s.length;o--;)e[i=Z(e,s[o])]=!(r[i]=s[o])})):function(e){return n(e,0,r)}):n}},pseudos:{not:ae((function(e){var t=[],r=[],i=a(e.replace(H,"$1"));return i[_]?ae((function(e,t,r,n){for(var s,o=i(e,null,n,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))})):function(e,n,s){return t[0]=e,i(t,null,s,r),t[0]=null,!r.pop()}})),has:ae((function(e){return function(t){return se(e,t).length>0}})),contains:ae((function(e){return e=e.replace(re,ie),function(t){return(t.textContent||t.innerText||n(t)).indexOf(e)>-1}})),lang:ae((function(e){return W.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(re,ie).toLowerCase(),function(t){var r;do{if(r=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe((function(){return[0]})),last:pe((function(e,t){return[t-1]})),eq:pe((function(e,t,r){return[r<0?r+t:r]})),even:pe((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:pe((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:pe((function(e,t,r){for(var i=r<0?r+t:r;--i>=0;)e.push(i);return e})),gt:pe((function(e,t,r){for(var i=r<0?r+t:r;++i<t;)e.push(i);return e}))}},i.pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=he(t);function ge(){}function me(e){for(var t=0,r=e.length,i="";t<r;t++)i+=e[t].value;return i}function ye(e,t,r){var i=t.dir,n=r&&"parentNode"===i,s=A++;return t.first?function(t,r,s){for(;t=t[i];)if(1===t.nodeType||n)return e(t,r,s)}:function(t,r,o){var a,l,u=[P,s];if(o){for(;t=t[i];)if((1===t.nodeType||n)&&e(t,r,o))return!0}else for(;t=t[i];)if(1===t.nodeType||n){if((a=(l=t[_]||(t[_]={}))[i])&&a[0]===P&&a[1]===s)return u[2]=a[2];if(l[i]=u,u[2]=e(t,r,o))return!0}}}function ve(e){return e.length>1?function(t,r,i){for(var n=e.length;n--;)if(!e[n](t,r,i))return!1;return!0}:e[0]}function be(e,t,r,i,n){for(var s,o=[],a=0,l=e.length,u=null!=t;a<l;a++)(s=e[a])&&(r&&!r(s,i,n)||(o.push(s),u&&t.push(a)));return o}function _e(e,t,r,i,n,s){return i&&!i[_]&&(i=_e(i)),n&&!n[_]&&(n=_e(n,s)),ae((function(s,o,a,l){var u,c,d,h=[],p=[],f=o.length,g=s||function(e,t,r){for(var i=0,n=t.length;i<n;i++)se(e,t[i],r);return r}(t||"*",a.nodeType?[a]:a,[]),m=!e||!s&&t?g:be(g,h,e,a,l),y=r?n||(s?e:f||i)?[]:o:m;if(r&&r(m,y,a,l),i)for(u=be(y,p),i(u,[],a,l),c=u.length;c--;)(d=u[c])&&(y[p[c]]=!(m[p[c]]=d));if(s){if(n||e){if(n){for(u=[],c=y.length;c--;)(d=y[c])&&u.push(m[c]=d);n(null,y=[],u,l)}for(c=y.length;c--;)(d=y[c])&&(u=n?Z(s,d):h[c])>-1&&(s[u]=!(o[u]=d))}}else y=be(y===o?y.splice(f,y.length):y),n?n(null,o,y,l):R.apply(o,y)}))}function we(e){for(var t,r,n,s=e.length,o=i.relative[e[0].type],a=o||i.relative[" "],l=o?1:0,c=ye((function(e){return e===t}),a,!0),d=ye((function(e){return Z(t,e)>-1}),a,!0),h=[function(e,r,i){var n=!o&&(i||r!==u)||((t=r).nodeType?c(e,r,i):d(e,r,i));return t=null,n}];l<s;l++)if(r=i.relative[e[l].type])h=[ye(ve(h),r)];else{if((r=i.filter[e[l].type].apply(null,e[l].matches))[_]){for(n=++l;n<s&&!i.relative[e[n].type];n++);return _e(l>1&&ve(h),l>1&&me(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(H,"$1"),r,l<n&&we(e.slice(l,n)),n<s&&we(e=e.slice(n)),n<s&&me(e))}h.push(r)}return ve(h)}return ge.prototype=i.filters=i.pseudos,i.setFilters=new ge,o=se.tokenize=function(e,t){var r,n,s,o,a,l,u,c=x[e+" "];if(c)return t?0:c.slice(0);for(a=e,l=[],u=i.preFilter;a;){for(o in r&&!(n=J.exec(a))||(n&&(a=a.slice(n[0].length)||a),l.push(s=[])),r=!1,(n=q.exec(a))&&(r=n.shift(),s.push({value:r,type:n[0].replace(H," ")}),a=a.slice(r.length)),i.filter)!(n=G[o].exec(a))||u[o]&&!(n=u[o](n))||(r=n.shift(),s.push({value:r,type:o,matches:n}),a=a.slice(r.length));if(!r)break}return t?a.length:a?se.error(e):x(e,l).slice(0)},a=se.compile=function(e,t){var r,n=[],s=[],a=C[e+" "];if(!a){for(t||(t=o(e)),r=t.length;r--;)(a=we(t[r]))[_]?n.push(a):s.push(a);a=C(e,function(e,t){var r=t.length>0,n=e.length>0,s=function(s,o,a,l,c){var d,h,f,g=0,m="0",y=s&&[],v=[],b=u,_=s||n&&i.find.TAG("*",c),w=P+=null==b?1:Math.random()||.1,A=_.length;for(c&&(u=o!==p&&o);m!==A&&null!=(d=_[m]);m++){if(n&&d){for(h=0;f=e[h++];)if(f(d,o,a)){l.push(d);break}c&&(P=w)}r&&((d=!f&&d)&&g--,s&&y.push(d))}if(g+=m,r&&m!==g){for(h=0;f=t[h++];)f(y,v,o,a);if(s){if(g>0)for(;m--;)y[m]||v[m]||(v[m]=I.call(l));v=be(v)}R.apply(l,v),c&&!s&&v.length>0&&g+t.length>1&&se.uniqueSort(l)}return c&&(P=w,u=b),y};return r?ae(s):s}(s,n)),a.selector=e}return a},l=se.select=function(e,t,n,s){var l,u,c,d,h,p="function"==typeof e&&e,f=!s&&o(e=p.selector||e);if(n=n||[],1===f.length){if((u=f[0]=f[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&r.getById&&9===t.nodeType&&g&&i.relative[u[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(re,ie),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(l=G.needsContext.test(e)?0:u.length;l--&&(c=u[l],!i.relative[d=c.type]);)if((h=i.find[d])&&(s=h(c.matches[0].replace(re,ie),ee.test(u[0].type)&&fe(t.parentNode)||t))){if(u.splice(l,1),!(e=s.length&&me(u)))return R.apply(n,s),n;break}}return(p||a(e,f))(s,t,!g,n,ee.test(e)&&fe(t.parentNode)||t),n},r.sortStable=_.split("").sort(O).join("")===_,r.detectDuplicates=!!d,h(),r.sortDetached=le((function(e){return 1&e.compareDocumentPosition(p.createElement("div"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ue("type|href|height|width",(function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),r.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ue("value",(function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||ue(N,(function(e,t,r){var i;if(!r)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),se}(i);m.find=P,m.expr=P.selectors,m.expr[":"]=m.expr.pseudos,m.unique=P.uniqueSort,m.text=P.getText,m.isXMLDoc=P.isXML,m.contains=P.contains;var A=m.expr.match.needsContext,S=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,x=/^.[^:#\[\.,]*$/;function C(e,t,r){if(m.isFunction(t))return m.grep(e,(function(e,i){return!!t.call(e,i,e)!==r}));if(t.nodeType)return m.grep(e,(function(e){return e===t!==r}));if("string"==typeof t){if(x.test(t))return m.filter(t,e,r);t=m.filter(t,e)}return m.grep(e,(function(e){return u.call(t,e)>=0!==r}))}m.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?m.find.matchesSelector(i,e)?[i]:[]:m.find.matches(e,m.grep(t,(function(e){return 1===e.nodeType})))},m.fn.extend({find:function(e){var t,r=this.length,i=[],n=this;if("string"!=typeof e)return this.pushStack(m(e).filter((function(){for(t=0;t<r;t++)if(m.contains(n[t],this))return!0})));for(t=0;t<r;t++)m.find(e,n[t],i);return(i=this.pushStack(r>1?m.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&A.test(e)?m(e):e||[],!1).length}});var O,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:k.exec(e))||!r[1]&&t)return!t||t.jquery?(t||O).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof m?t[0]:t,m.merge(this,m.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:f,!0)),S.test(r[1])&&m.isPlainObject(t))for(r in t)m.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=f.getElementById(r[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=f,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):m.isFunction(e)?void 0!==O.ready?O.ready(e):e(m):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),m.makeArray(e,this))}).prototype=m.fn,O=m(f);var E=/^(?:parents|prev(?:Until|All))/,T={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}m.extend({dir:function(e,t,r){for(var i=[],n=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&m(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r}}),m.fn.extend({has:function(e){var t=m(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(m.contains(this,t[e]))return!0}))},closest:function(e,t){for(var r,i=0,n=this.length,s=[],o=A.test(e)||"string"!=typeof e?m(e,t||this.context):0;i<n;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(o?o.index(r)>-1:1===r.nodeType&&m.find.matchesSelector(r,e))){s.push(r);break}return this.pushStack(s.length>1?m.unique(s):s)},index:function(e){return e?"string"==typeof e?u.call(m(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(m.unique(m.merge(this.get(),m(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),m.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return m.dir(e,"parentNode")},parentsUntil:function(e,t,r){return m.dir(e,"parentNode",r)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return m.dir(e,"nextSibling")},prevAll:function(e){return m.dir(e,"previousSibling")},nextUntil:function(e,t,r){return m.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return m.dir(e,"previousSibling",r)},siblings:function(e){return m.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return m.sibling(e.firstChild)},contents:function(e){return e.contentDocument||m.merge([],e.childNodes)}},(function(e,t){m.fn[e]=function(r,i){var n=m.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(n=m.filter(i,n)),this.length>1&&(T[e]||m.unique(n),E.test(e)&&n.reverse()),this.pushStack(n)}}));var D,R=/\S+/g,j={};function Z(){f.removeEventListener("DOMContentLoaded",Z,!1),i.removeEventListener("load",Z,!1),m.ready()}m.Callbacks=function(e){e="string"==typeof e?j[e]||function(e){var t=j[e]={};return m.each(e.match(R)||[],(function(e,r){t[r]=!0})),t}(e):m.extend({},e);var t,r,i,n,s,o,a=[],l=!e.once&&[],u=function(d){for(t=e.memory&&d,r=!0,o=n||0,n=0,s=a.length,i=!0;a&&o<s;o++)if(!1===a[o].apply(d[0],d[1])&&e.stopOnFalse){t=!1;break}i=!1,a&&(l?l.length&&u(l.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var r=a.length;!function t(r){m.each(r,(function(r,i){var n=m.type(i);"function"===n?e.unique&&c.has(i)||a.push(i):i&&i.length&&"string"!==n&&t(i)}))}(arguments),i?s=a.length:t&&(n=r,u(t))}return this},remove:function(){return a&&m.each(arguments,(function(e,t){for(var r;(r=m.inArray(t,a,r))>-1;)a.splice(r,1),i&&(r<=s&&s--,r<=o&&o--)})),this},has:function(e){return e?m.inArray(e,a)>-1:!(!a||!a.length)},empty:function(){return a=[],s=0,this},disable:function(){return a=l=t=void 0,this},disabled:function(){return!a},lock:function(){return l=void 0,t||c.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!a||r&&!l||(t=[e,(t=t||[]).slice?t.slice():t],i?l.push(t):u(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},m.extend({Deferred:function(e){var t=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var e=arguments;return m.Deferred((function(r){m.each(t,(function(t,s){var o=m.isFunction(e[t])&&e[t];n[s[1]]((function(){var e=o&&o.apply(this,arguments);e&&m.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[s[0]+"With"](this===i?r.promise():this,o?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?m.extend(e,i):i}},n={};return i.pipe=i.then,m.each(t,(function(e,s){var o=s[2],a=s[3];i[s[1]]=o.add,a&&o.add((function(){r=a}),t[1^e][2].disable,t[2][2].lock),n[s[0]]=function(){return n[s[0]+"With"](this===n?i:this,arguments),this},n[s[0]+"With"]=o.fireWith})),i.promise(n),e&&e.call(n,n),n},when:function(e){var t,r,i,n=0,s=o.call(arguments),a=s.length,l=1!==a||e&&m.isFunction(e.promise)?a:0,u=1===l?e:m.Deferred(),c=function(e,r,i){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,i===t?u.notifyWith(r,i):--l||u.resolveWith(r,i)}};if(a>1)for(t=new Array(a),r=new Array(a),i=new Array(a);n<a;n++)s[n]&&m.isFunction(s[n].promise)?s[n].promise().done(c(n,i,s)).fail(u.reject).progress(c(n,r,t)):--l;return l||u.resolveWith(i,s),u.promise()}}),m.fn.ready=function(e){return m.ready.promise().done(e),this},m.extend({isReady:!1,readyWait:1,holdReady:function(e){e?m.readyWait++:m.ready(!0)},ready:function(e){(!0===e?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==e&&--m.readyWait>0||(D.resolveWith(f,[m]),m.fn.triggerHandler&&(m(f).triggerHandler("ready"),m(f).off("ready"))))}}),m.ready.promise=function(e){return D||(D=m.Deferred(),"complete"===f.readyState?setTimeout(m.ready):(f.addEventListener("DOMContentLoaded",Z,!1),i.addEventListener("load",Z,!1))),D.promise(e)},m.ready.promise();var N=m.access=function(e,t,r,i,n,s,o){var a=0,l=e.length,u=null==r;if("object"===m.type(r))for(a in n=!0,r)m.access(e,t,a,r[a],!0,s,o);else if(void 0!==i&&(n=!0,m.isFunction(i)||(o=!0),u&&(o?(t.call(e,i),t=null):(u=t,t=function(e,t,r){return u.call(m(e),r)})),t))for(;a<l;a++)t(e[a],r,o?i:i.call(e[a],a,t(e[a],r)));return n?e:u?t.call(e):l?t(e[0],r):s};function F(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=m.expando+F.uid++}m.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},F.uid=1,F.accepts=m.acceptData,F.prototype={key:function(e){if(!F.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=F.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,m.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,n=this.key(e),s=this.cache[n];if("string"==typeof t)s[t]=r;else if(m.isEmptyObject(s))m.extend(this.cache[n],t);else for(i in t)s[i]=t[i];return s},get:function(e,t){var r=this.cache[this.key(e)];return void 0===t?r:r[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?void 0!==(i=this.get(e,t))?i:this.get(e,m.camelCase(t)):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,n,s=this.key(e),o=this.cache[s];if(void 0===t)this.cache[s]={};else{m.isArray(t)?i=t.concat(t.map(m.camelCase)):(n=m.camelCase(t),i=t in o?[t,n]:(i=n)in o?[i]:i.match(R)||[]),r=i.length;for(;r--;)delete o[i[r]]}},hasData:function(e){return!m.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var L=new F,M=new F,U=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$=/([A-Z])/g;function z(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace($,"-$1").toLowerCase(),"string"==typeof(r=e.getAttribute(i))){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:U.test(r)?m.parseJSON(r):r)}catch(e){}M.set(e,t,r)}else r=void 0;return r}m.extend({hasData:function(e){return M.hasData(e)||L.hasData(e)},data:function(e,t,r){return M.access(e,t,r)},removeData:function(e,t){M.remove(e,t)},_data:function(e,t,r){return L.access(e,t,r)},_removeData:function(e,t){L.remove(e,t)}}),m.fn.extend({data:function(e,t){var r,i,n,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(n=M.get(s),1===s.nodeType&&!L.get(s,"hasDataAttrs"))){for(r=o.length;r--;)o[r]&&0===(i=o[r].name).indexOf("data-")&&(i=m.camelCase(i.slice(5)),z(s,i,n[i]));L.set(s,"hasDataAttrs",!0)}return n}return"object"==typeof e?this.each((function(){M.set(this,e)})):N(this,(function(t){var r,i=m.camelCase(e);if(s&&void 0===t)return void 0!==(r=M.get(s,e))||void 0!==(r=M.get(s,i))||void 0!==(r=z(s,i,void 0))?r:void 0;this.each((function(){var r=M.get(this,i);M.set(this,i,t),-1!==e.indexOf("-")&&void 0!==r&&M.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){M.remove(this,e)}))}}),m.extend({queue:function(e,t,r){var i;if(e)return t=(t||"fx")+"queue",i=L.get(e,t),r&&(!i||m.isArray(r)?i=L.access(e,t,m.makeArray(r)):i.push(r)),i||[]},dequeue:function(e,t){t=t||"fx";var r=m.queue(e,t),i=r.length,n=r.shift(),s=m._queueHooks(e,t);"inprogress"===n&&(n=r.shift(),i--),n&&("fx"===t&&r.unshift("inprogress"),delete s.stop,n.call(e,(function(){m.dequeue(e,t)}),s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return L.get(e,r)||L.access(e,r,{empty:m.Callbacks("once memory").add((function(){L.remove(e,[t+"queue",r])}))})}}),m.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?m.queue(this[0],e):void 0===t?this:this.each((function(){var r=m.queue(this,e,t);m._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&m.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){m.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,n=m.Deferred(),s=this,o=this.length,a=function(){--i||n.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(r=L.get(s[o],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(a));return a(),n.promise(t)}});var H,J,q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=["Top","Right","Bottom","Left"],B=function(e,t){return e=t||e,"none"===m.css(e,"display")||!m.contains(e.ownerDocument,e)},W=/^(?:checkbox|radio)$/i;H=f.createDocumentFragment().appendChild(f.createElement("div")),(J=f.createElement("input")).setAttribute("type","radio"),J.setAttribute("checked","checked"),J.setAttribute("name","t"),H.appendChild(J),p.checkClone=H.cloneNode(!0).cloneNode(!0).lastChild.checked,H.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!H.cloneNode(!0).lastChild.defaultValue;var G="undefined";p.focusinBubbles="onfocusin"in i;var X=/^key/,K=/^(?:mouse|pointer|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Q=/^([^.]*)(?:\.(.+)|)$/;function ee(){return!0}function te(){return!1}function re(){try{return f.activeElement}catch(e){}}m.event={global:{},add:function(e,t,r,i,n){var s,o,a,l,u,c,d,h,p,f,g,y=L.get(e);if(y)for(r.handler&&(r=(s=r).handler,n=s.selector),r.guid||(r.guid=m.guid++),(l=y.events)||(l=y.events={}),(o=y.handle)||(o=y.handle=function(t){return typeof m!==G&&m.event.triggered!==t.type?m.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(R)||[""]).length;u--;)p=g=(a=Q.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),p&&(d=m.event.special[p]||{},p=(n?d.delegateType:d.bindType)||p,d=m.event.special[p]||{},c=m.extend({type:p,origType:g,data:i,handler:r,guid:r.guid,selector:n,needsContext:n&&m.expr.match.needsContext.test(n),namespace:f.join(".")},s),(h=l[p])||((h=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,f,o)||e.addEventListener&&e.addEventListener(p,o,!1)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),n?h.splice(h.delegateCount++,0,c):h.push(c),m.event.global[p]=!0)},remove:function(e,t,r,i,n){var s,o,a,l,u,c,d,h,p,f,g,y=L.hasData(e)&&L.get(e);if(y&&(l=y.events)){for(u=(t=(t||"").match(R)||[""]).length;u--;)if(p=g=(a=Q.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),p){for(d=m.event.special[p]||{},h=l[p=(i?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;s--;)c=h[s],!n&&g!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(s,1),c.selector&&h.delegateCount--,d.remove&&d.remove.call(e,c));o&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,y.handle)||m.removeEvent(e,p,y.handle),delete l[p])}else for(p in l)m.event.remove(e,p+t[u],r,i,!0);m.isEmptyObject(l)&&(delete y.handle,L.remove(e,"events"))}},trigger:function(e,t,r,n){var s,o,a,l,u,c,d,p=[r||f],g=h.call(e,"type")?e.type:e,y=h.call(e,"namespace")?e.namespace.split("."):[];if(o=a=r=r||f,3!==r.nodeType&&8!==r.nodeType&&!Y.test(g+m.event.triggered)&&(g.indexOf(".")>=0&&(y=g.split("."),g=y.shift(),y.sort()),u=g.indexOf(":")<0&&"on"+g,(e=e[m.expando]?e:new m.Event(g,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=y.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:m.makeArray(t,[e]),d=m.event.special[g]||{},n||!d.trigger||!1!==d.trigger.apply(r,t))){if(!n&&!d.noBubble&&!m.isWindow(r)){for(l=d.delegateType||g,Y.test(l+g)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(r.ownerDocument||f)&&p.push(a.defaultView||a.parentWindow||i)}for(s=0;(o=p[s++])&&!e.isPropagationStopped();)e.type=s>1?l:d.bindType||g,(c=(L.get(o,"events")||{})[e.type]&&L.get(o,"handle"))&&c.apply(o,t),(c=u&&o[u])&&c.apply&&m.acceptData(o)&&(e.result=c.apply(o,t),!1===e.result&&e.preventDefault());return e.type=g,n||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),t)||!m.acceptData(r)||u&&m.isFunction(r[g])&&!m.isWindow(r)&&((a=r[u])&&(r[u]=null),m.event.triggered=g,r[g](),m.event.triggered=void 0,a&&(r[u]=a)),e.result}},dispatch:function(e){e=m.event.fix(e);var t,r,i,n,s,a,l=o.call(arguments),u=(L.get(this,"events")||{})[e.type]||[],c=m.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(a=m.event.handlers.call(this,e,u),t=0;(n=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=n.elem,r=0;(s=n.handlers[r++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(s.namespace)||(e.handleObj=s,e.data=s.data,void 0!==(i=((m.event.special[s.origType]||{}).handle||s.handler).apply(n.elem,l))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,n,s,o=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==e.type){for(i=[],r=0;r<a;r++)void 0===i[n=(s=t[r]).selector+" "]&&(i[n]=s.needsContext?m(n,this).index(l)>=0:m.find(n,this,null,[l]).length),i[n]&&i.push(s);i.length&&o.push({elem:l,handlers:i})}return a<t.length&&o.push({elem:this,handlers:t.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var r,i,n,s=t.button;return null==e.pageX&&null!=t.clientX&&(i=(r=e.target.ownerDocument||f).documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[m.expando])return e;var t,r,i,n=e.type,s=e,o=this.fixHooks[n];for(o||(this.fixHooks[n]=o=K.test(n)?this.mouseHooks:X.test(n)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,e=new m.Event(s),t=i.length;t--;)e[r=i[t]]=s[r];return e.target||(e.target=f),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==re()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===re()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&m.nodeName(this,"input"))return this.click(),!1},_default:function(e){return m.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var n=m.extend(new m.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?m.event.trigger(n,null,t):m.event.dispatch.call(t,n),n.isDefaultPrevented()&&r.preventDefault()}},m.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r,!1)},m.Event=function(e,t){if(!(this instanceof m.Event))return new m.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ee:te):this.type=e,t&&m.extend(this,t),this.timeStamp=e&&e.timeStamp||m.now(),this[m.expando]=!0},m.Event.prototype={isDefaultPrevented:te,isPropagationStopped:te,isImmediatePropagationStopped:te,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ee,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ee,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ee,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){m.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=e.relatedTarget,n=e.handleObj;return i&&(i===this||m.contains(this,i))||(e.type=n.origType,r=n.handler.apply(this,arguments),e.type=t),r}}})),p.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},(function(e,t){var r=function(e){m.event.simulate(t,e.target,m.event.fix(e),!0)};m.event.special[t]={setup:function(){var i=this.ownerDocument||this,n=L.access(i,t);n||i.addEventListener(e,r,!0),L.access(i,t,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this,n=L.access(i,t)-1;n?L.access(i,t,n):(i.removeEventListener(e,r,!0),L.remove(i,t))}}})),m.fn.extend({on:function(e,t,r,i,n){var s,o;if("object"==typeof e){for(o in"string"!=typeof t&&(r=r||t,t=void 0),e)this.on(o,t,r,e[o],n);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),!1===i)i=te;else if(!i)return this;return 1===n&&(s=i,i=function(e){return m().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=m.guid++)),this.each((function(){m.event.add(this,e,i,r,t)}))},one:function(e,t,r,i){return this.on(e,t,r,i,1)},off:function(e,t,r){var i,n;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,m(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=te),this.each((function(){m.event.remove(this,e,r,t)}))},trigger:function(e,t){return this.each((function(){m.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return m.event.trigger(e,t,r,!0)}});var ie=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ne=/<([\w:]+)/,se=/<|&#?\w+;/,oe=/<(?:script|style|link)/i,ae=/checked\s*(?:[^=]|=\s*.checked.)/i,le=/^$|\/(?:java|ecma)script/i,ue=/^true\/(.*)/,ce=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,de={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function he(e,t){return m.nodeName(e,"table")&&m.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function fe(e){var t=ue.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ge(e,t){for(var r=0,i=e.length;r<i;r++)L.set(e[r],"globalEval",!t||L.get(t[r],"globalEval"))}function me(e,t){var r,i,n,s,o,a,l,u;if(1===t.nodeType){if(L.hasData(e)&&(s=L.access(e),o=L.set(t,s),u=s.events))for(n in delete o.handle,o.events={},u)for(r=0,i=u[n].length;r<i;r++)m.event.add(t,n,u[n][r]);M.hasData(e)&&(a=M.access(e),l=m.extend({},a),M.set(t,l))}}function ye(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&m.nodeName(e,t)?m.merge([e],r):r}de.optgroup=de.option,de.tbody=de.tfoot=de.colgroup=de.caption=de.thead,de.th=de.td,m.extend({clone:function(e,t,r){var i,n,s,o,a,l,u,c=e.cloneNode(!0),d=m.contains(e.ownerDocument,e);if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||m.isXMLDoc(e)))for(o=ye(c),i=0,n=(s=ye(e)).length;i<n;i++)a=s[i],l=o[i],u=void 0,"input"===(u=l.nodeName.toLowerCase())&&W.test(a.type)?l.checked=a.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=a.defaultValue);if(t)if(r)for(s=s||ye(e),o=o||ye(c),i=0,n=s.length;i<n;i++)me(s[i],o[i]);else me(e,c);return(o=ye(c,"script")).length>0&&ge(o,!d&&ye(e,"script")),c},buildFragment:function(e,t,r,i){for(var n,s,o,a,l,u,c=t.createDocumentFragment(),d=[],h=0,p=e.length;h<p;h++)if((n=e[h])||0===n)if("object"===m.type(n))m.merge(d,n.nodeType?[n]:n);else if(se.test(n)){for(s=s||c.appendChild(t.createElement("div")),o=(ne.exec(n)||["",""])[1].toLowerCase(),a=de[o]||de._default,s.innerHTML=a[1]+n.replace(ie,"<$1></$2>")+a[2],u=a[0];u--;)s=s.lastChild;m.merge(d,s.childNodes),(s=c.firstChild).textContent=""}else d.push(t.createTextNode(n));for(c.textContent="",h=0;n=d[h++];)if((!i||-1===m.inArray(n,i))&&(l=m.contains(n.ownerDocument,n),s=ye(c.appendChild(n),"script"),l&&ge(s),r))for(u=0;n=s[u++];)le.test(n.type||"")&&r.push(n);return c},cleanData:function(e){for(var t,r,i,n,s=m.event.special,o=0;void 0!==(r=e[o]);o++){if(m.acceptData(r)&&(n=r[L.expando])&&(t=L.cache[n])){if(t.events)for(i in t.events)s[i]?m.event.remove(r,i):m.removeEvent(r,i,t.handle);L.cache[n]&&delete L.cache[n]}delete M.cache[r[M.expando]]}}}),m.fn.extend({text:function(e){return N(this,(function(e){return void 0===e?m.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return this.domManip(arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||he(this,e).appendChild(e)}))},prepend:function(){return this.domManip(arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=he(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},remove:function(e,t){for(var r,i=e?m.filter(e,this):this,n=0;null!=(r=i[n]);n++)t||1!==r.nodeType||m.cleanData(ye(r)),r.parentNode&&(t&&m.contains(r.ownerDocument,r)&&ge(ye(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(m.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return m.clone(this,e,t)}))},html:function(e){return N(this,(function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!oe.test(e)&&!de[(ne.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ie,"<$1></$2>");try{for(;r<i;r++)1===(t=this[r]||{}).nodeType&&(m.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,(function(t){e=this.parentNode,m.cleanData(ye(this)),e&&e.replaceChild(t,this)})),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=a.apply([],e);var r,i,n,s,o,l,u=0,c=this.length,d=this,h=c-1,f=e[0],g=m.isFunction(f);if(g||c>1&&"string"==typeof f&&!p.checkClone&&ae.test(f))return this.each((function(r){var i=d.eq(r);g&&(e[0]=f.call(this,r,i.html())),i.domManip(e,t)}));if(c&&(i=(r=m.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===r.childNodes.length&&(r=i),i)){for(s=(n=m.map(ye(r,"script"),pe)).length;u<c;u++)o=r,u!==h&&(o=m.clone(o,!0,!0),s&&m.merge(n,ye(o,"script"))),t.call(this[u],o,u);if(s)for(l=n[n.length-1].ownerDocument,m.map(n,fe),u=0;u<s;u++)o=n[u],le.test(o.type||"")&&!L.access(o,"globalEval")&&m.contains(l,o)&&(o.src?m._evalUrl&&m._evalUrl(o.src):m.globalEval(o.textContent.replace(ce,"")))}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){m.fn[e]=function(e){for(var r,i=[],n=m(e),s=n.length-1,o=0;o<=s;o++)r=o===s?this:this.clone(!0),m(n[o])[t](r),l.apply(i,r.get());return this.pushStack(i)}}));var ve,be={};function _e(e,t){var r,n=m(t.createElement(e)).appendTo(t.body),s=i.getDefaultComputedStyle&&(r=i.getDefaultComputedStyle(n[0]))?r.display:m.css(n[0],"display");return n.detach(),s}function we(e){var t=f,r=be[e];return r||("none"!==(r=_e(e,t))&&r||((t=(ve=(ve||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),r=_e(e,t),ve.detach()),be[e]=r),r}var Pe=/^margin/,Ae=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),Se=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):i.getComputedStyle(e,null)};function xe(e,t,r){var i,n,s,o,a=e.style;return(r=r||Se(e))&&(o=r.getPropertyValue(t)||r[t]),r&&(""!==o||m.contains(e.ownerDocument,e)||(o=m.style(e,t)),Ae.test(o)&&Pe.test(t)&&(i=a.width,n=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=r.width,a.width=i,a.minWidth=n,a.maxWidth=s)),void 0!==o?o+"":o}function Ce(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){var e,t,r=f.documentElement,n=f.createElement("div"),s=f.createElement("div");function o(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(n);var o=i.getComputedStyle(s,null);e="1%"!==o.top,t="4px"===o.width,r.removeChild(n)}s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===s.style.backgroundClip,n.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",n.appendChild(s),i.getComputedStyle&&m.extend(p,{pixelPosition:function(){return o(),e},boxSizingReliable:function(){return null==t&&o(),t},reliableMarginRight:function(){var e,t=s.appendChild(f.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",r.appendChild(n),e=!parseFloat(i.getComputedStyle(t,null).marginRight),r.removeChild(n),s.removeChild(t),e}}))}(),m.swap=function(e,t,r,i){var n,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];for(s in n=r.apply(e,i||[]),t)e.style[s]=o[s];return n};var Oe=/^(none|table(?!-c[ea]).+)/,ke=new RegExp("^("+q+")(.*)$","i"),Ee=new RegExp("^([+-])=("+q+")","i"),Te={position:"absolute",visibility:"hidden",display:"block"},Ie={letterSpacing:"0",fontWeight:"400"},De=["Webkit","O","Moz","ms"];function Re(e,t){if(t in e)return t;for(var r=t[0].toUpperCase()+t.slice(1),i=t,n=De.length;n--;)if((t=De[n]+r)in e)return t;return i}function je(e,t,r){var i=ke.exec(t);return i?Math.max(0,i[1]-(r||0))+(i[2]||"px"):t}function Ze(e,t,r,i,n){for(var s=r===(i?"border":"content")?4:"width"===t?1:0,o=0;s<4;s+=2)"margin"===r&&(o+=m.css(e,r+V[s],!0,n)),i?("content"===r&&(o-=m.css(e,"padding"+V[s],!0,n)),"margin"!==r&&(o-=m.css(e,"border"+V[s]+"Width",!0,n))):(o+=m.css(e,"padding"+V[s],!0,n),"padding"!==r&&(o+=m.css(e,"border"+V[s]+"Width",!0,n)));return o}function Ne(e,t,r){var i=!0,n="width"===t?e.offsetWidth:e.offsetHeight,s=Se(e),o="border-box"===m.css(e,"boxSizing",!1,s);if(n<=0||null==n){if(((n=xe(e,t,s))<0||null==n)&&(n=e.style[t]),Ae.test(n))return n;i=o&&(p.boxSizingReliable()||n===e.style[t]),n=parseFloat(n)||0}return n+Ze(e,t,r||(o?"border":"content"),i,s)+"px"}function Fe(e,t){for(var r,i,n,s=[],o=0,a=e.length;o<a;o++)(i=e[o]).style&&(s[o]=L.get(i,"olddisplay"),r=i.style.display,t?(s[o]||"none"!==r||(i.style.display=""),""===i.style.display&&B(i)&&(s[o]=L.access(i,"olddisplay",we(i.nodeName)))):(n=B(i),"none"===r&&n||L.set(i,"olddisplay",n?r:m.css(i,"display"))));for(o=0;o<a;o++)(i=e[o]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?s[o]||"":"none"));return e}function Le(e,t,r,i,n){return new Le.prototype.init(e,t,r,i,n)}m.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=xe(e,"opacity");return""===r?"1":r}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,s,o,a=m.camelCase(t),l=e.style;if(t=m.cssProps[a]||(m.cssProps[a]=Re(l,a)),o=m.cssHooks[t]||m.cssHooks[a],void 0===r)return o&&"get"in o&&void 0!==(n=o.get(e,!1,i))?n:l[t];"string"==(s=typeof r)&&(n=Ee.exec(r))&&(r=(n[1]+1)*n[2]+parseFloat(m.css(e,t)),s="number"),null!=r&&r==r&&("number"!==s||m.cssNumber[a]||(r+="px"),p.clearCloneStyle||""!==r||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(r=o.set(e,r,i))||(l[t]=r))}},css:function(e,t,r,i){var n,s,o,a=m.camelCase(t);return t=m.cssProps[a]||(m.cssProps[a]=Re(e.style,a)),(o=m.cssHooks[t]||m.cssHooks[a])&&"get"in o&&(n=o.get(e,!0,r)),void 0===n&&(n=xe(e,t,i)),"normal"===n&&t in Ie&&(n=Ie[t]),""===r||r?(s=parseFloat(n),!0===r||m.isNumeric(s)?s||0:n):n}}),m.each(["height","width"],(function(e,t){m.cssHooks[t]={get:function(e,r,i){if(r)return Oe.test(m.css(e,"display"))&&0===e.offsetWidth?m.swap(e,Te,(function(){return Ne(e,t,i)})):Ne(e,t,i)},set:function(e,r,i){var n=i&&Se(e);return je(0,r,i?Ze(e,t,i,"border-box"===m.css(e,"boxSizing",!1,n),n):0)}}})),m.cssHooks.marginRight=Ce(p.reliableMarginRight,(function(e,t){if(t)return m.swap(e,{display:"inline-block"},xe,[e,"marginRight"])})),m.each({margin:"",padding:"",border:"Width"},(function(e,t){m.cssHooks[e+t]={expand:function(r){for(var i=0,n={},s="string"==typeof r?r.split(" "):[r];i<4;i++)n[e+V[i]+t]=s[i]||s[i-2]||s[0];return n}},Pe.test(e)||(m.cssHooks[e+t].set=je)})),m.fn.extend({css:function(e,t){return N(this,(function(e,t,r){var i,n,s={},o=0;if(m.isArray(t)){for(i=Se(e),n=t.length;o<n;o++)s[t[o]]=m.css(e,t[o],!1,i);return s}return void 0!==r?m.style(e,t,r):m.css(e,t)}),e,t,arguments.length>1)},show:function(){return Fe(this,!0)},hide:function(){return Fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){B(this)?m(this).show():m(this).hide()}))}}),m.Tween=Le,Le.prototype={constructor:Le,init:function(e,t,r,i,n,s){this.elem=e,this.prop=r,this.easing=n||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(m.cssNumber[r]?"":"px")},cur:function(){var e=Le.propHooks[this.prop];return e&&e.get?e.get(this):Le.propHooks._default.get(this)},run:function(e){var t,r=Le.propHooks[this.prop];return this.options.duration?this.pos=t=m.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Le.propHooks._default.set(this),this}},Le.prototype.init.prototype=Le.prototype,Le.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=m.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){m.fx.step[e.prop]?m.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[m.cssProps[e.prop]]||m.cssHooks[e.prop])?m.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Le.propHooks.scrollTop=Le.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},m.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},m.fx=Le.prototype.init,m.fx.step={};var Me,Ue,$e=/^(?:toggle|show|hide)$/,ze=new RegExp("^(?:([+-])=|)("+q+")([a-z%]*)$","i"),He=/queueHooks$/,Je=[function(e,t,r){var i,n,s,o,a,l,u,c=this,d={},h=e.style,p=e.nodeType&&B(e),f=L.get(e,"fxshow");for(i in r.queue||(null==(a=m._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always((function(){c.always((function(){a.unqueued--,m.queue(e,"fx").length||a.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===("none"===(u=m.css(e,"display"))?L.get(e,"olddisplay")||we(e.nodeName):u)&&"none"===m.css(e,"float")&&(h.display="inline-block")),r.overflow&&(h.overflow="hidden",c.always((function(){h.overflow=r.overflow[0],h.overflowX=r.overflow[1],h.overflowY=r.overflow[2]}))),t)if(n=t[i],$e.exec(n)){if(delete t[i],s=s||"toggle"===n,n===(p?"hide":"show")){if("show"!==n||!f||void 0===f[i])continue;p=!0}d[i]=f&&f[i]||m.style(e,i)}else u=void 0;if(m.isEmptyObject(d))"inline"===("none"===u?we(e.nodeName):u)&&(h.display=u);else for(i in f?"hidden"in f&&(p=f.hidden):f=L.access(e,"fxshow",{}),s&&(f.hidden=!p),p?m(e).show():c.done((function(){m(e).hide()})),c.done((function(){var t;for(t in L.remove(e,"fxshow"),d)m.style(e,t,d[t])})),d)o=We(p?f[i]:0,i,c),i in f||(f[i]=o.start,p&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}],qe={"*":[function(e,t){var r=this.createTween(e,t),i=r.cur(),n=ze.exec(t),s=n&&n[3]||(m.cssNumber[e]?"":"px"),o=(m.cssNumber[e]||"px"!==s&&+i)&&ze.exec(m.css(r.elem,e)),a=1,l=20;if(o&&o[3]!==s){s=s||o[3],n=n||[],o=+i||1;do{o/=a=a||".5",m.style(r.elem,e,o+s)}while(a!==(a=r.cur()/i)&&1!==a&&--l)}return n&&(o=r.start=+o||+i||0,r.unit=s,r.end=n[1]?o+(n[1]+1)*n[2]:+n[2]),r}]};function Ve(){return setTimeout((function(){Me=void 0})),Me=m.now()}function Be(e,t){var r,i=0,n={height:e};for(t=t?1:0;i<4;i+=2-t)n["margin"+(r=V[i])]=n["padding"+r]=e;return t&&(n.opacity=n.width=e),n}function We(e,t,r){for(var i,n=(qe[t]||[]).concat(qe["*"]),s=0,o=n.length;s<o;s++)if(i=n[s].call(r,t,e))return i}function Ge(e,t,r){var i,n,s=0,o=Je.length,a=m.Deferred().always((function(){delete l.elem})),l=function(){if(n)return!1;for(var t=Me||Ve(),r=Math.max(0,u.startTime+u.duration-t),i=1-(r/u.duration||0),s=0,o=u.tweens.length;s<o;s++)u.tweens[s].run(i);return a.notifyWith(e,[u,i,r]),i<1&&o?r:(a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:m.extend({},t),opts:m.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Me||Ve(),duration:r.duration,tweens:[],createTween:function(t,r){var i=m.Tween(e,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var r=0,i=t?u.tweens.length:0;if(n)return this;for(n=!0;r<i;r++)u.tweens[r].run(1);return t?a.resolveWith(e,[u,t]):a.rejectWith(e,[u,t]),this}}),c=u.props;for(function(e,t){var r,i,n,s,o;for(r in e)if(n=t[i=m.camelCase(r)],s=e[r],m.isArray(s)&&(n=s[1],s=e[r]=s[0]),r!==i&&(e[i]=s,delete e[r]),(o=m.cssHooks[i])&&"expand"in o)for(r in s=o.expand(s),delete e[i],s)r in e||(e[r]=s[r],t[r]=n);else t[i]=n}(c,u.opts.specialEasing);s<o;s++)if(i=Je[s].call(u,e,c,u.opts))return i;return m.map(c,We,u),m.isFunction(u.opts.start)&&u.opts.start.call(e,u),m.fx.timer(m.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}m.Animation=m.extend(Ge,{tweener:function(e,t){m.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,i=0,n=e.length;i<n;i++)r=e[i],qe[r]=qe[r]||[],qe[r].unshift(t)},prefilter:function(e,t){t?Je.unshift(e):Je.push(e)}}),m.speed=function(e,t,r){var i=e&&"object"==typeof e?m.extend({},e):{complete:r||!r&&t||m.isFunction(e)&&e,duration:e,easing:r&&t||t&&!m.isFunction(t)&&t};return i.duration=m.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in m.fx.speeds?m.fx.speeds[i.duration]:m.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){m.isFunction(i.old)&&i.old.call(this),i.queue&&m.dequeue(this,i.queue)},i},m.fn.extend({fadeTo:function(e,t,r,i){return this.filter(B).css("opacity",0).show().end().animate({opacity:t},e,r,i)},animate:function(e,t,r,i){var n=m.isEmptyObject(e),s=m.speed(t,r,i),o=function(){var t=Ge(this,m.extend({},e),s);(n||L.get(this,"finish"))&&t.stop(!0)};return o.finish=o,n||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,n=null!=e&&e+"queueHooks",s=m.timers,o=L.get(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&He.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(r),t=!1,s.splice(n,1));!t&&r||m.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,r=L.get(this),i=r[e+"queue"],n=r[e+"queueHooks"],s=m.timers,o=i?i.length:0;for(r.finish=!0,m.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish}))}}),m.each(["toggle","show","hide"],(function(e,t){var r=m.fn[t];m.fn[t]=function(e,i,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(Be(t,!0),e,i,n)}})),m.each({slideDown:Be("show"),slideUp:Be("hide"),slideToggle:Be("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){m.fn[e]=function(e,r,i){return this.animate(t,e,r,i)}})),m.timers=[],m.fx.tick=function(){var e,t=0,r=m.timers;for(Me=m.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||m.fx.stop(),Me=void 0},m.fx.timer=function(e){m.timers.push(e),e()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){Ue||(Ue=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(Ue),Ue=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(e,t){return e=m.fx&&m.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var i=setTimeout(t,e);r.stop=function(){clearTimeout(i)}}))},function(){var e=f.createElement("input"),t=f.createElement("select"),r=t.appendChild(f.createElement("option"));e.type="checkbox",p.checkOn=""!==e.value,p.optSelected=r.selected,t.disabled=!0,p.optDisabled=!r.disabled,(e=f.createElement("input")).value="t",e.type="radio",p.radioValue="t"===e.value}();var Xe,Ke=m.expr.attrHandle;m.fn.extend({attr:function(e,t){return N(this,m.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){m.removeAttr(this,e)}))}}),m.extend({attr:function(e,t,r){var i,n,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===G?m.prop(e,t,r):(1===s&&m.isXMLDoc(e)||(t=t.toLowerCase(),i=m.attrHooks[t]||(m.expr.match.bool.test(t)?Xe:void 0)),void 0===r?i&&"get"in i&&null!==(n=i.get(e,t))?n:null==(n=m.find.attr(e,t))?void 0:n:null!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):void m.removeAttr(e,t))},removeAttr:function(e,t){var r,i,n=0,s=t&&t.match(R);if(s&&1===e.nodeType)for(;r=s[n++];)i=m.propFix[r]||r,m.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&m.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),Xe={set:function(e,t,r){return!1===t?m.removeAttr(e,r):e.setAttribute(r,r),r}},m.each(m.expr.match.bool.source.match(/\w+/g),(function(e,t){var r=Ke[t]||m.find.attr;Ke[t]=function(e,t,i){var n,s;return i||(s=Ke[t],Ke[t]=n,n=null!=r(e,t,i)?t.toLowerCase():null,Ke[t]=s),n}}));var Ye=/^(?:input|select|textarea|button)$/i;m.fn.extend({prop:function(e,t){return N(this,m.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[m.propFix[e]||e]}))}}),m.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,r){var i,n,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return(1!==s||!m.isXMLDoc(e))&&(t=m.propFix[t]||t,n=m.propHooks[t]),void 0!==r?n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:e[t]=r:n&&"get"in n&&null!==(i=n.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||Ye.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),p.optSelected||(m.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){m.propFix[this.toLowerCase()]=this}));var Qe=/[\t\r\n\f]/g;m.fn.extend({addClass:function(e){var t,r,i,n,s,o,a="string"==typeof e&&e,l=0,u=this.length;if(m.isFunction(e))return this.each((function(t){m(this).addClass(e.call(this,t,this.className))}));if(a)for(t=(e||"").match(R)||[];l<u;l++)if(i=1===(r=this[l]).nodeType&&(r.className?(" "+r.className+" ").replace(Qe," "):" ")){for(s=0;n=t[s++];)i.indexOf(" "+n+" ")<0&&(i+=n+" ");o=m.trim(i),r.className!==o&&(r.className=o)}return this},removeClass:function(e){var t,r,i,n,s,o,a=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(m.isFunction(e))return this.each((function(t){m(this).removeClass(e.call(this,t,this.className))}));if(a)for(t=(e||"").match(R)||[];l<u;l++)if(i=1===(r=this[l]).nodeType&&(r.className?(" "+r.className+" ").replace(Qe," "):"")){for(s=0;n=t[s++];)for(;i.indexOf(" "+n+" ")>=0;)i=i.replace(" "+n+" "," ");o=e?m.trim(i):"",r.className!==o&&(r.className=o)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):m.isFunction(e)?this.each((function(r){m(this).toggleClass(e.call(this,r,this.className,t),t)})):this.each((function(){if("string"===r)for(var t,i=0,n=m(this),s=e.match(R)||[];t=s[i++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else r!==G&&"boolean"!==r||(this.className&&L.set(this,"__className__",this.className),this.className=this.className||!1===e?"":L.get(this,"__className__")||"")}))},hasClass:function(e){for(var t=" "+e+" ",r=0,i=this.length;r<i;r++)if(1===this[r].nodeType&&(" "+this[r].className+" ").replace(Qe," ").indexOf(t)>=0)return!0;return!1}});var et=/\r/g;m.fn.extend({val:function(e){var t,r,i,n=this[0];return arguments.length?(i=m.isFunction(e),this.each((function(r){var n;1===this.nodeType&&(null==(n=i?e.call(this,r,m(this).val()):e)?n="":"number"==typeof n?n+="":m.isArray(n)&&(n=m.map(n,(function(e){return null==e?"":e+""}))),(t=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))}))):n?(t=m.valHooks[n.type]||m.valHooks[n.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(n,"value"))?r:"string"==typeof(r=n.value)?r.replace(et,""):null==r?"":r:void 0}}),m.extend({valHooks:{option:{get:function(e){var t=m.find.attr(e,"value");return null!=t?t:m.trim(m.text(e))}},select:{get:function(e){for(var t,r,i=e.options,n=e.selectedIndex,s="select-one"===e.type||n<0,o=s?null:[],a=s?n+1:i.length,l=n<0?a:s?n:0;l<a;l++)if(((r=i[l]).selected||l===n)&&(p.optDisabled?!r.disabled:null===r.getAttribute("disabled"))&&(!r.parentNode.disabled||!m.nodeName(r.parentNode,"optgroup"))){if(t=m(r).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var r,i,n=e.options,s=m.makeArray(t),o=n.length;o--;)((i=n[o]).selected=m.inArray(i.value,s)>=0)&&(r=!0);return r||(e.selectedIndex=-1),s}}}}),m.each(["radio","checkbox"],(function(){m.valHooks[this]={set:function(e,t){if(m.isArray(t))return e.checked=m.inArray(m(e).val(),t)>=0}},p.checkOn||(m.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){m.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}})),m.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}});var tt=m.now(),rt=/\?/;m.parseJSON=function(e){return JSON.parse(e+"")},m.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+e),t};var it=/#.*$/,nt=/([?&])_=[^&]*/,st=/^(.*?):[ \t]*([^\r\n]*)$/gm,ot=/^(?:GET|HEAD)$/,at=/^\/\//,lt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ut={},ct={},dt="*/".concat("*"),ht=i.location.href,pt=lt.exec(ht.toLowerCase())||[];function ft(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,n=0,s=t.toLowerCase().match(R)||[];if(m.isFunction(r))for(;i=s[n++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function gt(e,t,r,i){var n={},s=e===ct;function o(a){var l;return n[a]=!0,m.each(e[a]||[],(function(e,a){var u=a(t,r,i);return"string"!=typeof u||s||n[u]?s?!(l=u):void 0:(t.dataTypes.unshift(u),o(u),!1)})),l}return o(t.dataTypes[0])||!n["*"]&&o("*")}function mt(e,t){var r,i,n=m.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((n[r]?e:i||(i={}))[r]=t[r]);return i&&m.extend(!0,e,i),e}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ht,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(pt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":dt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?mt(mt(e,m.ajaxSettings),t):mt(m.ajaxSettings,e)},ajaxPrefilter:ft(ut),ajaxTransport:ft(ct),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,n,s,o,a,l,u,c=m.ajaxSetup({},t),d=c.context||c,h=c.context&&(d.nodeType||d.jquery)?m(d):m.event,p=m.Deferred(),f=m.Callbacks("once memory"),g=c.statusCode||{},y={},v={},b=0,_="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!s)for(s={};t=st.exec(n);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?n:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return b||(e=v[r]=v[r]||e,y[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||_;return r&&r.abort(t),P(0,t),this}};if(p.promise(w).complete=f.add,w.success=w.done,w.error=w.fail,c.url=((e||c.url||ht)+"").replace(it,"").replace(at,pt[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=m.trim(c.dataType||"*").toLowerCase().match(R)||[""],null==c.crossDomain&&(a=lt.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===pt[1]&&a[2]===pt[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(pt[3]||("http:"===pt[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=m.param(c.data,c.traditional)),gt(ut,c,t,w),2===b)return w;for(u in(l=m.event&&c.global)&&0==m.active++&&m.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!ot.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(rt.test(i)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=nt.test(i)?i.replace(nt,"$1_="+tt++):i+(rt.test(i)?"&":"?")+"_="+tt++)),c.ifModified&&(m.lastModified[i]&&w.setRequestHeader("If-Modified-Since",m.lastModified[i]),m.etag[i]&&w.setRequestHeader("If-None-Match",m.etag[i])),(c.data&&c.hasContent&&!1!==c.contentType||t.contentType)&&w.setRequestHeader("Content-Type",c.contentType),w.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+dt+"; q=0.01":""):c.accepts["*"]),c.headers)w.setRequestHeader(u,c.headers[u]);if(c.beforeSend&&(!1===c.beforeSend.call(d,w,c)||2===b))return w.abort();for(u in _="abort",{success:1,error:1,complete:1})w[u](c[u]);if(r=gt(ct,c,t,w)){w.readyState=1,l&&h.trigger("ajaxSend",[w,c]),c.async&&c.timeout>0&&(o=setTimeout((function(){w.abort("timeout")}),c.timeout));try{b=1,r.send(y,P)}catch(e){if(!(b<2))throw e;P(-1,e)}}else P(-1,"No Transport");function P(e,t,s,a){var u,y,v,_,P,A=t;2!==b&&(b=2,o&&clearTimeout(o),r=void 0,n=a||"",w.readyState=e>0?4:0,u=e>=200&&e<300||304===e,s&&(_=function(e,t,r){for(var i,n,s,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(n in a)if(a[n]&&a[n].test(i)){l.unshift(n);break}if(l[0]in r)s=l[0];else{for(n in r){if(!l[0]||e.converters[n+" "+l[0]]){s=n;break}o||(o=n)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),r[s]}(c,w,s)),_=function(e,t,r,i){var n,s,o,a,l,u={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(s=c.shift();s;)if(e.responseFields[s]&&(r[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=u[l+" "+s]||u["* "+s]))for(n in u)if((a=n.split(" "))[1]===s&&(o=u[l+" "+a[0]]||u["* "+a[0]])){!0===o?o=u[n]:!0!==u[n]&&(s=a[0],c.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(c,_,w,u),u?(c.ifModified&&((P=w.getResponseHeader("Last-Modified"))&&(m.lastModified[i]=P),(P=w.getResponseHeader("etag"))&&(m.etag[i]=P)),204===e||"HEAD"===c.type?A="nocontent":304===e?A="notmodified":(A=_.state,y=_.data,u=!(v=_.error))):(v=A,!e&&A||(A="error",e<0&&(e=0))),w.status=e,w.statusText=(t||A)+"",u?p.resolveWith(d,[y,A,w]):p.rejectWith(d,[w,A,v]),w.statusCode(g),g=void 0,l&&h.trigger(u?"ajaxSuccess":"ajaxError",[w,c,u?y:v]),f.fireWith(d,[w,A]),l&&(h.trigger("ajaxComplete",[w,c]),--m.active||m.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,r){return m.get(e,t,r,"json")},getScript:function(e,t){return m.get(e,void 0,t,"script")}}),m.each(["get","post"],(function(e,t){m[t]=function(e,r,i,n){return m.isFunction(r)&&(n=n||i,i=r,r=void 0),m.ajax({url:e,type:t,dataType:n,data:r,success:i})}})),m._evalUrl=function(e){return m.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},m.fn.extend({wrapAll:function(e){var t;return m.isFunction(e)?this.each((function(t){m(this).wrapAll(e.call(this,t))})):(this[0]&&(t=m(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this)},wrapInner:function(e){return m.isFunction(e)?this.each((function(t){m(this).wrapInner(e.call(this,t))})):this.each((function(){var t=m(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=m.isFunction(e);return this.each((function(r){m(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(){return this.parent().each((function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)})).end()}}),m.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},m.expr.filters.visible=function(e){return!m.expr.filters.hidden(e)};var yt=/%20/g,vt=/\[\]$/,bt=/\r?\n/g,_t=/^(?:submit|button|image|reset|file)$/i,wt=/^(?:input|select|textarea|keygen)/i;function Pt(e,t,r,i){var n;if(m.isArray(t))m.each(t,(function(t,n){r||vt.test(e)?i(e,n):Pt(e+"["+("object"==typeof n?t:"")+"]",n,r,i)}));else if(r||"object"!==m.type(t))i(e,t);else for(n in t)Pt(e+"["+n+"]",t[n],r,i)}m.param=function(e,t){var r,i=[],n=function(e,t){t=m.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(e)||e.jquery&&!m.isPlainObject(e))m.each(e,(function(){n(this.name,this.value)}));else for(r in e)Pt(r,e[r],t,n);return i.join("&").replace(yt,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=m.prop(this,"elements");return e?m.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!m(this).is(":disabled")&&wt.test(this.nodeName)&&!_t.test(e)&&(this.checked||!W.test(e))})).map((function(e,t){var r=m(this).val();return null==r?null:m.isArray(r)?m.map(r,(function(e){return{name:t.name,value:e.replace(bt,"\r\n")}})):{name:t.name,value:r.replace(bt,"\r\n")}})).get()}}),m.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var At=0,St={},xt={0:200,1223:204},Ct=m.ajaxSettings.xhr();i.attachEvent&&i.attachEvent("onunload",(function(){for(var e in St)St[e]()})),p.cors=!!Ct&&"withCredentials"in Ct,p.ajax=Ct=!!Ct,m.ajaxTransport((function(e){var t;if(p.cors||Ct&&!e.crossDomain)return{send:function(r,i){var n,s=e.xhr(),o=++At;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(n in e.xhrFields)s[n]=e.xhrFields[n];for(n in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(n,r[n]);t=function(e){return function(){t&&(delete St[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?i(s.status,s.statusText):i(xt[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=St[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return m.globalEval(e),e}}}),m.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),m.ajaxTransport("script",(function(e){var t,r;if(e.crossDomain)return{send:function(i,n){t=m("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&n("error"===e.type?404:200,e.type)}),f.head.appendChild(t[0])},abort:function(){r&&r()}}}));var Ot=[],kt=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ot.pop()||m.expando+"_"+tt++;return this[e]=!0,e}}),m.ajaxPrefilter("json jsonp",(function(e,t,r){var n,s,o,a=!1!==e.jsonp&&(kt.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&kt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=m.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(kt,"$1"+n):!1!==e.jsonp&&(e.url+=(rt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return o||m.error(n+" was not called"),o[0]},e.dataTypes[0]="json",s=i[n],i[n]=function(){o=arguments},r.always((function(){i[n]=s,e[n]&&(e.jsonpCallback=t.jsonpCallback,Ot.push(n)),o&&m.isFunction(s)&&s(o[0]),o=s=void 0})),"script"})),m.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||f;var i=S.exec(e),n=!r&&[];return i?[t.createElement(i[1])]:(i=m.buildFragment([e],t,n),n&&n.length&&m(n).remove(),m.merge([],i.childNodes))};var Et=m.fn.load;m.fn.load=function(e,t,r){if("string"!=typeof e&&Et)return Et.apply(this,arguments);var i,n,s,o=this,a=e.indexOf(" ");return a>=0&&(i=m.trim(e.slice(a)),e=e.slice(0,a)),m.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(n="POST"),o.length>0&&m.ajax({url:e,type:n,dataType:"html",data:t}).done((function(e){s=arguments,o.html(i?m("<div>").append(m.parseHTML(e)).find(i):e)})).complete(r&&function(e,t){o.each(r,s||[e.responseText,t,e])}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){m.fn[t]=function(e){return this.on(t,e)}})),m.expr.filters.animated=function(e){return m.grep(m.timers,(function(t){return e===t.elem})).length};var Tt=i.document.documentElement;function It(e){return m.isWindow(e)?e:9===e.nodeType&&e.defaultView}m.offset={setOffset:function(e,t,r){var i,n,s,o,a,l,u=m.css(e,"position"),c=m(e),d={};"static"===u&&(e.style.position="relative"),a=c.offset(),s=m.css(e,"top"),l=m.css(e,"left"),("absolute"===u||"fixed"===u)&&(s+l).indexOf("auto")>-1?(o=(i=c.position()).top,n=i.left):(o=parseFloat(s)||0,n=parseFloat(l)||0),m.isFunction(t)&&(t=t.call(e,r,a)),null!=t.top&&(d.top=t.top-a.top+o),null!=t.left&&(d.left=t.left-a.left+n),"using"in t?t.using.call(e,d):c.css(d)}},m.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){m.offset.setOffset(this,e,t)}));var t,r,i=this[0],n={top:0,left:0},s=i&&i.ownerDocument;return s?(t=s.documentElement,m.contains(t,i)?(typeof i.getBoundingClientRect!==G&&(n=i.getBoundingClientRect()),r=It(s),{top:n.top+r.pageYOffset-t.clientTop,left:n.left+r.pageXOffset-t.clientLeft}):n):void 0},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===m.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),m.nodeName(e[0],"html")||(i=e.offset()),i.top+=m.css(e[0],"borderTopWidth",!0),i.left+=m.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-m.css(r,"marginTop",!0),left:t.left-i.left-m.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||Tt;e&&!m.nodeName(e,"html")&&"static"===m.css(e,"position");)e=e.offsetParent;return e||Tt}))}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;m.fn[e]=function(n){return N(this,(function(e,n,s){var o=It(e);if(void 0===s)return o?o[t]:e[n];o?o.scrollTo(r?i.pageXOffset:s,r?s:i.pageYOffset):e[n]=s}),e,n,arguments.length,null)}})),m.each(["top","left"],(function(e,t){m.cssHooks[t]=Ce(p.pixelPosition,(function(e,r){if(r)return r=xe(e,t),Ae.test(r)?m(e).position()[t]+"px":r}))})),m.each({Height:"height",Width:"width"},(function(e,t){m.each({padding:"inner"+e,content:t,"":"outer"+e},(function(r,i){m.fn[i]=function(i,n){var s=arguments.length&&(r||"boolean"!=typeof i),o=r||(!0===i||!0===n?"margin":"border");return N(this,(function(t,r,i){var n;return m.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+e],n["scroll"+e],t.body["offset"+e],n["offset"+e],n["client"+e])):void 0===i?m.css(t,r,o):m.style(t,r,i,o)}),t,s?i:void 0,s,null)}}))})),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,void 0===(r=function(){return m}.apply(t,[]))||(e.exports=r);var Dt=i.jQuery,Rt=i.$;return m.noConflict=function(e){return i.$===m&&(i.$=Rt),e&&i.jQuery===m&&(i.jQuery=Dt),m},typeof n===G&&(i.jQuery=i.$=m),m},"object"==typeof e.exports?e.exports=i.document?n(i,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(i)},4532:(e,t,r)=>{var i="undefined"!=typeof JSON?JSON:r(224285);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r=t.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var o,a="boolean"==typeof t.cycles&&t.cycles,l=t.replacer||function(e,t){return t},u=t.cmp&&(o=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},n={key:r,value:e[r]};return o(i,n)}}),c=[];return function e(t,o,d,h){var p=r?"\n"+new Array(h+1).join(r):"",f=r?": ":":";if(d&&d.toJSON&&"function"==typeof d.toJSON&&(d=d.toJSON()),void 0!==(d=l.call(t,o,d))){if("object"!=typeof d||null===d)return i.stringify(d);if(n(d)){for(var g=[],m=0;m<d.length;m++){var y=e(d,m,d[m],h+1)||i.stringify(null);g.push(p+r+y)}return"["+g.join(",")+p+"]"}if(-1!==c.indexOf(d)){if(a)return i.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}c.push(d);var v=s(d).sort(u&&u(d));for(g=[],m=0;m<v.length;m++){var b=e(d,o=v[m],d[o],h+1);if(b){var _=i.stringify(o)+f+b;g.push(p+r+_)}}return c.splice(c.indexOf(d),1),"{"+g.join(",")+p+"}"}}({"":e},"",e,0)};var n=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},s=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var i in e)t.call(e,i)&&r.push(i);return r}},224285:(e,t,r)=>{t.parse=r(865512),t.stringify=r(688512)},865512:e=>{var t,r,i,n,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(e){throw{name:"SyntaxError",message:e,at:t,text:i}},a=function(e){return e&&e!==r&&o("Expected '"+e+"' instead of '"+r+"'"),r=i.charAt(t),t+=1,r},l=function(){var e,t="";for("-"===r&&(t="-",a("-"));r>="0"&&r<="9";)t+=r,a();if("."===r)for(t+=".";a()&&r>="0"&&r<="9";)t+=r;if("e"===r||"E"===r)for(t+=r,a(),"-"!==r&&"+"!==r||(t+=r,a());r>="0"&&r<="9";)t+=r,a();if(e=+t,isFinite(e))return e;o("Bad number")},u=function(){var e,t,i,n="";if('"'===r)for(;a();){if('"'===r)return a(),n;if("\\"===r)if(a(),"u"===r){for(i=0,t=0;t<4&&(e=parseInt(a(),16),isFinite(e));t+=1)i=16*i+e;n+=String.fromCharCode(i)}else{if("string"!=typeof s[r])break;n+=s[r]}else n+=r}o("Bad string")},c=function(){for(;r&&r<=" ";)a()};n=function(){switch(c(),r){case"{":return function(){var e,t={};if("{"===r){if(a("{"),c(),"}"===r)return a("}"),t;for(;r;){if(e=u(),c(),a(":"),Object.hasOwnProperty.call(t,e)&&o('Duplicate key "'+e+'"'),t[e]=n(),c(),"}"===r)return a("}"),t;a(","),c()}}o("Bad object")}();case"[":return function(){var e=[];if("["===r){if(a("["),c(),"]"===r)return a("]"),e;for(;r;){if(e.push(n()),c(),"]"===r)return a("]"),e;a(","),c()}}o("Bad array")}();case'"':return u();case"-":return l();default:return r>="0"&&r<="9"?l():function(){switch(r){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}o("Unexpected '"+r+"'")}()}},e.exports=function(e,s){var a;return i=e,t=0,r=" ",a=n(),c(),r&&o("Syntax error"),"function"==typeof s?function e(t,r){var i,n,o=t[r];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(void 0!==(n=e(o,i))?o[i]=n:delete o[i]);return s.call(t,r,o)}({"":a},""):a}},688512:e=>{var t,r,i,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function o(e){return n.lastIndex=0,n.test(e)?'"'+e.replace(n,(function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function a(e,n){var s,l,u,c,d,h=t,p=n[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof i&&(p=i.call(n,e,p)),typeof p){case"string":return o(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(t+=r,d=[],"[object Array]"===Object.prototype.toString.apply(p)){for(c=p.length,s=0;s<c;s+=1)d[s]=a(s,p)||"null";return u=0===d.length?"[]":t?"[\n"+t+d.join(",\n"+t)+"\n"+h+"]":"["+d.join(",")+"]",t=h,u}if(i&&"object"==typeof i)for(c=i.length,s=0;s<c;s+=1)"string"==typeof(l=i[s])&&(u=a(l,p))&&d.push(o(l)+(t?": ":":")+u);else for(l in p)Object.prototype.hasOwnProperty.call(p,l)&&(u=a(l,p))&&d.push(o(l)+(t?": ":":")+u);return u=0===d.length?"{}":t?"{\n"+t+d.join(",\n"+t)+"\n"+h+"}":"{"+d.join(",")+"}",t=h,u}}e.exports=function(e,n,s){var o;if(t="",r="","number"==typeof s)for(o=0;o<s;o+=1)r+=" ";else"string"==typeof s&&(r=s);if(i=n,n&&"function"!=typeof n&&("object"!=typeof n||"number"!=typeof n.length))throw new Error("JSON.stringify");return a("",{"":e})}},223384:e=>{var t=1e3,r=60*t,i=60*r,n=24*i,s=7*n,o=365.25*n;function a(e,t,r,i){var n=t>=1.5*r;return Math.round(e/r)+" "+i+(n?"s":"")}e.exports=function(e,l){l=l||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var l=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*o;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*n;case"hours":case"hour":case"hrs":case"hr":case"h":return l*i;case"minutes":case"minute":case"mins":case"min":case"m":return l*r;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);if("number"===u&&isFinite(e))return l.long?function(e){var s=Math.abs(e);if(s>=n)return a(e,s,n,"day");if(s>=i)return a(e,s,i,"hour");if(s>=r)return a(e,s,r,"minute");if(s>=t)return a(e,s,t,"second");return e+" ms"}(e):function(e){var s=Math.abs(e);if(s>=n)return Math.round(e/n)+"d";if(s>=i)return Math.round(e/i)+"h";if(s>=r)return Math.round(e/r)+"m";if(s>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},215827:e=>{"use strict";var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,n){for(var s,o,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in s=Object(arguments[l]))r.call(s,u)&&(a[u]=s[u]);if(t){o=t(s);for(var c=0;c<o.length;c++)i.call(s,o[c])&&(a[o[c]]=s[o[c]])}}return a}},272935:(e,t,r)=>{var i="function"==typeof Map&&Map.prototype,n=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=i&&n&&"function"==typeof n.get?n.get:null,o=i&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=a&&l&&"function"==typeof l.get?l.get:null,c=a&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,g=Object.prototype.toString,m=Function.prototype.toString,y=String.prototype.match,v=String.prototype.slice,b=String.prototype.replace,_=String.prototype.toUpperCase,w=String.prototype.toLowerCase,P=RegExp.prototype.test,A=Array.prototype.concat,S=Array.prototype.join,x=Array.prototype.slice,C=Math.floor,O="function"==typeof BigInt?BigInt.prototype.valueOf:null,k=Object.getOwnPropertySymbols,E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,T="function"==typeof Symbol&&"object"==typeof Symbol.iterator,I="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===T||"symbol")?Symbol.toStringTag:null,D=Object.prototype.propertyIsEnumerable,R=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function j(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||P.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var i=e<0?-C(-e):C(e);if(i!==e){var n=String(i),s=v.call(t,n.length+1);return b.call(n,r,"$&_")+"."+b.call(b.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,r,"$&_")}var Z=r(109986),N=Z.custom,F=z(N)?N:null;function L(e,t,r){var i="double"===(r.quoteStyle||t)?'"':"'";return i+e+i}function M(e){return b.call(String(e),/"/g,"&quot;")}function U(e){return!("[object Array]"!==q(e)||I&&"object"==typeof e&&I in e)}function $(e){return!("[object RegExp]"!==q(e)||I&&"object"==typeof e&&I in e)}function z(e){if(T)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!E)return!1;try{return E.call(e),!0}catch(e){}return!1}e.exports=function e(t,i,n,a){var l=i||{};if(J(l,"quoteStyle")&&"single"!==l.quoteStyle&&"double"!==l.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(J(l,"maxStringLength")&&("number"==typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var g=!J(l,"customInspect")||l.customInspect;if("boolean"!=typeof g&&"symbol"!==g)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(J(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(J(l,"numericSeparator")&&"boolean"!=typeof l.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var _=l.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return B(t,l);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var P=String(t);return _?j(t,P):P}if("bigint"==typeof t){var C=String(t)+"n";return _?j(t,C):C}var k=void 0===l.depth?5:l.depth;if(void 0===n&&(n=0),n>=k&&k>0&&"object"==typeof t)return U(t)?"[Array]":"[Object]";var N=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=S.call(Array(e.indent+1)," ")}return{base:r,prev:S.call(Array(t+1),r)}}(l,n);if(void 0===a)a=[];else if(V(a,t)>=0)return"[Circular]";function H(t,r,i){if(r&&(a=x.call(a)).push(r),i){var s={depth:l.depth};return J(l,"quoteStyle")&&(s.quoteStyle=l.quoteStyle),e(t,s,n+1,a)}return e(t,l,n+1,a)}if("function"==typeof t&&!$(t)){var W=function(e){if(e.name)return e.name;var t=y.call(m.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),ee=Q(t,H);return"[Function"+(W?": "+W:" (anonymous)")+"]"+(ee.length>0?" { "+S.call(ee,", ")+" }":"")}if(z(t)){var te=T?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):E.call(t);return"object"!=typeof t||T?te:G(te)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var re="<"+w.call(String(t.nodeName)),ie=t.attributes||[],ne=0;ne<ie.length;ne++)re+=" "+ie[ne].name+"="+L(M(ie[ne].value),"double",l);return re+=">",t.childNodes&&t.childNodes.length&&(re+="..."),re+="</"+w.call(String(t.nodeName))+">"}if(U(t)){if(0===t.length)return"[]";var se=Q(t,H);return N&&!function(e){for(var t=0;t<e.length;t++)if(V(e[t],"\n")>=0)return!1;return!0}(se)?"["+Y(se,N)+"]":"[ "+S.call(se,", ")+" ]"}if(function(e){return!("[object Error]"!==q(e)||I&&"object"==typeof e&&I in e)}(t)){var oe=Q(t,H);return"cause"in Error.prototype||!("cause"in t)||D.call(t,"cause")?0===oe.length?"["+String(t)+"]":"{ ["+String(t)+"] "+S.call(oe,", ")+" }":"{ ["+String(t)+"] "+S.call(A.call("[cause]: "+H(t.cause),oe),", ")+" }"}if("object"==typeof t&&g){if(F&&"function"==typeof t[F]&&Z)return Z(t,{depth:k-n});if("symbol"!==g&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!s||!e||"object"!=typeof e)return!1;try{s.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var ae=[];return o&&o.call(t,(function(e,r){ae.push(H(r,t,!0)+" => "+H(e,t))})),K("Map",s.call(t),ae,N)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{s.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var le=[];return c&&c.call(t,(function(e){le.push(H(e,t))})),K("Set",u.call(t),le,N)}if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{h.call(e,h)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return X("WeakMap");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{h.call(e,h);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return X("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return X("WeakRef");if(function(e){return!("[object Number]"!==q(e)||I&&"object"==typeof e&&I in e)}(t))return G(H(Number(t)));if(function(e){if(!e||"object"!=typeof e||!O)return!1;try{return O.call(e),!0}catch(e){}return!1}(t))return G(H(O.call(t)));if(function(e){return!("[object Boolean]"!==q(e)||I&&"object"==typeof e&&I in e)}(t))return G(f.call(t));if(function(e){return!("[object String]"!==q(e)||I&&"object"==typeof e&&I in e)}(t))return G(H(String(t)));if(t===window)return"{ [object Window] }";if(t===r.g)return"{ [object globalThis] }";if(!function(e){return!("[object Date]"!==q(e)||I&&"object"==typeof e&&I in e)}(t)&&!$(t)){var ue=Q(t,H),ce=R?R(t)===Object.prototype:t instanceof Object||t.constructor===Object,de=t instanceof Object?"":"null prototype",he=!ce&&I&&Object(t)===t&&I in t?v.call(q(t),8,-1):de?"Object":"",pe=(ce||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(he||de?"["+S.call(A.call([],he||[],de||[]),": ")+"] ":"");return 0===ue.length?pe+"{}":N?pe+"{"+Y(ue,N)+"}":pe+"{ "+S.call(ue,", ")+" }"}return String(t)};var H=Object.prototype.hasOwnProperty||function(e){return e in this};function J(e,t){return H.call(e,t)}function q(e){return g.call(e)}function V(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}function B(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,i="... "+r+" more character"+(r>1?"s":"");return B(v.call(e,0,t.maxStringLength),t)+i}return L(b.call(b.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,W),"single",t)}function W(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+_.call(t.toString(16))}function G(e){return"Object("+e+")"}function X(e){return e+" { ? }"}function K(e,t,r,i){return e+" ("+t+") {"+(i?Y(r,i):S.call(r,", "))+"}"}function Y(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+S.call(e,","+r)+"\n"+t.prev}function Q(e,t){var r=U(e),i=[];if(r){i.length=e.length;for(var n=0;n<e.length;n++)i[n]=J(e,n)?t(e[n],e):""}var s,o="function"==typeof k?k(e):[];if(T){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var l in e)J(e,l)&&(r&&String(Number(l))===l&&l<e.length||T&&s["$"+l]instanceof Symbol||(P.call(/[^\w$]/,l)?i.push(t(l,e)+": "+t(e[l],e)):i.push(l+": "+t(e[l],e))));if("function"==typeof k)for(var u=0;u<o.length;u++)D.call(e,o[u])&&i.push("["+t(o[u])+"]: "+t(e[o[u]],e));return i}},146648:e=>{"use strict";var t=String.prototype.replace,r=/%20/g,i="RFC1738",n="RFC3986";e.exports={default:n,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:i,RFC3986:n}},323335:(e,t,r)=>{"use strict";var i=r(351287),n=r(510609),s=r(146648);e.exports={formats:s,parse:n,stringify:i}},510609:(e,t,r)=>{"use strict";var i=r(868610),n=Object.prototype.hasOwnProperty,s=Array.isArray,o={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:i.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},l=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,r,i){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(s),u=a?s.slice(0,a.index):s,c=[];if(u){if(!r.plainObjects&&n.call(Object.prototype,u)&&!r.allowPrototypes)return;c.push(u)}for(var d=0;r.depth>0&&null!==(a=o.exec(s))&&d<r.depth;){if(d+=1,!r.plainObjects&&n.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+s.slice(a.index)+"]"),function(e,t,r,i){for(var n=i?t:l(t,r),s=e.length-1;s>=0;--s){var o,a=e[s];if("[]"===a&&r.parseArrays)o=[].concat(n);else{o=r.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(u,10);r.parseArrays||""!==u?!isNaN(c)&&a!==u&&String(c)===u&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(o=[])[c]=n:o[u]=n:o={0:n}}n=o}return n}(c,t,r,i)}};e.exports=function(e,t){var r=function(e){if(!e)return o;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?o.charset:e.charset;return{allowDots:void 0===e.allowDots?o.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:o.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:o.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:o.comma,decoder:"function"==typeof e.decoder?e.decoder:o.decoder,delimiter:"string"==typeof e.delimiter||i.isRegExp(e.delimiter)?e.delimiter:o.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:o.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:o.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:o.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var c="string"==typeof e?function(e,t){var r,u={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,d=t.parameterLimit===1/0?void 0:t.parameterLimit,h=c.split(t.delimiter,d),p=-1,f=t.charset;if(t.charsetSentinel)for(r=0;r<h.length;++r)0===h[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[r]?f="utf-8":"utf8=%26%2310003%3B"===h[r]&&(f="iso-8859-1"),p=r,r=h.length);for(r=0;r<h.length;++r)if(r!==p){var g,m,y=h[r],v=y.indexOf("]="),b=-1===v?y.indexOf("="):v+1;-1===b?(g=t.decoder(y,o.decoder,f,"key"),m=t.strictNullHandling?null:""):(g=t.decoder(y.slice(0,b),o.decoder,f,"key"),m=i.maybeMap(l(y.slice(b+1),t),(function(e){return t.decoder(e,o.decoder,f,"value")}))),m&&t.interpretNumericEntities&&"iso-8859-1"===f&&(m=a(m)),y.indexOf("[]=")>-1&&(m=s(m)?[m]:m),n.call(u,g)?u[g]=i.combine(u[g],m):u[g]=m}return u}(e,r):e,d=r.plainObjects?Object.create(null):{},h=Object.keys(c),p=0;p<h.length;++p){var f=h[p],g=u(f,c[f],r,"string"==typeof e);d=i.merge(d,g,r)}return!0===r.allowSparse?d:i.compact(d)}},351287:(e,t,r)=>{"use strict";var i=r(647110),n=r(868610),s=r(146648),o=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,u=Array.prototype.push,c=function(e,t){u.apply(e,l(t)?t:[t])},d=Date.prototype.toISOString,h=s.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:h,formatter:s.formatters[h],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},f=function e(t,r,s,o,a,u,d,h,f,g,m,y,v,b,_){var w,P=t;if(_.has(t))throw new RangeError("Cyclic object value");if("function"==typeof d?P=d(r,P):P instanceof Date?P=g(P):"comma"===s&&l(P)&&(P=n.maybeMap(P,(function(e){return e instanceof Date?g(e):e}))),null===P){if(o)return u&&!v?u(r,p.encoder,b,"key",m):r;P=""}if("string"==typeof(w=P)||"number"==typeof w||"boolean"==typeof w||"symbol"==typeof w||"bigint"==typeof w||n.isBuffer(P))return u?[y(v?r:u(r,p.encoder,b,"key",m))+"="+y(u(P,p.encoder,b,"value",m))]:[y(r)+"="+y(String(P))];var A,S=[];if(void 0===P)return S;if("comma"===s&&l(P))A=[{value:P.length>0?P.join(",")||null:void 0}];else if(l(d))A=d;else{var x=Object.keys(P);A=h?x.sort(h):x}for(var C=0;C<A.length;++C){var O=A[C],k="object"==typeof O&&void 0!==O.value?O.value:P[O];if(!a||null!==k){var E=l(P)?"function"==typeof s?s(r,O):r:r+(f?"."+O:"["+O+"]");_.set(t,!0);var T=i();c(S,e(k,E,s,o,a,u,d,h,f,g,m,y,v,b,T))}}return S};e.exports=function(e,t){var r,n=e,u=function(e){if(!e)return p;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=s.default;if(void 0!==e.format){if(!o.call(s.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=s.formatters[r],n=p.filter;return("function"==typeof e.filter||l(e.filter))&&(n=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:void 0===e.allowDots?p.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:n,format:r,formatter:i,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof u.filter?n=(0,u.filter)("",n):l(u.filter)&&(r=u.filter);var d,h=[];if("object"!=typeof n||null===n)return"";d=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var g=a[d];r||(r=Object.keys(n)),u.sort&&r.sort(u.sort);for(var m=i(),y=0;y<r.length;++y){var v=r[y];u.skipNulls&&null===n[v]||c(h,f(n[v],v,g,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,m))}var b=h.join(u.delimiter),_=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),b.length>0?_+b:""}},868610:(e,t,r)=>{"use strict";var i=r(146648),n=Object.prototype.hasOwnProperty,s=Array.isArray,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)void 0!==e[i]&&(r[i]=e[i]);return r};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],i=0;i<t.length;++i)for(var n=t[i],o=n.obj[n.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],c=o[u];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:o,prop:u}),r.push(c))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(s(r)){for(var i=[],n=0;n<r.length;++n)void 0!==r[n]&&i.push(r[n]);t.obj[t.prop]=i}}}(t),e},decode:function(e,t,r){var i=e.replace(/\+/g," ");if("iso-8859-1"===r)return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(e){return i}},encode:function(e,t,r,n,s){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var l="",u=0;u<a.length;++u){var c=a.charCodeAt(u);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===i.RFC1738&&(40===c||41===c)?l+=a.charAt(u):c<128?l+=o[c]:c<2048?l+=o[192|c>>6]+o[128|63&c]:c<55296||c>=57344?l+=o[224|c>>12]+o[128|c>>6&63]+o[128|63&c]:(u+=1,c=65536+((1023&c)<<10|1023&a.charCodeAt(u)),l+=o[240|c>>18]+o[128|c>>12&63]+o[128|c>>6&63]+o[128|63&c])}return l},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(s(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(t(e[i]));return r}return t(e)},merge:function e(t,r,i){if(!r)return t;if("object"!=typeof r){if(s(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(i&&(i.plainObjects||i.allowPrototypes)||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var o=t;return s(t)&&!s(r)&&(o=a(t,i)),s(t)&&s(r)?(r.forEach((function(r,s){if(n.call(t,s)){var o=t[s];o&&"object"==typeof o&&r&&"object"==typeof r?t[s]=e(o,r,i):t.push(r)}else t[s]=r})),t):Object.keys(r).reduce((function(t,s){var o=r[s];return n.call(t,s)?t[s]=e(t[s],o,i):t[s]=o,t}),o)}}},191431:(e,t,r)=>{"use strict";var i=r(346530),n=r(247285),s=r(94105)(),o=r(57048),a=r(568570),l=i("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new a("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||l(t)!==t)throw new a("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,u=!0;if("length"in e&&o){var c=o(e,"length");c&&!c.configurable&&(i=!1),c&&!c.writable&&(u=!1)}return(i||u||!r)&&(s?n(e,"length",t,!0,!0):n(e,"length",t)),e}},647110:(e,t,r)=>{"use strict";var i=r(346530),n=r(167034),s=r(272935),o=i("%TypeError%"),a=i("%WeakMap%",!0),l=i("%Map%",!0),u=n("WeakMap.prototype.get",!0),c=n("WeakMap.prototype.set",!0),d=n("WeakMap.prototype.has",!0),h=n("Map.prototype.get",!0),p=n("Map.prototype.set",!0),f=n("Map.prototype.has",!0),g=function(e,t){for(var r,i=e;null!==(r=i.next);i=r)if(r.key===t)return i.next=r.next,r.next=e.next,e.next=r,r};e.exports=function(){var e,t,r,i={assert:function(e){if(!i.has(e))throw new o("Side channel does not contain "+s(e))},get:function(i){if(a&&i&&("object"==typeof i||"function"==typeof i)){if(e)return u(e,i)}else if(l){if(t)return h(t,i)}else if(r)return function(e,t){var r=g(e,t);return r&&r.value}(r,i)},has:function(i){if(a&&i&&("object"==typeof i||"function"==typeof i)){if(e)return d(e,i)}else if(l){if(t)return f(t,i)}else if(r)return function(e,t){return!!g(e,t)}(r,i);return!1},set:function(i,n){a&&i&&("object"==typeof i||"function"==typeof i)?(e||(e=new a),c(e,i,n)):l?(t||(t=new l),p(t,i,n)):(r||(r={key:{},next:null}),function(e,t,r){var i=g(e,t);i?i.value=r:e.next={key:t,next:e.next,value:r}}(r,i,n))}};return i}},346958:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(964144);function n(e,t){void 0===t&&(t={});var r=function(e){if(e&&"j"===e[0]&&":"===e[1])return e.substr(2);return e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(r,t.doNotParse))try{return JSON.parse(r)}catch(e){}return e}var s=r(215827);const o=function(){function e(e,t){var r=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"==typeof e?i.Q(e,t):"object"==typeof e&&null!==e?e:{}}(e,t),new Promise((function(){r.HAS_DOCUMENT_COOKIE=!0})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=i.Q(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,r){return void 0===t&&(t={}),this._updateBrowserValues(r),n(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var r={};for(var i in this.cookies)r[i]=n(this.cookies[i],e);return r},e.prototype.set=function(e,t,r){var n;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=s({},this.cookies,((n={})[e]=t,n)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=i.q(e,t,r)),this._emitChange({name:e,value:t,options:r})},e.prototype.remove=function(e,t){var r=t=s({},t,{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=s({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=i.q(e,"",r)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}()},319748:(e,t,r)=>{var i=r(205216),n=r(154182),s=r(948744),o=i.TypeError;e.exports=function(e){if(n(e))return e;throw o(s(e)+" is not a function")}},230431:(e,t,r)=>{var i=r(205216),n=r(154182),s=i.String,o=i.TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw o("Can't set "+s(e)+" as a prototype")}},473717:(e,t,r)=>{var i=r(28381),n=r(253595),s=r(780522),o=i("unscopables"),a=Array.prototype;null==a[o]&&s.f(a,o,{configurable:!0,value:n(null)}),e.exports=function(e){a[o][e]=!0}},301891:(e,t,r)=>{var i=r(205216),n=r(488343),s=i.TypeError;e.exports=function(e,t){if(n(t,e))return e;throw s("Incorrect invocation")}},432362:(e,t,r)=>{var i=r(205216),n=r(713200),s=i.String,o=i.TypeError;e.exports=function(e){if(n(e))return e;throw o(s(e)+" is not an object")}},899429:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},931345:(e,t,r)=>{"use strict";var i,n,s,o=r(899429),a=r(342677),l=r(205216),u=r(154182),c=r(713200),d=r(70257),h=r(164085),p=r(948744),f=r(72022),g=r(820609),m=r(780522).f,y=r(488343),v=r(915428),b=r(590531),_=r(28381),w=r(388608),P=l.Int8Array,A=P&&P.prototype,S=l.Uint8ClampedArray,x=S&&S.prototype,C=P&&v(P),O=A&&v(A),k=Object.prototype,E=l.TypeError,T=_("toStringTag"),I=w("TYPED_ARRAY_TAG"),D=w("TYPED_ARRAY_CONSTRUCTOR"),R=o&&!!b&&"Opera"!==h(l.opera),j=!1,Z={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},N={BigInt64Array:8,BigUint64Array:8},F=function(e){if(!c(e))return!1;var t=h(e);return d(Z,t)||d(N,t)};for(i in Z)(s=(n=l[i])&&n.prototype)?f(s,D,n):R=!1;for(i in N)(s=(n=l[i])&&n.prototype)&&f(s,D,n);if((!R||!u(C)||C===Function.prototype)&&(C=function(){throw E("Incorrect invocation")},R))for(i in Z)l[i]&&b(l[i],C);if((!R||!O||O===k)&&(O=C.prototype,R))for(i in Z)l[i]&&b(l[i].prototype,O);if(R&&v(x)!==O&&b(x,O),a&&!d(O,T))for(i in j=!0,m(O,T,{get:function(){return c(this)?this[I]:void 0}}),Z)l[i]&&f(l[i],I,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:R,TYPED_ARRAY_CONSTRUCTOR:D,TYPED_ARRAY_TAG:j&&I,aTypedArray:function(e){if(F(e))return e;throw E("Target is not a typed array")},aTypedArrayConstructor:function(e){if(u(e)&&(!b||y(C,e)))return e;throw E(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,i){if(a){if(r)for(var n in Z){var s=l[n];if(s&&d(s.prototype,e))try{delete s.prototype[e]}catch(r){try{s.prototype[e]=t}catch(e){}}}O[e]&&!r||g(O,e,r?t:R&&A[e]||t,i)}},exportTypedArrayStaticMethod:function(e,t,r){var i,n;if(a){if(b){if(r)for(i in Z)if((n=l[i])&&d(n,e))try{delete n[e]}catch(e){}if(C[e]&&!r)return;try{return g(C,e,r?t:R&&C[e]||t)}catch(e){}}for(i in Z)!(n=l[i])||n[e]&&!r||g(n,e,t)}},isView:function(e){if(!c(e))return!1;var t=h(e);return"DataView"===t||d(Z,t)||d(N,t)},isTypedArray:F,TypedArray:C,TypedArrayPrototype:O}},230312:(e,t,r)=>{var i=r(798304);e.exports=function(e,t){for(var r=0,n=i(t),s=new e(n);n>r;)s[r]=t[r++];return s}},399826:(e,t,r)=>{var i=r(875603),n=r(817537),s=r(798304),o=function(e){return function(t,r,o){var a,l=i(t),u=s(l),c=n(o,u);if(e&&r!=r){for(;u>c;)if((a=l[c++])!=a)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},216739:(e,t,r)=>{var i=r(857568),n=r(412750),s=r(929291),o=r(798304),a=function(e){var t=1==e;return function(r,a,l){for(var u,c=s(r),d=n(c),h=i(a,l),p=o(d);p-- >0;)if(h(u=d[p],p,c))switch(e){case 0:return u;case 1:return p}return t?-1:void 0}};e.exports={findLast:a(0),findLastIndex:a(1)}},269055:(e,t,r)=>{var i=r(798304);e.exports=function(e,t){for(var r=i(e),n=new t(r),s=0;s<r;s++)n[s]=e[r-s-1];return n}},561835:(e,t,r)=>{var i=r(205216),n=r(798304),s=r(301438),o=i.RangeError;e.exports=function(e,t,r,i){var a=n(e),l=s(r),u=l<0?a+l:l;if(u>=a||u<0)throw o("Incorrect index");for(var c=new t(a),d=0;d<a;d++)c[d]=d===u?i:e[d];return c}},903346:(e,t,r)=>{var i=r(577164),n=i({}.toString),s=i("".slice);e.exports=function(e){return s(n(e),8,-1)}},164085:(e,t,r)=>{var i=r(205216),n=r(870422),s=r(154182),o=r(903346),a=r(28381)("toStringTag"),l=i.Object,u="Arguments"==o(function(){return arguments}());e.exports=n?o:function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=l(e),a))?r:u?o(t):"Object"==(i=o(t))&&s(t.callee)?"Arguments":i}},425745:(e,t,r)=>{var i=r(577164)("".replace),n=String(Error("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,o=s.test(n);e.exports=function(e,t){if(o&&"string"==typeof e)for(;t--;)e=i(e,s,"");return e}},35836:(e,t,r)=>{var i=r(70257),n=r(981922),s=r(75304),o=r(780522);e.exports=function(e,t,r){for(var a=n(t),l=o.f,u=s.f,c=0;c<a.length;c++){var d=a[c];i(e,d)||r&&i(r,d)||l(e,d,u(t,d))}}},260316:(e,t,r)=>{var i=r(616842);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},72022:(e,t,r)=>{var i=r(342677),n=r(780522),s=r(136460);e.exports=i?function(e,t,r){return n.f(e,t,s(1,r))}:function(e,t,r){return e[t]=r,e}},136460:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},342677:(e,t,r)=>{var i=r(616842);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},794155:(e,t,r)=>{var i=r(205216),n=r(713200),s=i.document,o=n(s)&&n(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},914756:e=>{e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},174067:(e,t,r)=>{var i=r(152881);e.exports=i("navigator","userAgent")||""},557989:(e,t,r)=>{var i,n,s=r(205216),o=r(174067),a=s.process,l=s.Deno,u=a&&a.versions||l&&l.version,c=u&&u.v8;c&&(n=(i=c.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!n&&o&&(!(i=o.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/))&&(n=+i[1]),e.exports=n},378961:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},741393:(e,t,r)=>{var i=r(205216),n=r(75304).f,s=r(72022),o=r(820609),a=r(838766),l=r(35836),u=r(240820);e.exports=function(e,t){var r,c,d,h,p,f=e.target,g=e.global,m=e.stat;if(r=g?i:m?i[f]||a(f,{}):(i[f]||{}).prototype)for(c in t){if(h=t[c],d=e.noTargetGet?(p=n(r,c))&&p.value:r[c],!u(g?c:f+(m?".":"#")+c,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&s(h,"sham",!0),o(r,c,h,e)}}},616842:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},857568:(e,t,r)=>{var i=r(577164),n=r(319748),s=r(813919),o=i(i.bind);e.exports=function(e,t){return n(e),void 0===t?e:s?o(e,t):function(){return e.apply(t,arguments)}}},813919:(e,t,r)=>{var i=r(616842);e.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},413003:(e,t,r)=>{var i=r(813919),n=Function.prototype.call;e.exports=i?n.bind(n):function(){return n.apply(n,arguments)}},1899:(e,t,r)=>{var i=r(342677),n=r(70257),s=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,a=n(s,"name"),l=a&&"something"===function(){}.name,u=a&&(!i||i&&o(s,"name").configurable);e.exports={EXISTS:a,PROPER:l,CONFIGURABLE:u}},577164:(e,t,r)=>{var i=r(813919),n=Function.prototype,s=n.bind,o=n.call,a=i&&s.bind(o,o);e.exports=i?function(e){return e&&a(e)}:function(e){return e&&function(){return o.apply(e,arguments)}}},152881:(e,t,r)=>{var i=r(205216),n=r(154182);e.exports=function(e,t){return arguments.length<2?(r=i[e],n(r)?r:void 0):i[e]&&i[e][t];var r}},151743:(e,t,r)=>{var i=r(319748);e.exports=function(e,t){var r=e[t];return null==r?void 0:i(r)}},205216:(e,t,r)=>{var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i(window)||i("object"==typeof self&&self)||i("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},70257:(e,t,r)=>{var i=r(577164),n=r(929291),s=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(n(e),t)}},800474:e=>{e.exports={}},475855:(e,t,r)=>{var i=r(152881);e.exports=i("document","documentElement")},162911:(e,t,r)=>{var i=r(342677),n=r(616842),s=r(794155);e.exports=!i&&!n((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},412750:(e,t,r)=>{var i=r(205216),n=r(577164),s=r(616842),o=r(903346),a=i.Object,l=n("".split);e.exports=s((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?l(e,""):a(e)}:a},429877:(e,t,r)=>{var i=r(154182),n=r(713200),s=r(590531);e.exports=function(e,t,r){var o,a;return s&&i(o=t.constructor)&&o!==r&&n(a=o.prototype)&&a!==r.prototype&&s(e,a),e}},274376:(e,t,r)=>{var i=r(577164),n=r(154182),s=r(198489),o=i(Function.toString);n(s.inspectSource)||(s.inspectSource=function(e){return o(e)}),e.exports=s.inspectSource},256863:(e,t,r)=>{var i,n,s,o=r(140628),a=r(205216),l=r(577164),u=r(713200),c=r(72022),d=r(70257),h=r(198489),p=r(882069),f=r(800474),g="Object already initialized",m=a.TypeError,y=a.WeakMap;if(o||h.state){var v=h.state||(h.state=new y),b=l(v.get),_=l(v.has),w=l(v.set);i=function(e,t){if(_(v,e))throw new m(g);return t.facade=e,w(v,e,t),t},n=function(e){return b(v,e)||{}},s=function(e){return _(v,e)}}else{var P=p("state");f[P]=!0,i=function(e,t){if(d(e,P))throw new m(g);return t.facade=e,c(e,P,t),t},n=function(e){return d(e,P)?e[P]:{}},s=function(e){return d(e,P)}}e.exports={set:i,get:n,has:s,enforce:function(e){return s(e)?n(e):i(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=n(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return r}}}},154182:e=>{e.exports=function(e){return"function"==typeof e}},240820:(e,t,r)=>{var i=r(616842),n=r(154182),s=/#|\.prototype\./,o=function(e,t){var r=l[a(e)];return r==c||r!=u&&(n(t)?i(t):!!t)},a=o.normalize=function(e){return String(e).replace(s,".").toLowerCase()},l=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},713200:(e,t,r)=>{var i=r(154182);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},647260:e=>{e.exports=!1},231322:(e,t,r)=>{var i=r(205216),n=r(152881),s=r(154182),o=r(488343),a=r(159338),l=i.Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return s(t)&&o(t.prototype,l(e))}},798304:(e,t,r)=>{var i=r(394617);e.exports=function(e){return i(e.length)}},733542:(e,t,r)=>{var i=r(557989),n=r(616842);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},140628:(e,t,r)=>{var i=r(205216),n=r(154182),s=r(274376),o=i.WeakMap;e.exports=n(o)&&/native code/.test(s(o))},491955:(e,t,r)=>{var i=r(209550);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:i(e)}},253595:(e,t,r)=>{var i,n=r(432362),s=r(908911),o=r(378961),a=r(800474),l=r(475855),u=r(794155),c=r(882069),d="prototype",h="script",p=c("IE_PROTO"),f=function(){},g=function(e){return"<"+h+">"+e+"</"+h+">"},m=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;m=document.domain&&i?function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):(t=u("iframe"),r="java"+h+":",t.style.display="none",l.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(g("document.F=Object")),e.close(),e.F);for(var n=o.length;n--;)delete m[d][o[n]];return m()};a[p]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f[d]=n(e),r=new f,f[d]=null,r[p]=e):r=m(),void 0===t?r:s.f(r,t)}},908911:(e,t,r)=>{var i=r(342677),n=r(686626),s=r(780522),o=r(432362),a=r(875603),l=r(602565);t.f=i&&!n?Object.defineProperties:function(e,t){o(e);for(var r,i=a(t),n=l(t),u=n.length,c=0;u>c;)s.f(e,r=n[c++],i[r]);return e}},780522:(e,t,r)=>{var i=r(205216),n=r(342677),s=r(162911),o=r(686626),a=r(432362),l=r(7385),u=i.TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",f="writable";t.f=n?o?function(e,t,r){if(a(e),t=l(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&f in r&&!r[f]){var i=d(e,t);i&&i[f]&&(e[t]=r.value,r={configurable:p in r?r[p]:i[p],enumerable:h in r?r[h]:i[h],writable:!1})}return c(e,t,r)}:c:function(e,t,r){if(a(e),t=l(t),a(r),s)try{return c(e,t,r)}catch(e){}if("get"in r||"set"in r)throw u("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},75304:(e,t,r)=>{var i=r(342677),n=r(413003),s=r(862316),o=r(136460),a=r(875603),l=r(7385),u=r(70257),c=r(162911),d=Object.getOwnPropertyDescriptor;t.f=i?d:function(e,t){if(e=a(e),t=l(t),c)try{return d(e,t)}catch(e){}if(u(e,t))return o(!n(s.f,e,t),e[t])}},97244:(e,t,r)=>{var i=r(598759),n=r(378961).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,n)}},31471:(e,t)=>{t.f=Object.getOwnPropertySymbols},915428:(e,t,r)=>{var i=r(205216),n=r(70257),s=r(154182),o=r(929291),a=r(882069),l=r(260316),u=a("IE_PROTO"),c=i.Object,d=c.prototype;e.exports=l?c.getPrototypeOf:function(e){var t=o(e);if(n(t,u))return t[u];var r=t.constructor;return s(r)&&t instanceof r?r.prototype:t instanceof c?d:null}},488343:(e,t,r)=>{var i=r(577164);e.exports=i({}.isPrototypeOf)},598759:(e,t,r)=>{var i=r(577164),n=r(70257),s=r(875603),o=r(399826).indexOf,a=r(800474),l=i([].push);e.exports=function(e,t){var r,i=s(e),u=0,c=[];for(r in i)!n(a,r)&&n(i,r)&&l(c,r);for(;t.length>u;)n(i,r=t[u++])&&(~o(c,r)||l(c,r));return c}},602565:(e,t,r)=>{var i=r(598759),n=r(378961);e.exports=Object.keys||function(e){return i(e,n)}},862316:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,n=i&&!r.call({1:2},1);t.f=n?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},590531:(e,t,r)=>{var i=r(577164),n=r(432362),s=r(230431);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),t=r instanceof Array}catch(e){}return function(r,i){return n(r),s(i),t?e(r,i):r.__proto__=i,r}}():void 0)},322903:(e,t,r)=>{var i=r(205216),n=r(413003),s=r(154182),o=r(713200),a=i.TypeError;e.exports=function(e,t){var r,i;if("string"===t&&s(r=e.toString)&&!o(i=n(r,e)))return i;if(s(r=e.valueOf)&&!o(i=n(r,e)))return i;if("string"!==t&&s(r=e.toString)&&!o(i=n(r,e)))return i;throw a("Can't convert object to primitive value")}},981922:(e,t,r)=>{var i=r(152881),n=r(577164),s=r(97244),o=r(31471),a=r(432362),l=n([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=s.f(a(e)),r=o.f;return r?l(t,r(e)):t}},820609:(e,t,r)=>{var i=r(205216),n=r(154182),s=r(70257),o=r(72022),a=r(838766),l=r(274376),u=r(256863),c=r(1899).CONFIGURABLE,d=u.get,h=u.enforce,p=String(String).split("String");(e.exports=function(e,t,r,l){var u,d=!!l&&!!l.unsafe,f=!!l&&!!l.enumerable,g=!!l&&!!l.noTargetGet,m=l&&void 0!==l.name?l.name:t;n(r)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!s(r,"name")||c&&r.name!==m)&&o(r,"name",m),(u=h(r)).source||(u.source=p.join("string"==typeof m?m:""))),e!==i?(d?!g&&e[t]&&(f=!0):delete e[t],f?e[t]=r:o(e,t,r)):f?e[t]=r:a(t,r)})(Function.prototype,"toString",(function(){return n(this)&&d(this).source||l(this)}))},635707:(e,t,r)=>{"use strict";var i=r(432362);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},17368:(e,t,r)=>{var i=r(205216).TypeError;e.exports=function(e){if(null==e)throw i("Can't call method on "+e);return e}},838766:(e,t,r)=>{var i=r(205216),n=Object.defineProperty;e.exports=function(e,t){try{n(i,e,{value:t,configurable:!0,writable:!0})}catch(r){i[e]=t}return t}},882069:(e,t,r)=>{var i=r(890171),n=r(388608),s=i("keys");e.exports=function(e){return s[e]||(s[e]=n(e))}},198489:(e,t,r)=>{var i=r(205216),n=r(838766),s="__core-js_shared__",o=i[s]||n(s,{});e.exports=o},890171:(e,t,r)=>{var i=r(647260),n=r(198489);(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:i?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},817537:(e,t,r)=>{var i=r(301438),n=Math.max,s=Math.min;e.exports=function(e,t){var r=i(e);return r<0?n(r+t,0):s(r,t)}},875603:(e,t,r)=>{var i=r(412750),n=r(17368);e.exports=function(e){return i(n(e))}},301438:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){var i=+e;return i!=i||0===i?0:(i>0?r:t)(i)}},394617:(e,t,r)=>{var i=r(301438),n=Math.min;e.exports=function(e){return e>0?n(i(e),9007199254740991):0}},929291:(e,t,r)=>{var i=r(205216),n=r(17368),s=i.Object;e.exports=function(e){return s(n(e))}},17975:(e,t,r)=>{var i=r(205216),n=r(413003),s=r(713200),o=r(231322),a=r(151743),l=r(322903),u=r(28381),c=i.TypeError,d=u("toPrimitive");e.exports=function(e,t){if(!s(e)||o(e))return e;var r,i=a(e,d);if(i){if(void 0===t&&(t="default"),r=n(i,e,t),!s(r)||o(r))return r;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),l(e,t)}},7385:(e,t,r)=>{var i=r(17975),n=r(231322);e.exports=function(e){var t=i(e,"string");return n(t)?t:t+""}},870422:(e,t,r)=>{var i={};i[r(28381)("toStringTag")]="z",e.exports="[object z]"===String(i)},209550:(e,t,r)=>{var i=r(205216),n=r(164085),s=i.String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return s(e)}},948744:(e,t,r)=>{var i=r(205216).String;e.exports=function(e){try{return i(e)}catch(e){return"Object"}}},388608:(e,t,r)=>{var i=r(577164),n=0,s=Math.random(),o=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++n+s,36)}},159338:(e,t,r)=>{var i=r(733542);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},686626:(e,t,r)=>{var i=r(342677),n=r(616842);e.exports=i&&n((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},28381:(e,t,r)=>{var i=r(205216),n=r(890171),s=r(70257),o=r(388608),a=r(733542),l=r(159338),u=n("wks"),c=i.Symbol,d=c&&c.for,h=l?c:c&&c.withoutSetter||o;e.exports=function(e){if(!s(u,e)||!a&&"string"!=typeof u[e]){var t="Symbol."+e;a&&s(c,e)?u[e]=c[e]:u[e]=l&&d?d(t):h(t)}return u[e]}},315258:(e,t,r)=>{"use strict";var i=r(741393),n=r(399826).includes,s=r(473717);i({target:"Array",proto:!0},{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},826990:(e,t,r)=>{var i=r(342677),n=r(780522),s=r(635707),o=r(616842),a=RegExp.prototype;i&&o((function(){return"sy"!==Object.getOwnPropertyDescriptor(a,"flags").get.call({dotAll:!0,sticky:!0})}))&&n.f(a,"flags",{configurable:!0,get:s})},357866:(e,t,r)=>{"use strict";var i=r(931345),n=r(216739).findLastIndex,s=i.aTypedArray;(0,i.exportTypedArrayMethod)("findLastIndex",(function(e){return n(s(this),e,arguments.length>1?arguments[1]:void 0)}))},467111:(e,t,r)=>{"use strict";var i=r(931345),n=r(216739).findLast,s=i.aTypedArray;(0,i.exportTypedArrayMethod)("findLast",(function(e){return n(s(this),e,arguments.length>1?arguments[1]:void 0)}))},460626:(e,t,r)=>{"use strict";var i=r(269055),n=r(931345),s=n.aTypedArray,o=n.exportTypedArrayMethod,a=n.TYPED_ARRAY_CONSTRUCTOR;o("toReversed",(function(){return i(s(this),this[a])}),!0)},54923:(e,t,r)=>{"use strict";var i=r(931345),n=r(577164),s=r(319748),o=r(230312),a=i.aTypedArray,l=i.exportTypedArrayMethod,u=i.TYPED_ARRAY_CONSTRUCTOR,c=n(i.TypedArrayPrototype.sort);l("toSorted",(function(e){void 0!==e&&s(e);var t=a(this),r=o(t[u],t);return c(r,e)}),!0)},249560:(e,t,r)=>{"use strict";var i=r(561835),n=r(931345),s=n.aTypedArray,o=n.exportTypedArrayMethod,a=n.TYPED_ARRAY_CONSTRUCTOR;o("with",{with:function(e,t){return i(s(this),this[a],e,t)}}.with,!0)},179795:(e,t,r)=>{"use strict";var i=r(741393),n=r(152881),s=r(136460),o=r(780522).f,a=r(70257),l=r(301891),u=r(429877),c=r(491955),d=r(914756),h=r(425745),p=r(647260),f="DOMException",g=n("Error"),m=n(f),y=function(){l(this,v);var e=arguments.length,t=c(e<1?void 0:arguments[0]),r=c(e<2?void 0:arguments[1],"Error"),i=new m(t,r),n=g(t);return n.name=f,o(i,"stack",s(1,h(n.stack,1))),u(i,this,y),i},v=y.prototype=m.prototype,b="stack"in g(f),_="stack"in new m(1,2),w=b&&!_;i({global:!0,forced:p||w},{DOMException:w?y:m});var P=n(f),A=P.prototype;if(A.constructor!==P)for(var S in p||o(A,"constructor",s(1,P)),d)if(a(d,S)){var x=d[S],C=x.s;a(P,C)||o(P,C,s(6,x.c))}},214287:(e,t,r)=>{"use strict";e=r.nmd(e);var i=function(e,t){return e<t};function n(e){if(!(this instanceof n))return new n(e);this.array=[],this.size=0,this.compare=e||i}n.prototype.add=function(e){var t,r,i=this.size;for(this.array[this.size]=e,this.size+=1;i>0&&(t=i-1>>1,r=this.array[t],this.compare(e,r));)this.array[i]=r,i=t;this.array[i]=e},n.prototype.heapify=function(e){var t;for(this.array=e,this.size=e.length,t=this.size>>1;t>=0;t--)this._percolateDown(t)},n.prototype._percolateUp=function(e){for(var t,r,i=this.array[e];e>0&&(t=e-1>>1,r=this.array[t],this.compare(i,r));)this.array[e]=r,e=t;this.array[e]=i},n.prototype._percolateDown=function(e){for(var t,r,i,n=this.size,s=this.size>>>1,o=this.array[e];e<s&&(r=(t=1+(e<<1))+1,i=this.array[t],r<n&&this.compare(this.array[r],i)&&(t=r,i=this.array[r]),this.compare(i,o));)this.array[e]=i,e=t;this.array[e]=o},n.prototype.peek=function(){if(0!=this.size)return this.array[0]},n.prototype.poll=function(){if(0!=this.size){var e=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,e}},n.prototype.replaceTop=function(e){if(0!=this.size){var t=this.array[0];return this.array[0]=e,this._percolateDown(0),t}},n.prototype.trim=function(){this.array=this.array.slice(0,this.size)},n.prototype.isEmpty=function(){return 0===this.size};r.c[r.s]===e&&function(){var e=new n((function(e,t){return e<t}));for(e.add(1),e.add(0),e.add(5),e.add(4),e.add(3);!e.isEmpty();)console.log(e.poll())}(),e.exports=n},228291:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i,n=r(235306),s=r(706533),o=r(818572),a=r(937578),l=r(791901);e=r.hmd(e);const u=a.Z.recordEvent,c=a.Z.recordChange;let d=(0,n.Z)((0,o.Z)("UIComponent"),e,"UIComponent")(i=class extends s.Z{})||i;function h(e,t,r){if(!r.get)throw new Error("@Cache can only be applied on getters.");if("function"==typeof e)throw new Error("@Cache cannot be used with static getters.");if(!(e instanceof l.Z||e instanceof d.__proto__))throw new Error("@Cache can only be used on a Disposable class.");const i="_"+t,n="_binder_"+t,s=function(){if(a.Z.mutator){const e=this[i],r=this[n].get();if(e===r)return;return this[i]=r,void c(this,t,r,e)}c(this,t)},o=r.get;r.get=function(){a.Z.active&&u(this,t);let e=this[n];if(!e){const t=o.bind(this);e=this.link(new a.Z(t,void 0,!0,s.bind(this),void 0,this)),this[n]=e,this[i]=e.previousValue}return e.dirty&&(this[i]=e.get()),this[i]}}},429350:e=>{function t(e,t){for(let r=0,i=this.length;r<i;r++){const i=this[r];if(e.call(t,i,r))return i}}function r(e,r,i){if(e)return(Array.prototype.find||t).call(e,r,i)}r.polyfill=function(){Array.prototype.find||(Array.prototype.find=t)},e.exports=r},831191:e=>{const t=(e,t)=>t.toUpperCase();e.exports=function(e){return e.replace(/-+([^-]?)/g,t)}},814891:(e,t,r)=>{e.exports=r(947254).deepClone},276716:(e,t,r)=>{r(467111),r(357866),r(460626),r(54923),r(249560);const i=[Array,Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];function n(e){return null==e}"undefined"!=typeof Uint8ClampedArray&&i.push(Uint8ClampedArray),e.exports=function e(t,r){if(t===r)return!0;if(n(t)||n(r))return!1;if(typeof t!=typeof r)return!1;if(t instanceof Date&&r instanceof Date)return t.getTime()===r.getTime();if(t instanceof RegExp&&r instanceof RegExp)return t.toString()===r.toString();if(t instanceof ArrayBuffer&&r instanceof ArrayBuffer)return e(new Uint8Array(t),new Uint8Array(r));if(t instanceof Map&&r instanceof Map||t instanceof Set&&r instanceof Set)return e(Array.from(t),Array.from(r));if(function(e,t){return i.some((r=>e instanceof r&&t instanceof r))}(t,r)){const i=!Array.isArray(t);if(t.length!==r.length)return!1;for(let n=0,s=t.length;n<s;n++)if(i){if(t[n]!==r[n])return!1}else if(!e(t[n],r[n]))return!1;return!0}if("object"==typeof t&&"object"==typeof r){let i=Object.keys(t),n=Object.keys(r);return i.sort(),n.sort(),e(i,n)&&i.every((i=>e(t[i],r[i])))}return!1}},89558:(e,t,r)=>{e.exports=r(832009).defaults},749335:e=>{e.exports=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}},813882:e=>{function t(e,r,i){if(r===e);else if(Array.isArray(r)&&Array.isArray(e))for(let n=0,s=r.length;n<s;n++)e[n]=t(e[n],r[n],i);else if("object"==typeof r&&"object"==typeof e)for(let n in r){let s=i&&i(e[n],r[n],n);void 0===s&&(s=t(e[n],r[n],i)),e[n]=s}else void 0===r&&void 0!==e||(e=r);return e}e.exports=function(e){const r=Array.prototype.slice.call(arguments,1);let i;"function"==typeof r[r.length-1]&&(i=r.pop());for(let n=0,s=r.length;n<s;n++)e=t(e,r[n],i);return e}},392188:(e,t,r)=>{e.exports=r(947254).shallowClone},947254:(e,t,r)=>{function i(e,t,r){"object"==typeof t&&(r=t.depth,t=t.circular);var i=[],n=[];return void 0===t&&(t=!0),void 0===r&&(r=1/0),function e(r,s){if(null===r)return null;if(0===s)return r;var o,a,l;if("object"!=typeof r)return r;if(r instanceof Map)o=new Map;else if(r instanceof Set)o=new Set;else if(r instanceof Promise)o=new Promise((function(t,i){r.then((function(r){t(e(r,s-1))}),(function(t){i(e(t,s-1))}))}));else if(Array.isArray(r))o=[];else{if((l=r)instanceof ArrayBuffer||l instanceof Int8Array||l instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)return r.slice(0);r instanceof RegExp?(o=new RegExp(r.source,(r.global?"g":"")+(r.ignoreCase?"i":"")+(r.multiline?"m":"")),r.lastIndex&&(o.lastIndex=r.lastIndex)):r instanceof Date?o=new Date(r.getTime()):r instanceof Error?o=Object.create(r):(a=Object.getPrototypeOf(r),o=Object.create(a))}if(t){var u=i.indexOf(r);if(-1!==u)return n[u];i.push(r),n.push(o)}r instanceof Map&&r.forEach((function(t,r){var i=e(r,s-1),n=e(t,s-1);o.set(i,n)})),r instanceof Set&&r.forEach((function(t){var r=e(t,s-1);o.add(r)}));for(let t in r){var c;a&&(c=Object.getOwnPropertyDescriptor(a,t)),c&&null===c.set||(o[t]=e(r[t],s-1))}if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);for(let t=0;t<d.length;t++){var h=d[t],p=Object.getOwnPropertyDescriptor(r,h);p&&!p.enumerable||(o[h]=e(r[h],s-1),p.enumerable||Object.defineProperty(o,h,{enumerable:!1}))}}return o}(e,r)}r(467111),r(357866),r(460626),r(54923),r(249560),e.exports={shallowClone:e=>i(e,!0,1),deepClone:e=>i(e,!0)}},832009:e=>{const t=Object.prototype,r=t.hasOwnProperty;e.exports={defaults:function(e){e=Object(e);for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return n.forEach((i=>{if(null!==i){i=Object(i);for(const n in i){const s=e[n];(void 0===s||s===t[n]&&!r.call(e,n))&&(e[n]=i[n])}}})),e}}},681500:e=>{let t=0;e.exports=function(e){return(e||"")+ ++t}},937578:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var i,n,s=r(550862),o=r(355462),a=r(487360),l=r(495440),u=r(314463),c=r(791901),d=r(293533),h=r(706913),p=a.Z.filter,f={},g=[],m=!1;const y=function(){};let v=(0,s.Z)({FirstExecutionMarker:f})((n=class e extends c.Z{static pushMutator(t){e.mutatorsStack.push(e.mutator),e.mutator=t}static popMutator(t){e.mutator===t?e.mutator=e.mutatorsStack.pop():console.error("Trying to pop a mutator that is not in the top of the stack")}static run(t,r,i){var n=e.active;e.active=t;var s=i&&i.track;s&&(t.track=i,h.Z.groupStart("Running "+(i.name||"bindings")));try{return r.call(i)}finally{s&&(h.Z.groupEnd("Running "+(i.name||"binder")),t.track=null),e.active=n}}static recordEvent(t,r){var i=e.active;if(i){if(i.track){let e=(0,d.Z)(t)+"-"+(t.constructor?t.constructor.name:"Anonymous");h.Z.log("Recording",e,r)}i.push({obj:t,eventName:r})}}static recordChange(t,r,i,n){o.Z.trigger(t,r);var s=e.mutator;s&&s.record(t,r,i,n)}constructor(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.Z,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;var a;if(super(),this.previousValue=f,this.bindings=[],this.dirty=!!i,this.disposableParent=o,this.valueGetter="function"==typeof(a=t)?a:"object"==typeof a&&"function"==typeof a.get?a.get:y,this.set=function(e){return"object"==typeof e&&"function"==typeof e.set?e.set:y}(t),this.callback=r||y,n&&n instanceof u.Z){var c=n,d=this.apply.bind(this);n=()=>c.push(d,s)}this.invalidate=()=>{if(e.active!==this){if(this.track){var t=new Error;Error.captureStackTrace(t),h.Z.log("change detected",window._signal,t.stack)}n?(this.dirty=!0,n()):this.compute()}},i?this.get():this.compute()}removeBindings(){var e=this.bindings;if(e){for(var t=this.invalidate,r=0,i=e.length;r<i;++r){var n=e[r];n.ref.remove(t),n.dispose&&n.dispose()}this.bindings=null}}dispose(){this.removeBindings(),super.dispose()}update(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var r=this.previousValue;if(r===f||r!==e)return this.previousValue=e,t&&this.callback(e),!0}apply(){if(!this.isDisposed&&this.dirty)return this.compute()}_computeInnerValue(){this.dirty=!1,this.removeBindings();var t=this.disposableParent;if(!t||!t.isDisposed){m&&(g=[]),m=!0;var r=g,i=e.run(r,this.valueGetter,this);if(i=p(r,i),m=!1,!r.length)return i;g=[];var n=this.invalidate;for(let e=0,t=r.length;e<t;++e){let t=r[e];t.ref=o.Z.on(t.obj,t.eventName,n)}return this.bindings=r,i}}compute(){var e=this._computeInnerValue();return this.update(e,!0)}get(){var e=this._computeInnerValue();return this.update(e,!1),e}},n.mutatorsStack=[],n.active=null,n.mutator=null,i=n))||i},574964:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i,n=r(979985),s=r(446074),o=r(255294),a=r(937578),l=r(355462);let u=(i=class extends a.Z{update(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{previousValue:r}=this;return r===e?!!this.lengthChanged&&(this.lengthChanged=!1,t&&this.invokeCallback(e),!0):(r===this.FirstExecutionMarker?this.previousValue=e:r&&"object"==typeof r&&l.Z.stopListening(this,r),this.lengthChanged=!1,e&&"object"==typeof e&&l.Z.listenTo(this,e,"change",this.onLengthChanged),t&&this.invokeCallback(e),!0)}onLengthChanged(){this.lengthChanged=!0,this.invalidate()}invokeCallback(e){e instanceof o.Z?this.callback(e.base):this.callback(e)}},(0,n.Z)(i.prototype,"onLengthChanged",[s.Z],Object.getOwnPropertyDescriptor(i.prototype,"onLengthChanged"),i.prototype),i)},487360:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=[r(949769).Z],n=1;const s={add(e){i.push(e),n=i.length},remove(e){var t=i.indexOf(e);-1!==t&&i.splice(t,1),n=i.length},filter(e,t){for(var r=0,s=n;r<s;++r){var o=i[r](e,t);if(o)return o.value}return t}}},255294:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{}},949769:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(749335),n=r.n(i);function s(e,t){if(n()(t)){var r=t._torq_binding;if(r)return r.resolved||e.push({eventName:"update",obj:r}),r}}},355462:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o,e:()=>i});var i="_signals";const n=Symbol("owner"),s=function(e){return null!==e};class o{constructor(e){this[n]=void 0,this[n]=e,this.handlers=[],this.nullHandlers=0}add(e){this.handlers.push(e)}remove(e){var t=this.handlers,r=t.indexOf(e);-1!==r&&(t[r]=null,this.nullHandlers++,this.nullHandlers>t.length/4&&(this.handlers=t.filter(s),this.nullHandlers=0))}trigger(){for(var e=this.handlers.slice(),t=this[n],r=0,i=e.length;r<i;++r){var s=e[r];s&&s.apply(t,arguments)}}triggerNoArgs(){for(var e=this.handlers.slice(),t=this[n],r=0,i=e.length;r<i;++r){var s=e[r];s&&s.call(t)}}triggerWithArray(e){for(var t=this.handlers.slice(),r=this[n],i=0,s=t.length;i<s;++i){var o=t[i];o&&o.apply(r,e)}}static trigger(e,t){var r=e._signals;if(r&&r[n]===e){var i=r[t];if(i)return i.triggerWithArray(Array.prototype.slice.call(arguments,2)),i}}static triggerNoArgs(e,t){var r=e._signals;if(r&&r[n]===e){var i=r[t];if(i)return i.triggerNoArgs(),i}}static on(e,t,r){var s=e._signals;s&&s[n]===e||((s={})[n]=e,Object.defineProperty(e,i,{enumerable:!1,configurable:!1,value:s}));var a=s[t];return a||(a=s[t]=new o(e)),a.handlers.push(r),a}static off(e,t,r){var i=e._signals;if(i&&i[n]===e){var s=i[t];s&&s.remove(r)}}static listenTo(e,t,r,i){var n=e._listening;n||(e._listening=n=[]);var s=function(){i.apply(e,arguments)};n.push({obj:t,name:r,method:i,handler:s}),o.on(t,r,s)}static stopListening(e,t,r,i){var n=e._listening;if(n)for(var s=0,a=n.length;s<a;){var l=n[s];t&&l.obj!==t||r&&l.name!==r||i&&l.method!==i?++s:(o.off(l.obj,l.name,l.handler),n.splice(s,1),--a)}}}},35609:(e,t,r)=>{"use strict";function i(e,t,r){"function"==typeof r.get?r.get=function(){throw new Error(`Abstract getter ${t} called on ${e.constructor.name}`)}:"function"==typeof r.set?r.set=function(){throw new Error(`Abstract setter ${t} called on ${e.constructor.name}`)}:(r.writable=!0,r.value=function(){throw new Error(`Abstract method ${t} called on ${e.constructor.name}`)})}r.d(t,{Z:()=>i})},446074:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(411199);function n(e,t,r){const n=i.Z.getInitialValue(r);if("function"!=typeof n)throw new Error(`@Bind can only be applied to a function. (property: ${t})`);delete r.value,delete r.writable,r.get=function(){if(e===this)return n;const r=n.bind(this);return Object.defineProperty(this,t,{configurable:!0,enumerable:!1,value:r}),r}}},818572:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=r(411199).Z.makeClassDecorator(((e,t,r)=>{if(t&&(e.prototype._xrayClassName=t),r){const t=e.prototype.events;Object.assign(e.prototype,r),r.events&&t&&(e.prototype.events=t.concat(r.events))}}))},411199:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{static _isDirectClassInvocation(e){return 1===e.length&&"function"==typeof e[0]}static _isDirectPropertyInvocation(e){return 3===e.length&&e[2]&&Object.prototype.hasOwnProperty.call(e[2],"configurable")}static wrapPropertyDecorator(e,t,r){const n=i.getInitialValue(r);return delete r.value,delete r.writable,r.get=function(){if(e===this)return n;const r=i.makePropertyDecorator(n.bind(this));return Object.defineProperty(this,t,{configurable:!0,enumerable:!1,value:r}),r},r}static makePropertyDecorator(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];if(i._isDirectPropertyInvocation(n))return e.apply(this,n);if(t.throwOnClassInvocation&&i._isDirectClassInvocation(n))throw new Error(t.throwOnClassInvocation);return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.apply(this,r.concat(n))}}}static makeClassDecorator(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return i._isDirectClassInvocation(r)?e.apply(this,r):function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e.apply(this,i.concat(r))}}}static getInitialValue(e){return e.initializer?e.initializer():e.value}}},235306:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(355462),n=r(49891);function s(e){this.name=e,this.signal=new i.Z}function o(e,t,r){return function(i){var o=e(i)||i,a=t.hot;if(a){var l="component"+r,u=a.data&&a.data[l];a.accept(),a.dispose((e=>e[l]=u)),u?(u.instance=o,n.Z.push((()=>u.signal.triggerNoArgs()))):u=new s(r),o.hotReloader=u}return o}}},670402:(e,t,r)=>{"use strict";function i(e,t,r){var i="_"+t,n=r.get;if(!n)throw new Error("@Memoize can only be applied on getters.");r.get=function(){if(Object.prototype.hasOwnProperty.call(this,i))return this[i];var e=n.call(this);return this[i]=e,Object.defineProperty(this,t,{configurable:!0,value:e}),e}}r.d(t,{Z:()=>i})},785919:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(937578);const n=i.Z.recordEvent,s=i.Z.recordChange,o={defaultValue:!0};function a(e,t,r){const a="_"+t,l=r.initializer;if(l)Object.defineProperty(e,a,{configurable:!0,enumerable:!1,writable:!0,value:o});else if(e[a]===o)return{configurable:!0,enumerable:!1,get(){return delete e[t],this[t]},set(r){delete e[t],this[t]=r}};var u=e.definedObservables;return Object.prototype.hasOwnProperty.call(e,"definedObservables")||(u=u?Object.assign({},u):{},Object.defineProperty(e,"definedObservables",{configurable:!0,enumerable:!1,writable:!0,value:u})),u[t]=!0,{configurable:!0,enumerable:!1,get(){i.Z.active&&n(this,t);var e=this[a];return e===o&&(e=this[a]=l.call(this)),e},set(e){var r=this[a];r===o&&(r=this[a]=l.call(this)),r!==e&&(this[a]=e,s(this,t,e,r))}}}},550862:(e,t,r)=>{"use strict";function i(e){return function(t){e&&Object.assign(t.prototype,e)}}r.d(t,{Z:()=>i})},593795:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(831191),n=r.n(i);const s=/^(?:(.+?):)?(on-)?(.*)$/,o=function(){};class a{constructor(e,t){this.isEvent=t,this.configurable=!0,this.enumerable=!1,e.get?(this.get=e.get,this.set=e.set||o):this.value=e.value;const r=s.exec(e.original||e.name||"");this.namespace=r[1],this.name=r[3],this.normalizedName=a.normalizeName(r[3]),this.isEvent=this.isEvent||!!r[2]}static normalizeName(e){return n()(e)}isValid(){return!!this.name}toChildAttribute(e,t){let r=t&&this.namespace?this.namespace+":":"";return this.isEvent?{name:r+"on-"+this.name,value:this.value.bind(e)}:this.get?{name:r+this.name,get:this.get.bind(e),set:this.set.bind(e)}:{name:r+this.name,value:this.value}}matchesNamespace(e){return!e||e===this.namespace}static forEachSpread(e,t,r){for(let i of t){const t=i(e);if(t instanceof Array)for(let e of t){const t=new a(e);t.isValid()&&r(t)}else if("object"==typeof t)for(let e in t){let i=t[e];if(Object.prototype.hasOwnProperty.call(t,e)){let t;i&&(Object.prototype.hasOwnProperty.call(i,"value")||Object.prototype.hasOwnProperty.call(i,"get"))?(i.name=e,t=i):t={name:e,value:i};const n=new a(t);n.isValid()&&r(n)}}}}}},706533:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var i=r(593795),n=r(280418),s=r(898950),o=r(706913),a=r(681500),l=r.n(a),u=null,c={};const d=Symbol("addToChildAttributes"),h=Symbol("shouldPropagateChildAttribute"),p=Symbol("attachSpreads"),f=Symbol("getChildTemplate"),g=Symbol("renderChildTemplate");class m extends s.Z{constructor(){if(super(),u){var{scope:e,factory:t,data:r,spreads:i}=u;r.$_component=this,this.scope=e,this.$_depth=t.depth,this.$_factory=t,this.$_view=r,i&&this[p](i)}}attached(){}detached(){}[f](e){if(this.childrenBlocks)return this.childrenBlocks[e]||this.childrenBlocks[e.replace(/:/g,"_")]}[g](e,t){let r={template:e,$_parent:this.$_view};return t&&(r.$_injectScope=e=>{for(var r=0,i=t.length;r<i;++r)e[`v${r}`]=t[r]}),r}renderChildren(e,t){if(e=e||"children",!t&&e instanceof Array&&(t=e,e="children"),t&&!(t instanceof Array))throw new Error("args parameter to renderChildren() must be an array");let r=this[f](e);return r?this[g](r,t):null}hasChildren(e){return e=e||"children",void 0!==this[f](e)}get children(){return this.renderChildren()}[h](e){if(e.isEvent){if(this.events&&(this.events.indexOf(e.name)>-1||this.events.indexOf(e.normalizedName)>-1))return!1}else if(this.definedAttributes&&this.definedAttributes[e.normalizedName])return!1;return!0}[d](e,t,r){t.matchesNamespace(r)&&this[h](t)&&e.push(t.toChildAttribute(this,!r))}undeclaredAttributes(e){const t=[];if(this.sourceAttributes)for(let r of this.sourceAttributes)this[d](t,new i.Z(r),e);if(this.spreadAttributes&&i.Z.forEachSpread(this.$_view,this.spreadAttributes,(r=>{this[d](t,r,e)})),this.eventAttributes)for(let r of this.eventAttributes)this[d](t,new i.Z(r,!0),e);return t}static attachAttributes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return t;for(var n=0,s=e.length;n<s;++n){const s=new i.Z(e[n]),o=s.normalizedName,a=t.definedAttributes&&t.definedAttributes[o];if(!a){const e=o in t;if(t.definedObservables&&t.definedObservables[o])console.warn(`WARNING: The JSX attribute "${o}" was passed to a component declaring an @Observable of the same name. The JSX attribute will be ignored in a future Torq release. Use the @Attribute decorator to declare JSX attributes.`);else{if(e){console.warn(`ERROR: The JSX attribute "${o}" was passed to a component declaring a property of the same name. Ignoring the JSX attribute.`);continue}if(r)continue}}Object.defineProperty(t,a||o,s)}return t}[p](e){const t=this.events,r=this.definedAttributes;(r||t)&&i.Z.forEachSpread(this.$_view,e,(e=>{const i=e.name,n=e.normalizedName,s=r&&r[n];s?Object.defineProperty(this,s,e):e.isEvent&&t&&t.indexOf(i)>-1&&!e.namespace&&e.value&&this.on(i,e.value)}))}static getBlockTemplate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children";if(e)for(var r=0,i=e.length;r<i;++r){var n=e[r];if(n.name===t)return n.template}}static attachBlockTemplates(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e)for(var r=0,i=e.length;r<i;++r){var n=e[r];t[n.name]=n.template}return t}static make(e){var t,r,s,a,l,d,h,p,f,g,{attributes:y,spreads:v,blocks:b,init:_,events:w}=e||{};C(this);var P,A,S,x=n.ZP.make({render:function(e,t){var i=u;u=c||{},c=null,u.scope=s?e.scope.fork():e.scope,u.data=t,u.factory=e,u.spreads=v,u.definedAttributes=f;var o=new r;u.scope=null,u.data=null,c=u,u=i,_&&_(t,o),p&&O(o);var d,h=e.pushScope(o.scope),{parentNode:g,nextNode:m}=e,y=a&&a.call(o);y&&y.template?((d=y.template.make(e)).$_parent=t,d.$_scope=y):d=n.ZP.EmptyTemplate.make(e);e.parentNode=g,e.nextNode=m,t.$_view=d,d.template.run(e,d),e.restoreScope(h),l&&l.call(o),P&&(t.$_hotReloadFactory=e,t.$_hotReloadScope=e.scope,t.$_hotReloadNext=A,A&&(A.$_hotReloadPrevious=t),A=t)},reuse:k,dispose:E,move:function(e,t){var r=t.$_view;r.template.move(e,r)},firstChild:function(e,t){var r=t.$_view;return r.template.firstChild(e,r)},lastChild:function(e,t){var r=t.$_view;return r.template.lastChild(e,r)}});return(P=t.hotReloader)&&(S=new Set,P.signal.add((()=>{o.Z.log("[HMR] Patching component",P.name);let e=0;for(let t=A;t;t=t.$_hotReloadNext)++e,E(t.$_hotReloadFactory,t,!0);o.Z.log("[HMR] Disposed ",e," instances of ",P.name),C(P.instance),S.forEach((e=>x.releaseCache(e))),e=0;for(let t=A;t;t=t.$_hotReloadNext){++e;let r=t.$_hotReloadFactory,i=r.pushScope(t.$_hotReloadScope);k(r,t,!0),r.restoreScope(i)}o.Z.log("[HMR] Updated ",e," instances of ",P.name)}))),x;function C(e){if(t=e,r=class extends t{},m.attachAttributes(y,r.prototype,!0),r.prototype.childrenBlocks=m.attachBlockTemplates(b),r.prototype.sourceAttributes=y,r.prototype.spreadAttributes=v,r.prototype.eventAttributes=w,s=r.prototype.fork,a=r.prototype.render,l=r.prototype.attached,d=r.prototype.detached,l===m.prototype.attached&&(l=null),d===m.prototype.detached&&(d=null),h=r.prototype.dispose,f=r.prototype.definedAttributes,(g=r.prototype.events)&&w){p=[];for(let e=0,t=w.length;e<t;++e){const t=w[e];if(g.indexOf(t.name)>-1)p.push(t);else{var n=i.Z.normalizeName(t.name);g.indexOf(n)>-1&&(t.name=n,p.push(t))}}}}function O(e){for(var t=0,r=p.length;t<r;++t){var i=p[t];e.on(i.name,i.value)}}function k(e,t,i){var o=u;u=c||{},c=null,u.scope=s?e.scope.fork():e.scope,u.data=t,u.factory=e,u.spreads=v,u.definedAttributes=f;var d=new r;u.scope=null,u.data=null,c=u,u=o,_&&_(t,d),p&&O(d);var h=e.pushScope(d.scope);e.gotoAfterView(t.$_view),t.$_view.template.cache(e,t.$_view);var g,{parentNode:m,nextNode:y}=e,b=a&&a.call(d);b&&b.template?((g=b.template.make(e)).$_parent=t,g.$_scope=b):g=n.ZP.EmptyTemplate.make(e),e.parentNode=m,e.nextNode=y,t.$_view=g,g.template.run(e,g),e.restoreScope(h),l&&l.call(d),!i&&P&&(t.$_hotReloadFactory=e,t.$_hotReloadScope=e.scope,t.$_hotReloadNext=A,A&&(A.$_hotReloadPrevious=t),A=t)}function E(e,t,r){var i=t.$_component;!r&&P&&(t.$_hotReloadFactory=e,A===t&&(A=t.$_hotReloadNext),t.$_hotReloadNext&&(t.$_hotReloadNext.$_hotReloadPrevious=t.$_hotReloadPrevious),t.$_hotReloadPrevious&&(t.$_hotReloadPrevious.$_hotReloadNext=t.$_hotReloadNext),t.$_hotReloadScope=null,t.$_hotReloadNext=null,t.$_hotReloadPrevious=null,t.$_hotReloadFactory=null,S.add(e)),d&&d.call(i);var n=t.$_view;n.template.dispose(e,n),p&&function(e){for(var t=0,r=p.length;t<r;++t){var i=p[t];e.off(i.name,i.value)}}(i),_&&_(t,null),h&&h.call(i),n.$_parent=null,n.$_scope=null,n.$_factory=null,i.scope=null,i.$_view=null,t.$_component=null}}static makeDynamic(e){var t=l()("_dynamicTemplate");return{make(r,i){if(!i)return n.ZP.EmptyTemplate;var s=i[t];return s&&s.$_base===i||((s=i[t]=r.makeComponent(i,e)).$_base=i),s}}}}},280418:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>l});var i=r(89558),n=r.n(i),s=!0;const o={render(){},init(){},dispose(){},move(){},reuse(){}};var a=0;class l{static make(e){if(!e.firstChild)return console.warn("Template didn't provide a first child method, so we cannot use it. Switching to EmptyTemplate.",e),l.EmptyTemplate;e.lastChild||(e.lastChild=e.firstChild);var t=++a;const r=!1!==e.cache;var i=n()(e,o),{render:u,init:c,dispose:d,move:h,reuse:p,prepare:f}=i,g={};return i.render=function(e,t){++e.depth,u(e,t),c(e,t),--e.depth},i.dispose=function(e,t){if(t.$_disposed)throw new Error("Invalid dispose on disposed template.");var{parentNode:r,nextNode:i}=e;d(e,t),t.$_disposed=!0,e.parentNode=r,e.nextNode=i},i.reuse=function(e,t){if(!t.$_disposed)throw new Error("Invalid reuse on live template.");t.$_disposed=!1;var{parentNode:r,nextNode:i}=e;++e.depth,p(e,t),c(e,t),--e.depth,e.parentNode=r,e.nextNode=i},i.cache=function(e,i){var n=e.parentNode,o=e.nextNode;i.$_disposed||(i.$_disposed=!0,d(e,i)),i.$_cache||(e.parentNode=i.$_cache=e.makeFragment(),e.nextNode=null,h(e,i),s&&r&&e.templates.put(t,i)),e.parentNode=n,e.nextNode=o},i.run=function(e,t){if(!t.$_cache)return++e.depth,u(e,t),c(e,t),void--e.depth;e.pushNode(t.$_cache),t.$_cache=null,t.$_disposed=!1;var{parentNode:r,nextNode:i}=e;++e.depth,p(e,t),c(e,t),--e.depth,e.parentNode=r,e.nextNode=i},i.make=function(e){if(g[e.id]||(f&&f(e),g[e.id]=!0,s&&r&&e.templates.init(t)),s&&r){var n=e.templates.take(t);if(n)return n}return{template:i,$_cache:null,$_disposed:!1}},i.releaseCache=function(e){e.templates.removeAll(t)},i}}l.EmptyTemplate=l.make({render(e,t){t.comment=e.pushCommentNode("empty template")},move(e,t){e.pushNode(t.comment)},firstChild:(e,t)=>t.comment})},495440:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(478207),n=r(49891);const s=new i.Z(n.Z,"UI Task Queue",100)},902049:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(739861);class n{constructor(){this.promise=new i.Z(((e,t)=>this._deferredApi={resolve:e,reject:t}))}resolve(e){this._deferredApi.resolve(e)}reject(e){this._deferredApi.reject(e)}}},791901:(e,t,r)=>{"use strict";function i(e){e.dispose?e.dispose():"function"==typeof e&&e()}r.d(t,{Z:()=>n});class n{link(e){var t=this._disposables;return t||(t=this._disposables=[]),t.push(e),e}unlink(e){var t=this._disposables;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}}disposeLink(e){this.unlink(e),i(e)}dispose(){this.isDisposed=!0;var e=this._disposables;if(e){this._disposables=null;for(var t=e.length-1;t>=0;--t)i(e[t])}}}},331248:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=window},706913:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{static log(){console.log.apply(console,arguments)}static assert(){console.assert.apply(console,arguments)}static table(){console.table.apply(console,arguments)}static groupStart(){console.group.apply(console,arguments)}static groupEnd(){console.groupEnd.apply(console,arguments)}}},478207:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i,n=r(979985),s=r(446074),o=r(314463);let a=(i=class extends o.Z{constructor(e,t,r){super(),this.parent=e,this.name=t,this.priority=r}enqueue(){this.parent.push(this.run,this.priority)}register(e){e?this.parent.after.push(this.enqueue):this.enqueue()}},(0,n.Z)(i.prototype,"enqueue",[s.Z],Object.getOwnPropertyDescriptor(i.prototype,"enqueue"),i.prototype),i)},293533:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=0,n="__object_id__";function s(e){if(!e||"number"==typeof e||"string"==typeof e)return e;if(!Object.prototype.hasOwnProperty.call(e,n)){var t="_"+ ++i;return Object.defineProperty(e,n,{enumerable:!1,configurable:!1,writable:!1,value:t}),t}return e[n]}s.set=function(e,t){Object.defineProperty(e,n,{enumerable:!1,configurable:!1,writable:!1,value:t})};const o=s},739861:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(355462);class n extends Promise{constructor(e){var t={resolved:!1,value:void 0};t.obj=t,super(((r,n)=>{const s=e=>{t.resolved=!0,t.value=e,i.Z.trigger(t,"update")};e((e=>{s(e),r(e)}),(e=>{s(null),n(e)}))})),this._torq_binding=t}}},738817:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(355462),n=r(937578),s=r(255294);class o extends s.Z{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;super(),this._swapItems(e)}_swapItems(e){if(e instanceof Set)this.base=e;else{if("function"!=typeof e[Symbol.iterator])throw new Error("ObservableSet expects either a Set object or an iterable object.");this.base=new Set(e)}}swapItems(e){this._swapItems(e),i.Z.trigger(this,"change")}get size(){return n.Z.active&&n.Z.recordEvent(this,"change"),this.base.size}get length(){return this.size}[Symbol.iterator](){return this.base.values()}}var a=Set.prototype,l=o.prototype,u=["add","clear","delete"];function c(e,t){return t?function(){var t=e.apply(this.base,arguments);return i.Z.trigger(this,"change"),t}:function(){return n.Z.active&&n.Z.recordEvent(this,"change"),e.apply(this.base,arguments)}}for(var d=Object.getOwnPropertyNames(a),h=0,p=d.length;h<p;++h){var f=d[h];Object.prototype.hasOwnProperty.call(l,f)||(l[f]=c(a[f],-1!==u.indexOf(f)))}},898950:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(791901),n=r(355462),s=r(937578),o=r(574964),a=r(495440);const l=function(){};class u extends i.Z{watch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.Z,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.$_depth||0;return this.link(new s.Z(e,t,r,i,n,this))}watchCollection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.Z,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.$_depth||0;return this.link(new o.Z(e,t,r,i,n,this))}multiWatch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.Z,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.$_depth||0;return this.link(new s.Z((()=>e.map((e=>e()))),(e=>t.apply(null,e)),r,i,n,this))}defineObservable(e,t){if(Object.prototype.hasOwnProperty.call(this,e))this[e]=t;else{var r="_"+e;this[r]=t;var i=this;Object.defineProperty(this,e,{configurable:!0,enumerable:!1,get:()=>(s.Z.active&&s.Z.recordEvent(i,e),i[r]),set(t){var n=i[r];n!==t&&(i[r]=t,s.Z.recordChange(i,e,t,n))}})}}dispose(){this.stopListening(),super.dispose()}trigger(e){if(Object.prototype.hasOwnProperty.call(this,n.e)){var t=this[n.e][e];if(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];t.trigger.apply(t,i)}}}on(e,t){return n.Z.on(this,e,t)}off(e,t){return n.Z.off(this,e,t)}listenTo(e,t,r){return n.Z.listenTo(this,e,t,r)}stopListening(e,t,r){return n.Z.stopListening(this,e,t,r)}}},314463:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i,n=r(979985),s=r(446074),o=r(35609),a=r(293533);let l=(i=class{constructor(){this.running=!1,this.registered=!1,this.itemMap={},this.maxBucket=-1,this.buckets=[],this.bucketMap={}}register(){}push(e,t,r){var i=(0,a.Z)(e);t=Number(t)||0;var n=this.itemMap[i];if(n){if(n.lateBinder=r,n.cancel=!1,n.priority!==t){var s=n.bucket.items,o=s.indexOf(n);s[o]=null,n.priority=t}else if(!n.executed)return;n.executed=!1}else n={callback:e,priority:t,cancel:!1,executed:!1,lateBinder:r},this.itemMap[i]=n;var l=this.bucketMap[t]||this._makeBucket(t);this.maxBucket=Math.max(this.maxBucket,l.index),n.bucket=l,l.items.push(n),this.registerIfNeeded()}_makeBucket(e){for(var t=this.buckets,r=0,i=t.length-1;r<=i;){var n=Math.round((r+i)/2);t[n].priority<e?i=n-1:r=n+1}var s=this.bucketMap[e]={priority:e,items:[],index:r};this.buckets.splice(r,0,s),r<=this.maxBucket&&++this.maxBucket;for(var o=t.length;r<o;++r)t[r].index=r;return s}wrap(e,t,r){return()=>this.push(e,t||0,r)}registerIfNeeded(){this.registered||(this.registered=!0,this.register(this.inAfterCall))}get after(){var e=this._after;return e||(e=this._after=new u(this)),e}remove(e){var t=(0,a.Z)(e),r=this.itemMap[t];r&&(r.executed=!1,r.cancel=!0)}execHoisted(e){for(;e.length;){var t=e.pop();t.cancel||(t.executed=!0,t.callback())}}execCallbacks(e){for(var t=this.buckets;this.maxBucket>=0;){var r=t[this.maxBucket].items;if(r.length){var i=r.pop();i&&!i.cancel&&(i.lateBinder?e?e.push(i):e=[i]:(i.executed=!0,i.callback()))}else--this.maxBucket}return e}run(){if(this.maxBucket>=0){this.running=!0;for(var e=null;this.maxBucket>=0||e;)try{for(;this.maxBucket>=0||e;)(e=this.execCallbacks(e))&&(this.execHoisted(e),e=null)}catch(e){console.error(e),console.error(e.stack)}this.running=!1}this.itemMap={},this.registered=!1;var t=this._after;t&&(this.inAfterCall=!0,t.run(),this.inAfterCall=!1)}quickRun(){if(this.maxBucket>=0){this.running=!0;for(var e=null;this.maxBucket>=0||e;)(e=this.execCallbacks(e))&&(this.execHoisted(e),e=null);this.running=!1}this.itemMap={},this.registered=!1;var t=this._after;t&&(this.inAfterCall=!0,t.run(),this.inAfterCall=!1)}},(0,n.Z)(i.prototype,"register",[o.Z],Object.getOwnPropertyDescriptor(i.prototype,"register"),i.prototype),(0,n.Z)(i.prototype,"run",[s.Z],Object.getOwnPropertyDescriptor(i.prototype,"run"),i.prototype),(0,n.Z)(i.prototype,"quickRun",[s.Z],Object.getOwnPropertyDescriptor(i.prototype,"quickRun"),i.prototype),i);class u extends l{constructor(e){super(),this.parent=e}register(){this.parent.registerIfNeeded()}}},716303:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(331248);const n=i.Z.performance&&i.Z.performance.now?()=>performance.now():Date.now?()=>Date.now():()=>(new Date).getTime()},49891:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i,n=r(979985),s=r(446074),o=r(314463),a=r(331248),l=r(716303),u=function(e){setTimeout(e,0)},c=a.Z.requestAnimationFrame||a.Z.webkitRequestAnimationFrame||a.Z.mozRequestAnimationFrame||u,d=c;const h=new(i=class extends o.Z{constructor(){super(...arguments),this.tickTime=(0,l.Z)()}get background(){return d===u}set background(e){d=e?u:c}register(){d.call(a.Z,this.run)}request(e){d.call(a.Z,e)}wrapAll(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];r.forEach((t=>e[t]=this.wrap(e[t].bind(e))))}wrap(e){return()=>this.push(e)}tick(){(0,l.Z)()-this.tickTime>=5&&this.run()}run(){this.tickTime=(0,l.Z)();super.run.call(this)}},(0,n.Z)(i.prototype,"run",[s.Z],Object.getOwnPropertyDescriptor(i.prototype,"run"),i.prototype),i)},752470:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b,zt:()=>v});var i=r(873898),n=r(979985),s=r(176262),o=r(670402),a=r(785919),l=r(956508),u=r(937578),c=r(898950),d=r(902049);let h;if(window.ZString){var p,f,g,m;const e=window.ZString;e._callbacks||(e._callbacks=[],e._locale=e.locale,e._translations=e.translations,Object.defineProperty(e,"locale",{configurable:!0,enumerable:!0,get:()=>e._locale,set(t){if(t!==e._locale){e._locale=t;for(const r of e._callbacks)r.locale(t)}}}),Object.defineProperty(e,"translations",{configurable:!0,enumerable:!0,get:()=>e._translations,set(t){if(t!==e._translations){e._translations=t;for(const r of e._callbacks)r.translations(t)}}}));let t=(0,s.Z)({prototype:e})(p=class extends c.Z{})||p;f=class extends t{get locale(){return this._locale}set locale(t){e.locale=t}get translations(){return this._translations}set translations(t){e.translations=t}translate(){return u.Z.recordEvent(this,"_translations"),u.Z.recordEvent(this,"_locale"),super.translate(...arguments)}constructor(){super(),(0,i.Z)(this,"_locale",g,this),(0,i.Z)(this,"_translations",m,this),this._readyDeferred=new d.Z,this._isReady=!1,this.watch((()=>this.locale),(e=>{null==e||this._isReady||(this._isReady=!0,this._readyDeferred.resolve())})),e._callbacks.push({locale:e=>{this._locale=e},translations:e=>{this._translations=e}})}get readyJP(){return this._readyDeferred.promise}get language_display_name(){return this.locale_hash[this.locale]}get locale_hash(){const e={};for(const t of l.supported){const r=l.display_names[t];r&&(e[t]=r)}return e}},g=(0,n.Z)(f.prototype,"_locale",[a.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e.locale}}),m=(0,n.Z)(f.prototype,"_translations",[a.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e.translations}}),(0,n.Z)(f.prototype,"locale_hash",[o.Z],Object.getOwnPropertyDescriptor(f.prototype,"locale_hash"),f.prototype),h=f}else h=r(540882).Z;const y=new h;for(let[e,t]of Object.entries(l.urls))Object.defineProperty(y,e,{get(){const{locale:r}=this,i=l.adobecom_language_codes[r],n=i?`${i}/`:"",s=(5===r.length?r.split("-",2)[1]:r).toLowerCase();if("string"!=typeof t)if(t.locales)t=t.locales[r]||t.locales.default;else if(t.hostnames)t=t.hostnames[window.location.hostname]||t.hostnames.default;else{if(!t.environments||"undefined"==typeof env)throw e;t=t.environments[env]||t.environments.default}return t.replace("${adobecom_country_fragment}",n).replace("${locale}",r).replace("${country_code_downcase}",s)}});const v=y.translate.bind(y),b=y},108856:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const i={app:!0,shareType:null};window.siteCheck=()=>{console.log("Entry.app",i.app),console.log("Entry.embed",i.embed),console.log("Entry.site",i.site),console.log("Entry.sdk",i.sdk),console.log("Entry.shareType",i.shareType)};const n=i},65912:(e,t,r)=>{"use strict";var i=r(108856);delete i.Z.app,i.Z.sdk=!0},533111:(e,t,r)=>{"use strict";var i=r(979985),n=r(4987),s=r(411199);const o=s.Z.makePropertyDecorator(((e,t,r,i)=>{n.Z.is_enabled(i)&&Object.defineProperty(e,t,r)}));r(65912);var a,l,u,c,d,h=r(42733),p=(r(315258),r(467111),r(357866),r(460626),r(54923),r(249560),r(898950)),f=r(346958),g=r(413077);n.Z.is_enabled("debug")?(c=new f.Z,u={},d={usedLrMobile:{enabled:!1,value:!1},usedLrDesktop:{enabled:!1,value:!1},accountStatus:{enabled:!1,value:"trial"},debugDialogTab:"Account"},window.Debug=a={enabled:!0,overrides:c.get("debug_overrides")||g.Z.extend(!0,{},d),saveOverrides:function(){var e;return(e=new Date).setFullYear(e.getFullYear()+1),c.set("debug_overrides",JSON.stringify(a.overrides),{path:"/",expires:e})},clearOverrides:function(){return a.overrides=g.Z.extend(!0,{},d),c.remove("debug_overrides",{path:"/"})}},a.overrides=g.Z.extend(!0,{},d,a.overrides),window.DebugManager=l={set:function(e,t,r){return u[e]=t,a[e]=r},remove:function(e){return delete a[e],delete u[e]}},l.set("help","list available commands",(function(){var e,t,r;for(t in r="",u)e=u[t],r+=`\n${t}:${Array(15-t.length).join(" ")}${e}`;return r}))):(window.Debug=a={},window.DebugManager=l={set:function(){},remove:function(){}});const m=function(){return n.Z.is_enabled("debug")&&a.overrides.usedLrDesktop.enabled},y=function(){return a.overrides.usedLrDesktop.value},v=function(){return n.Z.is_enabled("debug")&&a.overrides.usedLrMobile.enabled},b=function(){return a.overrides.usedLrMobile.value},_=function(e,t){var r;return!(null!=(r=n.Z.is_enabled("debug_random_failures")&&Math.random()<t)&&!r)&&(console.log(`Randomly failing ${e}`),!0)};var w,P=r(752470),A=r(619487),S=r(330476);w={app:null,appController:null,keyboardController:null,scrollableDocument:!1},S.q.enabled&&(S.q.AppGlobals=w),a.enabled&&(a.AppGlobals=w);var x=r(666222),C=r(873898);function O(e,t,r){let i,n,s,o,a,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){const r=i,s=n;return i=n=void 0,u=t,o=e.apply(s,r),o}function f(e){const r=e-l;return void 0===l||r>=t||r<0||d&&e-u>=s}function g(){const e=Date.now();if(f(e))return m(e);a=setTimeout(g,function(e){const r=e-u,i=t-(e-l);return d?Math.min(i,s-r):i}(e))}function m(e){return a=void 0,h&&i?p(e):(i=n=void 0,o)}function y(){const e=Date.now(),r=f(e);for(var s=arguments.length,h=new Array(s),m=0;m<s;m++)h[m]=arguments[m];if(i=h,n=this,l=e,r){if(void 0===a)return function(e){return u=e,a=setTimeout(g,t),c?p(e):o}(l);if(d)return a=setTimeout(g,t),p(l)}return void 0===a&&(a=setTimeout(g,t)),o}return t=+t||0,"object"==typeof r&&(c=!!r.leading,d="maxWait"in r,s=d?Math.max(+r.maxWait||0,t):s,h="trailing"in r?!!r.trailing:h),y.cancel=function(){void 0!==a&&clearTimeout(a),u=0,i=l=n=a=void 0},y.flush=function(){return void 0===a?o:m(Date.now())},y}function k(){return function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return function(r,n,o){const a=s.Z.getInitialValue(o),l=n+"__Safari_workaround";if(t){const e=n+t;Object.defineProperty(r,e,{value:a})}delete o.value,delete o.writable,o.get=function(){if(r===this)return a;let t=this[l];if(t)return t;t=e(a,...i);const s={value:t,enumerable:!1,configurable:!0};return Object.defineProperty(this,n,s),Object.defineProperty(this,l,s),t}}}(O,"Now",arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1?arguments[1]:void 0)}var E,T,I,D,R,j=r(785919),Z=r(83302),N=r(624943);let F=null,L=null,M=[],U=(E=class{constructor(e){(0,C.Z)(this,"serviceDown",T,this),(0,C.Z)(this,"statusCheckHref",I,this),this.statusCheckHref=e,this.polling=!1,this.downCycleCount=0}},T=(0,i.Z)(E.prototype,"serviceDown",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=(0,i.Z)(E.prototype,"statusCheckHref",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E);M={oz:new U(`${N.Z.hostOverride}/v2/version`)},N.Z.watch((e=>{M.oz.statusCheckHref=`${e.hostOverride}/v2/version`}));const $=()=>L?.networkStatusChanged();let z=!navigator.onLine;const H=function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];null!=M[e]&&M[e].serviceDown!==t&&(M[e].serviceDown=t,r&&$())},J=function(e){if(!z&&null!=M[e]&&!M[e].polling){M[e].polling=!0;let r=0;var t=()=>{(e=>new Promise(((t,r)=>{const i=M[e],n=i.statusCheckHref,s=new XMLHttpRequest;s.onload=function(){!1===i.polling&&!1===i.serviceDown||(i.polling=!1,H(e,!1,!1),$(),t())},s.onerror=function(){H(e,!0),r()},s.open("GET",n),s.setRequestHeader("X-LrWeb-Check","status"),s.send()})))(e).catch((()=>{if(z)return M[e].polling=!1,void $();10==++r?(M[e].polling=!1,$()):setTimeout((()=>{t()}),5e3)}))};t(),$()}};window.addEventListener("DOMContentLoaded",(()=>{Z.Z.mobile||(window.addEventListener("offline",(()=>{z||(z=!0,$())})),window.addEventListener("online",(()=>{if(z){z=!1;for(const e in M)"oz"!==e&&H(e,!1);L.checkService("oz"),$()}})))}));let q=(D=k(5e3),R=class extends p.Z{constructor(){super(),this._requestsActive=!1,this.setRequestsActive(!0)}makingRequest(){this.setRequestsActive(!0),this._waitForIdle()}_waitForIdle(){this.setRequestsActive(!1)}setRequestsActive(e){this._requestsActive&&!e?(n.Z.is_enabled("debug")&&console.log("[[ Service Requests Idle ]]"),this.trigger("requests-idle")):!this._requestsActive&&e&&(n.Z.is_enabled("debug")&&console.log("[[ Service Requests Active ]]"),this.trigger("requests-active")),this._requestsActive=e}registerApp(e){F=e}isServiceUnreliable(e){return this.isServiceDown(e)||this.isPollingService(e)}isServiceDown(e){return!!z||"base"!==e&&(null!=M[e]?M[e].serviceDown:((n.Z.is_enabled("debug")||n.Z.is_enabled("automation"))&&alert(`Tried to get status for unknown service [${e}]`),!1))}debugSetServiceDown(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];M[e].serviceDown=t,$()}isNetworkDown(){return z}isPollingService(e){return!0===M[e].polling}reset(){for(const e of Object.values(M))e.polling=!1,e.serviceDown=!1}checkService(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("base"===e)return;const r=M[e];t?r.downCycleCount=0:r.serviceDown||r.downCycleCount++,r.downCycleCount>=3?r.polling||r.serviceDown||(r.serviceDown=!0,$()):J(e)}networkStatusChanged(){F?.networkStatusChanged(),this.trigger("network-status-changed")}whenServiceAvailableP(e){return this.isServiceDown(e)?new Promise(((t,r)=>{var i=()=>{this.isServiceDown(e)||(this.off("network-status-changed",i),t())};this.on("network-status-changed",i)})):Promise.resolve()}},(0,i.Z)(R.prototype,"_waitForIdle",[D],Object.getOwnPropertyDescriptor(R.prototype,"_waitForIdle"),R.prototype),R);L=new q,n.Z.is_enabled("debug")&&(window.ServiceStatus=L);const V=L;var B=r(982201);class W extends p.Z{_onAuthError(){}_onOzMaintenanceError(){window.location.href.includes("redirect")||window.location.reload(),A.Z.report("ozMaintenanceInApp")}_isAuthError(e,t,r){return 401===t}_isOzMaintenanceError(e,t,r){return 503===t&&"MaintenanceError"===e?.code}constructor(e){super(),this.href=e}createUuid(){let e,t="";const r=window.crypto||window.msCrypto;if(null!=r?.getRandomValues){const i=new Uint8Array(16);r.getRandomValues(i),i[6]=15&i[6]|64,i[8]=63&i[8]|128;for(const r of i)e=r.toString(16),1===e.length?t+="0"+e:t+=e}else{const r=new Array(4),i=(0,x.r)().uint32;for(let e=0;e<=3;e++)r[e]=i();r[1]=(4294905855&r[1]|16384)>>>0,r[2]=(1073741823&r[2]|2147483648)>>>0;for(const i of r){for(e=i.toString(16);e.length<8;)e="0"+e;t+=e}}return t}requestWithRetryP(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=0;const o=B.Deferred();var a=function(){return s>n?o.reject(...arguments):(0!==s&&A.Z.report("retryRequestP"),this.requestP(e,t,r,i).done((function(){return o.resolve(...arguments)})).fail((()=>(++s,a()))))}.bind(this);return a(),o.promise()}safeToJSPromise(e){return new Promise(((t,r)=>e.done((function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t(r)})).fail((function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r(t)}))))}safeToJQueryPromise(e){const t=B.Deferred();return e.then((function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];Array.isArray(r)?t.resolve(...r):t.resolve(r)}),(e=>{Array.isArray(e)?t.reject(...e):t.reject(e)})),t.promise()}requestJP(){return this.safeToJSPromise(this.requestP(...arguments))}requestP(e,t,r){let i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=!1;if(n.Z.is_enabled("debug")&&W._forceFailNextRequest||_(t))return W._forceFailNextRequest=!1,console.error(t),B.Deferred().reject("debugForcedFailure",-1).promise();if(V.isServiceDown(this.serviceKey))return i=B.Deferred(),setTimeout((()=>i.reject()),0),i.promise();{let n,l,{headers:u,contentType:c,async:d,responseType:h,cancelPromise:p,parseAsText:f}=s;null==d&&(d=!0);const g=!h||""===h||"text"===h;g&&!s.hasOwnProperty("contentType")&&null==c&&(c="application/json;charset=utf-8"),i=B.Deferred();const m=new XMLHttpRequest;m.open(e,t||this.href,!0===d),null!=h&&(m.responseType=h),m.setRequestHeader("X-Requested-With","XMLHttpRequest");for(const e in u){const t=u[e];null!=t&&m.setRequestHeader(e,t)}if(null!=window.FormData&&r instanceof window.FormData||r instanceof Blob?(l=e=>i.notify(e),m.upload.addEventListener("progress",l),r instanceof Blob&&m.setRequestHeader("Content-Type",c)):null!=c&&m.setRequestHeader("Content-Type",c),V.makingRequest(),m.send(r),null!=p&&p.then((()=>(o=!0,m.abort(),i.reject("aborted")))),window.ActiveXObject){const e=function(){if(m.onreadystatechange=null,4!==m.readyState)return m.abort()};n=function(){return m.onreadystatechange=null,null!=l&&m.upload.removeEventListener("progress",l),B(window).off("unload",e)},B(window).on("unload",e)}var a=()=>{if(null!=a&&4===m.readyState){let e;a=null,n?.();const{status:s}=m,l=s>=200&&s<300||304===s;if(g&&"string"==typeof m.responseText)try{r=f||"application/rdf+xml"===m.getResponseHeader("Content-Type")?m.responseText:B.parseJSON(m.responseText.replace("while (1) {}",""))}catch(e){}else r=m.response;if(l)e=i.resolve;else{if(null!=m){const e=m.getResponseHeader("x-request-id");s>=400&&s<500?null!=e&&e.length>0&&console.warn(`${s} request id: ${e} (4xx responses are common for some API calls, especially when polling for renditions or attempting to add duplicate photos)`):null!=e&&e.length>0&&console.error(`Failed request id: ${e}`)}e=i.reject}if(e(r,s,m),this._isAuthError(r,s,m)&&this._onAuthError(),this._isOzMaintenanceError(r,s,m)){if(null==t&&({href:t}=this),t.includes("sdk"))return i.reject({code:r.code});if(!t.includes("v2/spaces"))return this._onOzMaintenanceError()}else if((s>=500||0===s)&&!o)return V.checkService(this.serviceKey)}};return d?4===m.readyState?setTimeout(a):m.onreadystatechange=a:a(),i.promise()}}}W.debugForceFailNextRequest=function(){n.Z.is_enabled("debug")&&(W._forceFailNextRequest=!0)},W.prototype.serviceKey="base";const G=W;var X;X={lex64Encoding:"-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",invalidRegExp:new RegExp("[^a-zA-Z0-9_-]","g"),maxLength:1024,nearStepEncodingWidth:4,MIDPOINT:"Uzzz",insertBefore:function(e,t){if(!this.invalidRegExp.test(e))return this.tryCatch("InsertBefore",(()=>this._insertBefore(e,t)))},insertBetween:function(e,t,r){if(!this.invalidRegExp.test(e)&&!this.invalidRegExp.test(t))return this.tryCatch("InsertBetween",(()=>this._insertBetween(e,t,r)))},insertAfter:function(e,t){if(!this.invalidRegExp.test(e))return this.tryCatch("InsertAfter",(()=>this._insertAfter(e,t)))},tryCatch:function(e,t){var r;try{if(!0===this._debugForceReindexNextOrder)throw this._debugForceReindexNextOrder=!1,"Forced Lex64 Error";return t()}catch(t){return r=t,n.Z.is_enabled("debug")&&console.log(`${e} Exception: ${r}`),void A.Z.reportFailure("assetOrderLex64Error",{errorDescription:r})}},_insertBefore:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var i,n,s,o,a;return null===r&&(r=e),n=this.lex64Encoding,"high"===t?(a=n.slice(-1),e[0]===a&&e[1]===a?(r=e,this._insertBefore(e.substring(1),t,r.substring(1))):([o,i]=this.copyAndFill(e),this.nextOrderString(i,-1))):(s=n[0],this._insertBetween(s,e,t))},_insertBetween:function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";var n,s,o,a,l;if(n=e.charCodeAt(0),o=t.charCodeAt(0),i.length>this.maxLength)throw"Buffer Exhausted";if(s=this.decode[n],a=this.decode[o],s>this.maxDecodeValue||a>this.maxDecodeValue)throw"Invalid Character";if(s===a)return i+=this.encode[s],0!==n&&(e=e.substring(1)),0!==o&&(t=t.substring(1)),this._insertBetween(e,t,r,i);if(a<s)throw"Parameters out of Order";return s+1<a?(l=this.getCharBetween(s,a,r),i+this.encode[l]):(i+=this.encode[s],0!==n&&(e=e.substring(1)),this._insertAfter(e,r,i))},_insertAfter:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"middle",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";var i,n,s,o;if((n=this.decode[e.charCodeAt(0)])===this.maxDecodeValue&&("low"!==t||e[1]===e[0]))return r+=this.encode[n],e=e.substring(1),this._insertAfter(e,t,r);if("low"===t?([s,i]=this.copyAndFill(e),r+=this.nextOrderString(i,1)):(o=this.getCharBetween(n,this.maxDecodeValue+1,t),r+=this.encode[o]),r.length>this.maxLength)throw"Buffer Exhausted";return r},getCharBetween:function(e,t,r){if(t<=e+1)throw"Invalid values";if(t===e+2)return e+1;switch(r){case"low":return e+1;case"high":return t-1;default:return Math.floor(e+(t-e)/2)}},copyAndFill:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maxLength,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.encode[0];var i,n,s,o,a,l;for(o=t<=this.nearStepEncodingWidth?t-1:this.nearStepEncodingWidth,l=Array(t+1),i=n=0,a=o;n<a&&(s=e[i],!(i>=e.length));i=n+=1){if(this.decode[s.charCodeAt(0)]>this.maxDecodeValue)return[t+1,l];l[i]=s}for(;i<o;)l[i]=r,i++;if((l=l.join("")).length>this.maxLength)throw"Buffer Exhausted";return[o,l]},nextOrderString:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;var i,n,s,o,a,l;if(i=this.encode[0],o=this.maxDecodeValue,s=e.length,"string"==typeof e&&(e=e.split("")),1!==t&&-1!==t)throw"Invalid Arguments";if(n=s,a=e[--n],(l=this.decode[a.charCodeAt(0)])>this.maxDecodeValue)throw"Invalid Character";if(l===o){if(0===n)return r;e[n]=i}else e[n]=this.encode[l+t],n=0;for(;0!==n;){if(a=e[--n],(l=this.decode[a.charCodeAt(0)])>this.maxDecodeValue)throw"Invalid Character";if(l!==o){e[n]=this.encode[l+t];break}if(0===n)return r;e[n]=i}return 0===this.decode[e[s-1].charCodeAt(0)]?this.nextOrderString(e,t,r):e.join("").trim()},setupEncoding:function(){var e,t,r,i,n;for(this.decode=Array([256]),this.encode=this.lex64Encoding,t=r=0;r<=255;t=++r)this.decode[t]=255;for(this.decode[0]=0,this.maxDecodeValue=this.encode.length-1,t=i=0,n=this.encode.length;i<n;t=i+=1)e=this.encode.charCodeAt(t),this.decode[e]=t;return this.decode[void 0]=this.decode[0],this.decode.NaN=this.decode[0]}},X.setupEncoding();const K=X;var Y=r(665238),Q=r(813882),ee=r.n(Q);const{LrSDK:te}=window;let re={getJSONContentP:e=>new Promise((function(t,r){var i=new XMLHttpRequest;i.open("GET",e),i.setRequestHeader("x-api-key",Y.Z.clientId),i.setRequestHeader("Authorization",`Bearer ${Y.Z.token}`),i.onload=function(){if(200<=i.status&&i.status<300){var e=i.getResponseHeader("content-type");if("application/json"===e||"application/json;charset=utf-8"===e){var n=JSON.parse(i.responseText.replace(/^while\s*\(\s*1\s*\)\s*{\s*}\s*/,""));t(n)}else r("Unrecognized response content type")}else{var s=`XHR load failed with status ${i.status}`;r(s)}},i.onerror=()=>{var e=`XHR call failed with status ${i.status}`;r(e)},i.send()})),getPagedJSONContentP:e=>new Promise((function(t,r){var i=[];!function e(n){re.getJSONContentP(n).then((function(r){i=i.concat(r.resources),r.links&&r.links.next?e(r.base+r.links.next.href):(r.resources=i,t(r))}),r)}(e)})),putJSONContentP:(e,t)=>new Promise((function(r,i){var n=new XMLHttpRequest;n.open("PUT",e),n.setRequestHeader("x-api-key",Y.Z.clientId),n.setRequestHeader("Authorization",`Bearer ${Y.Z.token}`),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-Type","application/json;charset=utf-8"),n.onload=function(){if(200<=n.status&&n.status<300)r();else{var e=`XHR PUT failed with status ${n.status}`;i(e)}},n.onerror=()=>{var e=`XHR PUT failed with status ${n.status}`;i(e)},n.send(JSON.stringify(t))})),postJSONContentP:(e,t)=>new Promise((function(r,i){var n=new XMLHttpRequest;n.open("POST",e),n.setRequestHeader("x-api-key",Y.Z.clientId),n.setRequestHeader("Authorization",`Bearer ${Y.Z.token}`),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-Type","application/json;charset=utf-8"),n.onload=function(){if(200<=n.status&&n.status<300)r();else{var e=`XHR POST failed with status ${n.status}`;i(e)}},n.onerror=()=>{var e=`XHR POST failed with status ${n.status}`;i(e)},n.send(JSON.stringify(t))})),deleteJSONContentP:e=>new Promise((function(t,r){var i=new XMLHttpRequest;i.open("DELETE",e),i.setRequestHeader("x-api-key",Y.Z.clientId),i.setRequestHeader("Authorization",`Bearer ${Y.Z.token}`),i.onload=function(){if(200<=i.status&&i.status<300)t();else{var e=`XHR POST failed with status ${i.status}`;r(e)}},i.onerror=()=>{var e=`XHR POST failed with status ${i.status}`;r(e)},i.send()}))},ie={getLinksP:e=>re.getJSONContentP(e),getAccountP(e){var t=e.base+e.links["/rels/account"].href;return re.getJSONContentP(t)},getCatalogP(e){var t=e.base+e.links["/rels/catalogs"].href;return re.getPagedJSONContentP(t).then((function(e){if(e.resources.length<=0)return Promise.reject("no catalog");let t=e.resources[0];return t.base=e.base,t}))},getAlbumsP:function(e,t){var r=e.base+e.links["/rels/subtyped_albums"].href.replace("{subtype}",t);return re.getPagedJSONContentP(r)},async createAlbumP(e,t,r){var i=e.base+e.links.self.href+"/albums/"+G.prototype.createUuid();return await re.putJSONContentP(i,{subtype:t,payload:r}),re.getJSONContentP(i)},updateAlbumP(e,t){var r=e.base+e.links.self.href;return re.postJSONContentP(r,{payload:t})},deleteAlbumP(e){var t=e.base+e.links.self.href;return re.deleteJSONContentP(t)},getChildAlbumsP(e){var t=e.base+e.links["/rels/child_albums"].href;return re.getPagedJSONContentP(t)},getAlbumAssetsP(e){var t=e.base+e.links.self.href+"/assets?order_after=-";return re.getPagedJSONContentP(t)},async addAssetsWithIdsToAlbumP(e,t){if(t.length<1)return;let r=(new Date).toISOString(),i=[];for(let e=0,n=K.MIDPOINT;e<t.length;e++)if(i.push({id:t[e],payload:{userCreated:r,userUpdated:r,order:n}}),n=K.insertAfter(n,"low"),!n)return Promise.reject("failed to order assets");var n=e.base+e.links.self.href+"/assets";for(let e=i.length,t=0;t<e;t+=50){const e=i.slice(t,t+50);await re.putJSONContentP(n,{resources:e})}},async deleteAllAlbumAssetsP(e){let t=(await ie.getAlbumAssetsP(e)).resources.map((e=>e.asset.id));var r=e.base+e.links.self.href+"/assets";for(let e=t.length,i=0;i<e;i+=100){const e=t.slice(i,i+100);await re.deleteJSONContentP(r+"?asset_ids="+e.join("%3B"),"")}}};class ne{constructor(e,t,r,i){for(var n=0;n<i.resources.length;n++){i.resources[n].base=i.base}this._catalog=e,this._collections=t,this._serviceId=r,this._projects=i.resources,this._response=i}async getDeepCopyOfProjectListP(){return JSON.parse(JSON.stringify(this._response)).resources.forEach((e=>{delete e.base})),this._response}async getDeepCopyOfProjectWithIdP(e){let t=this._projects.find((t=>t.id===e));return t?JSON.parse(JSON.stringify(t)):Promise.reject("no matching project")}async _getProjectWithIdP(e){let t=this._projects.find((t=>t.id===e));return t||Promise.reject("no matching project")}async _getCollectionWithIdP(e){let t=this._collections.find((t=>t.id===e));return t||Promise.reject("failed to find collection")}async _createProjectP(e,t){let r=await ie.createAlbumP(this._catalog,"project",e);return this._projects.push(r),await ie.addAssetsWithIdsToAlbumP(r,t),r.id}async _getProjectWithSourceAlbumIdP(e){return this._projects.find((t=>{let r=t.payload.sourceAlbum;return r&&r.id===e}))}getUncachedProjectWithIdP(e){var t=this._response.base+this._response.links["/rels/album"].href.replace("{album_id}",e);return re.getJSONContentP(t)}async getUncachedProjectsP(){let e=await ie.getAlbumsP(this._catalog,"project");return e.resources=e.resources.filter((e=>{var t=e.payload.publishInfo;return t&&t.serviceId===this._serviceId})),e}createProjectWithAssetIdsP(e,t){let r=(new Date).toISOString(),i={userCreated:r,userUpdated:r,name:e||r,publishInfo:{version:2,serviceId:this._serviceId}};return this._createProjectP(i,t||[])}async createProjectFromCollectionWithIdP(e){let t=await this._getCollectionWithIdP(e),r=(await ie.getAlbumAssetsP(t)).resources.map((e=>e.asset.id)),i=(new Date).toISOString(),n={userCreated:i,userUpdated:i,name:t.payload.name||t.id,sourceAlbum:{id:t.id},publishInfo:{version:2,serviceId:this._serviceId}},s=t.payload.cover;return s&&(n.cover={id:s.id}),this._createProjectP(n,r)}async resetProjectWithIdFromSourceCollectionP(e){let t=await this._getProjectWithIdP(e);if(!t.payload.sourceAlbum)return;let r=this._collections.find((e=>e.id===t.payload.sourceAlbum.id));if(!r)return;let i=(await ie.getAlbumAssetsP(r)).resources.map((e=>e.asset.id));return await ie.deleteAllAlbumAssetsP(t),ie.addAssetsWithIdsToAlbumP(t,i)}async updateProjectWithIdP(e,t){if(!t.userUpdated)return Promise.reject("missing userUpdated field");let r=await this._getProjectWithIdP(e),i=await ie.updateAlbumP(r,t);return ee()(r.payload,t),i}async deleteProjectWithIdP(e){let t=await this._getProjectWithIdP(e);if("project"!==t.subtype)return Promise.reject("missing project");let r=await ie.deleteAlbumP(t),i=this._projects.findIndex((t=>t.id===e));return i>=0&&this._projects.splice(i,1),r}async getAssetsOfProjectWithIdP(e){let t=await this._getProjectWithIdP(e);return ie.getAlbumAssetsP(t)}async deleteChildAlbumsOfProjectWithIdP(e){let t=await this._getProjectWithIdP(e);if("project"!==t.subtype)return Promise.reject("missing project");let r=await ie.getChildAlbumsP(t),i=[];return r.resources.forEach((e=>{e.base=r.base,i.push(ie.deleteAlbumP(e))})),Promise.all(i)}}class se{constructor(e,t,r){this._managers={},this._catalog=e,this._collections=t,this._response=r}_responseForService(e){let t=this._response.resources.filter((t=>{var r=t.payload.publishInfo;return r&&r.serviceId===e}));return{base:this._response.base,resources:t,links:this._response.links}}projectManagerForService(e){if(!this._managers[e]){let t=this._responseForService(e);this._managers[e]=new ne(this._catalog,this._collections,e,t)}return this._managers[e]}}const oe=new class{constructor(){this._linksPromise=null,this._accountPromise=null,this._catalogPromise=null,this._collectionsPromise=null,this._managerFactoryPromise=null,this._rootURL="https://photos.adobe.io/v2/"}_getCollectionsP(){return this._collectionsPromise||(this._collectionsPromise=this.getCatalogP().then((e=>ie.getAlbumsP(e,"collection").then((e=>{let t=e.resources;return t.forEach((t=>{t.base=e.base})),t}))))),this._collectionsPromise}_getProjectManagerFactoryP(){return this._managerFactoryPromise||(this._managerFactoryPromise=this.getCatalogP().then((e=>this._getCollectionsP().then((t=>ie.getAlbumsP(e,"project").then((r=>new se(e,t,r)))))))),this._managerFactoryPromise}getLinksP(){if(!this._linksPromise){let e="stage"===te.environment?"https://photos-stage.adobe.io/v2/":"https://photos.adobe.io/v2/";this._linksPromise=ie.getLinksP(e)}return this._linksPromise}getAccountP(){return this._accountPromise||(this._accountPromise=this.getLinksP().then(ie.getAccountP)),this._accountPromise}getCatalogP(){return this._catalogPromise||(this._catalogPromise=this.getLinksP().then(ie.getCatalogP)),this._catalogPromise}async getCollectionWithIdP(e){let t=(await this._getCollectionsP()).find((t=>t.id===e));return t||Promise.reject("no matching collection")}async getAssetsOfCollectionWithIdP(e){let t=await this.getCollectionWithIdP(e);return ie.getAlbumAssetsP(t)}async getProjectManagerForServiceIdP(e){return(await this._getProjectManagerFactoryP()).projectManagerForService(e)}getProjectManagerP(){let e=Y.Z.clientId;return this.getProjectManagerForServiceIdP(e)}};var ae=r(125748),le=r(276716),ue=r.n(le);const{LrSDK:ce}=window;const de=new class{checkCachedProjectsP(){return Promise.all([ce.catalog.getProjectsP(),ce.catalog.getUncachedProjectsP()]).then((function(e){return e[0].resources.length!==e[1].resources.length?Promise.reject("FAILED: count"):e[0].resources.length}))}checkCachedProjectWithIdP(e){return Promise.all([ce.catalog.getProjectWithIdP(e),ce.catalog.getUncachedProjectWithIdP(e)]).then((function(e){if(!ue()(e[0].payload,e[1].payload))return Promise.reject("FAILED: cached not equal to uncached")}))}checkProjectMetadataP(e,t){return Promise.all([ce.catalog.getProjectWithIdP(e),ce.catalog.getCollectionWithIdP(t)]).then((function(t){let r=t[0],i=t[1];return r.payload.name!==i.payload.name?Promise.reject("FAILED: name"):i.payload.cover&&r.payload.cover.id!==i.payload.cover.id?Promise.reject("FAILED: cover"):r.id!==e?Promise.reject("FAILED: id"):r.payload.publishInfo?2!==r.payload.publishInfo.version?Promise.reject("FAILED: version"):r.payload.publishInfo.serviceId!==Y.Z.clientId?Promise.reject("FAILED: serviceId"):void 0:Promise.reject("FAILED: publishInfo")}))}checkProjectAssetsP(e,t){return Promise.all([ce.catalog.getAssetsOfProjectWithIdP(e),ce.catalog.getAssetsOfCollectionWithIdP(t)]).then((function(e){let t=e[0].resources,r=e[1].resources;if(r.length!==t.length)return Promise.reject("FAILED: asset count");for(let e=r.length,i=0;i<e;i++){let e=r[i],n=t[i];if(e.asset.id!==n.asset.id)return Promise.reject("FAILED: asset id")}}))}checkCreateProjectFromCollectionWithIdP(e,t){return Promise.all([this.checkCachedProjectWithIdP(e),this.checkProjectMetadataP(e,t),this.checkProjectAssetsP(e,t)])}async checkUpdatePayloadP(e,t){if(!function e(t,r,i){if(t!==Object(t)||r!==Object(r))i=i&&t===r;else for(let n in r)i=e(t[n],r[n],i);return i}((await ce.catalog.getProjectWithIdP(e)).payload,t,!0))return Promise.reject("FAILED: payload")}checkUpdateProjectWithIdP(e,t){return Promise.all([this.checkCachedProjectWithIdP(e),this.checkUpdatePayloadP(e,t)])}async testCollectionWithIdP(e){let t=await ce.catalog.createProjectFromCollectionWithIdP(e);await this.checkCreateProjectFromCollectionWithIdP(t,e),console.log("PASSED: createProjectFromCollectionWithIdP");let r=(new Date).toISOString(),i={userUpdated:r,name:"cool new name",publishInfo:{created:r,updated:r,remoteId:"servic3-specific"}};return await ce.catalog.updateProjectWithIdP(t,i),await this.checkUpdateProjectWithIdP(t,i),console.log("PASSED: updateProjectWithIdP"),await ce.catalog.resetProjectWithIdFromSourceCollectionP(t),console.log("PASSED: resetProjectWithIdFromSourceCollectionP"),t}async runP(e){if(!e||!e.resources||!e.resources[0])return Promise.reject("malformed collection list");let t=e.resources,r=await this.checkCachedProjectsP();console.log("initial project count:",r);let i=[];t.forEach((e=>{i.push(this.testCollectionWithIdP(e.id))}));let n=await Promise.all(i),s=await this.checkCachedProjectsP();return s!==r+t.length?Promise.reject("FAILED: bad count"):(console.log("PASSED: test collections"),i=[],n.forEach((e=>{i.push(ce.catalog.deleteProjectWithIdP(e))})),await Promise.all(i),s=await this.checkCachedProjectsP(),s!==r?Promise.reject("FAILED: bad count"):(console.log("PASSED: deleteProjectWithIdP"),"PASSED"))}};var he=r(656833);const pe="Lightroom Web {0363f1a98b0c507a237977267358886724194e58198ae5efc58c659238ee8fc3}",fe="-0001-12-31T23:59:59",ge="0000-00-00T00:00:00",me="9999-12-31T23:59:59";class ye extends G{constructor(){super(...arguments),this.serviceKey="oz",this.handleAuthErrors=!0}static setAuthHeaders(e,t){const r={Authorization:`Bearer ${e}`,"x-api-key":t};this.prototype.authHeaders=r}_onAuthError(){return!!this.handleAuthErrors&&N.Z.authErrorCallback?.()}_isAuthError(e,t,r){return 401===t}reportOzFailure(e,t,r,i){let n,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};n=null!=t?JSON.stringify(t).substr(0,200):"unknown error";const o=Object.assign({errorCode:null!=r?r:"undefined",errorDescription:n},s);if(null!=i){const e=i.getResponseHeader("x-request-id");null!=e&&e.length>0&&(o.requestId=e)}A.Z.reportFailure(e,o)}requestP(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{authHeaders:n}=this;return null!=n&&(i=Object.assign({},i),i.headers=Object.assign({},n,i.headers)),super.requestP(e,t,r,i)}}var ve,be,_e,we,Pe;({expireCookie:ve,getCookie:be,hasCookie:_e,setSecureSiteCookie:we,setSiteCookie:Pe}=window);var Ae=r(937578);const Se=class{constructor(e){var t;null!=N.Z.hostOverride?this.hostUrl=N.Z.hostOverride:this.hostUrl="",t=null!=e?e.indexOf("/",8):-1,this.basePath=-1===t?"":e.substr(t)}fullPath(e){if(null!=e)return 0===e.indexOf("http://")||0===e.indexOf("https://")||"/"===e[0]?e:`${this.basePath}${e}`}fullHref(e){if(null!=e)return 0===e.indexOf("http://")||0===e.indexOf("https://")?e:"/"===e[0]?`${this.hostUrl}${e}`:`${this.hostUrl}${this.basePath}${e}`}};var xe=r(446074),Ce=r(355462),Oe=r(392188),ke=r.n(Oe);function Ee(e,t,r,i,n,s,o){var a=s[t],l=o&&o[n],u=void 0!==l?l:e.defaultValue,c=e.fromJSON.call(s,u),d=Ce.Z.triggerNoArgs;if(a!==c){s[t]=c;var h=s[r];h?h.triggerNoArgs():s[r]=d(s,i)}}class Te{constructor(e){var t=e&&e.exportables;this.properties=t?ke()(t.properties):[],this.aliases=t?ke()(t.aliases):{},this.prototype=e}alias(e,t){var r=this.aliases;r||(r=this.aliases={}),r[t]=e}getJsonName(e){var t=this.aliases;return t&&t.hasOwnProperty(e)?t[e]:e}add(e,t,r,i,n){var s="_"+e;return this.properties.push({name:e,key:s,toJSON:r,fromJSON:t,defaultValue:i,config:n}),{enumerable:!0,configurable:!1,get(){return Ae.Z.active&&Ae.Z.recordEvent(this,e),this[s]},set(t){var r=this[s];r!==t&&(this[s]=t,Ae.Z.recordChange(this,e,t,r))}}}computeJSONMethod(){for(var e=[],t=this.properties,r=0,i=t.length;r<i;++r){var n=t[r],s=n.name,o=this.getJsonName(n.name),a=n.key,l=n.key+"_signal";e.push(Ee.bind(this,n,a,l,s,o))}this.fromJSON=(t,r)=>(e.forEach((e=>e(t,r))),t)}fromJSON(e,t){return this.computeJSONMethod(),this.fromJSON(e,t)}toJSON(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var r={},i=this.properties,n=0,s=i.length;n<s;++n){var o=i[n];Ae.Z.active&&Ae.Z.recordEvent(e,o.name);var a=o.toJSON.call(e,e[o.key],t);!t&&ue()(a,o.defaultValue)||(r[this.getJsonName(o.name)]=a)}return r}}var Ie=r(255294),De=r(429350),Re=r.n(De);class je extends Ie.Z{constructor(e){super(),this.base=e||[]}at(e){return Ae.Z.active&&Ae.Z.recordEvent(this,"change"),this.base[e]}setAt(e,t){Ce.Z.trigger(this,"change"),this.base[e]=t}toArray(){return Ae.Z.active&&Ae.Z.recordEvent(this,"change"),this.base.slice()}get length(){return Ae.Z.active&&Ae.Z.recordEvent(this,"change"),this.base.length}set length(e){this.base.length!==e&&(this.base.length=e,Ce.Z.trigger(this,"change"))}swapItems(e){this.base=e,Ce.Z.trigger(this,"change")}removeItem(e){var t=this.indexOf(e);-1!==t&&this.splice(t,1)}concat(){Ae.Z.active&&Ae.Z.recordEvent(this,"change");for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new je(this.base.concat(...t.map((e=>e instanceof je?(Ae.Z.active&&Ae.Z.recordEvent(e,"change"),e.base):e))))}concatToArray(){return this.concat.apply(this,arguments).base}spliceToArray(){return this.splice.apply(this,arguments).base}sliceToArray(){return this.slice.apply(this,arguments).base}mapToArray(){return this.map.apply(this,arguments).base}filterToArray(){return this.filter.apply(this,arguments).base}[Symbol.iterator](){return Ae.Z.active&&Ae.Z.recordEvent(this,"change"),this.base.values()}}Re().polyfill();var Ze=Array.prototype,Ne=je.prototype,Fe=["fill","pop","push","reverse","shift","unshift","splice","sort","copyWithin"];function Le(e,t){return e instanceof Array?t.base===e?t:new je(e):e}function Me(e,t){return t?function(){var t=e.apply(this.base,arguments);return Ce.Z.trigger(this,"change"),Le(t,this)}:function(){return Ae.Z.active&&Ae.Z.recordEvent(this,"change"),Le(e.apply(this.base,arguments),this)}}for(var Ue=Object.getOwnPropertyNames(Ze),$e=0,ze=Ue.length;$e<ze;++$e){var He=Ue[$e];Object.prototype.hasOwnProperty.call(Ne,He)||(Ne[He]=Me(Ze[He],-1!==Fe.indexOf(He)))}class Je extends Ie.Z{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;super(),this._swapItems(e)}_swapItems(e){if(e instanceof Map)this.base=e;else{this.base=new Map;for(let t in e)this.base.set(t,e[t])}}swapItems(e){this._swapItems(e),Ce.Z.trigger(this,"change")}has(e){return Ae.Z.active&&(Ae.Z.recordEvent(this,""+e),Ae.Z.recordEvent(this,"change")),this.base.has(e)}get(e){return Ae.Z.active&&(Ae.Z.recordEvent(this,""+e),Ae.Z.recordEvent(this,"change")),this.base.get(e)}set(e,t){if(this.base.get(e)!==t)return this.base.set(e,t),Ce.Z.trigger(this,""+e),Ce.Z.trigger(this,"change"),this}clear(){var e=[];this.base.forEach(((t,r)=>e.push(r))),this.base.clear(),e.forEach((e=>Ce.Z.trigger(this,""+e))),Ce.Z.trigger(this,"change")}delete(e){let t=this.base.delete(e);return Ce.Z.trigger(this,""+e),Ce.Z.trigger(this,"change"),t}get size(){return Ae.Z.active&&Ae.Z.recordEvent(this,"change"),this.base.size}get length(){return this.size}[Symbol.iterator](){return this.base.entries()}}var qe=Map.prototype,Ve=Je.prototype;function Be(e){return function(){return Ae.Z.active&&Ae.Z.recordEvent(this,"change"),e.apply(this.base,arguments)}}for(var We,Ge,Xe,Ke,Ye,Qe,et,tt,rt,it,nt,st,ot,at,lt,ut=Object.getOwnPropertyNames(qe),ct=0,dt=ut.length;ct<dt;++ct){var ht=ut[ct];Object.prototype.hasOwnProperty.call(Ve,ht)||(Ve[ht]=Be(qe[ht]))}function pt(e){return"false"!==e&&Boolean(e)}function ft(e){return e}function gt(e){return e&&e.toArray?e.toArray():e&&e.slice&&e.slice()}let mt=(We=s.Z.wrapPropertyDecorator,Ge=s.Z.wrapPropertyDecorator,Xe=s.Z.wrapPropertyDecorator,Ke=s.Z.wrapPropertyDecorator,Ye=s.Z.wrapPropertyDecorator,Qe=s.Z.wrapPropertyDecorator,et=s.Z.wrapPropertyDecorator,tt=s.Z.wrapPropertyDecorator,rt=s.Z.wrapPropertyDecorator,it=s.Z.wrapPropertyDecorator,nt=s.Z.wrapPropertyDecorator,st=s.Z.wrapPropertyDecorator,ot=s.Z.wrapPropertyDecorator,at=s.Z.wrapPropertyDecorator,lt=class{constructor(e){this._jsonPropertiesType=Te,this._arrayType=je,this._mapType=Je,this._loggedWarning={},this._name=e}wrapArray(e){return new this._arrayType(e)}wrapMap(e){return new this._mapType(e)}exportables(e){return e.hasOwnProperty("exportables")||(e.exportables=new this._jsonPropertiesType(e)),e.exportables}byVal(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.exportables(e).add(t,ke(),ke(),s.Z.getInitialValue(r),i)}byBooleanVal(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.exportables(e).add(t,pt,Boolean,s.Z.getInitialValue(r),i)}byNumberVal(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.exportables(e).add(t,Number,Number,s.Z.getInitialValue(r),i)}bySimpleVal(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.exportables(e).add(t,ft,ft,s.Z.getInitialValue(r),i)}byCustomVal(e,t,r,i,n){return this.exportables(e).add(t,(function(e){return i.parse(void 0!==e?e:n,this,t)}),(function(e){return i.serialize(e,this,t)}),s.Z.getInitialValue(r))}byRef(e,t,r,i){return this.exportables(e).add(t,(e=>{var t=new i;return t.fromJSON(e||{}),t}),((e,t)=>e?e.toJSON(t):null),s.Z.getInitialValue(r))}byOptionalRef(e,t,r,i){return this.exportables(e).add(t,(e=>{if(null==e)return e;var t=new i;return t.fromJSON(e),t}),((e,t)=>null==e?e:e.toJSON(t)),s.Z.getInitialValue(r))}byCustomRef(e,t,r,i){return this.exportables(e).add(t,(function(e){var t=i(e,this);if(!t)return null;var r="function"==typeof t?new t:t;return e&&r.fromJSON(e),r}),((e,t)=>e?e.toJSON(t):null),s.Z.getInitialValue(r))}byArray(e,t,r,i){var n=this.wrapArray;return this.exportables(e).add(t,(function(e){var r=gt(e)||[];return i?r:n(r,this,t)}),gt,s.Z.getInitialValue(r))}byRefArray(e,t,r,i,n){var o=this.wrapArray;return this.exportables(e).add(t,(function(e){var r=[];if(e&&e instanceof Array)for(var s=0,a=e.length;s<a;++s){var l=new i;l.fromJSON(e[s]||{}),r.push(l)}return n?r:o(r,this,t)}),((e,t)=>{var r=e?e.map((e=>e?e.toJSON(t):null)):[];return r.base||r}),s.Z.getInitialValue(r))}byCustomRefArray(e,t,r,i,n){var o=this.wrapArray;return this.exportables(e).add(t,(function(e){var r=[];if(e&&e.length)for(var s=0,a=e.length;s<a;++s){var l=e[s],u=i(l,this);if(u){var c="function"==typeof u?new u:u;l&&c.fromJSON(l),r.push(c)}}return n?r:o(r,this,t)}),((e,t)=>{var r=e?e.map((e=>e?e.toJSON(t):null)):[];return r.base||r}),s.Z.getInitialValue(r))}byMap(e,t,r,i){var n=this._mapType,o=this.wrapMap;return this.exportables(e).add(t,(function(e){let r=Object.assign({},e);return i?r:o(r,this,t)}),(e=>{let t={};if(e instanceof n)for(let r of e.keys())t[r]=e.get(r);else e&&Object.assign(t,e);return t}),s.Z.getInitialValue(r))}byRefMap(e,t,r,i,n){var o=this._mapType,a=this.wrapMap;return this.exportables(e).add(t,(function(e){let r={};for(let t in e){let n=e[t],s=new i;n&&s.fromJSON(n),r[t]=s}return n?r:a(r,this,t)}),((e,t)=>{let r={};if(e instanceof o)for(let i of e.keys()){let n=e.get(i);r[i]=n?n.toJSON(t):null}else if(e)for(let i in e){let n=e[i];r[i]=n?n.toJSON(t):null}return r}),s.Z.getInitialValue(r))}alias(e,t,r,i){this.exportables(e).alias(i,t)}},(0,i.Z)(lt.prototype,"wrapArray",[xe.Z],Object.getOwnPropertyDescriptor(lt.prototype,"wrapArray"),lt.prototype),(0,i.Z)(lt.prototype,"wrapMap",[xe.Z],Object.getOwnPropertyDescriptor(lt.prototype,"wrapMap"),lt.prototype),(0,i.Z)(lt.prototype,"byVal",[We],Object.getOwnPropertyDescriptor(lt.prototype,"byVal"),lt.prototype),(0,i.Z)(lt.prototype,"byBooleanVal",[Ge],Object.getOwnPropertyDescriptor(lt.prototype,"byBooleanVal"),lt.prototype),(0,i.Z)(lt.prototype,"byNumberVal",[Xe],Object.getOwnPropertyDescriptor(lt.prototype,"byNumberVal"),lt.prototype),(0,i.Z)(lt.prototype,"bySimpleVal",[Ke],Object.getOwnPropertyDescriptor(lt.prototype,"bySimpleVal"),lt.prototype),(0,i.Z)(lt.prototype,"byCustomVal",[Ye],Object.getOwnPropertyDescriptor(lt.prototype,"byCustomVal"),lt.prototype),(0,i.Z)(lt.prototype,"byRef",[Qe],Object.getOwnPropertyDescriptor(lt.prototype,"byRef"),lt.prototype),(0,i.Z)(lt.prototype,"byOptionalRef",[et],Object.getOwnPropertyDescriptor(lt.prototype,"byOptionalRef"),lt.prototype),(0,i.Z)(lt.prototype,"byCustomRef",[tt],Object.getOwnPropertyDescriptor(lt.prototype,"byCustomRef"),lt.prototype),(0,i.Z)(lt.prototype,"byArray",[rt],Object.getOwnPropertyDescriptor(lt.prototype,"byArray"),lt.prototype),(0,i.Z)(lt.prototype,"byRefArray",[it],Object.getOwnPropertyDescriptor(lt.prototype,"byRefArray"),lt.prototype),(0,i.Z)(lt.prototype,"byCustomRefArray",[nt],Object.getOwnPropertyDescriptor(lt.prototype,"byCustomRefArray"),lt.prototype),(0,i.Z)(lt.prototype,"byMap",[st],Object.getOwnPropertyDescriptor(lt.prototype,"byMap"),lt.prototype),(0,i.Z)(lt.prototype,"byRefMap",[ot],Object.getOwnPropertyDescriptor(lt.prototype,"byRefMap"),lt.prototype),(0,i.Z)(lt.prototype,"alias",[at],Object.getOwnPropertyDescriptor(lt.prototype,"alias"),lt.prototype),lt);const yt=new mt("Json");var vt,bt,_t,wt,Pt,At,St,xt,Ct,Ot,kt,Et,Tt,It,Dt,Rt,jt,Zt,Nt,Ft,Lt,Mt,Ut,$t,zt,Ht,Jt,qt,Vt,Bt,Wt,Gt,Xt,Kt,Yt=r(814891),Qt=r.n(Yt);class er extends p.Z{toJSON(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.exportables?this.exportables.toJSON(this,e):{}}fromJSON(e){return this.exportables?this.exportables.fromJSON(this,e):this}}er.prototype.properties=new Te;class tr extends er{toJSON(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ee()(Qt()(this._originalSourceJson),super.toJSON(e))}fromJSON(e){return this._originalSourceJson=e,Object.assign(this,e),this.exportables.fromJSON(this,e),this}}let rr=(vt=yt.byVal,bt=yt.byVal,_t=class extends tr{constructor(){super(...arguments),(0,C.Z)(this,"author",wt,this),(0,C.Z)(this,"description",Pt,this)}},wt=(0,i.Z)(_t.prototype,"author",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pt=(0,i.Z)(_t.prototype,"description",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_t),ir=(At=yt.byVal,St=class extends tr{constructor(){super(...arguments),(0,C.Z)(this,"flags",xt,this)}},xt=(0,i.Z)(St.prototype,"flags",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St),nr=(Ct=yt.byVal,Ot=yt.byVal,kt=yt.byVal,Et=yt.byVal,Tt=yt.byVal,It=yt.byVal,Dt=yt.byRef(rr),Rt=yt.byRef(ir),jt=class extends tr{constructor(){super(...arguments),(0,C.Z)(this,"private",Zt,this),(0,C.Z)(this,"download",Nt,this),(0,C.Z)(this,"metadata",Ft,this),(0,C.Z)(this,"location",Lt,this),(0,C.Z)(this,"favorites_disabled",Mt,this),(0,C.Z)(this,"comments_disabled",Ut,this),(0,C.Z)(this,"profile_info",$t,this),(0,C.Z)(this,"filters",zt,this)}},Zt=(0,i.Z)(jt.prototype,"private",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt=(0,i.Z)(jt.prototype,"download",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ft=(0,i.Z)(jt.prototype,"metadata",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt=(0,i.Z)(jt.prototype,"location",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mt=(0,i.Z)(jt.prototype,"favorites_disabled",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ut=(0,i.Z)(jt.prototype,"comments_disabled",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t=(0,i.Z)(jt.prototype,"profile_info",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zt=(0,i.Z)(jt.prototype,"filters",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt),sr=(Ht=yt.byVal,Jt=yt.byVal,qt=yt.byVal,Vt=yt.byRef(nr),Bt=class extends tr{constructor(){super(...arguments),(0,C.Z)(this,"id",Wt,this),(0,C.Z)(this,"created",Gt,this),(0,C.Z)(this,"updated",Xt,this),(0,C.Z)(this,"payload",Kt,this)}},Wt=(0,i.Z)(Bt.prototype,"id",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gt=(0,i.Z)(Bt.prototype,"created",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xt=(0,i.Z)(Bt.prototype,"updated",[qt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kt=(0,i.Z)(Bt.prototype,"payload",[Vt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bt);var or=r(982201);class ar extends ye{constructor(e){"string"==typeof e||e instanceof String?(super(e),this._initPromise=this.refreshP()):(super(),this.setAttributes(e),this.href=this.linkHref("self"))}initializedP(){return null!=this._initPromise?this._initPromise.then((()=>this)):or.Deferred().resolve(this).promise()}initializedJP(){return this.safeToJSPromise(this.initializedP(...arguments))}cloneAttributes(){return this.attributes.toJSON()}linkHref(e){const t=this.attributes.links?.[e]?.href;return this._linkBase.fullHref(t)}linkFullPath(e){const t=this.attributes.links?.[e]?.href;return this._linkBase.fullPath(t)}hasLink(e){return null!=this.attributes.links?.[e]?.href}hasValidLink(e){const t=this.attributes.links?.[e],r=!0===t?.invalid;return null!=t?.href&&!r}getAttribute(e){return this.attributes[e]}_getAttributeClass(){return this.attributeClass||sr}_createAttributes(e){var t;const r=this._getAttributeClass(),i=null!==(t=this._attributes)&&void 0!==t?t:new r;return i.fromJSON(e),i}get attributes(){return Ae.Z.recordEvent(this,"attributes"),this._attributes}set attributes(e){this._attributes=this._createAttributes(e),Ae.Z.recordChange(this,"attributes")}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.attributes=e,this.id=this.attributes.id,this._linkBase=new Se(this.attributes.base),this}setAttribute(e,t){this.attributes[e]=t}refreshJP(){return this.safeToJSPromise(this.refreshP())}refreshP(){return this._refreshP()}_refreshP(e){return this.requestP("GET",e).done((e=>this.setAttributes(e))).promise()}updateAttributesP(e,t){return null==t.payload&&(t.payload={}),t.payload.userUpdated=(new Date).toISOString(),this._updateAttributesP(t,e)}_updateAttributesP(e,t){let r;const i=or.extend(!0,{},this.attributes.toJSON()),n=()=>this.attributes=or.extend(!0,this.attributes.toJSON(),e);return n(),null!=this.updating?(this.updatingApplyList.push(n),r=this.updating.then((()=>this._doUpdateP(t,e,i)))):(this.updatingApplyList=[n],r=this._doUpdateP(t,e,i)),this.updating=r,this.updating.always((()=>{N.Z.catalogContext?.assetUpdated(),r===this.updating&&(this.updating=null)}))}_doUpdateP(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return n.Z.is_enabled("debug")&&G._forceFailNextRequest&&(i=2),this.requestP("POST",this.href,JSON.stringify(t)).then((()=>(null!=e&&A.Z.report(e),this.updatingApplyList.shift(),this.refreshP().then((()=>this.updatingApplyList.map((e=>e())))))),((n,s,o)=>{const a=i<2&&(0===s||s>=500);return a?null!=e&&A.Z.report(`${e}Retry`):(null!=e&&this.reportOzFailure(`${e}Failure`,n,s,o),this.updatingApplyList.shift()),this.refreshP().then((()=>a?this._doUpdateP(e,t,r,i+1):or.Deferred().reject(n,s,o)),(()=>{this.attributes=r}))}))}getOzCreatedDate(){const{created:e}=this.attributes;return e===ge?null:new Date(Date.parse(e))}getOzUpdatedDate(){const{updated:e}=this.attributes;return e===ge?null:new Date(Date.parse(e))}getUserCreatedDate(){const e=this.attributes.payload?.userCreated;return null==e||e===ge?null:new Date(Date.parse(e))}getUserUpdatedDate(){const e=this.attributes.payload?.userUpdated;return null==e||e===ge?null:new Date(Date.parse(e))}getBestCreatedDate(){var e;return null!==(e=this.getUserCreatedDate())&&void 0!==e?e:this.getOzCreatedDate()}getBestUpdatedDate(){var e;return null!==(e=this.getUserUpdatedDate())&&void 0!==e?e:this.getOzUpdatedDate()}getBestCreatedDateAttribute(){var e;return null!==(e=this.attributes.payload?.userCreated)&&void 0!==e?e:this.attributes.created}getMostRecentDate(){return new Date(Math.max(this.getBestCreatedDate(),this.getBestUpdatedDate()))}getBestUpdatedDateAttribute(){var e;return null!==(e=this.attributes.payload?.userUpdated)&&void 0!==e?e:this.attributes.updated}}var lr=r(982201);const ur=function(){class e extends ar{getAccountFirstLaunch(){return this.getApp().first_launch}async setAccountFirstLaunchJP(){if(!this.getApp().first_launch)return await this.updateAppP({first_launch:!0})}async debugClearAccountFirstLaunchJP(){return await this.updateAppP({first_launch:null})}async setAuthHome23TestGroup(){if(!this.getApp().auth_home_23)return await this.updateAppP({auth_home_23:!0})}getAuthHome23TestGroup(){return this.getApp().auth_home_23}getCleanUpIndexV2(){return this.getApp().clean_up_v2}async setCleanUpIndexV2(){if(!this.getApp().clean_up_v2)return await this.updateAppP({clean_up_v2:!0}),await this.updateAppP({clean_up_index_v2:null})}async debugClearCleanUpIndexV2(){return await this.updateAppP({clean_up_v2:null})}getAccountSawPLG_P0(){return this.getApp().plg_p0}async setAccountSawPLG_P0_JP(){if(!this.getApp().plg_p0)return await this.updateAppP({plg_p0:!0})}getTipShown(e){var t;return!0===(null!=(t=this.getApp().tips_shown)?t[e]:void 0)}setTipShownP(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var r;if(this.getTipShown(e)!==t)return(r={})[e]=t,this.updateAppP({tips_shown:r})}async setTipShownJP(e,t){return await this.setTipShownP(e,t)}clearTipShownP(e){var t,r,i;for(Array.isArray(e)||(e=[e]),i={},t=0,r=e.length;t<r;t++)i[e[t]]=null;return this.updateAppP({tips_shown:i})}async clearTipShownJP(e){return await this.clearTipShownP(e)}getPreferredLocale(){return this.getUniversal()[this.COMMUNICATION_PREF_KEY]}setPreferredLocaleJP(e){return this._updateUniversalP({[`${this.COMMUNICATION_PREF_KEY}`]:e})}clearPreferredLocaleJP(){return this._updateUniversalP({[`${this.COMMUNICATION_PREF_KEY}`]:null})}getDefaultShareAuthor(){return this.getUniversal()[this.DEFAULT_SHARE_AUTHOR_KEY]}setDefaultShareAuthorP(e){return this._updateUniversalP({[`${this.DEFAULT_SHARE_AUTHOR_KEY}`]:e})}clearDefaultAuthorP(){return this._updateUniversalP({[`${this.DEFAULT_SHARE_AUTHOR_KEY}`]:null})}getTipData(e){var t;return null!=(t=this.getApp().tips_data)?t[e]:void 0}setTipDataP(e,t){var r;return(r={})[e]=t,this.updateAppP({tips_data:r})}getEnabledSneaks(){var e;return null!=(e=this.getApp().enabled_sneaks)?e:[]}setEnabledSneaksP(e){return this.updateAppP({enabled_sneaks:e})}clearAppP(){var e,t;for(t in e={},this.getApp())"similarity_data_ready"!==t&&(e[t]=null);return this.updateAppP(e)}clearTipsP(){return this.updateAppP({tips_shown:null,tips_data:null})}getSimilarityDataProcessed(){var e;return null!=(e=this.getApp().similarity_data_ready)?e:e=!1}debugDeleteSimilarityDataProcessedP(){return this.updateAppP({similarity_data_ready:null})}getHavePromptedProofingFeedback(){var e;return null!=(e=this.getApp().prompted_proofing_feedback)?e:e=!1}setHavePromptedProofingFeedbackP(e){return this.updateAppP({prompted_proofing_feedback:e})}getHaveRestoredPreviously(){var e;return null!=(e=this.getApp().restored_previously)?e:e=!1}setHaveRestoredPreviously(e){return this.updateAppP({restored_previously:e})}getHaveShownHelpMenu(){var e;return null!=(e=this.getApp().shown_help_menu)?e:e=!1}setHaveShownHelpMenuP(e){return this.updateAppP({shown_help_menu:e})}getNewsDialogShownDateP(){var e;return null!=(e=this.getApp().news_dialog_shown_date)?e:e=null}setNewsDialogShownDateP(e){return this.updateAppP({news_dialog_shown_date:e.toISOString()})}getGenerativeAiTouAccepted(){return n.Z.is_enabled("save_genai_accepted_in_universal")?Boolean(this.getUniversal()[this.GEN_AI_ACCEPTED_KEY]):Boolean(this.getApp()[this.GEN_AI_ACCEPTED_KEY])}setGenerativeAiTouAcceptedP(e){return n.Z.is_enabled("save_genai_accepted_in_universal")?this._updateUniversalP({[`${this.GEN_AI_ACCEPTED_KEY}`]:e}):this.updateAppP({[`${this.GEN_AI_ACCEPTED_KEY}`]:e})}getApp(){var e;return null!=(e=this.attributes.lightroom_web)?e:{}}getUniversal(){var e;return null!=(e=this.attributes.universal)?e:{}}updateAppP(e){var t;return t={lightroom_web:e},this._updateAttributesP(t)}_updateUniversalP(e){var t;return t={universal:e},this._updateAttributesP(t)}getSearchIndexingDate(){return new Date(this.getApp().search_indexing_enabled_date)}setSearchIndexingDateP(e){return this.updateAppP({search_indexing_enabled_date:e.toISOString()})}refreshP(){return this._refreshP(this._linkBase.fullPath(""))}setAttributes(e){var t,r,i,n;return t="",e.base&&(null!=(i=e.links)&&null!=(n=i.self)?n.href:void 0)&&(t+=e.base.replace(/\/$/,"")+e.links.self.href+"/"),r={self:{href:"settings"}},e.payload?super.setAttributes(lr.extend({base:t,links:r},e.payload)):super.setAttributes({base:t,links:r})}}return e.prototype.DEFAULT_SHARE_AUTHOR_KEY="share_author_default",e.prototype.COMMUNICATION_PREF_KEY="communication_preference",e.prototype.GEN_AI_ACCEPTED_KEY="genai_accepted",e}.call(void 0);var cr,dr,hr,pr=r(982201),fr=[].indexOf;dr=0,hr=0,cr={CHUNK_THRESHOLD:209715200,VIDEO_EXTENSIONS:["3gp","3gpp","avi","dxo","m2ts","m4v","mov","mp4","mpe","mpeg","mpg","mpg4","mts","qt"],ALL_VIDEO_EXTENSIONS:["264","3g2","3gp","3gpp","3gpp2","asf","avc","avi","divx","dv","flv","m1v","m2p","m2t","m2ts","m2v","m4v","mkv","mov","mp4","mpe","mpeg","mpg","mpg4","mpv","mts","ogg","ogv","ps","qt","tod","ts","vob","webm","wmv"],RAW_EXTENSIONS:["3fr","arq","arw","cr2","cr3","crw","dcr","dng","erf","fff","gpr","iiq","kdc","mef","mfw","mos","mrw","nef","nefx","nrw","orf","pef","psd","raf","raw","rw2","rwl","sr2","srf","srw","x3f"],JPEG_EXTENSIONS:["jfif","jpe","jpg","jpeg"],PNG_EXTENSIONS:["png"],TIFF_EXTENSIONS:["tif","tiff"],GIF_EXTENSIONS:["gif"],HEIF_EXTENSIONS:["heif","heic","hif"],JXL_EXTENSIONS:["jxl"],AVIF_EXTENSIONS:["avif"],downloadAssetP:function(e,t){var r,i;return 0===(r=(r=e.getFileName()).replace(/[;\/?:@=&"<>#%{}\|\\^~\]`]/g,"")).length&&(r=this.getDefaultFilename(e)),i=t?`${e.getMasterHref(!1)}/filename/${r}`:`${e.getDownload2048Href()}/filename/${r=r.replace(/\.[^.]+$/,".jpg")}`,window.location.href=i,pr.Deferred().resolve().promise()},getDefaultFilename:function(e){return e.isVideo()?this.defaultVideoFilename():this.defaultPhotoFilename()},defaultPhotoFilename:function(){return(0,P.zt)("$$$/js/viewer/download/no_filename=photo.jpg")},defaultVideoFilename:function(){return(0,P.zt)("$$$/js/viewer/download/no_filename_video=video.mp4")},isSupportedUploadType:function(e){return this.isImage(e)||this.isVideo(e)},isSupportedPPSProfileImageType:function(e){var t;return null!=(t=this.extName(e))&&(fr.call(this.JPEG_EXTENSIONS,t)>=0||fr.call(this.PNG_EXTENSIONS,t)>=0||fr.call(this.GIF_EXTENSIONS,t)>=0)},isUploadSupportedFormat:function(e){return this.isImage(e)||this.isVideo(e)},isUploadSupported:function(e){var t,r,i,s;return!!n.Z.is_enabled("debug_upload_anything")||(t=this.isImage(e),r=this.isVideo(e),!(!t&&!r)&&(t?0<(i=e.size)&&i<1073741824:0<(s=e.size)&&s<4294967296))},isVideo:function(e){var t;return null!=(t=this.extName(e))&&fr.call(this.ALL_VIDEO_EXTENSIONS,t)>=0},isImage:function(e){var t;return null!=(t=this.extName(e))&&(fr.call(this.JPEG_EXTENSIONS,t)>=0||fr.call(this.PNG_EXTENSIONS,t)>=0||fr.call(this.TIFF_EXTENSIONS,t)>=0||fr.call(this.RAW_EXTENSIONS,t)>=0||fr.call(this.HEIF_EXTENSIONS,t)>=0||fr.call(this.JXL_EXTENSIONS,t)>=0||fr.call(this.AVIF_EXTENSIONS,t)>=0)},_extensionInList:function(e,t){var r;return null!=(r=this.extName(e))&&fr.call(t,r)>=0},isJpeg:function(e){return this._extensionInList(e,this.JPEG_EXTENSIONS)},isRaw:function(e){return this._extensionInList(e,this.RAW_EXTENSIONS)},isPng:function(e){return this._extensionInList(e,this.PNG_EXTENSIONS)},isTiff:function(e){return this._extensionInList(e,this.TIFF_EXTENSIONS)},isXmp:function(e){return"xmp"===this.extName(e)},contentTypeForUpload:function(e){return this.isVideo(e)?"video/*":this.isJpeg(e)?"image/jpeg":this.isPng(e)?"image/png":this.isTiff(e)?"image/tiff":"application/octet-stream"},ozSubtype:function(e){return this.isVideo(e)?"video":!!this.isImage(e)&&"image"},extName:function(e){var t;if(t=e.name)return this.getFileExtension(t)},getFileExtension:function(e){var t;return-1!==(t=e.lastIndexOf("."))?e.substr(t+1).toLowerCase():""},browserCanLoadImage:function(e){var t;return null!=(t=this.getFileExtension(e))&&("jpg"===t||"jpeg"===t)},isDigestReliable:function(){return 0===hr?!(dr>2):!(dr>hr+2)},digestP:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;var i;return r>0?(i=pr.Deferred(),cr._digestP(e,t).done((function(){return i.resolve(...arguments)})).fail((()=>cr.digestP(e,t,r-1).done((function(){return i.resolve(...arguments)})).fail((function(){return i.reject(...arguments)})))),i.promise()):cr._digestP(e,t)},_digestP:function(e,t){var r,i,n,s,o,a,l,u,c,d,h;return i=pr.Deferred(),n="unknown",h=t?Math.min(1e4,Math.max(e.size/4,2e3)):6e4,d=setTimeout((()=>{if(dr++,i.reject(`${n}: timeout`),null!=a&&2!==a.readyState)return a.abort()}),h),_(`digestP for ${e.name}`,.25)?i.promise():(s=e=>{if("pending"===i.state())return dr++,clearTimeout(d),i.reject(`${n}: ${e}`)},o=e=>{if("pending"===i.state())return hr++,i.resolve(e),clearTimeout(d)},(r=null!=(l=window.crypto)?l:window.msCrypto)&&(c=null!=(u=r.subtle)?u:r.webkitSubtle)?(n="filereader",(a=new FileReader).onload=function(){var e,t;return e=a.result,window.msCrypto?(n="msCrypto",(t=window.msCrypto.subtle.digest({name:"SHA-256"},e)).oncomplete=function(e){return o(e.target.result)},t.onerror=function(e){var t;return s(null!=e&&null!=(t=e.toString())?t.substr(0,100):void 0)}):(n="crypto",c.digest({name:"SHA-256"},e).then((function(e){return o(e)})).catch((function(e){var t;return"string"!=typeof(t=(null!=e?e.name:void 0)||(null!=e?e.toString().substr(0,100):void 0))&&(t="unknown"),s(t)})))},a.onerror=function(e){var t;return e instanceof ProgressEvent?t=e.lengthComputable?`progressevent as error ${e.loaded} / ${e.total}`:"progressevent as error, not computable":"string"!=typeof(t=(null!=e?e.name:void 0)||(null!=e?e.toString().substr(0,100):void 0))&&(t="unknown"),s(t)},a.readAsArrayBuffer(e),i.then((function(e){var t,r,i,n,s;if(e instanceof ArrayBuffer){for(s="",r=0,i=(n=new Uint8Array(e)).length;r<i;r++)1===(t=n[r].toString(16)).length?s+="0"+t:s+=t;return s}return e}))):i.reject())}};const gr=cr,mr="ontouchstart"in document||navigator.maxTouchPoints>0;var yr;const vr={COMPACT_SIZE:668,MINIMAL_SIZE:320,touch:mr,gesture:"GestureEvent"in window,mouse:!mr||Z.Z.win,hover:window.matchMedia("(hover: hover)").matches,geolocation:null!=navigator.geolocation,pixelDensity:null!=(yr=window.devicePixelRatio)?yr:1,wasm:null!=window.WebAssembly,hasLocalStorage:function(){try{return localStorage.setItem("dummy_key","dummy_key"),localStorage.removeItem("dummy_key"),!0}catch(e){return e,!1}}(),viewportWidth:function(){return document.documentElement.clientWidth},viewportHeight:function(){return document.documentElement.clientHeight},isCompact:function(e,t){return this.isCompactWidth(e)||this.isCompactHeight(t)},isCompactWidth:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportWidth())<=this.COMPACT_SIZE},isCompactHeight:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportHeight())<=this.COMPACT_SIZE},isCompactScreen:function(){return screen.width<=this.COMPACT_SIZE||screen.height<=this.COMPACT_SIZE},isMinimal:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportWidth(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.viewportHeight();return e<=this.MINIMAL_SIZE||t<=this.MINIMAL_SIZE},isFullscreen:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},isFullscreenEnabled:function(){return!Z.Z.silk&&(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled)},isVideoSupported:function(){try{return null!=document.createElement("video").canPlayType}catch(e){return e,!1}}},br={_isBetter:(e,t)=>e<0?t<0&&e>t:t<0||e<t,getBestHrefForSize(e,t){let r=-1/0,i="";t*=vr.pixelDensity;for(const n in e){const s=e[n],o=n-t;this._isBetter(o,r)&&(i=s,r=o)}return i}};var _r,wr,Pr,Ar,Sr=r(754992);const xr=new(_r=class extends p.Z{constructor(){super(),(0,C.Z)(this,"isSignedIn",wr,this),(0,C.Z)(this,"isReady",Pr,this),(0,C.Z)(this,"isReadyOrRenderDeferred",Ar,this),this.isSignedIn=Sr.default.isSignedIn(),Sr.default.readyJP.then((()=>{this.isReady=!0,this.isSignedIn=Sr.default.isSignedIn()})).catch((()=>{this.isReady=!1})),this.readyWithRenderTimeoutJP().then((()=>{this.isReadyOrRenderDeferred=!0})),Sr.default.on("signOut",(()=>{this.isSignedIn=!1,this.trigger("signOut")})),this.watch((()=>P.Z.locale),(e=>Sr.default.locale=e),!0)}readyJP(){return Sr.default.readyJP}readyWithRenderTimeoutJP(){return Sr.default.readyOrRenderTimeoutJP}get token(){return Sr.default.getToken()}},wr=(0,i.Z)(_r.prototype,"isSignedIn",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pr=(0,i.Z)(_r.prototype,"isReady",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ar=(0,i.Z)(_r.prototype,"isReadyOrRenderDeferred",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_r);var Cr,Or,kr=r(965529);let Er=(Cr=class{constructor(){(0,C.Z)(this,"ppsProfile",Or,this)}static _config(e){const t=window?.location.hostname;return(kr.hostnames[t]||kr.hostnames.default)[e]}static get apiHost(){return this._config("api_host")}static get apiKey(){return this._config("api_key")}static get baseHref(){return`https://${this.apiHost}/api/profile`}static get imageHref(){return`${this.baseHref}/image`}static get options(){return{headers:{"x-api-key":this.apiKey}}}static async getProfile(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={};if(t=Object.assign(this.options,t),await xr.readyJP(),xr.isSignedIn){if(t.headers.Authorization=`Bearer ${xr.token}`,this.ppsProfile&&!e)return this.ppsProfile;{const e=await fetch(this.baseHref,t),r=await e.json();if(this.ppsProfile=r,200===e.status)return this.ppsProfile;throw A.Z.reportFailure("getProfilePPSError",{errorCode:e.status,errorMsg:e.statusText}),new Error(e.status)}}}static async putProfileImage(e,t){let r={};r=Object.assign(this.options,r),r.method="PUT",r.headers["content-type"]=t,r.body=e,await xr.readyJP(),r.headers.Authorization=`Bearer ${xr.token}`;const i=await fetch(this.imageHref,r);if(i.status>=200&&i.status<300)return i;throw A.Z.reportFailure("putProfileImagePPSError",{errorCode:i.status,errorMsg:i.statusText}),new Error(i.status)}},Or=(0,i.Z)(Cr.prototype,"ppsProfile",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Cr);var Tr,Ir,Dr,Rr;let jr=(Tr=class extends ar{constructor(){super(...arguments),(0,C.Z)(this,"pollingForOzAvatar",Ir,this),(0,C.Z)(this,"hasDefaultAvatar",Dr,this),(0,C.Z)(this,"ppsProfile",Rr,this)}setAttributes(e){if(!n.Z.is_enabled("profile_image_upload"))return null!=this.attributes&&(this.attributes.avatar=void 0),super.setAttributes(e);super.setAttributes(e),this.setUserPPSProfile()}getInitials(){return this.attributes.first_name?.length?this.attributes.last_name?this.attributes.first_name[0]+this.attributes.last_name[0]:this.attributes.first_name[0]:null}getFullName(){var e;return null!==(e=this.attributes.full_name)&&void 0!==e?e:""}hackCacheableLinkHref(e){if(null!=e)return e.replace("/v2/","/v2c/")}getAvatarUrl(e){if(n.Z.is_enabled("profile_image_upload")){const t={};if(this.id===N.Z.account?.id)return N.Z.account.getAvatarUrl(e);{for(const e in this.attributes.links){const r=this.attributes.links[e];if("/rels/avatars/"===e.substr(0,14)){const{href:e,size:i}=r;null!=e&&null!=i&&(t[i]=e)}}const r=br.getBestHrefForSize(t,e);return this.hackCacheableLinkHref(this._linkBase.fullHref(r))}}{const t={};for(const e in this.attributes.links){const r=this.attributes.links[e];if("/rels/avatars/"===e.substr(0,14)){const{href:e,size:i}=r;null!=e&&null!=i&&(t[i]=e)}}const r=br.getBestHrefForSize(t,e);return this.hackCacheableLinkHref(this._linkBase.fullHref(r))}}async setUserPPSProfile(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.ppsProfile=await this.getPPSProfile(e),this.hasDefaultAvatar=this.ppsProfile?.is_default_image}async getPPSProfile(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return await Er.getProfile(e)}async updatePPSProfileImage(e){const t=`image/${gr.getFileExtension(e.name)}`;return await Er.putProfileImage(e,t)}},Ir=(0,i.Z)(Tr.prototype,"pollingForOzAvatar",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Dr=(0,i.Z)(Tr.prototype,"hasDefaultAvatar",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rr=(0,i.Z)(Tr.prototype,"ppsProfile",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tr);var Zr,Nr,Fr,Lr,Mr,Ur,$r,zr,Hr,Jr,qr,Vr,Br,Wr,Gr;let Xr=(Zr=yt.byVal,Nr=yt.byVal,Fr=yt.byVal,Lr=yt.byVal,Mr=class extends tr{constructor(){super(...arguments),(0,C.Z)(this,"used",Ur,this),(0,C.Z)(this,"limit",$r,this),(0,C.Z)(this,"display_limit",zr,this),(0,C.Z)(this,"warn",Hr,this)}},Ur=(0,i.Z)(Mr.prototype,"used",[Zr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$r=(0,i.Z)(Mr.prototype,"limit",[Nr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zr=(0,i.Z)(Mr.prototype,"display_limit",[Fr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hr=(0,i.Z)(Mr.prototype,"warn",[Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mr),Kr=(Jr=yt.byRef(Xr),qr=class extends tr{constructor(){super(...arguments),(0,C.Z)(this,"storage",Vr,this)}},Vr=(0,i.Z)(qr.prototype,"storage",[Jr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qr),Yr=(Br=yt.byRef(Kr),Wr=class extends sr{constructor(){super(...arguments),(0,C.Z)(this,"entitlement",Gr,this)}},Gr=(0,i.Z)(Wr.prototype,"entitlement",[Br],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wr);const Qr={SPACE_PRIVATE:!1,SPACE_ALLOW_ACCESS_REQUESTS:!0};class ei{constructor(e){this.policy=e}get defaultSpacePrivateValue(){return this.hasRestrictions?!this.allowAnyoneCanView:Qr.SPACE_PRIVATE}get defaultSpaceAllowAccessRequestsValue(){return this.hasRestrictions?this.allowAccessRequests:Qr.SPACE_ALLOW_INVITE_REQUESTS}get canChangeLinkAccessSetting(){return!this.hasRestrictions||this.allowInviteOnly&&this.allowAnyoneCanView}get hasRestrictions(){return null!=this.policy}get policyAllowsSharing(){return this.allowAnyoneCanView||this.allowInviteOnly}get allowAnyoneCanView(){return!0!==this.policy?.publicSharingDisallowed}get allowInviteOnly(){return"none"!==this.policy?.invitationSharing}get restrictInviteDomains(){return"allowDomains"===this.policy?.invitationSharing}get allowedInviteDomains(){return this.policy?.allowDomains}get allowAccessRequests(){return!0!==this.policy?.requestAccessSharingDisallowed}get allowImagesInFeedback(){return!0!==this.policy?.feedbackDisallowed}get allowCommunityPosting(){return!0!==this.policy?.communityPostingDisallowed}}var ti,ri=r(108856).Z,ii=[].indexOf;const ni=ti=function(){var e,t,r,s;let o=(e=k(2e3),t=class extends jr{constructor(){super(...arguments),(0,C.Z)(this,"pollingForSubscription",r,this),(0,C.Z)(this,"sharePolicy",s,this)}setAttributes(e){return super.setAttributes(e),this.settings=new ur(e),this.sharePolicy=new ei(e.policies),this.configuredPreferredLocale(),n.Z.is_enabled("debug")&&this.debugLogLocaleState(),this}debugLogLocaleState(){var e,t;if(!ri.sdk)return console.group("Locale State"),t=P.Z.is_default_locale_fallback?"(auto)":"(setting)",console.log("Current locale: ",P.Z.locale,t),console.log("1. ‘locale‘ cookie:",be("locale")),console.log("2. ‘locale_pass‘ cookie:",be("locale_pass")),e=null!=P.Z.browser_locale?"(The first one we support)":"(We don‘t support any)",console.log("3. Browser-requested locale:",P.Z.browser_locale,e),console.log("Account communication preference: ",this.getPreferredLocale()),console.groupEnd()}getStatus(){return n.Z.is_enabled("debug_account_sub_expired")?"subscription_expired":n.Z.is_enabled("debug_account_trial_expired")?"trial_expired":this.attributes.entitlement.status}isSubscriber(){return"subscriber"===this.getStatus()}subscriptionStartDate(){var e,t;return null!=(t=null!=(e=this.attributes.entitlement.current_subs)?e.purchase_date:void 0)?Date.parse(t):void 0}isTrialExpired(){var e;return"trial_expired"===this.getStatus()||"trial"===this.getStatus()&&(new Date).getTime()>Date.parse(null!=(e=this.attributes.entitlement.trial)?e.end:void 0)}trialDaysRemaining(){var e,t,r,i;if("trial"===this.getStatus()&&(e=(i=Date.parse(null!=(r=this.attributes.entitlement.trial)?r.end:void 0))-(t=(new Date).getTime()),null!=i&&null!=t&&e>0))return Math.ceil(e/864e5)}isSubscriptionExpired(){return"subscription_expired"===this.getStatus()}sendBonanzaFeedbackJP(e){var t;return t=e.getOzData(this),this.requestJP("POST","/v2/events/feedback",JSON.stringify(t))}sendFirstLaunchMetric(){if(this.settings.getAccountFirstLaunch())return!1;try{if(Date.parse(this.getOzCreatedDate())>Date.parse("2024-03-13:00:00Z"))return this.isFirstLaunch=!0,this.settings.setAccountFirstLaunchJP(),!0}catch(e){console.error("error parsing account created date"),A.Z.reportFailure("Failure parsing oz account created date for sendFirstLaunchMetric")}return this.settings.setAccountFirstLaunchJP(),!1}toggleOzFeature(e,t){var r;return r=`${this.href}/feature_classes/${e}`,t?this.requestP("PUT",r,"{}"):this.requestP("DELETE",r,"{}")}pollForSubscriptionStatusJP(e){var t,r;return t=6e4,1e3,6e5,5e3,r=new Date,this._pollForSubscriptionStatusJP(t,1e3).catch((()=>("function"==typeof e&&e(),this._pollForSubscriptionStatusJP(54e4,1e3).catch((e=>{var t,i,n,s,o;i=new Date,[t,n,o]=e,s=i-r>=66e4,this.reportOzFailure("processingPurchaseFailed",t,n,o,{timeout:s})})))))}_pollForSubscriptionStatusJP(e,t){return this.pollingForSubscription=!0,new Promise(((r,i)=>{var n;return setTimeout((()=>{if(this.pollingForSubscription)return i()}),e),(n=()=>this.refreshJP().then((()=>{if(this.pollingForSubscription)return"subscriber"===this.getStatus()?r():setTimeout((()=>n()),t)}),(e=>{var r;if(this.pollingForSubscription)return e instanceof Array?(r=e[1])>=400&&r<500?i(e):setTimeout((()=>n()),t):i()})))()})).finally((()=>this.pollingForSubscription=!1))}getWCDGuid(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]||-1!==this.attributes.wcd_guid.indexOf("@")?this.attributes.wcd_guid:`${this.attributes.wcd_guid}@AdobeID`}getFullName(){return this.attributes.full_name}getFirstName(){return this.attributes.first_name}getLastName(){return this.attributes.last_name}getEmail(){return this.attributes.email}getCountry(){return this.attributes.country}isSearchIndexed(){var e;return null!=(e=this.attributes.config.search_index)&&e}ozFeatureEnabled(e){return this.attributes.config.hasOwnProperty(e)}debugResetBestPhotosP(){return this.settings.debugDeleteSimilarityDataProcessedP().then((()=>{var e;return e=this.getClusterFlagHref(),this.requestP("DELETE",e)}))}clearDefaultAuthor(){return this.settings.clearDefaultAuthorP()}setPreferredLocaleJP(e){var t;if(!ri.sdk)return t=Object.keys(P.Z.locale_hash),ii.call(t,e)<0?Promise.reject():e===this.getPreferredLocale()?Promise.resolve():this.settings.setPreferredLocaleJP(e)}getPreferredLocale(){return this.settings.getPreferredLocale()}clearPreferredLocaleJP(){return this.settings.clearPreferredLocaleJP()}configuredPreferredLocale(){var e,t,r;if(!ri.sdk&&!((null!=(t=this.getPreferredLocale())?t.length:void 0)>0||(e=Object.keys(P.Z.locale_hash),P.Z.is_default_locale_fallback||(r=P.Z.locale,ii.call(e,r)<0))))return A.Z.report("localeConfigSetCommunicationPref",{locale:P.Z.locale}),this.setPreferredLocaleJP(P.Z.locale)}checkAccountLocale(){var e,t;if(!ri.sdk&&(null!=(e=this.getPreferredLocale())?e.length:void 0)>0&&(null!=(t=P.Z.locale)?t.length:void 0)>0)return this.getPreferredLocale().toLowerCase()!==P.Z.locale.toLowerCase()?A.Z.report("localeMismatchBrowserVsAccount",{locale:this.getPreferredLocale(),browserLocale:P.Z.locale}):void 0}setDefaultShareAuthor(e){return e===this.getFullName()?this.clearDefaultAuthor():this.settings.setDefaultShareAuthorP(e)}getDefaultShareAuthor(){var e;return null!=(e=this.settings.getDefaultShareAuthor())?e:this.getFullName()}getAppsP(){var e;return e=this.linkHref("/rels/apps"),this.requestP("GET",e).done((e=>{this.appsData=e}))}hasTriedLrD(){var e,t,r;if(m())return y();for(e=0,t=(r=this.appsData.apps).length;e<t;e++)if("AdobeLightroom"===r[e].client_app)return!0;return!1}hasTriedLrM(){var e,t,r;if(v())return b();for(e=0,t=(r=this.appsData.apps).length;e<t;e++)if("LrMobile"===r[e].client_app)return!0;return!1}getEnforcedMaxStorageLimit(){return n.Z.is_enabled("debug_0_storage_limit")?0:this.attributes.entitlement.storage.limit}getAdvertizedMaxStorageLimit(){return n.Z.is_enabled("debug_0_storage_limit")?0:this.attributes.entitlement.storage.display_limit}isStorageAtLimit(){return this.getUsedStorage()>=this.getAdvertizedMaxStorageLimit()}isStorageAtWarn(){return!this.isStorageAtLimit()&&this.getUsedStorage()>=this.getWarnStorageLimit()}getWarnStorageLimit(){return this.attributes.entitlement.storage.warn}getUsedStorage(){return this.attributes.entitlement.storage.used}isPooledQuota(){return this.attributes.entitlement.storage.pooledQuota}getUsedStoragePercent(){var e;return 0===this.getAdvertizedMaxStorageLimit()?100:(e=.01*this.getAdvertizedMaxStorageLimit(),Math.min(100,Math.max(this.getUsedStorage(),e)/this.getAdvertizedMaxStorageLimit()*100))}getUsedStorageRatio(){return 0===this.getAdvertizedMaxStorageLimit()?1:Math.min(1,this.getUsedStorage()/this.getAdvertizedMaxStorageLimit())}isSimilarityDataProcessed(){return!n.Z.is_enabled("best_photos_no_similarity_data")&&this.settings.getSimilarityDataProcessed()}getAvatarUrl(e){var t,r;return n.Z.is_enabled("profile_image_upload")?(null!=(t=this.ppsProfile)?t.images:void 0)?br.getBestHrefForSize(null!=(r=this.ppsProfile)?r.images:void 0,e):void 0:super.getAvatarUrl(e)}},r=(0,i.Z)(t.prototype,"pollingForSubscription",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=(0,i.Z)(t.prototype,"sharePolicy",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.Z)(t.prototype,"debugLogLocaleState",[e],Object.getOwnPropertyDescriptor(t.prototype,"debugLogLocaleState"),t.prototype),t);return o.prototype.attributeClass=Yr,o.prototype.FIND_SELF_ID="00000000000000000000000000000000",o.prototype.FIND_SELF_PATH="/v2/accounts/00000000000000000000000000000000",o.prototype.handleAuthErrors=!1,o.prototype.isFirstLaunch=!1,o}.call(void 0);ti.getCurrentP=function(){return new ti(`${N.Z.hostOverride}/v2/accounts/00000000000000000000000000000000`).initializedP()};var si=r(4532),oi=r.n(si),ai=r(982201);class li{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.requestQueue=[],this.runningRequests=0,this.finished=!1,this.failed=!1,this.deferred=null,this.maxParallelRequests=e,this.deferred=ai.Deferred()}promise(){return this.deferred.promise()}empty(){this.requestQueue=[]}enqueuePromise(e){if(this.finished)throw"Enqueued on a finished RequestQueue";this.requestQueue.push(e),this._requestMore()}_requestMore(){if(0===this.requestQueue.length&&0===this.runningRequests&&!this.failed)return this.deferred.resolve(),void(this.finished=!0);for(;this.requestQueue.length>0&&this.runningRequests<this.maxParallelRequests;){const e=this.requestQueue.shift();this.runningRequests+=1,e().always((()=>{this.runningRequests-=1,this.deferred.notify(this.requestQueue.length)})).done((()=>this._requestMore())).fail((()=>{this.finished=!0,this.failed=!0,this.deferred.reject()}))}}}var ui,ci,di,hi,pi,fi,gi,mi,yi=r(891218),vi=r(982201);mi=0,ui=class{constructor(e){(0,C.Z)(this,"loadTime",ci,this),this.href=e.href,this._deferred=vi.Deferred(),this.requestCount=1,this.requestOrderId=mi++,this.isLoaded=!1,this.loadedP=this._deferred.promise()}loadP(e){var t,r,i;return e.startImageLoad(),r=new Date,t=e.batchStartTime,i=()=>{if(e.batchStartTime===t)return e.finishImageLoad(r)},this.image=new Image,this.image.onload=()=>(this.isLoaded=!0,this.loadTime=new Date-r,i(),this._deferred.resolve()),this.image.onerror=()=>(this.isLoaded=!1,e.cancelImageLoad(),this._deferred.reject()),this.image.src=this.href,this.loadedP}},ci=(0,i.Z)(ui.prototype,"loadTime",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gi=ui,di=class{constructor(){(0,C.Z)(this,"loadCount",hi,this),(0,C.Z)(this,"totalLoadTimeMs",pi,this),this.batchOpenRequests=0,this.batchCompletedCount=0}get thumbLoadAvgMs(){return 0===this.loadCount?0:this.totalLoadTimeMs/this.loadCount}startBatch(){return this.batchStartTime=new Date,this.lastEndTime=this.batchStartTime,this.batchOpenRequests=1}startImageLoad(){return null!=this.batchStartTime?this.batchOpenRequests++:this.startBatch()}cancelImageLoad(){return this.batchOpenRequests--}finishImageLoad(e){var t,r;return(r=new Date)-e,t=r-this.lastEndTime,this.totalLoadTimeMs+=t,this.loadCount++,this.batchOpenRequests--,this.batchOpenRequests<=0?(this.batchStartTime=null,this.batchOpenRequests<0?console.warn(`Negative open requests: ${this.batchOpenRequests}`):void 0):this.lastEndTime=r}},hi=(0,i.Z)(di.prototype,"loadCount",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pi=(0,i.Z)(di.prototype,"totalLoadTimeMs",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fi=di;var bi,_i,wi,Pi,Ai,Si,xi,Ci,Oi,ki,Ei,Ti,Ii=r(214287),Di=r.n(Ii),Ri=r(982201),ji=[].indexOf;Ei=["thumbnail2x","640","1280","2048","panorama"],Ti=0,ki=["2048-avif","panorama-avif"],Ci=function(){var e,t,r,n,s,o;let a=(e=class{constructor(e,i,a,l){var u,c;(0,C.Z)(this,"loadTime",t,this),(0,C.Z)(this,"loadEndTime",r,this),(0,C.Z)(this,"priority",n,this),(0,C.Z)(this,"requestOrderId",s,this),(0,C.Z)(this,"loadedHref",o,this),this.priority=e,this.asset=i,this.rendition=a,this.href=l,this._deferred=Ri.Deferred(),this._cancelDeferred=Ri.Deferred(),this.requestCount=1,this.isLoaded=!1,this.isQueued=!1,[c,u]=this.asset.getRenditionDimensions(this.rendition),this.megaPixels=c*u/1048576,this.ozImageP=null,this.loadedP=this._deferred.promise(),this.loadedJP=new Promise(((e,t)=>this.loadedP.done((()=>e())).fail((()=>t))))}async loadJP(e){return null!=this.image?this.loadedJP:await this.loadP(e)}loadP(e){var t,r,i;if(null!=this.image)return this.loadedP;if(this.isQueued=!1,this.requestOrderId=Ti++,e.startImageLoad(),r=new Date,t=e.batchStartTime,i=()=>{if(e.batchStartTime===t)return e.finishImageLoad(this,r)},this.image=new Image,this.image.onload=()=>(this.isLoaded=!0,this.loadedHref=this.image.src,this.loadEndTime=new Date,this.loadTime=this.loadEndTime-r,i(),this._deferred.resolve()),this.image.onerror=()=>(this.isLoaded=!1,e.cancelImageLoad(this,r),this._deferred.reject()),this.useOzCredentials){if(null!=this.ozImageP)return;this.ozImageP=ye.prototype.requestP("GET",this.href,null,{responseType:"arraybuffer",cancelPromise:this._cancelDeferred}),this.ozImageP.fail((()=>(this._deferred.reject(),e.cancelImageLoad(this,r)))),this.ozImageP.then(((e,t,r)=>{var i;return i=new Blob([new Uint8Array(e)],{type:r.getResponseHeader("Content-Type")}),this.image.src=URL.createObjectURL(i)}))}else this.image.src=this.href;return this.loadedP}cancel(){var e;return this.useOzCredentials?this._cancelDeferred.resolve():null!=(e=this.image)?e.src="":void 0}dispose(){var e;if(null!=(null!=(e=this.image)?e.src:void 0)&&this.useOzCredentials)return URL.revokeObjectURL(this.image.src)}},t=(0,i.Z)(e.prototype,"loadTime",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=(0,i.Z)(e.prototype,"loadEndTime",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n=(0,i.Z)(e.prototype,"priority",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=(0,i.Z)(e.prototype,"requestOrderId",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=(0,i.Z)(e.prototype,"loadedHref",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),e);return a.useOzCredentials=!1,a}.call(void 0),bi=class{constructor(){(0,C.Z)(this,"loadCount",_i,this),(0,C.Z)(this,"loadTimeMs",wi,this),(0,C.Z)(this,"megaPixelsLoaded",Pi,this),(0,C.Z)(this,"cancelledCount",Ai,this),(0,C.Z)(this,"megaPixelsCancelled",Si,this)}get megaPixelsPerSecond(){return 0===this.loadCount?0:this.megaPixelsLoaded/(this.loadTimeMs/1e3)}get errorAdjustedMegaPixelsPerSecond(){return 0===this.loadCount?0:(this.megaPixelsLoaded+this.megaPixelsCancelled/2)/(this.loadTimeMs/1e3)}update(e,t){return this.loadCount++,this.loadTimeMs+=e,this.megaPixelsLoaded+=t}updateCancelled(e,t){return this.cancelledCount++,this.loadTimeMs+=e,this.megaPixelsCancelled+=t}},_i=(0,i.Z)(bi.prototype,"loadCount",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wi=(0,i.Z)(bi.prototype,"loadTimeMs",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Pi=(0,i.Z)(bi.prototype,"megaPixelsLoaded",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ai=(0,i.Z)(bi.prototype,"cancelledCount",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Si=(0,i.Z)(bi.prototype,"megaPixelsCancelled",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Oi=bi,xi=class{constructor(){this.timingInfo=new Oi,this.batchOpenRequests=0,this.batchCompletedCount=0,this.recentTimingInfo=[]}startBatch(){return this.batchStartTime=new Date,this.lastEndTime=this.batchStartTime,this.lastErrorEndTime=this.batchStartTime,this.batchTiming=new Oi,this.batchOpenRequests=1}startImageLoad(){return null!=this.batchStartTime?this.batchOpenRequests++:this.startBatch()}cancelImageLoad(e,t){return this._finish(e,t,!1)}finishImageLoad(e,t){return this._finish(e,t,!0)}_finish(e,t,r){var i,n;if((n=new Date)-t,i=n-this.lastEndTime,this.lastEndTime=n,r?(this.timingInfo.update(i,e.megaPixels),this.batchTiming.update(i,e.megaPixels)):(this.timingInfo.updateCancelled(i,e.megaPixels),this.batchTiming.updateCancelled(i,e.megaPixels)),this.batchOpenRequests--,this.batchOpenRequests<=0&&(this.batchStartTime=null,this.batchOpenRequests<0))return console.warn(`ImageCache: Negative open requests: ${this.batchOpenRequests}`)}};const Zi=function(){class e{constructor(){var e;this.queuedRequests=new(Di())(((e,t)=>e.priority>t.priority)),this.usePixelDensityMultiplier,this.maxRequestCount=20,this.stats=new xi,e=vr.isCompactScreen()?2:5,this.caches={thumbnail2x:new yi.LRUCache(1e3*e),640:new yi.LRUCache(1e3*e),1280:new yi.LRUCache(200*e),2048:new yi.LRUCache(100*e),panorama:new yi.LRUCache(100*e),"2048-avif":new yi.LRUCache(100*e),"panorama-avif":new yi.LRUCache(100*e)}}setUseOzCredentials(e){return Ci.prototype.useOzCredentials=e}check(e,t,r){var i;return i=e.getBestRenditionTypeForSize(t,r,!0),this.caches[i].get(e.getRenditionHref(i))}checkAssetHref(e,t){var r,i,n,s,o;for(Ei,r=0,n=(o=Ei.slice().push(...ki)).length;r<n;r++)if(s=o[r],(null!=(i=this.caches[s].get(t))?i.asset:void 0)===e)return i;return null}get(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];var o;return o=t.getBestRenditionTypeForSize(r,i,!0),this.getRendition(e,t,o,n,s=!1)}stop(e){if(null!=e&&!e.isLoaded)return e.requestCount--,0===e.requestCount?(this.caches[e.rendition].remove(e.href),e.cancel()):void 0}getFastPreview(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2048",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var s,o,a;if(a=Ei.indexOf(r),("2048"===r||"panorama"===r)&&n&&(o=`${r}-avif`,null!=(s=this.caches[o].get(`${t.getRenditionHref(o)}.avif`))?s.isLoaded:void 0))return s;for(;a>=0;){if(o=Ei[a],null!=(s=this.caches[o].get(t.getRenditionHref(o)))?s.isLoaded:void 0)return s;a--}return this.getRendition(e,t,"thumbnail2x",i)}getRendition(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var o,a,l;return n.Z.is_enabled("debug")&&ji.call(Ei,r)<0&&console.warn(`Unexpected rendition type ${r}`),null==(a=t.getRenditionHref(r))?null:("2048"!==r&&"panorama"!==r||!s||(a=`${a}.avif`,r=`${r}-avif`),null==(l=(o=this.caches[r]).get(a))||l.isLoaded||i||l.requestCount++,i||(null!=l?l.isQueued&&e!==l.priority&&(l.priority=e,this._queueRequest(l)):(l=new Ci(e,t,r,a),o.set(a,l),this.stats.batchOpenRequests<this.maxRequestCount?l.loadP(this.stats).always((()=>window.requestAnimationFrame((()=>this._checkQueue())))):this._queueRequest(l))),l)}_queueRequest(e){return e.isQueued=!0,this.queuedRequests.add({priority:e.priority,imageInfo:e})}_checkQueue(){var e,t;if(this.stats.batchOpenRequests<this.maxRequestCount)for(;this.queuedRequests.size>0;)if((t=this.queuedRequests.poll()).priority===t.imageInfo.priority&&(e=t.imageInfo).isQueued&&e.requestCount>0)return void e.loadP(this.stats).always((()=>window.requestAnimationFrame((()=>this._checkQueue()))))}}return e.IMMEDIATE_PRIORITY=999999999,e}.call(void 0);var Ni,Fi,Li,Mi,Ui,$i,zi,Hi,Ji,qi=r(982201);Ni=class{constructor(){(0,C.Z)(this,"_state",Fi,this),(0,C.Z)(this,"uploadStatus",Li,this),(0,C.Z)(this,"currentSpace",Mi,this),(0,C.Z)(this,"publicGallery",Ui,this),(0,C.Z)(this,"publicGalleryLoaded",$i,this),(0,C.Z)(this,"shareSidebarAlbums",zi,this),(0,C.Z)(this,"pageJustLoaded",Hi,this),this.libraryPages=!1,this.newUser=!1,this.catalogs=null,this.embedded=null,this.recentAlbumsAndAdhocs=new Array,this.deletedAssets={},this.stateIsDirty=!1,this.firstAppState=!0,this.imageCache=new Zi,this.showFirstEditTip=!1}get state(){return this._state}set state(e){return null!=this._state&&(this.firstAppState=!1),this._state=e}get catalog(){return N.Z.catalogContext}get space(){return this.currentSpace||N.Z.spaceContext}get spaces(){return N.Z.spaces}get account(){return N.Z.account}setSpaceContext(e){this.currentSpace=e}get ownedLibraryView(){var e;return!!this.libraryPages&&!(null!=(e=this.state)?e.isSharedWithYouGrid():void 0)}get nonFreemiumLibraryPages(){return this.libraryPages&&null!=this.catalog}loadPublicGalleryP(){return this.libraryPages?this.catalog.gallerySpaces.allP().done((e=>(e.length>0&&(this.publicGallery=e[0]),this.publicGalleryLoaded=!0))):qi.Deferred().reject()}addRecentAlbumsAndAdhocs(e){if(this.hasRecentAlbum(e)?e.id!==this.recentAlbumsAndAdhocs[this.recentAlbumsAndAdhocs.length-1].id&&(this.recentAlbumsAndAdhocs.splice(this.recentAlbumsAndAdhocs.indexOf(this.findInRecentAlbum(e)),1),this.recentAlbumsAndAdhocs.push(e)):this.recentAlbumsAndAdhocs.push(e),this.recentAlbumsAndAdhocs.length>3)return this.recentAlbumsAndAdhocs.shift()}deleteRecentAlbumsAndAdhocs(e){if(this.hasRecentAlbum(e))return this.recentAlbumsAndAdhocs.splice(this.recentAlbumsAndAdhocs.indexOf(e),1)}hasRecentAlbum(e){return this.recentAlbumsAndAdhocs.filter((function(t){return t.id===(null!=e?e.id:void 0)})).length>0}findInRecentAlbum(e){return this.recentAlbumsAndAdhocs.find((function(t){return t.id===(null!=e?e.id:void 0)}))}assetIdsDeleted(e){var t,r,i,n;for(n=[],t=0,i=e.length;t<i;t++)r=e[t],n.push(this.deletedAssets[r]=!0);return n}assetIdsRestored(e){var t,r,i,n;for(n=[],t=0,i=e.length;t<i;t++)r=e[t],n.push(this.deletedAssets[r]=!1);return n}isAssetIdDeleted(e){return!0===this.deletedAssets[e]}},Fi=(0,i.Z)(Ni.prototype,"_state",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Li=(0,i.Z)(Ni.prototype,"uploadStatus",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mi=(0,i.Z)(Ni.prototype,"currentSpace",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ui=(0,i.Z)(Ni.prototype,"publicGallery",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$i=(0,i.Z)(Ni.prototype,"publicGalleryLoaded",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zi=(0,i.Z)(Ni.prototype,"shareSidebarAlbums",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hi=(0,i.Z)(Ni.prototype,"pageJustLoaded",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ji=new(Ji=Ni),S.q.enabled&&(S.q.AppData=Ji),a.enabled&&(a.AppData=Ji);const Vi=Ji;var Bi,Wi,Gi,Xi,Ki,Yi,Qi=r(982201);let en=(Bi=class extends ye{constructor(){super(...arguments),(0,C.Z)(this,"finished",Wi,this),(0,C.Z)(this,"length",Gi,this),(0,C.Z)(this,"totalCount",Xi,this),(0,C.Z)(this,"_models",Ki,this),(0,C.Z)(this,"_dirty",Yi,this)}reset(){this.indices={},this.finished=!1,this.page=0,this.length=0,this.totalCount=null,this._dirty=!1,this._models?this._models.swapItems([]):this._models=new je}markDirty(){return this._dirty=!0,this.trigger("dirty"),this}isDirty(){return this._dirty}_add(e){null==this.indices[e.id]&&this._push(e)}_push(e){this._models.push(e),this.indices[e.id]=this.length++,this.trigger("modelIndexChanged")}_reindex(e){null==e&&(this.indices={},e=0);const{models:t}=this,{indices:r}=this;for(let i=e,n=t.length-1;i<=n;i++)r[t[i].id]=i;this.length=t.length,this.trigger("modelIndexChanged")}get models(){return this._models.base}get modelsBindable(){return this._models}isEmpty(){return 0===this._models.length}async isEmptyJP(){return!!this.isEmpty()&&(!!this.finished||(await this.fetchP(),this.isEmpty()))}isKnownEmpty(){return this.isEmpty()&&this.finished}async fetchJP(){return await this.safeToJSPromise(this.fetchP())}async allJP(){return await this.allP()}allP(){return this.finished?Qi.Deferred().resolve(this.models.slice()).promise():this.fetchP().then((()=>this.allP()))}at(e){return this._models.at(e)}atP(e){return e<this._models.length?Qi.Deferred().resolve(this.at(e)).promise():this.fetchP().then((()=>this.atP(e)))}atJP(e){return e<this._models.length?Promise.resolve(this.at(e)):this.fetchJP().then((()=>this.atJP(e)))}firstP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<this._models.length?Qi.Deferred().resolve(this.at(e)).promise():Qi.Deferred().reject().promise()}range(e,t){let r;const i=Math.max(0,e);return r=null!=this.totalCount?Math.min(this.totalCount,t+1):t+1,this._models.sliceToArray(i,r)}rangeP(e,t){if(t<this._models.length||this.finished){const r=this.range(e,t);return Qi.Deferred().resolve(r).promise()}return this.fetchP().then((()=>this.rangeP(e,t)))}get(e){const t=this.index(e);return this.at(t)}getP(e){return this.indexP(e).then((e=>this.at(e)))}getJP(e){return this.indexJP(e).then((e=>this.at(e)))}index(e){return this.indices[e]}indexP(e){if(e){const t=this.index(e);return null!=t?Qi.Deferred().resolve(t).promise():this.fetchP().then((()=>this.indexP(e)))}return Qi.Deferred().reject()}indexJP(e){if(e){const t=this.index(e);return null!=t?Promise.resolve(t):this.fetchJP().then((()=>this.indexJP(e)))}return Promise.reject()}isPageLoaded(e){const t=this.pageSize*e+this.pageSize;return this.length>t||this.finished}isPagePastEnd(e){const t=this.pageSize*e;return this.finished&&e>0&&t>=this.length}pageP(e){return this.pagesP(e,e+1)}async pageJP(e){return await this.pagesJP(e,e+1)}pages(e,t){const r=this.pageSize*e,i=this.pageSize*t;return this._models.sliceToArray(r,i)}pagesP(e,t){const r=this.pageSize*t,i=r<=this.length,n=this.finished&&r>=this.length;return i||n?Qi.Deferred().resolve(this.pages(e,t),n).promise():this.fetchP().then((()=>this.pagesP(e,t)))}async pagesJP(e,t){return await this.pagesP(e,t)}totalCountP(){return null!=this.totalCount?Qi.Deferred().resolve(this.totalCount).promise():Qi.Deferred().reject()}pagesLoaded(){return this.finished?Math.ceil(this.length/this.pageSize):Math.floor(this.length/this.pageSize)}deleteLocally(e){this._deleteMany(e)}_deleteMany(e){let t;const r=[];for(const i of e)t=this.index(i),null!=t&&r.push(t);r.sort(((e,t)=>e-t));let i=0;for(let e=0;e<r.length;e++)t=r[e],this._models.splice(t-i++,1);null!=this.totalCount&&(this.totalCount-=e.length),r.length>0&&this._reindex()}getDisplayIndex(e){if(null==e)return null;return this._models.filter((e=>!e.isLayoutSegment())).findIndex((t=>t.id===e.id))}sortByCustomJP(e,t){return this.customSortPropPath=t,new Promise(((t,r)=>{this._models.sort(e),this._reindex(),this.markDirty(),t()}))}get isCustomSorted(){return null!=this.customSortPropPath}reverseCustomSort(){this._models.reverse(),this._reindex()}includesLayoutSegments(){return this.options?.subtype?.indexOf("layout_segment")>=0}},Wi=(0,i.Z)(Bi.prototype,"finished",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gi=(0,i.Z)(Bi.prototype,"length",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Xi=(0,i.Z)(Bi.prototype,"totalCount",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ki=(0,i.Z)(Bi.prototype,"_models",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yi=(0,i.Z)(Bi.prototype,"_dirty",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bi);var tn,rn,nn=r(176262);let sn=(tn=class{constructor(){(0,C.Z)(this,"data",rn,this)}formatDateAgo(e){var t=(new Date-e)/1e3;return this.formatSecondsAgo(t)}formatSecondsAgo(e,t){null==t&&(t=!1);var r,i,n,s,o=this._getLocale().fields;return e<60?(r=e,i="second",n="$$$/js/viewer/loupe/sidebar/timestamp/seconds_ago={x} s"):e<3600?(r=e/60,i="minute",n="$$$/js/viewer/loupe/sidebar/timestamp/minutes_ago={x} m"):e<86400?(r=e/3600,i="hour",n="$$$/js/viewer/loupe/sidebar/timestamp/hours_ago={x} h"):e<2592e3?(r=e/86400,i="day",n="$$$/js/viewer/loupe/sidebar/timestamp/days_ago={x} d"):e<31536e3?(r=e/2592e3,i="month",n="$$$/js/viewer/loupe/sidebar/timestamp/months_ago={x} M"):(r=e/31536e3,i="year",n="$$$/js/viewer/loupe/sidebar/timestamp/years_ago={x} Y"),r=Math.floor(r),t?(0,P.zt)(n,{x:r}):(s=o[i].pastRelativeTime,(s=1===r||1===s.length?s[0]:s[1]).replace("{0}",r))}formatDateRange(e,t,r){var i;i="full"===r?"yMMMEd":"short"===r?"yMd":"yMMMd";var n,s=this._getLocaleCalendar().dateTimeFormats.intervalFormats[i];if(t<e){var o=t;t=e,e=o}if(e.getFullYear()===t.getFullYear())if(e.getMonth()===t.getMonth()){if(e.getDay()===t.getDay())return this.formatDate(e,r);n="d"}else n="M";else n="y";var a=s[n];return this._fillPattern(a,e,t)}formatDateTime(e,t){var r=this._getLocaleCalendarPattern("dateTime",t);return r=(r=r.replace("{0}",this._getLocaleCalendarPattern("time",t))).replace("{1}",this._getLocaleCalendarPattern("date",t)),this._fillPattern(r,e)}formatTime(e,t){var r=this._getLocaleCalendarPattern("time",t);return this._fillPattern(r,e)}formatDate(e,t){var r=this._getLocaleCalendarPattern("date",t);return this._fillPattern(r,e)}formatShortYearMonth(e){var t=this._getLocaleCalendar().dateTimeFormats.availableFormats.yMMM,r=this._fillPattern(t,e);return r=r[0].toUpperCase()+r.substr(1)}formatWideYearMonth(e){var t,r=this._getLocaleCalendar().dateTimeFormats.availableFormats.yMMMM;return t=(t=r?this._fillPattern(r,e):this.formatShortYearMonth(e))[0].toUpperCase()+t.substr(1)}getMonthField(e,t){var r=this._getLocaleCalendar().months;t=t||"wide";return(r["stand-alone"][t]||r.format[t])[e]}getDayField(e,t){var r=this._getLocaleCalendar().days;t=t||"wide";return(r["stand-alone"][t]||r.format[t])[e]}_getLocale(){return this.data}_getLocaleCalendar(){return this._getLocale().calendar}_getLocaleCalendarPattern(e,t){return"date"===e||"dateTime"===e?"spectrum-custom-compact"===t?t="medium":"spectrum-full"===t&&(t="full"):"time"===e&&("spectrum-custom-compact"!==t&&"spectrum-full"!==t||(t="short")),this._getLocaleCalendar()[e+"Formats"][t||"long"]||""}_fillPattern(e,t,r){var i,n=t,s=this._getLocaleCalendar(),o=this._getLocale().timeZoneNames;if(r){var a,l,u=e.replace(/'(''|[^'])*'/g,"").match(/([a-zA-z])\1*/g);e:for(f=0;f<u.length;f++)for(l=u[f],a=f+1;a<u.length;a++)if(l===u[a]){i=l;break e}}for(var c=function(e,t){for(var r=t-(e=e.toString()).length,i="",n=0;n<r;n++)i+="0";return i+=e},d=function(e,a){var l=e.length;switch(e===i&&(n===t?t=void 0:n=r),a){case"h":case"H":var u=n.getHours();return"h"===a&&(u>11&&(u-=12),0===u&&(u=12)),2===l?c(u,2):u;case"m":case"s":var d="m"===a?n.getMinutes():n.getSeconds();return 2===l?c(d,2):d;case"a":var h=s.dayPeriods.format,p=n.getHours()<12?"am-variant":"pm-variant";return h.hasOwnProperty(p)||(p="am-variant"===p?"am":"pm"),s.dayPeriods.format[p];case"y":var f=n.getFullYear();switch(l){case 1:return f;case 2:return f.toString().substr(-2)}break;case"M":case"L":if(1===l)return n.getMonth()+1;if(2===l)return c(n.getMonth()+1,2);case"E":case"c":var g;if(3===l?g="abbreviated":4===l?g="wide":5===l&&(g="narrow"),g){var m,y=s["M"===a||"L"===a?"months":"days"];if("M"===a||"E"===a?(m=y.format[g])||(m=y["stand-alone"][g]):(m=y["stand-alone"][g])||(m=y.format[g]),d=m["M"===a||"L"===a?n.getMonth():n.getDay()])return d}break;case"d":d=n.getDate();return 2===l?c(d,2):d;case"z":case"v":var v=n.getTimezoneOffset();if(0===v)return o.gmtZeroFormat||o.gmtFormat.replace("{0}","");var b=o.gmtFormat,_=o.hourFormat.split(";",2),w=v<0?_[0]:_[1],P=Math.abs(v),A=(u=Math.floor(P/60),P%60);return w=(w=(w=(w=w.replace("HH",c(u,2))).replace("H",u)).replace("mm",c(A,2))).replace("m",A),b.replace("{0}",w)}return""},h=e.match(/(^|''|[^'])+/g),p="",f=0;f<h.length;f++){var g=h[f];p+=f%2==0?g.replace(/([a-zA-z])\1*/g,d):g}return p.replace("''","'")}},rn=(0,i.Z)(tn.prototype,"data",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tn);const on=new sn;var an;const ln=null!==(an=window.CLDR)&&void 0!==an?an:on;var un=r(902049);class cn{static calculateFriendlyTemporalValues(){let{duration:e,inPoint:t,temporalFraction:r=cn.TEMPORAL_FRACTION_DEFAULT}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{trimStart:null!=t?t/r:null,trimEnd:null!=e?(t+e)/r:null}}}cn.TEMPORAL_FRACTION_DEFAULT=1e8;const dn=!n.Z.is_enabled("force_non_atomic_develop_settings");class hn extends ar{setAttributes(e){return super.setAttributes(e),null!=e.author&&(e.author.base=e.base,this.author=new jr(e.author)),this}isAuthoredBy(e){return null!=e&&this.attributes.author?.id===e.id}getBody(){return this.attributes.payload?.body||""}removeP(){return this.requestP("DELETE",this.href)}}var pn=r(982201);class fn extends en{constructor(e,t){var r;super(e),null==t?.limit&&(n.Z.is_enabled("override_oz_limit_5")?t=pn.extend(t||{},{limit:5}):n.Z.is_enabled("override_oz_limit_500")?t=pn.extend(t||{},{limit:500}):100!==N.Z.defaultPageSize&&(t=pn.extend(t||{},{limit:N.Z.defaultPageSize}))),this.pageSize=null!==(r=t?.limit)&&void 0!==r?r:100,this.options=t,this.reset()}setCacheSource(e){this.cacheSource=e}reset(){return this._dirty?(super.reset(),n.Z.is_enabled("custom_sort_dialog")&&(this.customSortPropPath=null),this.fetchUrl=this.href,null!=this.options&&(this.fetchUrl+="?"+pn.param(this.options)),this):this}_disposeModels(){this._models.splice(0,this._models.length)}numLoaded(){return this.length}_parse(e){return e.resources}fetchP(){if(null==this.fetchUrl)return pn.Deferred().reject().promise();if(this.fetching)return this.fetching;return(this.fetching=this.requestP("GET",this.fetchUrl)).always((()=>{this.fetching=void 0})).fail(((e,t,r)=>{null!=this.modelName?this.reportOzFailure(`fetchP${this.modelName}Failure`,e,t,r):this.reportOzFailure("fetchPFailure",e,t,r),this.fetchUrl=void 0,this._dirty=!0})).done((e=>{const{length:t}=this,r=this._parse(e);for(const t of r){var i;t.base=e.base,i=new this.model(t,this),this._add(i)}if(this.page++,0===r.length)this.fetchUrl=void 0;else{const t=e.links?.[this.nextPageLink||"next"]?.href,r=new Se(e.base);this.fetchUrl=r.fullHref(t)}null==this.fetchUrl&&(this.finished=!0,this.totalCount=this._models.length)}))}createP(e,t,r,i){if(null!=t.payload&&"Catalog"!==this.modelName){var n,s,o,a;const e=(new Date).toISOString();null!==(s=(n=t.payload).userCreated)&&void 0!==s||(n.userCreated=e),null!==(a=(o=t.payload).userUpdated)&&void 0!==a||(o.userUpdated=e)}return this.requestP("PUT",e,JSON.stringify(t),i).then(((e,t,i)=>{const n=null!=r?r:i.getResponseHeader("Location");return this._addCreatedP(n)})).fail(((e,t,r)=>{null!=this.modelName?this.reportOzFailure(`create${this.modelName}Failure`,e,t,r):this.reportOzFailure("createOzResourceFailure",e,t,r)}))}async createJP(e,t,r,i){return await this.createP(e,t,r,i)}_addCreatedP(e){return this.requestP("GET",e).then((e=>{const t=new this.model(e,this);return this._add(t,!0),null!=this.totalCount&&this.totalCount++,t}))}deleteP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=this.index(e);let{href:i}=this.at(r);return null!=t&&(i+="?"+pn.param(t)),this.requestP("DELETE",i).done((()=>{this.at(r)?.id===e&&this._delete(r)})).fail(((e,t,r)=>{null!=this.modelName?this.reportOzFailure(`delete${this.modelName}Failure`,e,t,r):this.reportOzFailure("deleteOzResourceFailure",e,t,r)}))}async deleteJP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return await this.deleteP(e,t)}optimisticDeleteP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=this.index(e),{href:i}=this.at(r);this._delete(r);const n=()=>this.requestP("DELETE",i).fail(((e,t,r)=>{null!=this.modelName?this.reportOzFailure(`delete${this.modelName}Failure`,e,t,r):this.reportOzFailure("deleteOzResourceFailure",e,t,r)}));return null!=t?t.then((()=>n())):n()}_unshift(e){this._models.unshift(e)}_add(e,t){if(this.get(e.id)&&this._delete(this.index(e.id)),this._push(e),this.finished&&null!=this.totalCount)return this.totalCount++}_delete(e){null!=e&&(this._models.splice(e,1),null!=this.totalCount&&this.totalCount--,this._reindex())}firstP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<this._models.length?pn.Deferred().resolve(this.at(e)).promise():1===this.pageSize?this.fetchP().then((()=>e<this._models.length?pn.Deferred().resolve(this.at(e)).promise():pn.Deferred().reject().promise())):this.fetchP().then((()=>this.atP(e)))}getTotalCountHref(){return null}totalCountP(){if(null!=this.totalCount)return pn.Deferred().resolve(this.totalCount).promise();{const e=this.getTotalCountHref();return null!=this.totalCountPromise?this.haveQueuedTotalCount?this.totalCountPromise:this.isDirty()?(this.haveQueuedTotalCount=!0,this.totalCountPromise.then((()=>this.totalCountP()))):this.totalCountPromise:(this.totalCountPromise=null!=e?this.requestP("GET",e).done((e=>this.totalCount=Math.max(this._models.length,parseInt(e.total_count)))).then((()=>this.totalCountP())):this.allP().then((()=>this.totalCount=this._models.length)),this.totalCountPromise.always((()=>{this.totalCountPromise=null})))}}}fn.prototype.model=ar;const gn=function(){class e extends fn{createP(e,t){var r;return r={payload:{body:e}},this.allP().then((()=>super.createP(this.href+"/"+this.createUuid(),r)))}_add(e,t){return t?(this._unshift(e),this._reindex()):super._add(e)}}return e.prototype.model=hn,e.prototype.modelName="Comment",e}.call(void 0);class mn extends ar{setAttributes(e){return super.setAttributes(e),null!=e.author&&(this.author=new jr(e.author)),this}isAuthoredBy(e){return null!=e&&this.attributes.author?.id===e.id}}var yn=r(982201);const vn=function(){class e extends fn{getLikeForCurrentUser(){var e;return null!=(e=N.Z.account)&&this.modelsBindable.find((t=>t.author.id===e.id))}async getLikeForCurrentUserJP(){return null==N.Z.account?null:(await this.allJP(),this.getLikeForCurrentUser())}get likedByCurrentUser(){return null!=this.getLikeForCurrentUser()}async isLikedByCurrentUserJP(){return null!=await this.getLikeForCurrentUserJP()}likeJP(){return this.createJP()}async unlikeJP(){var e;if(null!=(e=await this.getLikeForCurrentUserJP()))return this.deleteJP(e.id)}createP(){return super.createP(this.href+"/"+this.createUuid(),{})}_parse(e){var t,r,i,s,o,a,l,u;if(s=e.resources,n.Z.is_enabled("lots_of_likes"))for(a=0,u=(i=s).length;a<u;a++)for(r=i[a],o=l=0;l<=7;o=++l)(t=yn.extend(!0,{},r)).id+=o.toString(),s.push(t);return s}}return e.prototype.model=mn,e.prototype.modelName="Like",e}.call(void 0),bn=(e,t)=>new Promise(((r,i)=>{let n=500;const s=new Date,o=()=>setTimeout((async()=>{n+=500;try{const i=await async function(){return await e()}();t(i)?r(i):o()}catch(e){new Date-s>3e5?i("timeout"):o()}}),n);o()}));class _n extends ar{_refreshP(){const e=dn?{Prefer:"update-atomic"}:{};return this.requestP("GET",void 0,void 0,{headers:e}).done((e=>this.setAttributes(e))).promise()}uploadedJP(){return this._uploadPromise}uploadJP(e){var t;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null!==(t=this._uploadPromise)&&void 0!==t||(this._uploadPromise=this._uploadJP(e,r)),this._uploadPromise}async _uploadJP(e,t){if(await this.initializedJP(),"uploaded"===this.attributes.file_status)return Promise.resolve();if(await Promise.all(this.attributes.parts.map((t=>{let{href:r,byte_start:i,byte_end:s}=t;return n.Z.is_enabled("force_develop_aux_upload_failure")&&(r+="error"),fetch(r,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:new Uint8Array(e,i,s-i+1)}).then((async e=>{if(!e.ok){const t=await e.text();throw A.Z.track("Error","binary_upload_data","API",{"event.errorType":"auxUpload.Error","event.uploadMethod":"direct_upload","event.url":r,"event.error_desc":t}),new Error("Error uploading aux")}return e}))}))),dn){const e={Prefer:"update-atomic"},r=this.linkFullPath("rels/complete_upload").replace("{device}",pe).replace("{userUpdated}",(new Date).toISOString()),i=this.requestJP("POST",r,void 0,{headers:e});return t&&await bn((()=>this.refreshJP()),(()=>"uploaded"===this.attributes.file_status)),i}return this.requestJP("POST",this.linkFullPath("rels/complete_upload"))}}var wn=r(228291);const Pn=async(e,t)=>{"string"==typeof t&&(t=(new TextEncoder).encode(t));return(e=>Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join(""))(await crypto.subtle.digest("SHA-256",t))};var An,Sn,xn,Cn,On,kn,En,Tn,In,Dn;let Rn=(An=yt.byVal,Sn=class extends tr{constructor(){super(...arguments),(0,C.Z)(this,"href",xn,this)}},xn=(0,i.Z)(Sn.prototype,"href",[An],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sn),jn=(Cn=yt.alias("/rels/rendition_type/thumbnail2x"),On=yt.byOptionalRef(Rn),kn=class extends tr{constructor(){super(...arguments),(0,C.Z)(this,"renditionThumbnail2x",En,this)}},En=(0,i.Z)(kn.prototype,"renditionThumbnail2x",[Cn,On],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kn),Zn=(Tn=yt.byRef(jn),In=class extends sr{constructor(){super(...arguments),(0,C.Z)(this,"links",Dn,this)}},Dn=(0,i.Z)(In.prototype,"links",[Tn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),In);var Nn,Fn,Ln;let Mn=(Nn=class extends ar{constructor(e,t){super(e),(0,C.Z)(this,"pollingForRendition",Fn,this),(0,C.Z)(this,"importedByUser",Ln,this),this.parent=t}setAttributes(e){super.setAttributes(e),null!=e.importedByUser&&(this.importedByUser=new jr(e.importedByUser))}get isAutoVersion(){return!this.isNamedVersion}get isNamedVersion(){return!0===this.attributes.payload.createdManually}get name(){return this.attributes.payload.name}get develop(){return this.attributes.payload.develop}hasExternalDevelopSettings(){return this.hasLink("/rels/xmp/develop")}async getExternalEditSettingsJP(){if(null!=this.externalEditSettings)return this.externalEditSettings;const e=await ye.prototype.requestJP("GET",this.linkHref("/rels/xmp/develop"),null,{contentType:"",parseAsText:!0});return this.externalEditSettings=e[0]}async getDevelopSettingsJP(){return this.hasExternalDevelopSettings()?await this.getExternalEditSettingsJP():this.attributes.payload.develop.xmpCameraRaw}async renameJP(e){if(0===e?.length&&(e=null),e!==this.name)return await this.updateAttributesP("renameVersion",{payload:{name:e}})}async uploadExternalizedSettingsJP(e){const t=this.linkHref("/rels/xmp_develop_create").replace("{revision_id}",this.attributes.revision_ids[0]);return await ye.prototype.requestJP("PUT",t,e,{contentType:"application/rdf+xml"}),await this.refreshP()}getRenditionHref(e,t){return this.hackCacheableLinkHref(`/rels/rendition_type/${e}`)}hackCacheableLinkHref(e){return this.linkHref(e)?.replace("/v2/","/v2c/")}pollForRendition(){let e=0;if(!this.pollingForRendition){this.pollingForRendition=!0;var t=()=>{e++,this.refreshP().done((()=>{this.shouldPollForRendition()&&e<15?setTimeout(t,1e3):this.shouldPollForRendition()||(this.pollingForRendition=!1)})).fail((()=>this.pollingForRendition=!1))};t()}}shouldPollForRendition(){return!this.getRenditionHref("thumbnail2x")}getDevelopPixelMasks(){var e;return null!==(e=this.attributes.payload.develop?.masks)&&void 0!==e?e:{}}async fetchDevelopPixelMasksJP(){const e=this.getDevelopPixelMasks(),t=this.parent.parentAsset;return Object.fromEntries(await Promise.all(Object.entries(e).map((async e=>{let[r,{digest:i}]=e;const n=t.getAuxHref(r),[s]=await this.requestJP("GET",n,null,{responseType:"arraybuffer"});return[i,s]}))))}},Fn=(0,i.Z)(Nn.prototype,"pollingForRendition",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ln=(0,i.Z)(Nn.prototype,"importedByUser",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nn);n.Z.is_enabled("lrw_15233_fix")&&(Mn.prototype.attributeClass=Zn);const Un=Mn;var $n;let zn=($n=class extends fn{constructor(e,t,r){super(t,r),this.parentAsset=e}_add(e,t){return t?(this._models.unshift(e),this._reindex()):super._add(e)}async deleteAllJP(){const e=this.models.map((e=>e.id)),t=[];for(var r of e)t.push(this.optimisticDeleteP(r));await Promise.all(t)}canFilterByCreator(e){return this.filterVersionsCreatedByUser(e).length>0&&this.filterVersionsNotCreatedByUser(e).length>0}_versionIsCreatedByUser(e,t){const r=N.Z.account.id;return t?null==e.importedByUser:r===e.importedByUser?.id}get _filteredOwnerVersions(){return this.modelsBindable.filter((e=>this._versionIsCreatedByUser(e,!0)))}get _filteredUserVersions(){return this.modelsBindable.filter((e=>this._versionIsCreatedByUser(e,!1)))}get _filteredNotOwnerVersions(){return this.modelsBindable.filter((e=>!this._versionIsCreatedByUser(e,!0)))}get _filteredNotUserVersions(){return this.modelsBindable.filter((e=>!this._versionIsCreatedByUser(e,!1)))}filterVersionsCreatedByUser(e){return e?this._filteredOwnerVersions:this._filteredUserVersions}filterVersionsNotCreatedByUser(e){return e?this._filteredNotOwnerVersions:this._filteredNotUserVersions}async _createVersionJP(e,t,r){let i;t.processingModel="lightroom";const n={subtype:"edit",asset:{sha256:this.parentAsset.importSource().sha256},payload:{createdManually:r,develop:t},importedOnDevice:{formFactor:"web"}};r?e.length>0&&(n.payload.name=e):null!=e&&(n.payload.userCreated=n.payload.userUpdated=e);if(null!=t.xmpCameraRaw&&(t.xmpCameraRaw.length>N.Z.XMP_CAMERA_RAW_MAX_LENGTH||null!=t.masks||dn)){i=t.xmpCameraRaw;const e=await Pn(0,i);t.xmpCameraRaw={sha256:e}}if(dn){const e=this.createUuid();if(null!=i){await this.parentAsset.uploadXmpDevelopJP((new TextEncoder).encode(i),t.xmpCameraRaw.sha256,e)}const r={Prefer:"update-atomic"};return this.createJP(`${this.href}/${e}`,n,void 0,{headers:r})}{const e=this.createJP(`${this.href}/${this.createUuid()}`,n);if(null!=i){const t=await e;await t.uploadExternalizedSettingsJP(i)}return e}}createAutoJP(e,t){const r={};return null!=this.parentAsset.getContentType()&&(r["content.mimeType"]=this.parentAsset.getContentType()),r["content.version"]=!0===e.crsHDREditMode?"hdr":"sdr",A.Z.track("Develop","Versions","implicitly-created",r),this._createVersionJP(t,e,!1)}createNamedJP(e,t){return this._createVersionJP(e,t,!0)}async createNamedFromAutoVersionJP(e,t){const r=g.Z.extend({},t.develop);return t.hasExternalDevelopSettings()&&(r.xmpCameraRaw=await t.getDevelopSettingsJP()),delete r.userUpdated,delete r.userCreated,this._createVersionJP(e,r,!0)}},(0,i.Z)($n.prototype,"_filteredOwnerVersions",[wn.Z],Object.getOwnPropertyDescriptor($n.prototype,"_filteredOwnerVersions"),$n.prototype),(0,i.Z)($n.prototype,"_filteredUserVersions",[wn.Z],Object.getOwnPropertyDescriptor($n.prototype,"_filteredUserVersions"),$n.prototype),(0,i.Z)($n.prototype,"_filteredNotOwnerVersions",[wn.Z],Object.getOwnPropertyDescriptor($n.prototype,"_filteredNotOwnerVersions"),$n.prototype),(0,i.Z)($n.prototype,"_filteredNotUserVersions",[wn.Z],Object.getOwnPropertyDescriptor($n.prototype,"_filteredNotUserVersions"),$n.prototype),$n);zn.prototype.model=Un,zn.prototype.modelName="Version";var Hn=r(670825),Jn=r(394454),qn=r(935603),Vn=(0,qn.Z)("activateNextRequestIfPossible"),Bn=(0,qn.Z)("activatePolling"),Wn=(0,qn.Z)("stopPolling"),Gn=(0,qn.Z)("shouldContinuePolling"),Xn=(0,qn.Z)("refreshAndCheck");class Kn{constructor(e){Object.defineProperty(this,Xn,{value:rs}),Object.defineProperty(this,Gn,{value:ts}),Object.defineProperty(this,Wn,{value:es}),Object.defineProperty(this,Bn,{value:Qn}),Object.defineProperty(this,Vn,{value:Yn}),this.pendingRequests=[],this.activeRequests={},this.maxRequests=e}get numActiveRequests(){return Object.keys(this.activeRequests).length}get numPendingRequests(){return this.pendingRequests.length}defaultRenditionsForAsset(e){return e.isVideo()?["thumbnail2x","2048","360p","1080p"]:["thumbnail2x","2048"]}async pollForValidRenditions(e,t,r){null==r&&(r=this.defaultRenditionsForAsset(e));let i=this.activeRequests[e.id];if(null!=i&&r.every((e=>i.renditions.includes(e))))i.requestCount++,i.continueCallbacks.push(t),await i.deferred.promise;else{const n=new un.Z;i={id:e.id,asset:e,requestCount:1,deferred:n,continueCallbacks:[t],renditions:r}}this.pendingRequests.push(i),(0,Jn.Z)(this,Vn)[Vn](),await i.deferred.promise}}function Yn(){if(!(this.numActiveRequests<this.maxRequests))return;if(this.numPendingRequests<=0)return;const e=this.pendingRequests.shift();(0,Jn.Z)(this,Bn)[Bn](e)}function Qn(e){e.totalWaitTime=0,e.pollingPeriod=5e3,e.maximumWaitTime=25e5,this.activeRequests[e.id]=e,(0,Jn.Z)(this,Xn)[Xn](e)}function es(e,t){delete this.activeRequests[e.id],t?e.deferred.resolve():e.deferred.reject(),(0,Jn.Z)(this,Vn)[Vn]()}function ts(e){if(!(e.continueCallbacks?.length>0))return!1;for(const t of e.continueCallbacks)if(t())return!0;return!1}function rs(e){if(!(0,Jn.Z)(this,Gn)[Gn](e))return void(0,Jn.Z)(this,Wn)[Wn](e,!1);const{asset:t,renditions:r}=e;t.hasValidRenditions(r)?(A.Z.report("renditionsGenerated",{loadTimeMs:e.totalWaitTime,webSource:t.wasImportedByWeb()}),(0,Jn.Z)(this,Wn)[Wn](e,!0)):(e.totalWaitTime+=e.pollingPeriod,e.totalWaitTime>e.maximumWaitTime?(A.Z.reportFailure("renditionsNotGenerated",{webSource:t.wasImportedByWeb()}),(0,Jn.Z)(this,Wn)[Wn](e,!1)):(setTimeout((()=>{t.refreshP().done((()=>(0,Jn.Z)(this,Xn)[Xn](e))).fail((()=>(0,Jn.Z)(this,Wn)[Wn](e,!1)))}),e.pollingPeriod),e.pollingPeriod>=6e4||(e.pollingPeriod+=5e3)))}const is=(0,Hn.Z)("general:develop_save_sequence"),ns=new Kn(10);class ss{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;this.asset=e,this.payload={develop:t,userUpdated:i},this.masks=r,this.externalEditSettings=null}setExternalSettings(e){this.externalEditSettings=e}}class os{constructor(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.saveDevelopInfo=new ss(...t)}saveJP(e){return new Promise((async(t,r)=>{const i=new Promise((e=>{this.saveDevelopInfo.resolveRenditionsPromise=e})).finally((()=>e?.())),s=Object.assign(this.saveDevelopInfo,{startTime:new Date,resolve:t,reject:r,renditionsDonePromise:i,saveSequence:dn?[this._configureDevelopJP,this._externalizeDevelopSettingsJP,this._prepareAuxJP,...n.Z.is_enabled("atomic_settings_confirm_upload_steps")?[this._uploadAuxJP,this._uploadEditSettingsJP]:[[this._uploadAuxJP,this._uploadEditSettingsJP]],this._createNewAssetRevisionJP,this._pollForUpdatedRenditionsJP]:[this._configureDevelopJP,this._externalizeDevelopSettingsJP,this._createNewAssetRevisionJP,this._uploadAuxJP,this._uploadEditSettingsJP,this._pollForUpdatedRenditionsJP]});try{window.onbeforeunload=()=>(0,P.zt)("$$$/js/viewer/save/save_in_progress=Save in progress"),n.Z.is_enabled("debug")&&is("Save sequence started.");for(const e of s.saveSequence)Array.isArray(e)?await Promise.all(e.map((e=>e.call(this,s)))):await e.call(this,s);t()}catch(e){console.error(e),r(),A.Z.reportFailure("setDevelopJPFailure")}finally{window.onbeforeunload=null,n.Z.is_enabled("debug")&&is("Save sequence completed.")}}))}_configureDevelopJP(e){const{payload:{develop:t},masks:r,asset:i}=e;return new Promise(((s,o)=>{let a=Object.keys(r).length>0||dn;if(n.Z.is_enabled("force_partial_externalize_edit_settings")){if(!window.confirm("Create a partial external edit (to test this sync state)? Check your debug features if this is unexpected"))return o();a=!0}i.isVideo()||(a||t.xmpCameraRaw.length>N.Z.XMP_CAMERA_RAW_MAX_LENGTH)&&(n.Z.is_enabled("debug")&&console.log("Making inline edit settings external. Edit settings size in bytes: "+t.xmpCameraRaw.length),e.setExternalSettings(t.xmpCameraRaw)),s()}))}async _prepareAuxJP(e){let{asset:t,payload:r,masks:i}=e;const n=Object.fromEntries(await Promise.all(Object.entries(i).filter((e=>{let[,t]=e;return t instanceof ArrayBuffer})).map((async e=>{let[t,r]=e;return[t,await Pn(0,r)]})))),s=new Set(Object.keys(i));if(r.aux=void 0,0===s.size)r.develop.masks=null;else{r.develop.masks={};for(const[e,{digest:i}]of Object.entries(t.getDevelopPixelMasks()))s.has(i)||(r.develop.masks[e]=null);for(const e of s){let s,l={type:"mask",digest:e};const u=i[e],c=n[e];var o,a;if(u&&c)l={...l,sha256:c,fileSize:u.byteLength},s=t.findAuxId(l),null!==(o=s)&&void 0!==o||(s=t.generateAuxId()),null!==(a=r.aux)&&void 0!==a||(r.aux={}),r.aux[s]=l;else s=t.findAuxId(l);if(!s)throw new Error("Need aux id");r.develop.masks[s]={digest:e}}}}_externalizeDevelopSettingsJP(e){let{payload:{develop:t},externalEditSettings:r}=e;return new Promise((async(e,i)=>{try{null!=r&&(t.xmpCameraRaw={},t.xmpCameraRaw.sha256=await Pn(0,r)),e()}catch(e){console.error(e),A.Z.reportFailure("editSetDevelopDigestGenFailure"),i()}}))}async _createNewAssetRevisionJP(e){let{asset:t,payload:r,masks:i,externalEditSettings:n,renditionsDonePromise:s}=e;if(t.isVideo()){const e=null==n,i=()=>({payload:r});try{await t.createChildRevisionJP("setDevelopSettings",i,e)}catch(e){console.error(e),A.Z.reportFailure("editSetDevelopRevisionFailure")}}else{let e;if(dn)e=e=>{if(!e)return{payload:r}};else{const n=Object.fromEntries(await Promise.all(Object.entries(i).filter((e=>{let[,t]=e;return t instanceof ArrayBuffer})).map((async e=>{let[t,r]=e;return[t,await Pn(0,r)]}))));e=e=>{if(e)return;const s=new Set(Object.keys(i));if(r.aux=void 0,0===s.size)r.develop.masks=null;else{r.develop.masks={};for(const[e,{digest:i}]of Object.entries(t.getDevelopPixelMasks()))s.has(i)||(r.develop.masks[e]=null);for(const e of s){let s,l={type:"mask",digest:e};const u=i[e],c=n[e];var o,a;if(u&&c)l={...l,sha256:c,fileSize:u.byteLength},s=t.findAuxId(l),null!==(o=s)&&void 0!==o||(s=t.generateAuxId()),null!==(a=r.aux)&&void 0!==a||(r.aux={}),r.aux[s]=l;else s=t.findAuxId(l);if(!s)throw new Error("Need aux id");r.develop.masks[s]={digest:e}}}return{payload:r}}}const o=t.selectedVersionUserUpdated;null!=t.selectedVersion&&(t.selectedVersionUserUpdated=r.develop.userUpdated);const a=dn||null==n;try{await t.createChildRevisionJP("setDevelopSettings",e,a,s)}catch(e){throw console.error(e),t.selectedVersionUserUpdated=o,A.Z.reportFailure("editSetDevelopRevisionFailure"),e}}}async _uploadAuxJP(e){let{asset:t,payload:{aux:r},masks:i}=e;if(r){if(dn){const e=[];await Promise.all(Object.entries(r).map((r=>{let[n,{digest:s,sha256:o}]=r;const a=i[s];if(a instanceof ArrayBuffer)return e.push(o),t.uploadAuxJP(a,o)})));const s=So.pollAssetUntilCheckJP(So,t.linkHref("self"),(t=>e.every((e=>t.hasTempAux(e)||null!=t.findAuxId({sha256:e})))));if(n.Z.is_enabled("atomic_settings_confirm_upload_steps")){if(await s,confirm("Aux data has been uploaded. Cancel to leave aux data in a temporary state."))return s;throw new Error("User cancelled after aux upload")}return s}{const e=[];return await Promise.all(Object.entries(r).map((r=>{let[n,{digest:s,sha256:o}]=r;const a=i[s];if(a instanceof ArrayBuffer)return e.push(n),t.uploadAuxJP(a,o)}))),So.pollAssetUntilCheckJP(So,t.linkHref("self"),(t=>e.every((e=>t.hasLink(`/rels/aux/${e}`)))))}}}async _uploadEditSettingsJP(e){let{asset:t,externalEditSettings:r,payload:i}=e;try{if(null!=r&&!n.Z.is_enabled("force_partial_externalize_edit_settings")){const{develop:{xmpCameraRaw:{sha256:e}}}=i;if(dn){await t.uploadXmpDevelopJP((new TextEncoder).encode(r),e);const i=So.pollAssetUntilCheckJP(So,t.linkHref("self"),(t=>t.hasTempXmpDevelop(e)));if(n.Z.is_enabled("atomic_settings_confirm_upload_steps")){if(await i,confirm("Edit settings have been uploaded. Cancel to leave XMP in a temporary state."))return i;throw new Error("User cancelled after XMP upload")}return i}await t.uploadExternalizedSettingsJP(r,e)}}catch(e){throw console.error(e),A.Z.reportFailure("editSetDevelopUploadSettingsFailure"),e}}_pollForUpdatedRenditionsJP(e){let{asset:t,startTime:r,resolveRenditionsPromise:i}=e;return new Promise((async(e,n)=>{const s=new Date;A.Z.report("editUpdateAsset",{loadTimeMs:s-r});try{const r=ns.pollForValidRenditions(t,(()=>!0));e(),await r,i();const n=new Date;A.Z.report("editGenerateRenditions",{loadTimeMs:n-s})}catch(e){console.error(e),A.Z.reportFailure("editRenditionGenerationFailure")}}))}}const as={_seenKeywords:{},registerKeywords(e){Object.assign(this._seenKeywords,e.getKeywords())},getAllKeywords(){return Object.keys(this._seenKeywords)}};var ls=r(912601),us=r.n(ls),cs=r(470864),ds=r.n(cs),hs=r(638695),ps=r.n(hs),fs=r(16135),gs=r.n(fs),ms=r(512170),ys=r.n(ms),vs=r(178921),bs=r.n(vs),_s=r(36253),ws={};ws.styleTagTransform=bs(),ws.setAttributes=gs(),ws.insert=ps().bind(null,"head"),ws.domAPI=ds(),ws.insertStyleElement=ys();us()(_s.Z,ws);const Ps=_s.Z&&_s.Z.locals?_s.Z.locals:void 0;new class{get width(){return null==this.scrollBarWidth&&this.calculateScrollBarWidth(),this.scrollBarWidth}calculateScrollBarWidth(){const e=window.document.createElement("div");window.document.body.appendChild(e),e.className=Ps.test_outer;const t=window.document.createElement("div");e.appendChild(t);const r=e.offsetWidth-t.offsetWidth;this.scrollBarWidth=r||0,n.Z.is_enabled("debug_verbose")&&console.log(`ScrollBarInfo.width calculated as ${this.scrollBarWidth}`),e.removeChild(t),window.document.body.removeChild(e)}};var As,Ss,xs=r(670402);({DevelopResources:As,PageResources:Ss}=window);const Cs=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11]));var Os;let ks=(Os=class{get isSupported(){return!!n.Z.is_enabled("develop_force_enable")||!n.Z.is_enabled("develop_force_disable")&&(!Z.Z.edge&&!Z.Z.mobile&&!Z.Z.win32&&null!=window.WebAssembly&&null!=document.createElement("canvas").getContext(n.Z.is_enabled("develop_hdr")?"webgl2":"webgl"))}get version(){return As.VERSION}loadJP(){const e=new Date;if(null!=this.loading)return this.loading;{const{version:t}=this;return A.Z.report("editBridgeInitializing",{version:t}),this.loading=new Promise((async(r,i)=>{if(!this.isSupported)return i();const{ic_web_js:s,app_manifest:o}=As.PATHS,a=await(async(e,t)=>{let r;if(n.Z.is_enabled("develop_force_legacy"))r="legacy";else{const e=await Promise.all([(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),Cs()]);r=e.every(Boolean)?"modern":"legacy"}const i=[];i.push(`self.type = '${r}'`),i.push(`self.origin = '${window.location.origin}'`),null!=t&&i.push(`self.appManifest = '${t}'`),i.push(`importScripts('${e}')`);const s=new Blob([i.join(";")],{type:"text/javascript"}),o=URL.createObjectURL(s);return new Worker(o)})(s,o);let l;try{l=await(u=a,d=new Promise(((e,t)=>{n.Z.is_enabled("force_edit_bridge_failure")&&t();const r={};let i=0;const s=e=>function(){for(var t,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return"function"==typeof s[s.length-1]?r[i]=s.pop():d=new Promise((e=>r[i]=e)),u.postMessage({id:i,method:e,params:s}),i++,null!==(t=d)&&void 0!==t?t:o},o={getFunctions:s()};u.addEventListener("message",(e=>{const{data:t}=e,i=r[t.id];null!=i&&(i.call(o,t.result),delete r[t.id])})),u.addEventListener("error",t),o.getFunctions((t=>{for(let e=0;e<t.length;e++){const r=t[e];o[r]=s(e)}e(o,c)}))})),n.Z.is_enabled("develop_simulate_slow_load")&&(d=d.then((e=>new Promise((t=>setTimeout((()=>t(e,c)),3e4)))))),d)}catch(e){return A.Z.reportFailure("editBridgeFailed",{version:t}),i(e)}var u,c,d;await l.initialize("0".repeat(32),!1),"en-US"!==P.Z.locale&&await l.setLocale(P.Z.locale),A.Z.report("editBridgeInitialized",{version:t,loadTimeMs:new Date-e}),r(this.bridge=l)}))}}},(0,i.Z)(Os.prototype,"isSupported",[xs.Z],Object.getOwnPropertyDescriptor(Os.prototype,"isSupported"),Os.prototype),Os);new ks;var Es,Ts,Is;(!Z.Z.safari||Z.Z.safari>5)&&window.File&&(window.FileReader&&(Es=null!=(Ts=window.crypto)?Ts:window.msCrypto)&&(null!=(Is=Es.subtle)?Is:Es.webkitSubtle)||window.Worker)&&window.XMLHttpRequest&&(new XMLHttpRequest).withCredentials;var Ds,Rs,js,Zs,Ns,Fs,Ls,Ms,Us,$s,zs,Hs,Js,qs,Vs,Bs,Ws,Gs,Xs,Ks,Ys,Qs,eo,to,ro,io;let no=(Ds=yt.byVal,Rs=yt.byVal,js=class extends tr{constructor(){super(...arguments),(0,C.Z)(this,"croppedWidth",Zs,this),(0,C.Z)(this,"croppedHeight",Ns,this)}},Zs=(0,i.Z)(js.prototype,"croppedWidth",[Ds],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ns=(0,i.Z)(js.prototype,"croppedHeight",[Rs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),js),so=(Fs=yt.byVal,Ls=yt.byVal,Ms=class extends tr{constructor(){super(...arguments),(0,C.Z)(this,"originalWidth",Us,this),(0,C.Z)(this,"originalHeight",$s,this)}},Us=(0,i.Z)(Ms.prototype,"originalWidth",[Fs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$s=(0,i.Z)(Ms.prototype,"originalHeight",[Ls],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ms),oo=(zs=yt.byVal,Hs=yt.byOptionalRef(no),Js=yt.byOptionalRef(so),qs=class extends tr{constructor(){super(...arguments),(0,C.Z)(this,"captureDate",Vs,this),(0,C.Z)(this,"develop",Bs,this),(0,C.Z)(this,"importSource",Ws,this)}},Vs=(0,i.Z)(qs.prototype,"captureDate",[zs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bs=(0,i.Z)(qs.prototype,"develop",[Hs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ws=(0,i.Z)(qs.prototype,"importSource",[Js],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qs),ao=(Gs=yt.alias("/rels/rendition_type/2048"),Xs=yt.byVal,Ks=class extends tr{constructor(){super(...arguments),(0,C.Z)(this,"rendition2048",Ys,this)}},Ys=(0,i.Z)(Ks.prototype,"rendition2048",[Gs,Xs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ks),lo=(Qs=yt.byRef(oo),eo=yt.byRef(ao),to=class extends sr{constructor(){super(...arguments),(0,C.Z)(this,"payload",ro,this),(0,C.Z)(this,"links",io,this)}},ro=(0,i.Z)(to.prototype,"payload",[Qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),io=(0,i.Z)(to.prototype,"links",[eo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),to);var uo,co,ho,po,fo,go,mo,yo,vo,bo=r(982201);const _o="mask",wo=new Kn(10),Po=["score","balancing","content","dof","emphasis","harmony","lighting","repetition","rot","symmetry","vivid"];let Ao=(uo=class extends ar{constructor(){super(...arguments),(0,C.Z)(this,"importedByUser",co,this),(0,C.Z)(this,"_selectedVersion",ho,this),(0,C.Z)(this,"generatingRenditionsCount",po,this),(0,C.Z)(this,"pollingRenditionsCount",fo,this),(0,C.Z)(this,"revising",go,this),(0,C.Z)(this,"saving",mo,this),(0,C.Z)(this,"comments",yo,this),(0,C.Z)(this,"likes",vo,this)}setAttributes(e){var t,r,i,n;super.setAttributes(e),null!==(t=this.namedVersions)&&void 0!==t||(this.namedVersions=new zn(this,`${this.linkHref("self")}/versions`,{created_as:"manual",embed:"user"})),null!==(r=this.autoVersions)&&void 0!==r||(this.autoVersions=new zn(this,`${this.linkHref("self")}/versions`,{created_as:"auto",embed:"user"})),null!==(i=this.auxParts)&&void 0!==i||(this.auxParts=new Map),null!==(n=this.xmpDevelopParts)&&void 0!==n||(this.xmpDevelopParts=new Map),null!=e.importedByUser?this.importedByUser=new jr(e.importedByUser):this.importedByUser=null,as.registerKeywords(this)}payload(){return this.attributes.payload}xmp(){return this.attributes.payload.xmp}get develop(){return this.payload().develop}importSource(){return this.attributes.payload.importSource}purgeDate(){return this.attributes.payload.purgeDate}personName(){return this.attributes.payload.name}async loadComments(e){null==this.comments&&(this.comments=new gn(this.getCommentsHref(e))),await this.comments.allJP()}async loadLikes(e){null==this.likes&&(this.likes=new vn(this.getLikesHref(e))),await this.likes.allJP()}async addComments(e,t){null==this.comments&&(this.comments=new gn(this.getCommentsHref(t))),await this.comments.createP(e,t.id)}async deleteComments(e){await this.comments.deleteP(e.id)}restoreInProgress(){return this.attributes?.restore_in_progress}purgeRemainingDays(){const e=(new Date).getTime(),t=Date.parse(this.purgeDate())-e;return Math.floor(t/864e5)}iacDeleteRemainingHours(){const e=(new Date).getTime()-this.getOzCreatedDate();let t=Math.max(e,0);return t=48-Math.floor(t/36e5),t}faceData(){return this.attributes.payload.xmp?.["mwg-rs"]?.Regions?.RegionList}getPersonIdsDetected(){if(null==this.faceData())return null;const e=[],t=this.faceData();for(const r in t){const i=t[r].Extensions["adobe-fi"].People;if(i)for(const t of Object.keys(i))e.push(t)}return e}getPersonRecognitionAppName(){if(null==this.faceData())return null;const e=this.faceData();for(const t in e){return e[t].Extensions["adobe-fi"].Application}}getPersonRecognitionAppVersion(){if(null==this.faceData())return null;const e=this.faceData();for(const t in e){return e[t].Extensions["adobe-fi"].Version}}debugGetKpTags(){const e=[];for(const t of this.getKeywordsArray())0===t.indexOf("kp_")&&e.push(t);return e}isImportedBy(e){return this.importSource()?.importedBy===e.id}hasImportDevice(){return null!=this.importSource()?.importedOnDevice}getImportDevice(){var e;return null!==(e=this.importSource()?.importedOnDevice)&&void 0!==e?e:""}getFileSize(){var e;return null!==(e=this.importSource()?.fileSize)&&void 0!==e?e:0}getFileSizeInMB(){if(null!=this.importSource()?.fileSize){const e=this.importSource().fileSize;return Math.round(e/1048576)}}getContentType(){return this.importSource()?.contentType}hasKeyword(e){return!0===this.getKeywords()[e]}getKeywords(){return this.xmp()?.dc?.subject||{}}getKeywordsArray(){const e=this.getKeywords(),t=[];for(const r in e){e[r]&&t.push(r)}return t.sort(),t}getCaptureDate(){const{captureDate:e}=this.payload();if(e===ge||null===e)return null;{const t=e.slice(0,19);return new Date(Date.parse(t))}}getImportDate(){const e=this.importSource()?.importTimestamp;return e===ge?null:new Date(Date.parse(e))}getFormattedCaptureDate(){const e=this.getCaptureDate();return null!=e?ln.formatDate(e,"long"):(0,P.zt)("$$$/js/oz_resource/unknown_date=Date unknown")}getFormattedImportDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long";const t=this.getImportDate();return null!=t?ln.formatDate(t,e):(0,P.zt)("$$$/js/oz_resource/unknown_date=Date unknown")}getFileName(){return n.Z.is_enabled("debug_empty_filenames")?"":this.importSource()?.fileName||this.payload()?.FileName||""}getFileExtension(){const e=this.getFileName(),t=e.lastIndexOf(".");if(-1!==t){let r;return r=e.substr(t+1).toLowerCase()}return""}getAspectRatio(){const e=this.getCroppedDimensions();return e[0]/e[1]}getDownload2048Href(){return this.getHackRenditionDownloadHref("2048",!0)}getDownload2048FileSizeP(){if(null!=this.downloadFileSizePromise)return this.downloadFileSizePromise;const e=this.getRenditionHref("2048",!0);return null!=e?this.downloadFileSizePromise=this.requestP("HEAD",e,"",{contentType:""}).then(((e,t,r)=>{const i=r.getResponseHeader("Content-Length");return this.downloadFileSize=Math.max(0,i)})):bo.Deferred().reject()}getHackRenditionDownloadHref(e,t){return this.linkHref(`/rels/rendition_type/${e}`)}getRenditionHref(e,t){return this.hackCacheableLinkHref(`/rels/rendition_type/${e}`)}getBestRenditionTypeForSize(e,t){let r,i,s,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(n.Z.is_enabled("pixel_density_multiplier")||o)&&(e*=vr.pixelDensity,t*=vr.pixelDensity);const a=Math.max(null!=e?e:0,null!=t?t:0);for(s of(r=a>2048?["panorama","2048","1280"]:a>1280?["2048","1280"]:a>640?["1280","2048"]:a>320?["640"]:["thumbnail2x"],r))if(this.hasValidRendition(s)){i=s;break}if(null!=i)return i;for(s of r)if(this.hasRendition(s)){i=s;break}return i||"thumbnail2x"}getLargestAvailableRendition(){const e=["panorama","2048","1280","640","thumbnail2x"];for(const t of e)if(this.hasRendition(t))return t;return null}getBestRenditionHrefForSize(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.getBestRenditionTypeForSize(e,t,r);return this.getRenditionHref(i)}hackCacheableLinkHref(e){return N.Z.haveNginxProxy?this.linkHref(e)?.replace("/v2/","/v2c/"):this.linkHref(e)}hasMaster(){return null!=this.attributes.links["/rels/master"]}hasProxy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2560";return null!=this.attributes.links[`/rels/proxy_type/${e}`]}hasTempXmpDevelop(e){const t=this.attributes.links[`/rels/temp/xmp/develop/${e}`];return!0===t?.exists}hasTempAux(e){const t=this.attributes.links[`/rels/temp/aux/${e}`];return!0===t?.exists}_getUnsyncedTempLinkKeys(){var e;const t=new Date(null!==(e=this.newestDevelopUserUpdated)&&void 0!==e?e:this.attributes.payload.userUpdated);return Object.keys(this.attributes.links).filter((e=>e.startsWith("/rels/temp/"))).filter((e=>{const r=this.attributes.links[e];return new Date(r.develop.userUpdated)>=t}))}hasAnyTempLink(){return this._getUnsyncedTempLinkKeys()?.length>0}get firstTempLink(){const e=this._getUnsyncedTempLinkKeys();return e?.length>0?this.attributes.links[e[0]]:null}getUnsyncedDataDevice(){const e=this.firstTempLink,t=e?.develop.device;return t?t.split("{")[0].trim():""}getUnsyncedDataDate(){const e=this.firstTempLink,t=e?.develop.userUpdated;return t?ln.formatDateTime(new Date(t),"spectrum-full"):""}hasRenditionGenerateHref(e){return this.hasLink(`/rels/rendition_generate/${e}`)}isProxyOnly(){return!0===this.importSource()?.willNotUploadMaster}getMasterHref(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.hackCacheableLinkHref("/rels/master"):this.linkHref("/rels/master")}getProxyHref(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2560";return this.hackCacheableLinkHref(`/rels/proxy_type/${e}`)}hasExternalDevelopSettings(){return this.hasDevelopSettingsHref()}hasAux(){return null!=this.payload().aux}getAux(){return this.payload().aux}getAuxHref(e){return this.getAux()[e]?this.linkHref(`/rels/aux/${e}`):""}hasAuxHref(e){return this.getAuxHref(e)?.length>0}findAuxId(e){const t=this.getAux();if(t)return Object.keys(t).find((r=>{const i=t[r];return!(null!=e.type&&e.type!==i.type||null!=e.digest&&e.digest!==i.digest||null!=e.sha256&&e.sha256!==i.sha256||null!=e.fileSize&&e.fileSize!==i.fileSize)}))}generateAuxId(){let e;do{e=this.createUuid()}while(null!=this.getAux()?.[e]);return e}getValidAuxIdsByDigest(){const e=this.getAux();return e?Object.entries(e).filter((e=>{let[t]=e;return this.hasAuxHref(t)})).reduce(((e,t)=>{let[r,{digest:i}]=t;return e[i]=r,e}),{}):{}}async uploadAuxJP(e,t){let r=this.auxParts.get(t);if(r)return r.uploadedJP();_n.setAuthHeaders(await Sr.default.getTokenJP(),"LightroomMobileWeb1");const i=this.linkHref("/rels/aux_create/parts").replace("{sha256}",t).replace("{type}","mask").replace("{upload_status}","pending").replace("{file_size}",e.byteLength).replace("{part_size}",5242880).replace("{content_type}","application/octet-stream");return this.auxParts.set(t,r=new _n(i)),r.uploadJP(e).finally((()=>this.auxParts.delete(t)))}async uploadXmpDevelopJP(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this.xmpDevelopParts.get(t);if(i)return i.uploadedJP();_n.setAuthHeaders(await Sr.default.getTokenJP(),"LightroomMobileWeb1");const n=this.linkHref(`/rels/${r?"versions/":""}xmp_develop_create/parts`).replace("{sha256}",t).replace("{version_id}",r).replace("{upload_status}","pending").replace("{file_size}",e.byteLength).replace("{part_size}",5242880).replace("{content_type}",encodeURIComponent("application/rdf+xml"));this.xmpDevelopParts.set(t,i=new _n(n));const s=!!r;return i.uploadJP(e,s).finally((()=>this.xmpDevelopParts.delete(t)))}hasPixelMasks(){return Object.keys(this.getPixelMasks()).length>0}getPixelMasks(){if(!this.hasAux())return{};const e=this.getAux();return Object.keys(e).filter((t=>e[t].type===_o)).reduce(((t,r)=>(t[r]=e[r],t)),{})}getDevelopPixelMasks(){var e;return null!==(e=this.attributes.payload.develop?.masks)&&void 0!==e?e:{}}developHasPixelMasks(){return Object.keys(this.getDevelopPixelMasks()).length>0}getDevelopDevice(){return this.attributes.payload.develop?.device}hasDevelopDevice(){return this.getDevelopDevice()?.length>0}getDevelopedByUserName(){return this.attributes?.developedByUser?.full_name}async fetchDevelopPixelMasksJP(){const e=this.getDevelopPixelMasks();return Object.fromEntries(await Promise.all(Object.entries(e).map((async e=>{let[t,{digest:r}]=e;const i=this.getAuxHref(t),[n]=await this.requestJP("GET",i,null,{responseType:"arraybuffer"});return[r,n]}))))}getDevelopPixelMasksDigests(){const e=this.getDevelopPixelMasks();return Object.values(e).map((e=>{let{digest:t}=e;return t}))}getDevelopPixelMaskIds(){const e=this.getDevelopPixelMasks();return Object.keys(e)}hasDevelopSettingsHref(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.hasValidLink("/rels/xmp/develop"):this.hasLink("/rels/xmp/develop")}getDevelopSettingsHref(){return this.linkHref("/rels/xmp/develop")}canCreateDefaultAutoVersion(){const{develop:e}=this.payload();return null!=e&&""!==e.xmpCameraRaw}async getAutoVersionDevelopSettingsJP(){var e,t;const{develop:r}=this.payload(),i=await this.getDevelopSettingsJP(),n={croppedWidth:null!==(e=r.croppedWidth)&&void 0!==e?e:this.getOriginalDimensions()[0],croppedHeight:null!==(t=r.croppedHeight)&&void 0!==t?t:this.getOriginalDimensions()[1]};return i?.length>0&&(n.xmpCameraRaw=i),null!=r.userOrientation&&(n.userOrientation=r.userOrientation),null!=r.userUpdated&&(n.userUpdated=r.userUpdated),null!=r.crsVersion&&(n.crsVersion=r.crsVersion),n}hasSyncedAux(){const e=this.getAux(),t=this.getDevelopPixelMasks();let r=!0;for(const i in e){const e=this.hasAuxHref(i);if(null!=t[i]&&!e){r=!1;break}}return r}hasSyncedDevelopSettings(){if(this.isVideo())return!0;return null!=this.getDevelopSettingsSync()||this.hasDevelopSettingsHref(!0)&&this.hasSyncedAux()}getDevelopSettingsSync(){const e=this.payload().develop?.xmpCameraRaw;return e?e.sha256?null!=this.externalEditSettings&&null!=this.externalEditSettingsDigest&&this.externalEditSettingsDigest===e.sha256?this.externalEditSettings:void 0:e:""}async getDevelopSettingsJP(){if(this.isVideo()){const e=this.payload().develop;return null!=e?e:{}}const e=this.getDevelopSettingsSync();if(e)return e;n.Z.is_enabled("debug")&&console.log("Edit settings external. Downloading now...");let t="";const r=this.payload().develop?.xmpCameraRaw?.sha256;if(r){const e=this.attributes.links?.["/rels/xmp/develop"];if(e?.href){try{[t]=await this.requestJP("GET",this.getDevelopSettingsHref(),null,{contentType:"",parseAsText:!0})}catch{throw A.Z.reportFailure("editSettingsDownloadFailure"),new Error}if(e.sha256===r)return this.externalEditSettingsDigest=r,this.externalEditSettings=t,t}}return t}async uploadExternalizedSettingsJP(e,t){const r=this.getLatestRevisionHref()+"/xmp/develop";await this.requestJP("PUT",r,e,{contentType:"application/rdf+xml",headers:{"X-Generate-Renditions":"all"}}),this.externalEditSettings=e,this.externalEditSettingsDigest=t}getOrientation(){return this.payload().develop?.userOrientation}hasVideoDuration(){return this.payload().video?.duration&&this.payload().video?.frameRate}getVideoFrameRate(){const e=this.payload().video?.frameRate;if(null!=e&&e instanceof Array&&2===e.length)try{return 1*e[0]/e[1]}catch(e){}return null}getVideoPlaybackRate(){const e=this.getVideoFrameRate();return e>60?Math.min(30/e,1):1}getVideoDuration(){let e;const t=this.payload(),r=t.video?.duration;if(null!=r&&r instanceof Array&&2===r.length)try{e=r[0]/r[1]}catch(e){}if(1===t.develop?.version){const{temporal:r}=t.develop;if(null!=r){const{temporalFraction:t=cn.TEMPORAL_FRACTION_DEFAULT}=r;if(null!=r.duration){if(0===e)return null;e=r.duration/t}else null!=r.inPoint&&(e-=r.inPoint/t)}}if(e=Math.max(Math.round(e),1),null!=e){const t=e%60,r=Math.floor(e/60);return t<10?`${r}:0${t}`:`${r}:${t}`}return null}getVideoAspectRatio(){const e=this.payload().video?.displayAspectRatio;return 2!==e?.length?null:e}getVideoTimes(){const{develop:e}=this.payload();return 1===e?.version?cn.calculateFriendlyTemporalValues(e.temporal):{}}getCroppedDimensions(){let e,t;const r=this.payload(),{develop:i}=r;return null!=i&&(t=i.croppedWidth,e=i.croppedHeight),t>0&&e>0||([t,e]=this.getOriginalDimensions()),t>0&&e>0||(t=480,e=320),[t,e]}getOriginalDimensions(){let e,t;const r=this.importSource();if(null!=r&&(t=r.originalWidth,e=r.originalHeight),this.isVideo()&&!this.isVideo2()){const r=this.getVideoAspectRatio();null!=r&&(e>t?r.sort(((e,t)=>e-t)):r.sort(((e,t)=>t-e)),t*=r[0]*e/(r[1]*t))}return[t,e]}hasOriginalDimensions(){const e=this.importSource();return null!=e.originalWidth&&null!=e.originalHeight}getOriginalDimensionsString(){const e=this.getOriginalDimensions();let t=`${Math.round(e[0])} x ${Math.round(e[1])}`;if(this.isVideo()){const e=this.getVideoAspectRatio();null!=e&&(t+=` (${e.join(":")})`)}else t+=` (${this.getOriginalDimensionsInMP()}MP)`;return t}getOriginalDimensionsInMP(){const[e,t]=this.getOriginalDimensions();if(null!=e&&null!=t)return Math.round(e*t/1e6)}getRenditionDimensions(e){const t=this.getCroppedDimensions();if(["thumbnail2x","640","1280","2048","panorama","360p","720p","1080p"].includes(e)){let r,i;return"thumbnail2x"===e?i=r=320:"640"===e?i=r=640:"1280"===e?i=r=1280:"2048"===e?i=r=2048:"panorama"===e?i=r=8192:"360p"===e?r=360:"720p"===e?r=720:"1080p"===e&&(r=1080),this._getScaledDimensions(t,i,r)}return t}getProxyDimensions(){return this._getScaledDimensions(this.getCroppedDimensions(),2560,2560)}_getScaledDimensions(e,t,r){let[i,n]=e;return n>r&&(n=r,i=e[0]*r/e[1]|0),i>t&&(i=t,n=e[1]*t/e[0]|0),[i,n]}getCaption(){return this.xmp()?.dc?.description||""}getFlag(e){const t=null!=e?e:N.Z.account?.id;return null==t?"unflagged":this._getFlag(t)?.flag||"unflagged"}_getFlag(e){return this.attributes.payload.reviews?.[e]}hasFlag(e){return this.getFlag()===e}getRating(e){const t=null!=e?e:N.Z.account?.id;return null==t?0:this._getRating(t)?.rating||0}_getRating(e){return this.attributes.payload.ratings?.[e]}location(){return this.attributes.payload?.location}hasAnyLocationInfo(){return this.hasGPSLocation()||this.getLocationText().length>0||this.getCity().length>0||this.getState().length>0||this.getCountry().length>0}hasGPSLocation(){const e=this.attributes.payload?.location;return null!=e?.latitude&&null!=e.longitude&&0!==e?.latitude&&0!==e.longitude}getGPSLocation(){if(!this.hasGPSLocation())return null;const e=this.attributes.payload.location;return{lat:e.latitude,long:e.longitude}}getLocationText(){var e;return null!==(e=this.xmp()?.iptcCore?.Location)&&void 0!==e?e:""}getCity(){var e,t;return null!==(e=null!==(t=this.xmp()?.photoshop?.City)&&void 0!==t?t:this.location()?.city)&&void 0!==e?e:""}getState(){var e,t;return null!==(e=null!==(t=this.xmp()?.photoshop?.State)&&void 0!==t?t:this.location()?.state)&&void 0!==e?e:""}getCountry(){var e,t;return null!==(e=null!==(t=this.xmp()?.photoshop?.Country)&&void 0!==t?t:this.location()?.country)&&void 0!==e?e:""}_getRenditionLink(e){return this.attributes.links?.[`/rels/rendition_type/${e}`]}_getRenditionLinks(){const e={},t="/rels/rendition_type/";for(const r in this.attributes.links){const i=this.attributes.links[r];r.substr(0,21)===t&&(e[r]=i)}return e}hasRendition(e){return null!=this._getRenditionLink(e)?.href}hasValidRendition(e){const t=this._getRenditionLink(e);return null!=t&&null!=t.href&&!t.invalid}hasValidVideoRendition(){return this.hasValidRendition("720p")||this.hasValidRendition("1080p")}getLargeVideoPlaybackRendition(){return this.isVideo2()?(e=this,Z.Z.win&&"bt2100_hlg"===e?.payload().video?.transferFunction&&n.Z.is_enabled("video_v2_windows_special_rendition")?this.getRenditionHref("1080p709"):this.getRenditionHref("1080p")):this.getRenditionHref("720p");var e}hasAnyRendition(){const e=this._getRenditionLinks();for(const t in e){if(null!=e[t].href)return!0}return!1}hasAnyValidRendition(){const e=this._getRenditionLinks();for(const t in e){const r=e[t];if(null!=r.href&&!r.invalid)return!0}return!1}hasRenditions(e){for(const t of e)if(!this.hasRendition(t))return!1;return!0}hasValidRenditions(e){for(const t of e)if(!this.hasValidRendition(t))return!1;return!0}shouldPollForDefaultRenditions(){const e=wo.defaultRenditionsForAsset(this);return!this.hasValidRenditions(e)&&["rendering","rendering-edits"].includes(this.getMissingStatus())}async pollForDefaultRenditions(e){if(!this.shouldPollForDefaultRenditions())return bo.Deferred().reject().promise();this.pollingRenditionsCount++;try{await wo.pollForValidRenditions(this,e)}catch{}this.pollingRenditionsCount--}getTitle(){return this.xmp()?.dc?.title||""}getCopyright(){return this.xmp()?.dc?.rights||""}getCameraMake(){return this.xmp()?.tiff?.Make||""}getCameraModel(){return this.xmp()?.tiff?.Model||""}getCameraLens(){return this.xmp()?.aux?.Lens||""}getExposureTime(){const e=this.xmp()?.exif?.ExposureTime;if(null!=e)return 1===e[1]?e[0]+" "+(0,P.zt)("$$$/js/oz_resource/time_in_seconds=sec"):e[0]+"/"+e[1]+" "+(0,P.zt)("$$$/js/oz_resource/time_in_seconds=sec")}getFocalRatio(){const e=this.xmp()?.exif?.FNumber;if(null!=e)return"f / "+1*e[0]/e[1]}getIsoSpeedRating(){const e=this.xmp()?.exif?.ISOSpeedRatings;if(null!=e)return`ISO ${e}`}getFocalLength(){const e=this.xmp()?.exif?.FocalLength;if(e?.length>0){return`${(1*e[0]/e[1]).toFixed(1)} mm`}}hasAutoTag(e){return null!=this.getAutoTags()?.[e]}getAutoTags(){return this.attributes.payload?.autoTags?.tags}debugGetExperimentalAutoTags(){return this.attributes.payload?.["X-autoTags-hashtag2"]?.tags}debugGetAutoTagClassifiers(){return this.attributes.payload?.["X-autoTags-classifiers"]?.tags}isValid(){if(this.hasMaster()||this.hasProxy())return!0}wasImportedByWeb(){return this.hasImportDevice()?null!=this.getImportDevice().match(/Lightroom Web/)||null!=this.getImportDevice().match(/Revel Web/):null!=this.importedByUser&&this.importedByUser.id===N.Z.account?.id}getMissingThumbStatus(){return this.getRenditionHref("thumbnail2x")?"":this.getMissingStatus()}getMissingLoupeStatus(){return!this.getRenditionHref("2048")||this.isVideo()&&!this.hasValidVideoRendition()?this.getMissingStatus():""}getMissingStatus(){const e=null!=this.getMasterHref()||null!=this.getProxyHref(),t=this.wasImportedByWeb(),r=this.wasCreatedInLastHour();return this.wasDevelopUpdatedInLastThirtyMins()?"rendering-edits":t&&this.wasCreatedJustNow()?"rendering":e?r?"rendering":"rendering-error":t?"web-upload-failed":r?"syncing":"stuck-syncing"}wasCreatedJustNow(){const e=this.getImportDate();return null!=e&&new Date-e<6e5}get newestDevelopUserUpdated(){if(this.isVideo()){const e=this.develop?.adjustments?.userUpdated,t=this.develop?.temporal?.userUpdated;return null==e?t:null==t||e>t?e:t}return this.develop?.userUpdated}wasCreatedInLastHour(){const e=this.getImportDate();return null!=e&&new Date-e<36e5}wasDevelopUpdatedInLastThirtyMins(){const e=this.newestDevelopUserUpdated;return null!=e&&new Date-new Date(e)<18e5}isVideo(){return"video"===this.attributes.subtype}isVideo2(){var e;return null!==(e=this.hasProxy("1080p"))&&void 0!==e?e:this.hasRendition("1080p")}isPhoto(){return"image"===this.attributes.subtype}isLayoutSegment(){return"layout_segment"===this.attributes.subtype}isDeleted(){return"deleted_image"===this.attributes.subtype||"deleted_video"===this.attributes.subtype}isPerson(){return"person"===this.attributes.subtype}isPlayable(){return this.getRenditionHref("360p")||this.getRenditionHref("720p")}hasEdits(){return null!=this.payload().develop?.xmpCameraRaw}hasUserEdits(){return null!=this.payload().develop?.userUpdated}hasAesthetics(){return null!=this.getAesthetics()}getAesthetics(){return this.attributes.payload?.aesthetics}getBlurScores(){return this.attributes.payload?.blur||this.attributes.payload?.["X-Blur"]}getQuality(){return this.attributes.payload?.quality}hasBestFrameScore(){return null!=this.attributes.bestFrame&&(null!=this.attributes.bestFrame.frame&&null!=this.attributes.bestFrame.face)}getBestFrameScore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e&&["frame","face"].includes(e))return this.getBestFrameScores()[e]||0;{const{frame:e,face:t}=this.getBestFrameScores();return e+t}}getBestFrameScores(){var e;return null!==(e=this.attributes.bestFrame)&&void 0!==e?e:{}}getAestheticScore(){return null==this.attributes.payload?.aesthetics?0:this.attributes.payload?.aesthetics.score}_getGPanoData(){return this.attributes.payload?.xmp?.GPano}hasGPanoInfo(){return null!=this.attributes.payload?.xmp?.GPano}canViewAsPanorama(){let e=!1;if(this.hasGPanoInfo()){const t=this._getGPanoData(),r=1*t.CroppedAreaImageWidthPixels/t.CroppedAreaImageHeightPixels<2;e=!Z.Z.mobile&&(t.UsePanoramaViewer||"equirectangular"===this.getProjectionType())&&!r}return e}getProjectionType(){let e="";return this.hasGPanoInfo()&&(e=this._getGPanoData().ProjectionType),e}getHAOV(){let e=0;if(this.hasGPanoInfo()){const t=this._getGPanoData();e=t.CroppedAreaImageWidthPixels/t.FullPanoWidthPixels*360}return e}getVAOV(){let e=0;if(this.hasGPanoInfo()){const t=this._getGPanoData();e=t.CroppedAreaImageHeightPixels/t.FullPanoHeightPixels*180}return e}isPartialPanorama(){let e=!1;if(this.hasGPanoInfo()){const t=this._getGPanoData();e=t.CroppedAreaImageWidthPixels/t.CroppedAreaImageHeightPixels!=2}return e}getFullPanoDimensions(){const e=[];if(this.hasGPanoInfo()){var t,r;const i=this._getGPanoData(),n=this.getOriginalDimensions();e[0]=null!==(t=i.FullPanoWidthPixels)&&void 0!==t?t:n[0],e[1]=null!==(r=i.FullPanoHeightPixels)&&void 0!==r?r:n[1]}return e}set selectedVersion(e){return this._selectedVersion=e,this._selectedVersionUserUpdated=this.payload().develop?.userUpdated}get selectedVersion(){return null!=this._selectedVersion&&this.payload().develop?.userUpdated===this._selectedVersionUserUpdated?this._selectedVersion:null}get selectedVersionUserUpdated(){return this._selectedVersionUserUpdated}set selectedVersionUserUpdated(e){this._selectedVersionUserUpdated=e}getRenditionPublicHrefP(e){const t={rendition_path:this.linkFullPath(`/rels/rendition_type/${e}`)};return this.requestP("POST","/api/public_rendition_url",JSON.stringify(t)).then((e=>e.href))}importedByOwner(){return null==this.importedByUser}haveImporterDisplayInfo(){return this.importedByUser?.getFullName()?.length>0}getFirstRevisionHref(){return this._getRevisionHref(0)}getLatestRevisionHref(){return this._getRevisionHref(this.attributes.revision_ids.length-1)}_getRevisionHref(e){const{href:t}=this.attributes.links.self,r=`${t}/revisions/${this.attributes.revision_ids[e]}`;return this._linkBase.fullHref(r)}setDevelopJP(e,t,r,i){return new os(this,e,t,i).saveJP(r)}debugToggleHDREditModeJP(){const e=!this.hdrEnabled;return this.safeToJSPromise(this._createChildRevisionP("debugToggleHDRMode",{payload:{develop:{crsHDREditMode:e}}},!0))}get hdrEnabled(){return!0===this.develop?.crsHDREditMode}_doRevisionChangeP(e,t,r,i,s){let o,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return n.Z.is_enabled("debug")&&G._forceFailNextRequest&&(a=2),o=s?{"X-Generate-Renditions":"all"}:{},dn&&(o.Prefer="update-atomic"),this.requestP("PUT",this._getChildRevisionHref(t),JSON.stringify("function"==typeof r?r():r),{headers:o}).then((()=>(this.revisingApplyList.shift(),this.refreshP().then((()=>this.revisingApplyList.map((e=>e())))))),((n,o,l)=>{const u=a<2&&(0===o||o>=500||400===o&&null!=n?.errors?.parent_revision_id);return u?A.Z.report(`${e}Retry`):(this.reportOzFailure(`${e}Failure`,n,o,l),this.revisingApplyList.shift()),this.refreshP().then((()=>u?this._doRevisionChangeP(e,t,r,i,s,a+1):bo.Deferred().reject(!0)),(()=>{this.attributes=i}))}))}createChildRevisionJP(e,t,r,i){const n=bo.extend(!0,{},this.attributes.toJSON()),s=()=>{const e=t(!0);e&&(this.attributes=bo.extend(!0,this.attributes.toJSON(),e))};s();const o=this.revising=(()=>{const i=()=>this.safeToJSPromise(this._doRevisionChangeP(e,this.createUuid(),t,n,r));return null!=this.revising?(this.revisingApplyList.push(s),this.revising.then(i)):(this.revisingApplyList=[s],i())})();i?.then((()=>this.refreshJP()));return(null!=i?i:o).finally((()=>{o===this.revising&&(this.revising=null)})),this.revising}_createChildRevisionP(e,t){var r,i;let n,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;null!==(i=(r=t.payload).userUpdated)&&void 0!==i||(r.userUpdated=(new Date).toISOString());const a=bo.extend(!0,{},this.attributes.toJSON()),l=()=>{this.attributes=bo.extend(!0,this.attributes.toJSON(),t)};l();const u=this.createUuid();return null!=this.revising?(this.revisingApplyList.push(l),n=this.revising.then((()=>this._doRevisionChangeP(e,u,t,a,s)))):(this.revisingApplyList=[l],n=this._doRevisionChangeP(e,u,t,a,s)),this.revising=n,null!=o&&(this.revising=n=n.then((()=>o().then((()=>this.refreshP()))))),this.revising.always((()=>{n===this.revising&&(this.revising=null)}))}_getChildRevisionHref(e){return`${this.getLatestRevisionHref()}/children/${e}`}latestRevision(){return this.attributes.revision_ids[this.attributes.revision_ids.length-1]}isGeneratingRenditions(){return this.generatingRenditionsCount>0}isPollingForRenditions(){return this.pollingRenditionsCount>0}setSaving(e){this.saving&&!e?this.savingDeferred?.resolve():!this.saving&&e&&(this.savingDeferred=new un.Z),this.saving=e}get savingPromise(){return null==this.savingDeferred?Promise.resolve():this.savingDeferred.promise}get isUpdating(){return this.saving||this.revising||this.isGeneratingRenditions()||this.isPollingForRenditions()}generateRenditionsP(e){let t=this.getLatestRevisionHref();if(null!=t){this.generatingRenditionsCount++,t+="/renditions";const r={"X-Generate-Renditions":e};return this.requestP("POST",t,"",{headers:r}).then((t=>wo.pollForValidRenditionsP(this,(()=>!0),e.split(",")))).always((()=>this.generatingRenditionsCount--)).fail(((e,t,r)=>{this.reportOzFailure("generateRenditionsFailure",e,t,r)}))}return bo.Deferred().reject()}},co=(0,i.Z)(uo.prototype,"importedByUser",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ho=(0,i.Z)(uo.prototype,"_selectedVersion",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),po=(0,i.Z)(uo.prototype,"generatingRenditionsCount",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fo=(0,i.Z)(uo.prototype,"pollingRenditionsCount",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),go=(0,i.Z)(uo.prototype,"revising",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mo=(0,i.Z)(uo.prototype,"saving",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yo=(0,i.Z)(uo.prototype,"comments",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vo=(0,i.Z)(uo.prototype,"likes",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),uo);Ao.pollAssetUntilCheckJP=(e,t,r)=>new Promise(((i,n)=>{let s=500;const o=new Date,a=()=>setTimeout((async()=>{s+=500;try{const n=await async function(){const r=new e(t);return await r.initializedP()}();r(n)?i(n):a()}catch(e){new Date-o>3e5?n("timeout"):a()}}),s);a()})),Ao.prototype.attributeClass=lo;const So=Ao;var xo=r(982201);const Co=class{get title(){var e;return null!=(e=this.payload().title)?e:this.payload().name}get description(){return this.payload().description}migrateNameToTitleP(){var e,t;if(null!=(e=this.payload().name))return t={name:null},null==this.payload().title&&(t.title=e),this._createChildRevisionP("migrateLayoutSegmentNameToTitle",{payload:t})}setLayoutSegmentP(e,t){var r;return r={},null!=this.attributes.payload.name&&(r.name=null),e!==this.attributes.payload.title&&(r.title=e),t!==this.attributes.payload.description&&(r.description=t),Object.keys(r).length>0?this._createChildRevisionP("updateLayoutSegment",{payload:r}):xo.Deferred().resolve()}get layoutSegmentHasText(){var e,t;return(null!=(e=this.title)?e.length:void 0)>0||(null!=(t=this.description)?t.length:void 0)>0}};var Oo,ko,Eo,To,Io,Do,Ro=r(982201);const jo=(Oo=(0,nn.Z)(Co),Do=Oo((Eo=class extends So{constructor(){super(...arguments),(0,C.Z)(this,"albumsList",To,this),(0,C.Z)(this,"deletedRestoreState",Io,this)}setCaptionP(e){var t;return this.getCaption()===e||null==e?(t=Ro.Deferred(),null!=e?t.resolve():t.reject(),t.promise()):this._createChildRevisionP("setCaption",{payload:{xmp:{dc:{description:e}}}})}setTitleP(e){var t,r,i,n,s,o;return this.getTitle()===e||null==e?(r=Ro.Deferred(),null!=e?r.resolve():r.reject(),r.promise()):(t=null!=(n=null!=(s=this.attributes.payload)&&null!=(o=s.xmp)?o.dc:void 0)?n:{},(i=Ro.extend(!0,{},t)).title=e,this._createChildRevisionP("setTitle",{payload:{xmp:{dc:i}}}))}async excludeFromCleanupJP(){if(!this.excludedFromCleanup)return await this.createChildRevisionJP("excludeFromCleanup",(()=>({payload:{organize:{excludeFromCleanup:!0}}})))}get excludedFromCleanup(){var e;return!0===(null!=(e=this.payload().organize)?e.excludeFromCleanup:void 0)}_setAutotagFeedbackP(e,t){var r,i,n,s,o,a;if(null==(r=null!=(s=this.attributes.payload)&&null!=(o=s.autoTags)?o.tags:void 0))return Ro.Deferred().reject("no autotags on this asset");for(a=Ro.extend(!0,{},r),"all"===e&&(e=Object.keys(a)),i=0,n=e.length;i<n;i++)a[e[i]]=t;return this._createChildRevisionP("setAutotagFeedback",{payload:{autoTags:{tags:a}}})}acceptAllAutoTagsP(){return this._setAutotagFeedbackP("all",!0)}rejectAllAutoTagsP(){return this._setAutotagFeedbackP("all",!1)}acceptAutoTagP(e){return this._setAutotagFeedbackP([e],!0)}rejectAutoTagP(e){return this._setAutotagFeedbackP([e],!1)}setFlagP(e){var t,r;return t={flag:e,date:(new Date).toISOString()},(r={})[N.Z.account.id]=t,this._createChildRevisionP("setFlag",{payload:{reviews:r}})}async setFlagJP(e){return await this.safeToJSPromise(this.setFlagP(e))}setRatingP(e){var t,r;return t={rating:e,date:(new Date).toISOString()},(r={})[N.Z.account.id]=t,this._createChildRevisionP("setRating",{payload:{ratings:r}})}async setRatingJP(e){return await this.safeToJSPromise(this.setRatingP(e))}addKeywordP(e){var t,r,i,n,s,o,a;for(r=(0,P.zt)("$$$/js/keyword_entry_delimiter=,"),t={payload:{xmp:{dc:{subject:{}}}}},s=0,i=0,a=(o=e.split(r)).length;i<a;i++)(n=(e=o[i]).trim()).length>0&&(s++,t.payload.xmp.dc.subject[n]=!0);return s>0?this._createChildRevisionP("addKeyword",t):Ro.Deferred().resolve().promise()}removeKeywordP(e){var t;return 1===(t=this.getKeywordsArray()).length&&t.indexOf(e)>=0?1===Object.keys(this.xmp().dc).length?this._createChildRevisionP("removeKeyword",{payload:{xmp:{dc:null}}}):this._createChildRevisionP("removeKeyword",{payload:{xmp:{dc:{subject:null}}}}):this._createChildRevisionP("removeKeyword",{payload:{xmp:{dc:{subject:{[`${e}`]:null}}}}})}setDevelopJP(){var e;return N.Z.startAssetEdit(),(e=super.setDevelopJP(...arguments)).then((()=>N.Z.lastAssetEditTime=this.newestDevelopUserUpdated)),e.finally((()=>N.Z.endAssetEdit())),e}optimisticUpdatePayload(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.attributes=Ro.extend(!0,this.attributes.toJSON(),{payload:e}),t)return this.attributes.revision_ids.push(t)}getLikesCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,r,i,s;return n.Z.is_enabled("lots_of_likes")?7*(null!=(t=this._getSpace(null!=e?e.id:void 0))&&null!=(r=t.links["/rels/favorites"])?r.count:void 0):null!=(i=this._getSpace(null!=e?e.id:void 0))&&null!=(s=i.links["/rels/favorites"])?s.count:void 0}isLiked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.getLikesCount(e)>0}isLikedByUser(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.isLiked(e)&&null!=this._getLikeUrl(e)}getLikesHref(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,r;return null!=(t=this._getSpace(null!=e?e.id:void 0))&&null!=(r=t.links["/rels/favorites"])?r.href:void 0}_getLikeUrl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,r;return null!=(t=this._getSpace(null!=e?e.id:void 0))&&null!=(r=t.links["/rels/this_user_favorite"])?r.href:void 0}likeP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.requestP("PUT",`${this.getLikesHref(e)}/${this.createUuid()}`,"{}").fail(((e,t,r)=>this.reportOzFailure("likeAssetFailure",e,t,r)))}unLikeP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t;if(null!=(t=this._getLikeUrl(e)))return this.requestP("DELETE",t,"{}").fail(((e,t,r)=>this.reportOzFailure("unlikeAssetFailure",e,t,r)))}getCommentCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,r;return null!=(t=this._getSpace(null!=e?e.id:void 0))&&null!=(r=t.links["/rels/comments"])?r.count:void 0}hasComments(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.getCommentCount(e)>0}getCommentsHref(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,r;return null!=(t=this._getSpace(null!=e?e.id:void 0))&&null!=(r=t.links["/rels/comments"])?r.href:void 0}setCaptureDateP(e){var t;return this.getCaptureDate()===e?Ro.Deferred().resolve().promise():(t={payload:{captureDate:e.toISOString()}},this._createChildRevisionP("setCaptureDate",t))}_getSpace(e){var t,r,i,n;if(!this.attributes.spaces)return null;if(null!=e){for(t=0,r=(i=this.attributes.spaces).length;t<r;t++)if((n=i[t]).id===e)return n;return null}return this._getFirstSpace()}_getFirstSpace(){var e;return n.Z.is_enabled("debug")&&null!=this.attributes.spaces&&console.warn("Need to remove usage of _getFirstSpace."),null!=(e=this.attributes.spaces)?e[0]:void 0}getCatalogHref(){return`${this._linkBase.basePath}assets/${this.id}`}async copyAuxToSpaceAssetJP(e,t,r){var i,n,s,o;return i=`/v2/spaces/${e}/assets/${t}`,o=this.getDevelopPixelMaskIds(),n=`${i}/revisions/${r}/aux`,s={source_href:this.getCatalogHref(),aux_ids:o},await this.requestJP("PUT",n,JSON.stringify(s)),So.pollAssetUntilCheckJP(So,i,(e=>o.every((t=>e.hasLink(`/rels/aux/${t}`)))))}getAlbumListP(e){var t;return t=this._linkBase.fullHref(`assets/${e}/albums`),this.requestP("GET",t).done((e=>this.albumsList=e.resources.filter((e=>"collection"===e.subtype))))}_assetStoreUpdate(e,t){var r,i;if(i=new Date(e.attributes.updated),r=new Date(t.updated),isNaN(i)||isNaN(r)||r>i)return null==t.spaces&&(t.spaces=e.attributes.spaces),e.setAttributes(t)}debugTouchUpdatedP(e){var t;return t={payload:{userUpdated:e.toISOString()}},this._createChildRevisionP("debugTouchUpdated",t)}},To=(0,i.Z)(Eo.prototype,"albumsList",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Io=(0,i.Z)(Eo.prototype,"deletedRestoreState",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ko=Eo))||ko);Do.pollUntilValidAssetJP=function(e){return So.pollAssetUntilCheckJP(Do,e,(function(e){return e.isValid()}))};var Zo,No,Fo=r(982201);let Lo=(Zo=class extends ye{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(e),(0,C.Z)(this,"loaded",No,this),this.asset_ids=t,this.options=r}async loadJP(){return await this.safeToJSPromise(this.loadP())}loadP(){const e=Fo.param(Object.assign({},this.options,{asset_ids:this.asset_ids.join(",")}));return this.requestP("GET",`${this.href}?${e}`).then(((e,t,r)=>{const i={},n={};let s=0,o=0;const a=r.getResponseHeader("x-request-id");if(null!=e.resources){s=e.resources.length;for(const t of e.resources)t.base=e.base,i[t.id]=new this.model(t)}if(null!=e.errors){o=e.errors.length;for(const t of e.errors)t.base=e.base,n[t.id]=t}return{assets:i,asset_count:s,errors:n,error_count:o,request_id:a}}))}},No=(0,i.Z)(Zo.prototype,"loaded",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zo);Lo.prototype.model=null;const Mo=function(){class e extends Lo{}return e.prototype.model=jo,e}.call(void 0);var Uo,$o=r(5081),zo=r(977660),Ho=r(108856).Z;const Jo=Uo=class e extends G{static setAuthHeaders(e,t){return this.authHeaders={Authorization:`Bearer ${e}`,"x-api-key":t}}doUnwantedSearchJP(e,t,r,i){var n,s,o,a,l,u;return o=zo.Z.isProd?"lightroom-production":"lightroom-stage",u=$o[o].unwanted_host,n=$o[o].unwanted_app_token,l={"x-api-key":"LightroomMobileWeb1",Authorization:`Bearer ${Sr.default.getToken()}`,"x-app-token":n},a=[{catalogId:e.id},{accountId:N.Z.account.id}],null!==t&&a.push({albumId:t.id}),s={experienceId:"Default-Unwanted-Photos",queries:[{id:"query1",start:i,limit:r,scope:{entities:["LRPhoto"]},filters:a}]},this.requestJP("POST",`https://${u}/uss/v3/query`,JSON.stringify(s),{headers:l,contentType:"application/vnd.adobe.search-request+json"})}doInsightsSearchP(){var e,t,r,i;return e=zo.Z.isProd?"lightroom-production":"lightroom-stage",r=$o[e].host,t={"x-api-key":"LightroomMobileWeb1","x-product":"Lightroom Web","x-product-location":"Lightroom Web",Authorization:`Bearer ${Sr.default.getToken()}`},i={q:"",scope:["lightroom"],asset_type:["image","video"],facets_fields:["lightroom_flag","lightroom_edited","lightroom_flash","lightroom_depthmap","asset_type","type","file_name_extension","rating","lightroom_orientation","lightroom_camera","lightroom_lens","lightroom_flength","lightroom_fstop","lightroom_iso","lightroom_ss","lightroom_keyword","lightroom_location","lightroom_person"],fields_excluded:["links","tags"],hints:[{lightroom_version:"3"}],limit:1},this.requestP("POST",`https://${r}/universal-search/v2/search`,JSON.stringify(i),{headers:t,contentType:"application/vnd.adobe.search-request+json"})}doSearchP(t,r,i,s,o){var a,l;return l={"x-product-location":"main search input"},a={scope:["lightroom"],q:t,limit:r,start_index:i,fields_excluded:["links","tags"],locale:P.Z.getLocaleWithUnderscore(),fetch_fields:{includes:["lightroom_album_id"]}},"__clear_search_cache__"===t&&(a.lightroom_disable_cache="true"),null!=o&&Object.assign(a,o),null!=s&&Object.assign(a,s),Ho.sdk?(Object.assign(l,e.authHeaders),this.requestP("POST","/search_sdk_api/universal-search-lr/v2/search",JSON.stringify(a),{headers:l,contentType:"application/vnd.adobe.search-request+json"})):n.Z.is_enabled("debug_uss_stage_fac_endpoint")?(null==a.hints&&(a.hints=[]),a.hints.push({lightroom_version:"3"}),this.requestP("POST","/search_api_fac/universal-search-lr/v2/search",JSON.stringify(a),{headers:l,contentType:"application/vnd.adobe.search-request+json"})):this.requestP("POST","/search_api/universal-search-lr/v2/search",JSON.stringify(a),{headers:l,contentType:"application/vnd.adobe.search-request+json"})}};n.Z.is_enabled("debug")&&(window.LrSearch=Uo);var qo,Vo,Bo,Wo,Go,Xo=r(982201);Go=0;const Ko=(qo=class extends en{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];var a;super(),(0,C.Z)(this,"sortOrderBy",Vo,this),(0,C.Z)(this,"sortOrderDirection",Bo,this),(0,C.Z)(this,"errored",Wo,this),this.catalog=e,this.searchText=t,this.filterParams=r,this.sortOrderBy=i,this.sortOrderDirection=s,this.insertedAssets=o,this._searchId=Go++,this.search=new Jo,n.Z.is_enabled("search_ml_feedback")&&(this.requestLog=[]),this.assetSearchData={},this.pageSize=null!=(a=this.filterParams.limit)?a:100,this.reset()}reset(){return this._dirty?(super.reset(),this._models.push(...this.insertedAssets),this.errored=!1,this.insertedAssets.length>0&&this._reindex(),this):this}getSearchId(){return Go}getSearchQueryString(){return this.searchText}_reportError(e,t,r){var i;return null==e&&(e="unknown"),null==t&&(t="unknown"),i=r.getResponseHeader("x-request-id"),A.Z.reportFailure("searchFailure",{errorCode:e,errorDescription:t,requestId:i})}fetchP(){var e,t,r;return this.finished?Xo.Deferred().reject().promise():this.fetching?this.fetching:(e=this._models,this.sortOrderBy,this.sortOrderDirection,null==this.sortOrderBy&&null==this.sortOrderDirection||(r={},null!=this.sortOrderDirection&&(r.sort_order=this.sortOrderDirection),null!=this.sortOrderBy&&(r.sort_orderby=this.sortOrderBy)),t=this.fetching=this.search.doSearchP(this.searchText,this.pageSize,this.page*this.pageSize,this.filterParams,r),n.Z.is_enabled("debug_simulate_slow_search")&&(t=t.then((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i;return i=Xo.Deferred(),setTimeout((function(){return i.resolve(...t)}),3e3),i}))),t.always((()=>this.fetching=void 0)).fail(((e,t,r)=>(this.errored=!0,this._reportError(t,JSON.stringify(e),r),this._dirty=!0))).then(((r,i,s)=>{var o,a,l,u,c,d,h,p,f,g,m,y,v,b,_,w,P,A,S,x,C,O,k,E,T;if(this._models===e){if(null!=r&&null!=r.status&&200<=(g=r.status[0].status)&&g<=299){if(k=s.getResponseHeader("x-request-id"),this.totalCount=null!=(m=null!=(b=r.result_sets)&&null!=(_=b[0])?_.total_items:void 0)?m:0,(T=null!=(w=null!=(P=r.result_sets)&&null!=(A=P[0])&&null!=(S=A.items)?S.length:void 0)?w:0)>0&&null!=(null!=(x=r.result_sets)?x[0]:void 0)){for(f=[],p={},c=0,h=(C=r.result_sets[0].items).length;c<h;c++)O=C[c],null==(d=O.asset_id)||null!=p[d]||null!=this.index(d)||Vi.isAssetIdDeleted(d)||(f.push(d),p[d]=!0,this.assetSearchData[d]=O);u=`/v2/catalogs/${this.catalog.id}/assets`,N.Z.hostOverride&&(u=`${N.Z.hostOverride}${u}`),o=new Mo(u,f,{embed:"user"}),t=o.loadP().then((t=>{var r,i,s,o;if(this._models===e){for(o=t.request_id,i=0,s=f.length;i<s;i++)d=f[i],null!=(r=t.assets[d])&&this._add(r);return n.Z.is_enabled("search_ml_feedback")?this.requestLog.push({searchRequestId:k,ozRequestId:o,ozIds:f}):void 0}})).always((()=>{if(this._models===e)return T<this.pageSize?(this.finished=!0,this.totalCount=this._models.length):void 0}))}else this.finished=!0,this.totalCount=this._models.length;return this.page++,this.page*this.pageSize>=1e4&&(this.finished=!0,this.totalCount=this._models.length),t}return null!=(E=null!=r&&null!=(y=r.status)?y[0]:void 0)&&(null!=(l=null!=(v=E.errors)?v[0]:void 0)&&(a=JSON.stringify(l)),this._reportError(E.status,a,s)),this.finished=!0,this.totalCount=this._models.length}})))}deleteAssetsLocally(e){return this.deleteLocally(e)}get assets(){return this}getAssetParentAlbumIds(e){var t,r;return null==(null!=(t=this.assetSearchData)&&null!=(r=t[e])?r.lightroom_album_id:void 0)?[]:this.assetSearchData[e].lightroom_album_id}_getPageNumberForAssetId(e){var t,r,i,n;for(i=t=0,r=(n=this.requestLog).length;t<r;i=++t)if(n[i].ozIds.indexOf(e)>=0)return i;return-1}_initsearchFeedbackData(e,t){var r;return r={client_request_id:this.requestLog[e].ozRequestId,false_positive_results:[],allow_asset_view:!1},null!=t&&(r.feedback=t),{created:Date.now(),account_id:N.Z.account.id,catalog_id:Vi.catalog.id,type:"autotag_search",source:{client:"LrW",search_url:window.__adobe_search_api_host,search_query:this.getSearchQueryString(),search_request_id:this.requestLog[e].searchRequestId,payload:r}}}sendSearchFeedbackJP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r,i,n,s,o,a,l,u,c,d;for(c=new Array(this.requestLog.length).fill(null),i=0,o=e.length;i<o;i++)n=e[i],(l=this._getPageNumberForAssetId(n))<0||(null==(r=c[l])&&(r=c[l]=this._initsearchFeedbackData(l,t)),r.source.payload.false_positive_results.push(n));for(d=c.filter((function(e){return null!=e})),u=[],s=0,a=d.length;s<a;s++)r=d[s],u.push(Vi.catalog.submitSearchFeedbackJP(r));return Promise.all(u)}},Vo=(0,i.Z)(qo.prototype,"sortOrderBy",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bo=(0,i.Z)(qo.prototype,"sortOrderDirection",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wo=(0,i.Z)(qo.prototype,"errored",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qo);var Yo,Qo,ea=r(982201);let ta=(Yo=class extends en{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),(0,C.Z)(this,"errored",Qo,this),this.catalog=e,this.album=t,this.search=new Jo,this.assetSearchData={},this.pageSize=100,this.reset()}reset(){if(this._dirty)return super.reset(),this.errored=!1,this}_reportError(e,t,r){var i,n;t=null!==(n=e=null!==(i=e)&&void 0!==i?i:"unknown")&&void 0!==n?n:"unknown";const s=r.getResponseHeader("x-request-id");A.Z.reportFailure("searchFailure",{errorCode:e,errorDescription:t,requestId:s})}fetchP(){const e=ea.Deferred();return this.fetchJP().then((t=>e.resolve(t)),(t=>e.reject(t))),e.promise()}async fetchJP(){if(this.finished)return Promise.reject();if(this.fetching)return this.fetching;this.fetching=this._fetchJP();try{await this.fetching,this.fetching=null}catch(e){throw this.fetching=null,e}}async _fetchJP(){const{_models:e}=this;try{const[o,a,l]=await this.search.doUnwantedSearchJP(this.catalog,this.album,this.pageSize,this.page*this.pageSize);if(this._models!==e)return;const u=o?.status?.httpCode;if(null!=u&&u>=200&&u<=299){var t,r,i;const e=null!==(t=o.resultSets)&&void 0!==t?t:[];this.totalCount=null!==(r=e[0]?.metadata.totalHits)&&void 0!==r?r:0;const a=null!==(i=e[0]?.items?.length)&&void 0!==i?i:0;if(a>0&&null!=e[0]){const t=[],r={};for(const i of e[0].items){const e=i.id;var s;if(null!=e&&null!=!r[e]&&null==this.index(e)&&!Vi.isAssetIdDeleted(e))t.push(e),r[e]={score:null!==(s=i["cleanup.score"])&&void 0!==s?s:i["unwantedPhotosService_v1.score"]},this.assetSearchData[e]=i}let i=`/v2/catalogs/${this.catalog.id}/assets`;N.Z.hostOverride&&(i=`${N.Z.hostOverride}${i}`);const o=new Mo(i,t,{embed:"user"}),[l]=await o.loadJP();l.request_id;for(const e of t){const t=l.assets[e];n.Z.is_enabled("debug_asset_data")&&(t.debugUnwantedScore=r[e].score),null!=t&&this._add(t)}a<this.pageSize&&(this.finished=!0,this.totalCount=this._models.length)}else this.finished=!0,this.totalCount=this._models.length;this.page++,this.page*this.pageSize>=1e4&&(this.finished=!0,this.totalCount=this._models.length)}}catch([e,t,r]){throw this.errored=!0,this._reportError(t,JSON.stringify(e),r),this._dirty=!0,[e,t,r]}}deleteAssetsLocally(e){this.deleteLocally(e)}get assets(){return this}},Qo=(0,i.Z)(Yo.prototype,"errored",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yo);var ra,ia;r(826990);ia=function(e){return Math.abs(e)<1e-4},ra={calculateCombinedAestheticRating:function(e){var t,r,i,n;if(null==(t=e.getAesthetics()))return 0;for(r in i=0,t)"number"==typeof(n=t[r])&&"version"!==r&&0!==this.importanceWeights.aestheticWeights[r]&&(i+=n*this.importanceWeights.aestheticWeights[r]);return i<0&&(i=0),i},calculateImportance:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r,i,s,o,a,l,u;return null==t&&(t=null!=(l=null!=(u=this.bestPhotosState)?u.senseiOnlyCalculation:void 0)&&l),n.Z.is_enabled("best_photos_trust_oz")?parseInt(e.hackBestPhotosOrder):n.Z.is_enabled("best_aesthetics_score_only")?e.getAestheticScore():((i=this._calculateBaseImportance(e,t))+(r=this._getAutoTagImportance(e,t))+(a=this._getFrameImportance(e))+(o=this._getFaceImportance(e))+(s=this._getBlurImportance(e)))/this._getNormalizer(i,r,a,o,s)},_calculateBaseImportance:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r,i,n;return r=0,(i=!t&&!(null!=(n=this.bestPhotosState)?n.senseiOnlyCalculation:void 0))&&(r+=this._getFlagImportance(e),r+=this._getRatingImportance(e),r+=this._getTitleImportance(e),r+=this._getCaptionImportance(e),r+=this._getEditImportance(e)),r=(r+=this._getAestheticImportance(e))/this._getMaxAestheticScore(t)*100,i&&(r+=this._getRatedFlaggedPenalty(e)),r},_getNormalizer:function(e,t,r,i,n){var s;return s=0,ia(e)||(s+=1),ia(t)||(s+=this.importanceWeights.autoTagScore),ia(r)||(s+=this.importanceWeights.frameScore),ia(i)||(s+=this.importanceWeights.faceScore),ia(n)||(s+=this.importanceWeights.blurScore),s},_getFrameImportance:function(e){return e.getBestFrameScore("frame")*this.importanceWeights.frameScore/this.maxScores.frame*100},_getFaceImportance:function(e){var t,r,i,n;return t=e.getBestFrameScore("face"),r=null!=(i=null!=(n=this.bestPhotosState)?n.peopleMultiplier:void 0)?i:1,t>=this.importanceWeights.faceScoreOutlierMin?t*this.importanceWeights.faceScoreOutlier*r/this.maxScores.face*100:t*this.importanceWeights.faceScore*r/this.maxScores.face*100},_getBlurImportance:function(e){var t,r,i,s,o,a,l;if(t=e.getBlurScores(),r=this.importanceWeights.blur,null==t)return 0;for(l=0,i=0,o=(a=["desired","undesired","clear","acceptable"]).length;i<o;i++)s=a[i],this._shouldIgnoreBlurScore(e,s)||(l+=t[s]*r[s]);return n.Z.is_enabled("debug_best_photos")&&(l+=(t.desired+t.clear+t.acceptable)*r.goodScore,l+=(t.undesired+.5*t.acceptable)*r.badScore),l},_shouldIgnoreBlurScore:function(e,t){var r,i,n,s,o;if("desired"===t){if(null==(r=e.getAutoTags()))return!1;for(n=i=0,s=(o=this.importanceWeights.blur.desiredIgnoreTags).length;i<s;n=++i)if(r[o[n]]>this.importanceWeights.blur.desiredIgnoreThresholds[n])return!0}return!1},_getFlagImportance:function(e){var t,r,i;return"reject"===(t=e.getFlag())&&null!=(null!=(r=this.bestPhotosState)?r.rejectWeightOverride:void 0)?null!=(i=this.bestPhotosState)?i.rejectWeightOverride:void 0:this.importanceWeights.flags[t]},_getRatingImportance:function(e){var t;return t=e.getRating(),this.importanceWeights.rating[t]},_getTitleImportance:function(e){return""!==e.getTitle().trim()?this.importanceWeights.hasTitle:0},_getCaptionImportance:function(e){return""!==e.getCaption().trim()?this.importanceWeights.hasCaption:0},_getAestheticImportance:function(e){return this.importanceWeights.aestheticScore*this.calculateCombinedAestheticRating(e)},_getEditImportance:function(e){var t,r;return e.hasUserEdits()?null!=(t=null!=(r=this.bestPhotosState)?r.editedWeightOverride:void 0)?t:this.importanceWeights.hasEdits:0},_getRatedFlaggedPenalty:function(e){var t,r,i;return(null!=(i=this.bestPhotosState)?i.excludeRatedFlagged:void 0)?(r=0!==e.getRating(),t="unflagged"!==e.getFlag(),r||t?-1e3:0):0},_isPeopleTagType:function(e){return"people"===e||"people_secondary"===e||"faces"===e},_getAutoTagImportance:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r,i,n,s,o,a,l;for(s in i=e.getAutoTags(),n=0,o=this.autoTagMaxPercent*this._getAestheticImportance(e),i)r=i[s]*((null!=(a=this.autoTagLookupTable[s])?a.weight:void 0)||0),null!=this.bestPhotosState&&this._isPeopleTagType(null!=(l=this.autoTagLookupTable[s])?l.type:void 0)&&(r*=this.bestPhotosState.peopleMultiplier),n+=r;return Math.min(n,o)*this.importanceWeights.autoTagScore/this._getMaxAutoTagScore(t)*100},autoTagMaxPercent:.3,autoTagWeights:{people:{weight:.005,tags:["person","human","people","couple","friends","man","guy","men","male","father","dad","female","woman","lady","women","mother","mom","boy","son","girl","daughter","adult","kid","baby","child","children","couple","family","teenager","young adult"]},people_adjectives:{weight:.02,tags:["beautiful","beauty","pretty","cute","glamour","sexy","attractive","handsome","fashion"]},people_secondary:{weight:.005,tags:["businesswoman","businessman","businesspeople","bride","groom","manager","executive","engineer","architect","student","waiter","worker","police","doctor","patient","senior","elderly","mature","audience","team","teacher","wife","husband","partner"]},people_actions:{weight:.005,tags:["walking","looking","drinking","handshake","talking","togetherness","social"]},on_people:{weight:.005,tags:["dress","skin"]},emotion:{weight:.005,tags:["happy","cheerful","love","happiness","friendship"]},faces:{weight:.02,tags:["smiling","smile","face","portrait","expression"]},on_faces:{weight:.005,tags:["blond","blonde","brunette","hair","glasses","sunglasses","head"]}},autoTagLookupTable:{},importanceWeights:{flags:{pick:50,reject:-20,unflagged:0},aestheticScore:.3,autoTagScore:.1,aestheticWeights:{balancing:0,blur:0,content:0,dof:0,emphasis:0,harmony:0,lighting:0,repetition:0,rot:0,score:1,symmetry:0,vivid:0},hasEdits:0,rating:[0,5,10,20,40,80],hasTitle:5,hasCaption:5,frameScore:10,faceScore:1,faceScoreOutlierMin:.9,faceScoreOutlier:2,blurScore:1,blur:{desired:.8,desiredIgnoreTags:["landscape"],desiredIgnoreThresholds:[55],undesired:-.2,clear:0,acceptable:0,goodScore:-.2,badScore:0},undesiredBlurCutoff:98},calculateImportanceBreakdown:function(e){var t,r,i,n,s,o,a,l,u,c,d;return d=null!=(a=null!=(l=this.bestPhotosState)?l.senseiOnlyCalculation:void 0)&&a,r=this._calculateBaseImportance(e,d),t=this._getAutoTagImportance(e,d),s=this._getFrameImportance(e),n=this._getFaceImportance(e),i=this._getBlurImportance(e),o=this._getNormalizer(r,t,s,n,i),{total:this.calculateImportance(e,d).toFixed(4),base:`${(r/o).toFixed(2)} (${r.toFixed(2)})`,autotags:`${(t/o).toFixed(4)} (${t.toFixed(4)})`,frame:`${(s/o).toFixed(4)} (${s.toFixed(4)})`,face:`${(n/o).toFixed(4)} (${n.toFixed(4)})`,blur:`${(i/o).toFixed(4)} (${i.toFixed(4)})`,normalizer:o,flag:`${this._getFlagImportance(e).toFixed(2)}`,rating:`${this._getRatingImportance(e).toFixed(2)}`,title:`${this._getTitleImportance(e).toFixed(2)}`,caption:`${this._getCaptionImportance(e).toFixed(2)}`,edited:`${this._getEditImportance(e).toFixed(2)}`,"Frame Raw":e.getBestFrameScore("frame").toFixed(4),"Face Raw":e.getBestFrameScore("face").toFixed(4),"Num Faces":null!=(u=e.getBestFrameScores().numFaces)?u:"null","Oz Score":parseFloat(null!=(c=e.hackBestPhotosOrder)?c:0).toFixed(1)}},calculateBestQualityAsset:function(e,t){var r,i,n,s,o;for(o=-1e4,n=0,s=e.length;n<s;n++){if(!(r=e[n]).hasBestFrameScore(t))return null;r.getBestFrameScore(t)>o&&(o=(i=r).getBestFrameScore(t))}return i},_calculateAutoTagLookupTable:function(){var e,t,r,i,n;for(n in r=[],t=this.autoTagWeights)e=t[n],r.push(function(){var t,r,s,o;for(o=[],t=0,r=(s=e.tags).length;t<r;t++)i=s[t],o.push(this.autoTagLookupTable[i]={weight:e.weight,type:n});return o}.call(this));return r},_getMaxAestheticScore:function(e){return e?this.maxScores.aesthetics.senseiOnly:this.maxScores.aesthetics.allProperties},_getMaxAutoTagScore:function(e){return e?this.maxScores.autoTag.senseiOnly:this.maxScores.autoTag.allProperties},_calculateMaxScores:function(){var e,t,r,i,n;return r=(e=(t=100*(n=this.importanceWeights).aestheticScore)+n.flags.pick+n.hasEdits+n.rating[5]+n.hasTitle+n.hasCaption)*this.autoTagMaxPercent,i=t*this.autoTagMaxPercent,1,1,this.maxScores={aesthetics:{senseiOnly:t,allProperties:e},autoTag:{senseiOnly:i,allProperties:r},frame:1,face:1}},setBestPhotosState:function(e){this.bestPhotosState=e}},ra._calculateAutoTagLookupTable(),ra._calculateMaxScores(),n.Z.is_enabled("debug")&&(window.StoryHelper=ra);const na=ra,sa=(e,t)=>{let r=t.trim();r=r.replace(/\[(\w+)\]/g,".$1"),r=r.replace(/^\./,"");const i=r.split(".");let n=e;if(e.payload&&e.attributes){n=null!=e.payload()[i[0]]?e.payload():e.attributes}for(const e of i){if(null==n[e])return"";n=n[e]}return null!=n?n:""};var oa;const aa=oa={SORT_NEWEST_FIRST:0,SORT_OLDEST_FIRST:1,SORT_CUSTOM:2,_localeCompare:function(e,t){var r;return e=e.toString(),t=t.toString(),0===(r=e.toLocaleLowerCase().localeCompare(t.toLocaleLowerCase()))?e.localeCompare(t):r},localeCompare:function(e,t){return oa.logicalStringComparison(e,t)},stringToArrayOfCharactersAndNumbers:function(e){return(null!=e?e.length:void 0)>0?e.match(/([\d]+)|[^\d]+/g):[]},_stringTokenComparison:function(e,t){var r,i;return r=parseFloat(e),i=parseFloat(t),isNaN(r)&&isNaN(i)?""===e?-1:""===t?1:oa._localeCompare(e,t):isNaN(r)?1:isNaN(i)?-1:r-i},logicalStringComparison:function(e,t){var r,i,n,s,o,a,l,u,c;for(i=oa.stringToArrayOfCharactersAndNumbers(e.toString()),n=(o=oa.stringToArrayOfCharactersAndNumbers(t.toString())).length,u=l=0,c=i.length;l<c;u=++l){if(r=i[u],u>=n)return 1;if(s=o[u],0!==(a=oa._stringTokenComparison(r,s)))return a}return a},ozModelCreatedCompareAsc:function(e,t){var r,i;return(r=e.getBestCreatedDateAttribute())===(i=t.getBestCreatedDateAttribute())?0:r>i?1:-1},ozModelCreatedCompareDesc:function(e,t){return oa.ozModelCreatedCompareAsc(t,e)},assetQualityCompareAsc:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oa.assetCaptureDateCompareAsc;var i,n;return i=na.calculateImportance(e,!0),n=na.calculateImportance(t,!0),Math.abs(i-n)<.001?r(e,t):i-n},assetQualityCompareDesc:function(e,t){return oa.assetQualityCompareAsc(t,e,oa.assetCaptureDateCompareDesc)},_dateCompare:function(e,t,r){var i,n,s,o,a;return i=("function"==typeof e[o=r[0]]?e[o]():void 0)||null,n=("function"==typeof t[o]?t[o]():void 0)||null,s=null===i&&null===n,a=(null!=i?i.getTime():void 0)===(null!=n?n.getTime():void 0),s?r.length>1?(r.shift(),oa._dateCompare(e,t,r)):0:a&&r.length>1?(r.shift(),oa._dateCompare(e,t,r)):null===i?-1:null===n?1:i-n},assetCaptureDateCompareLikeOzAsc:function(e,t){return oa._dateCompare(e,t,["getCaptureDate","getOzCreatedDate"])},assetCaptureDateCompareLikeOzDesc:function(e,t){return oa.assetCaptureDateCompareLikeOzAsc(t,e)},assetCaptureDateCompareAsc:function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var i;return 0===(i=oa._dateCompare(e,t,["getCaptureDate"]))&&r?oa.assetFileNameCompareAsc(e,t):i},assetCaptureDateCompareDesc:function(e,t){return oa.assetCaptureDateCompareAsc(t,e)},assetImportDateCompareAsc:function(e,t){var r;return 0===(r=oa._dateCompare(e,t,["getImportDate","getCaptureDate"]))?oa.assetFileNameCompareAsc(e,t):r},assetImportDateCompareDesc:function(e,t){return oa.assetImportDateCompareAsc(t,e)},assetModifiedDateCompareAsc:function(e,t){var r;return 0===(r=oa._dateCompare(e,t,["getUserUpdatedDate","getCaptureDate"]))?oa.assetFileNameCompareAsc(e,t):r},assetModifiedDateCompareDesc:function(e,t){return oa.assetModifiedDateCompareAsc(t,e)},assetRatingCompareAsc:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oa.assetCaptureDateCompareAsc;var i,n;return(i=e.getRating())===(n=t.getRating())?r(e,t):i-n},assetRatingCompareDesc:function(e,t){return oa.assetRatingCompareAsc(t,e,oa.assetCaptureDateCompareDesc)},assetFileNameCompareAsc:function(e,t){var r,i,n;return r=e.getFileName(),i=t.getFileName(),""===r&&""===i?oa.assetCaptureDateCompareAsc(e,t,!1):""===r?-1:""===i?1:0===(n=oa.logicalStringComparison(r,i))?oa.assetCaptureDateCompareAsc(e,t,!1):n},assetFilenameCompareDesc:function(e,t){return oa.assetFilenameCompareAsc(t,e)},makeCustomSortPropertyComparer:function(e){return function(t,r){return(parseFloat(sa(r,e))||0)-(parseFloat(sa(t,e))||0)}}};var la=[];class ua{static get active(){return la.length>0}static start(e){la.push(e)}static end(e){let t=la[la.length-1];if(e!==t)throw new Error("ActionDispatcher: Expected to end "+t+", but instead ended a different action of type "+e);la.pop()}}ua.IMPLICIT_ACTION_PREFIX="@",ua.INIT_ACTION="@@INIT";class ca{static register(e){for(var t=e.prototype.constructor.name||"Unknown",r=t,i=1;ca._nameToClass[r];)r=t+i++;ca._nameToClass[r]=e,e.prototype.__classLookupName=r}static lookup(e){return ca._nameToClass[e]}static valueToJSON(e){return e&&e instanceof ga?{className:e.__classLookupName,json:e.toJSON()}:e}static valueFromJSON(e){if(e&&e.className&&e.json){var t=new(ca.lookup(e.className));return t.fromJSON(e.json),t}return e}}ca._nameToClass={};const da=function(e,t,r,i){return"function"==typeof t?t(e,...r):i()};var ha,pa;let fa=(ha=class{constructor(){(0,C.Z)(this,"parent",pa,this),this.name=void 0,this.middleware=void 0,this.subStores={}}},pa=(0,i.Z)(ha.prototype,"parent",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ha);class ga extends er{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.__data=new fa;var i=this.__data;i.middleware=r?[da]:[],t instanceof Array?i.middleware=i.middleware.concat(t):t&&i.middleware.push(t),e&&this.dispatch(ua.INIT_ACTION,e)}forEach(e){var t=this.__data.subStores;for(var r in t){var i=t[r];i&&e(i)}}dispose(){super.dispose(),this.forEach((e=>e.dispose()))}_isMutable(){return void 0!==this.__allowMutable?this.__allowMutable:this.__data.parent?this.__data.parent._isMutable():void 0}_isMutableProperty(e){if(void 0!==this.__allowMutableProperties&&void 0!==this.__allowMutableProperties[e])return!0}_linkStore(e,t){var r=this.__data.subStores;if(r[e]&&(r[e].__data.parent=void 0,r[e].__data.name=void 0,r[e]=void 0),t&&t instanceof ga){if(t.__data.parent&&t.__data.parent!==this)throw new Error("The store you're attempting to assign to \""+e+'" already belongs to another store. The store hierarchy must be a tree.');r[e]=t,t.__data.parent=this,t.__data.name=e}}_doDispatch(e,t){var r,i=!1;if(e===ua.INIT_ACTION)super.fromJSON(...t),i=!0;else if(0===e.indexOf(ua.IMPLICIT_ACTION_PREFIX)){for(var n=this,s=(e=e.substring(ua.IMPLICIT_ACTION_PREFIX.length)).split(".");s.length>1;)n=n[s.shift()];var o=s[0];if("()"===o.substring(o.length-2))r=n[o.substring(0,o.length-2)](...t.map(ca.valueFromJSON));else n[o]=ca.valueFromJSON(...t);i=!0}else{var a=this.__actionHandlers&&this.__actionHandlers[e];a&&(a.options.async?console.warn('Ignoring an asynchronous handler for action "'+e+'" while propagating. Asynchronous actions can only be dispatched directly to the target store.'):i=!0===(r=this[a.name](...t))||!1===a.options.propagate)}if(i)return r;this.forEach((r=>{r._doDispatch&&r._doDispatch(e,t)}))}_dispatchDown(e,t){var r=e.split("/");e=r.pop();for(var i=this,n=0;n<r.length;n++)if(!(i=i.__data.subStores[r[n]]))return;return i._doDispatch(e,t)}_dispatchWithMiddleware(e,t,r){for(var i=this,n=arguments.length,s=new Array(n>3?n-3:0),o=3;o<n;o++)s[o-3]=arguments[o];if(r&&!ua.active){return r(this,e,t,(function(r){if(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return i._dispatchWithMiddleware(r,o,...s)}return i._dispatchWithMiddleware(e,t,...s)}))}if("string"!=typeof e){if(ua.active&&"function"==typeof e)throw new Error("Cannot dispatch an asynchronous action from a synchronous action");throw new Error("Action name must be a string")}let a;try{ua.start(e),a=this._dispatchDown(e,t)}catch(t){throw ua.end(e,!0),t}return ua.end(e),a}_dispatchUp(e,t,r,i){var n=this.__data.parent;if(n)return n._dispatchUp(e,t,r,this.__data.name+"/"+i);var s=this.__data.middleware;return"string"==typeof e?this._dispatchWithMiddleware(i+e,t,...s):r._dispatchWithMiddleware(e,t,...s)}dispatch(e){for(var t=this.__actionHandlers&&this.__actionHandlers[e],r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return t&&t.options.async?this[t.name](...i):this._dispatchUp(e,i,this,"")}getParentStore(){return this.__data.parent}}const ma=e=>"object"==typeof e&&0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype;class ya extends ga{constructor(e,t){super(e,t),e&&this._fromJSON(e)}fromJSON(e){const t=super.fromJSON(e);return this._fromJSON(e),t}_fromJSON(e){const{exportables:t}=this;for(const r of t.properties)delete e[t.getJsonName(r.name)];Object.assign(this,e)}toJSON(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r={},{exportables:i}=this;for(const s of i.properties){const o=s.toJSON.call(this,this[s.key],e);t&&(void 0===o||(n=o,Array.isArray(n)&&0===n.length)||ma(o))||(r[i.getJsonName(s.name)]=o)}var n;if(e)for(const e of Object.getOwnPropertyNames(this))"_"!==e[0]&&(r[e]=Qt()(this[e]));return r}}const va=s.Z.makeClassDecorator(((e,t)=>{e.prototype.__allowMutable=t&&t.mutable,ca.register(e)})),ba=s.Z.makePropertyDecorator((function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("function"!=typeof r.value)throw new Error("@Action can only be used with a method (the handler for the action)");if(!(e instanceof ga))throw new Error("@Action can only be used for methods on a Store");if(-1!==t.indexOf("/"))throw new Error('@Action name can\'t include the "/" character');if(-1!==t.indexOf("@"))throw new Error('@Action name can\'t include the "@" character');e.__actionHandlers=e.__actionHandlers||{},e.__actionHandlers[t]={name:t,options:i}}),{throwOnClassInvocation:"@Action must be used on a method, not a class."});var _a,wa,Pa,Aa,Sa,xa=function(e,t){if(e&&(e._isMutableProperty(t)||e._isMutable())){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return e.dispatch(ua.IMPLICIT_ACTION_PREFIX+t,...i.map(ca.valueToJSON))}throw new Error("Attempting to set state outside of an action")};function Ca(e,t,r,i,n){var s=n&&n[r],o=void 0!==s?s:e.defaultValue,a=e.fromJSON.call(i,o);i[t]=a}class Oa extends Te{add(e){var t=super.add(...arguments),r=t.set;return t.set=function(t){if(!ua.active)return xa(this,e,t);r.call(this,t),this._linkStore(e,t)},t}computeJSONMethod(){for(var e=[],t=this.properties,r=0,i=t.length;r<i;++r){var n=t[r],s=n.name,o=this.getJsonName(n.name);e.push(Ca.bind(this,n,s,o))}this.fromJSON=(t,r)=>(e.forEach((e=>e(t,r))),t)}}var ka=Object.getOwnPropertyDescriptor(je.prototype,"length");class Ea extends je{_linkItem(e,t){this._parent._linkStore(this._name+":"+e,t)}_linkItems(e,t){e=e||0,t=t||this.length;for(let r=e;r<t;r++)this._linkItem(r);for(let r=e;r<t;r++)this._linkItem(r,this.at(r))}get length(){return ka.get.call(this)}set length(e){if(ua.active){var t=this.base.length;ka.set.call(this,e),t>e&&this._linkItems(e,t)}else xa(this._parent,this._name+".length",e)}swapItems(e){if(!ua.active)return xa(this._parent,this._name+".swapItems()",e);var t=this.base.length;super.swapItems(e),this._linkItems(0,Math.max(t,e.length))}setAt(e,t){if(!ua.active)return xa(this._parent,this._name+".setAt()",e,t);super.setAt(e,t),this._linkItem(e,t)}push(){if(!ua.active)return xa(this._parent,this._name+".push()",...arguments);var e=this.length,t=super.push(...arguments);return this._linkItems(e,e+arguments.length),t}pop(){if(!ua.active)return xa(this._parent,this._name+".pop()",...arguments);var e=super.pop();return this._linkItem(this.length),e}unshift(){if(!ua.active)return xa(this._parent,this._name+".unshift()",...arguments);var e=super.unshift(...arguments);return this._linkItems(),e}shift(){if(!ua.active)return xa(this._parent,this._name+".shift()",...arguments);var e=super.shift();return this._linkItems(0,this.length+1),e}splice(){if(!ua.active)return xa(this._parent,this._name+".splice()",...arguments);var e=this.length,t=super.splice(...arguments);return this._linkItems(0,Math.max(e,this.length)),t}fill(e,t,r){return ua.active?(super.fill(e,t,r),this._linkItems(t,r),this):xa(this._parent,this._name+".fill()",e,t,r)}reverse(){return ua.active?(super.reverse(),this._linkItems(),this):xa(this._parent,this._name+".reverse()")}sort(){return ua.active?(super.sort(...arguments),this._linkItems(),this):xa()}}class Ta extends Je{_linkItem(e,t){this._parent._linkStore(this._name+":"+e,t)}_linkItems(e){var t=e||this.keys();for(var r of t)this._linkItem(r,this.get(r))}set(e,t){return ua.active?(super.set(e,t),this._linkItem(e,t),this):xa(this._parent,this._name+".set()",e,t)}delete(e){if(!ua.active)return xa(this._parent,this._name+".delete()",e);var t=super.delete(e);return this._linkItem(e),t}clear(){if(!ua.active)return xa(this._parent,this._name+".clear()");var e=this.keys();super.clear(),this._linkItems(e)}}const Ia=new(_a=s.Z.wrapPropertyDecorator,wa=s.Z.wrapPropertyDecorator,Pa=s.Z.wrapPropertyDecorator,Aa=s.Z.wrapPropertyDecorator,Sa=class extends mt{constructor(){super(...arguments),this._jsonPropertiesType=Oa,this._arrayType=Ea,this._mapType=Ta}byRefArray(e,t,r,i,n){if(n)throw new Error("static is not supported for @State.byRefArray");return mt.prototype.byRefArray.call(this,e,t,r,i,n)}byCustomRefArray(e,t,r,i,n){if(n)throw new Error("static is not supported for @State.byCustomRefArray");return mt.prototype.byCustomRefArray.call(this,e,t,r,i,n)}byRefMap(e,t,r,i,n){if(n)throw new Error("static is not supported for @State.byRefMap");return mt.prototype.byRefMap.call(this,e,t,r,i,n)}mutable(e,t){e.__allowMutableProperties=e.__allowMutableProperties||{},e.__allowMutableProperties[t]={name:t}}wrapArray(e,t,r){var i=new this._arrayType(e);return i._parent=t,i._name=r,i._linkItems(),i}wrapMap(e,t,r){var i=new this._mapType(e);return i._parent=t,i._name=r,i._linkItems(),i}},(0,i.Z)(Sa.prototype,"byRefArray",[_a],Object.getOwnPropertyDescriptor(Sa.prototype,"byRefArray"),Sa.prototype),(0,i.Z)(Sa.prototype,"byCustomRefArray",[wa],Object.getOwnPropertyDescriptor(Sa.prototype,"byCustomRefArray"),Sa.prototype),(0,i.Z)(Sa.prototype,"byRefMap",[Pa],Object.getOwnPropertyDescriptor(Sa.prototype,"byRefMap"),Sa.prototype),(0,i.Z)(Sa.prototype,"mutable",[Aa],Object.getOwnPropertyDescriptor(Sa.prototype,"mutable"),Sa.prototype),(0,i.Z)(Sa.prototype,"wrapArray",[xe.Z],Object.getOwnPropertyDescriptor(Sa.prototype,"wrapArray"),Sa.prototype),(0,i.Z)(Sa.prototype,"wrapMap",[xe.Z],Object.getOwnPropertyDescriptor(Sa.prototype,"wrapMap"),Sa.prototype),Sa)("State");var Da,Ra,ja,Za,Na,Fa,La,Ma,Ua,$a,za,Ha,Ja,qa,Va,Ba,Wa,Ga,Xa,Ka,Ya,Qa,el,tl,rl,il,nl,sl,ol,al,ll,ul,cl,dl,hl,pl,fl,gl,ml,yl,vl,bl,_l,wl,Pl,Al,Sl,xl,Cl;let Ol=(Da=va({mutable:!0}),Ra=Ia.byVal,ja=Ia.byVal,Za=Ia.byVal,Na=Ia.byVal,Da((La=class extends ya{constructor(){super(...arguments),(0,C.Z)(this,"showTitle",Ma,this),(0,C.Z)(this,"showAuthor",Ua,this),(0,C.Z)(this,"showCover",$a,this),(0,C.Z)(this,"cover",za,this)}},Ma=(0,i.Z)(La.prototype,"showTitle",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ua=(0,i.Z)(La.prototype,"showAuthor",[ja],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$a=(0,i.Z)(La.prototype,"showCover",[Za],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),za=(0,i.Z)(La.prototype,"cover",[Na],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"background"}}),Fa=La))||Fa),kl=(Ha=va({mutable:!0}),Ja=Ia.byVal,qa=Ia.byVal,Va=Ia.byVal,Ha((Wa=class extends ya{constructor(){super(...arguments),(0,C.Z)(this,"version",Ga,this),(0,C.Z)(this,"themeId",Xa,this),(0,C.Z)(this,"styleId",Ka,this)}},Ga=(0,i.Z)(Wa.prototype,"version",[Ja],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Xa=(0,i.Z)(Wa.prototype,"themeId",[qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Gallery"}}),Ka=(0,i.Z)(Wa.prototype,"styleId",[Va],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Dark"}}),Ba=Wa))||Ba),El=(Ya=va({mutable:!0}),Qa=Ia.byRef(Ol),el=Ia.byRef(kl),Ya((rl=class extends ya{constructor(){super(...arguments),(0,C.Z)(this,"options",il,this),(0,C.Z)(this,"explore",nl,this)}},il=(0,i.Z)(rl.prototype,"options",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nl=(0,i.Z)(rl.prototype,"explore",[el],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tl=rl))||tl),Tl=(sl=va({mutable:!0}),ol=Ia.byVal,sl((ll=class extends ya{constructor(){super(...arguments),(0,C.Z)(this,"author",ul,this)}},ul=(0,i.Z)(ll.prototype,"author",[ol],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),al=ll))||al),Il=(cl=va({mutable:!0}),dl=Ia.byRef(El),hl=Ia.byRef(Tl),cl((fl=class extends ya{constructor(){super(...arguments),(0,C.Z)(this,"presentation",gl,this),(0,C.Z)(this,"story",ml,this)}convertToDisplay(){this.presentation.explore.version=1,this.story.author||(this.story.author=Vi.account.getDefaultShareAuthor())}revertFromDisplay(){1===this.presentation.explore.version&&(this.presentation=null)}},gl=(0,i.Z)(fl.prototype,"presentation",[dl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ml=(0,i.Z)(fl.prototype,"story",[hl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.Z)(fl.prototype,"convertToDisplay",[ba],Object.getOwnPropertyDescriptor(fl.prototype,"convertToDisplay"),fl.prototype),(0,i.Z)(fl.prototype,"revertFromDisplay",[ba],Object.getOwnPropertyDescriptor(fl.prototype,"revertFromDisplay"),fl.prototype),pl=fl))||pl),Dl=(yl=Ia.byRef(Il),va((bl=class extends ya{constructor(){super(...arguments),(0,C.Z)(this,"payload",_l,this)}},_l=(0,i.Z)(bl.prototype,"payload",[yl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vl=bl))||vl),Rl=(wl=yt.byVal,Pl=class extends tr{constructor(){super(...arguments),(0,C.Z)(this,"name",Al,this)}},Al=(0,i.Z)(Pl.prototype,"name",[wl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pl),jl=(Sl=yt.byRef(Rl),xl=class extends sr{constructor(){super(...arguments),(0,C.Z)(this,"payload",Cl,this)}},Cl=(0,i.Z)(xl.prototype,"payload",[Sl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xl);var Zl,Nl,Fl,Ll,Ml,Ul,$l=r(982201);let zl=(Zl=class extends ar{constructor(){super(...arguments),(0,C.Z)(this,"albumCoverDirty",Nl,this),(0,C.Z)(this,"_coverAsset",Fl,this),(0,C.Z)(this,"_coverFallbackAsset",Ll,this),(0,C.Z)(this,"_coverPromise",Ml,this),(0,C.Z)(this,"_defaultAssetOptions",Ul,this)}_getAttributesMiddleware(){return null}_createAttributes(e){if("collection"===e.subtype){if(null!=this._attributes){ua.start("@@REINIT");const t=this._attributes.fromJSON(e);return ua.end("@@REINIT"),t}return new Dl(e,this._getAttributesMiddleware())}return super._createAttributes(e)}setAttributes(e){var t,r,i;super.setAttributes(e),null!==(t=this._defaultAssetOptions)&&void 0!==t||(this._defaultAssetOptions=this._createDefaultAssetOptions()),this.albumCoverDirty=!0,null!==(r=this.cachedAssets)&&void 0!==r||(this.cachedAssets={}),null!==(i=this.cachedAssetCountPromises)&&void 0!==i||(this.cachedAssetCountPromises={})}_createDefaultAssetOptions(){return null}setDefaultAssetOptions(e){this._defaultAssetOptions=e}get assets(){return this.getAssets(this._defaultAssetOptions)}set assets(e){this._assets=e}hasAssetLoaded(e){return null!=this.assets.get(e)}get albumCover(){var e;return null!==(e=this._coverAsset)&&void 0!==e?e:this._coverFallbackAsset}isFallbackCover(){return null==this._coverAsset&&null!=this._coverFallbackAsset}get filtersWereConverted(){return null!=this.attributes.migratedToUnfilteredAlbum}get migratedToUnfilteredAlbumId(){return this.attributes.migratedToUnfilteredAlbum?.id}getUserSetCoverId(){return this.attributes.payload.cover?.id}get journalHero(){return this._coverAsset}getSpace(){return null}_setCover(e){this._coverAsset=e,this._coverFallbackAsset=null,this.albumCoverDirty=!1}isLoadingCover(){return null!=this._coverPromise}isCoverLoaded(){return!this.albumCoverDirty}hasCover(){return null!=this.getAttribute("payload").cover}async loadAlbumCoverJP(){return await this.loadAlbumCoverP()}loadAlbumCoverP(){if(!this.albumCoverDirty)return $l.Deferred().resolve();if(null!=this._coverPromise)return this._coverPromise;const e=this.linkHref("/rels/cover_asset");if(null!=e){const t=new this.coverClass(e);this._coverPromise=t.initializedP().done((e=>{this._setCover(e)}))}else this._coverPromise=this.getOldestAssetP().done((e=>{this._setCover(null),this._coverFallbackAsset=e}));return this._coverPromise.fail((()=>{this._setCover(null)})).always((()=>{this._coverPromise=null}))}getAssets(e){var t,r;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=oi()(e);null!==(r=(t=this.cachedAssets)[n])&&void 0!==r||(t[n]=new this.assetListClass(`${this.href}/assets`,e));const s=this.cachedAssets[n];return s.parentAlbum=this,i&&s.reset(),s}markAssetsDirty(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.albumCoverDirty=!0),this.cachedAssetCountPromises={},this.assets.markDirty();for(const e in this.cachedAssets){this.cachedAssets[e].markDirty()}}markAssetsExceptDefaultDirty(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.albumCoverDirty=!0),this.cachedAssetCountPromises={};const e=oi()(this._defaultAssetOptions);for(const t in this.cachedAssets){const r=this.cachedAssets[t];t!==e&&r.markDirty()}}markCustomOrderedAssetsDirty(e){const t=oi()(this._defaultAssetOptions);for(const r in this.cachedAssets){const i=this.cachedAssets[r];r===t&&e||"-"===i.options.order_after&&i.markDirty()}}markFilteredAssetsDirty(){this.cachedAssetCountPromises={},!0===this.assets?.options.album_filters&&this.assets.markDirty();for(const e in this.cachedAssets){const t=this.cachedAssets[e];!0===t.options.album_filters&&t.markDirty()}}toString(){return this.getName()}getName(e){let{name:t}=this.attributes.payload;return null!=e&&t.length>e&&(t=t.substr(0,e)),t}setPayloadStory(e){var t;const r=this.attributes.payload?.story||{};null!==(t=this._pooledStorySettings)&&void 0!==t||(this._pooledStorySettings={}),this._pooledStorySettings=$l.extend(r,this._pooledStorySettings,e),null!=this._setPlayloadStoryTimeout&&clearTimeout(this._setPlayloadStoryTimeout),this._setPlayloadStoryTimeout=setTimeout((()=>{this._setPayloadStory(),this._setPlayloadStoryTimeout=null}),50)}_setPayloadStory(){this.updateAttributesP("setPayloadStory",{payload:{story:this._pooledStorySettings}}).fail((()=>{null!=this.attributes.payload?.story&&(this.attributes.payload.story.title=this.attributes?._originalSourceJson.payload?.story?.title,this.attributes.payload.story.author=this.attributes?._originalSourceJson.payload?.story?.author,this.attributes.payload.story.description=this.attributes?._originalSourceJson.payload?.story?.description)})),this._pooledStorySettings=null}getPayloadStory(){var e,t,r;const i=this.attributes.payload?.story,n=null!==(e=i?.title)&&void 0!==e?e:this.getName(),s=null!==(t=i?.author)&&void 0!==t?t:"";return{title:n,description:null!==(r=i?.description)&&void 0!==r?r:"",author:s}}getPresentationFilters(){var e;return null!==(e=this.attributes.payload.presentation?.filters)&&void 0!==e?e:{}}getPresentationFilterPickedOnly(){return!0===this.getPresentationFilters().pickedOnly}getPresentationFilterRatingAtLeast(){var e;return null!==(e=this.getPresentationFilters().ratingAtLeast)&&void 0!==e?e:0}hasPresentationFiltersApplied(){return this.getPresentationFilterPickedOnly()||this.getPresentationFilterRatingAtLeast()>0}getPresentationStyleId(){return this.attributes.payload.presentation?.explore?.styleId||""}get name(){return this.getName()}get title(){return this.attributes.payload?.story?.title||""}hasTitle(){return null!=this.attributes.payload?.story?.title}getShareTitle(){return this.hasTitle()&&this.title.length>0?this.title:this.name}get author(){return this.attributes.payload?.story?.author||""}get showAuthor(){return!0===this.attributes.payload?.presentation?.options?.showAuthor}get showTitle(){return!0===this.attributes.payload?.presentation?.options?.showTitle}hasNonBlankAuthor(){return this.hasAuthor()&&""!==this.author.trim()}get description(){return this.attributes.payload?.story?.description||""}set title(e){var t,r;null!=this.attributes.payload&&(null!==(r=(t=this.attributes.payload).story)&&void 0!==r||(t.story={}));this.attributes.payload?.story.title!==e&&(null!=this.attributes.payload&&(this.attributes.payload.story.title=e),this.setPayloadStory({title:e}))}set author(e){var t,r;null!=this.attributes.payload&&(null!==(r=(t=this.attributes.payload).story)&&void 0!==r||(t.story={}));this.attributes.payload?.story.author!==e&&(null!=this.attributes.payload&&(this.attributes.payload.story.author=e),this.setPayloadStory({author:e}))}set description(e){var t,r;null!=this.attributes.payload&&(null!==(r=(t=this.attributes.payload).story)&&void 0!==r||(t.story={}));this.attributes.payload?.story.description!==e&&(null!=this.attributes.payload&&(this.attributes.payload.story.description=e),this.setPayloadStory({description:e}))}hasAuthor(){return null!=this.attributes.payload.story?.author}getNewestAssetP(){const e={captured_before:me,embed:"asset",subtype:"image;video",limit:1};return this.getAssets(e,!0).firstP()}getOldestAssetP(){const e={captured_after:fe,embed:"asset",subtype:"image;video",limit:1};return this.getAssets(e,!0).firstP()}getFirstAssetP(){return this.getAssets({order_after:"-",embed:"asset",subtype:"image;video",limit:1},!0).firstP()}getLastOrderedAssetP(){const e={order_before:"",captured_before:me,embed:"asset",subtype:"image;video;layout_segment",limit:1};return this.getAssets(e,!0).firstP()}getSubtype(){return this.attributes.subtype||""}getParentId(){return this.attributes.payload?.parent?.id}getHideInOrganize(){return this.attributes.payload?.hideInOrganize||!1}hasDisplaySettings(){return"collection"===this.getSubtype()}},Nl=(0,i.Z)(Zl.prototype,"albumCoverDirty",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Fl=(0,i.Z)(Zl.prototype,"_coverAsset",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ll=(0,i.Z)(Zl.prototype,"_coverFallbackAsset",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ml=(0,i.Z)(Zl.prototype,"_coverPromise",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ul=(0,i.Z)(Zl.prototype,"_defaultAssetOptions",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zl);zl.prototype.attributeClass=jl,zl.prototype.assetListClass=null;const Hl=zl;var Jl,ql,Vl=r(982201);ql=function(e){return e.asset.base=e.base,e.asset.spaces=e.spaces},Jl=class extends jo{constructor(e){var t;ql(e),super(e.asset),this.albumAssetRelativeUrl=e.links.self.href,this.order=null!=(t=e.payload)?t.order:void 0}refreshP(){var e,t;return null!=this.albumAssetRelativeUrl?(e={embed:"spaces;asset;user"},t=this._linkBase.fullHref(this.albumAssetRelativeUrl)+"?"+Vl.param(e),this.requestP("GET",t).done((e=>{var t;return this.order=null!=(t=e.payload)?t.order:void 0,ql(e),this.setAttributes(e.asset)}))):super.refreshP()}getOrder(){return this.order||""}setOrder(e){return this.order=e}};const Bl=Jl;var Wl=r(982201);const Gl=function(){class e extends fn{modelsByCreatedP(){return this.allP().then((e=>(e.sort((function(e,t){return aa.localeCompare(t.getBestCreatedDateAttribute(),e.getBestCreatedDateAttribute())})),e)))}modelsByCreated(){var e;return(e=this.models.slice(0)).sort((function(e,t){return aa.localeCompare(t.getBestCreatedDateAttribute(),e.getBestCreatedDateAttribute())})),e}async modelsByUpdatedJP(){return await this.allJP(),this.modelsByUpdated()}modelsByUpdated(){var e;return(e=this.models.slice(0)).sort((function(e,t){return aa.localeCompare(t.getBestUpdatedDateAttribute(),e.getBestUpdatedDateAttribute())})),e}modelsByName(){var e;return(e=this.models.slice(0)).sort(aa.localeCompare),e}getCreateHref(){return`${this.href}/${this.createUuid()}`}createP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?(null==t.payload&&(t.payload={}),t.payload.name=e):t={subtype:"collection",payload:{name:e}},"collection"===t.subtype?super.createP(this.getCreateHref(),t).then((e=>(e.convertToDisplay(),e))):super.createP(this.getCreateHref(),t)}createWithAssetsP(e,t,r){var i,n,s;return n=Wl.Deferred(),i="string"==typeof t||t instanceof String?{subtype:t}:t,r.length>0&&("string"==typeof r[0]||r[0]instanceof String)?(s=!1,!1):(s=!0,r[0]instanceof Bl),this.createP(e,i).then((e=>{var t;return t=s?r.map((function(e){return e.id})):r,e.assets.addAssetIdsP(t).done((()=>n.resolve(e))).fail((()=>n.reject("addAssetsToAlbumFailure")))}),(()=>n.reject("albumCreationFailure"))),n.promise()}}return e.prototype.model=Hl,e.prototype.modelName="Album",e}.call(void 0),Xl=e=>{let t;const r=(i,n,s,o)=>{const a=t,l=a.length,u=i.toJSON();if(c=o,d=u,JSON.stringify(c)===JSON.stringify(d))return a.splice(0,l);var c,d;const h=e.requestP("POST",e.href,JSON.stringify(i.toJSON(!1)));h.done((()=>{a===t&&(a.splice(0,l),ua.start("@@UPDATE"),i.fromJSON(u),ua.end("@@UPDATE"),a.length>0&&r(i,n,s,u))})),h.fail((()=>{if(a===t){a.splice(0,l),ua.start("@@REVERT"),i.fromJSON(o);for(const e of a){const{action:t,payload:r}=e;i.dispatch(t,...r)}ua.end("@@REVERT"),a.length>0&&r(i,n,s,o)}}))};return(e,i,n,s)=>{if("@"===i[0])"@@INIT"!==i&&"@@REINIT"!==i||(t=[]);else{if(0===t.length){const t=e.toJSON(),o=s();return r(e,i,n,t),o}t.push({action:i,payload:n})}return s()}};var Kl;const Yl=Kl=function(){var e,t;let r=(e=class extends fn{constructor(e,r){n.Z.is_enabled("debug_force_show_error_assets")&&"incomplete"===(null!=r?r.exclude:void 0)&&delete r.exclude,super(e,r),(0,C.Z)(this,"haveNonOwnerAssets",t,this),null!=this.options.captured_before&&(this.nextPageLink="prev")}_add(e,t){return null!=e.importedByUser&&(this.haveNonOwnerAssets=!0),super._add(e,t)}_parse(e){var t;return t=super._parse(e),null!=this.options.captured_before&&t.reverse(),t}getTotalAesthetic(e){var t,r,i,s,o,a,l,u;for(u=0,i=0,s=(o=this.models).length;i<s;i++)null!=(null!=(a=(t=o[i]).attributes)&&null!=(l=a.payload)?l.aesthetics:void 0)&&(u+=t.attributes.payload.aesthetics[e]);return r=u/this.models.length,n.Z.is_enabled("debug")&&console.log(`Total ${e} is ${u}, avg ${r.toFixed(1)}`),u}getAestheticStats(){var e,t,r,i;for(i={},t=0,r=Po.length;t<r;t++)i[e=Po[t]]=this.getTotalAesthetic(e);return i}get displayEmpty(){return this.modelsBindable.every((function(e){return e.isLayoutSegment()}))}get displayLength(){return this.modelsBindable.reduce(((e,t)=>t.isLayoutSegment()?e:e+1),0)}async nextDisplayIndexJP(e){var t,r;return r=e+1,this.finished||r<this.length?(null!=(t=this.at(r))?t.isLayoutSegment():void 0)?this.nextDisplayIndexJP(r):null!=t?r:null:(await this.fetchJP(),this.nextDisplayIndexJP())}prevDisplayIndex(e){var t,r;for(r=e-1;r>=0&&(null!=(t=this.at(r))?t.isLayoutSegment():void 0);)r--;return null!=t?r:null}getAssetSectionText(e,t){var r,i,n,s;if(null==e)return[null,null];for(i=this.index(e.id),--i;i>=0&&!(n=this.at(i)).isLayoutSegment();)--i;return(null!=n?n.isLayoutSegment():void 0)&&(s=n.title,r=n.description),i<=0&&((null!=s?s.length:void 0)>0||(s=t)),[s,r]}},t=(0,i.Z)(e.prototype,"haveNonOwnerAssets",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.Z)(e.prototype,"displayEmpty",[wn.Z],Object.getOwnPropertyDescriptor(e.prototype,"displayEmpty"),e.prototype),(0,i.Z)(e.prototype,"displayLength",[wn.Z],Object.getOwnPropertyDescriptor(e.prototype,"displayLength"),e.prototype),e);return r.prototype.model=So,r.prototype.modelName="Asset",r}.call(void 0);Kl.defaultPayloadForNewAsset=function(e,t){var r;return{payload:{userCreated:r=e.toISOString(),userUpdated:r,importSource:{importedOnDevice:null!=t?t:pe,importTimestamp:r}}}},Kl.defaultPayloadForUpload=function(e,t,r){let{file:i,payload:s}=e;var o,a;return(a=Kl.defaultPayloadForNewAsset(t,r)).payload.importSource.fileSize=i.size,a.payload.importSource.fileName=i.name,n.Z.is_enabled("upload_async")&&!gr.isVideo(i)&&(o=As.VERSION,a.payload.develop={crsVersion:o}),null!=s&&ee()(a.payload,s),a};class Ql extends ar{matchesSyncChange(e){if("error"===this.getType())return e.id===this.getSourceId();if(this.getType()!==e.type)return!1;if("asset"===e.type){if("delete"===e.action)return this.isDeleted()&&this.getChangedId()===e.id;if("create"===e.action)return this.isCreated()&&!this.isDeleted()&&this.getChangedId()===e.id;if("update"===e.action)return this.getChangedId()===e.id&&this.attributes.revision_ids.includes(e.revision_id)}return!1}isCatalogUpdateError(){return"error"===this.getType()}isStorageExceededError(){return"StorageExceededError"===this.getSubtype()}getType(){return this.attributes.type}getSubtype(){return this.attributes.subtype}isCreated(){return null!=this.attributes.created}isDeleted(){return!0===this.attributes.deleted}getChangedId(){return this.attributes.id}getSourceId(){return this.attributes?.source?.id}}var eu,tu,ru;let iu=(eu=k(500),tu=class extends ye{get isSyncing(){return this.pendingRequestCount>0}constructor(e){super(e),(0,C.Z)(this,"pendingRequestCount",ru,this),V.on("requests-idle",(()=>{this.assetMap={}})),this.pendingRequestCount=0}setAssetFlagJP(e,t){this._initSyncUpdate();const r=this._makeAssetPayloadUpdateData(e);return r.payload.reviews={[N.Z.account.id]:{flag:t,date:r.updated}},this.assetUpdateQueue.push(r),e.optimisticUpdatePayload(r.payload,r.revision_id),this._doSyncUpdate(),this.syncPromise}_removeExistingAssetUpdate(e,t){return this.assetUpdateQueue=this.assetUpdateQueue.filter((r=>!(r=>r.id===e.id&&r.payload?.[t])(r)))}setAssetRatingJP(e,t){this._initSyncUpdate();const r=this._makeAssetPayloadUpdateData(e);return r.payload.ratings={[N.Z.account.id]:{rating:t,date:r.updated}},this.assetUpdateQueue.push(r),e.optimisticUpdatePayload(r.payload,r.revision_id),this._doSyncUpdate(),this.syncPromise}flagManyAssetsJP(e,t){for(const r of e)this.setAssetFlagJP(r,t);return this.syncPromise}deleteManyAssetIdsJP(e){for(const t of e)this.deleteAssetIdJP(t);return this.syncPromise}restoreManyAssetIdsJP(e){for(const t of e){this.restoreAssetIdJP(t);const e={id:t,action:"delete",type:"asset"};this._addExpectedSyncUpdate(e)}return this.syncPromise}deleteAssetIdJP(e){const t={id:e,revision_id:`${this.createUuid()}`,action:"delete",type:"asset"};return this._addAssetDeleteJP(t)}restoreAssetIdJP(e){const t={id:`${this.createUuid()}`,revision_id:`${this.createUuid()}`,type:"asset",action:"create",restore_from:{id:e}};return this._addAssetRestoreJP(t)}_makeAssetPayloadUpdateData(e,t,r){const i=(new Date).toISOString(),n={id:e.id,updated:i,revision_id:`${this.createUuid()}`,action:"update",type:"asset",if_match:e.latestRevision(),payload:{userUpdated:i}};return this.assetMap[e.id]=e,n}_initSyncUpdate(){null==this.assetUpdateQueue&&(this.assetUpdateQueue=[],this.assetMap={},this.syncPromise=new Promise(((e,t)=>{this.syncResolve=e,this.syncReject=t})))}_addAssetDeleteJP(e){return this._initSyncUpdate(),this.assetUpdateQueue.push(e),this._doSyncUpdate(),this.syncPromise}_addAssetRestoreJP(e){return this._initSyncUpdate(),this.assetUpdateQueue.push(e),this._doSyncUpdate(),this.syncPromise}_addExpectedSyncUpdate(e){return e._excludeFromRequest=!0,this.assetUpdateQueue.push(e),this.syncPromise}_refreshFailedAssets(e){for(const t of e)"asset"===t.type&&"update"===t.action&&this.get(t.id)?.refreshP()}_readSyncForSuccessJP(e,t,r){return new Promise(((i,n)=>{let s=t,o=!0,a=0;r.catch((()=>o=!1));var l=e=>{this.requestP("GET",e).then((e=>{if(!o)return n("sync requests failed while reading for success");const t=new ar(e);for(const e of t.attributes.updates){var r=new Ql(e);s=s.filter((e=>{const t=r.matchesSyncChange(e);if(t){r.isStorageExceededError()&&(a+=1)}return!t}))}0===s.length?i():setTimeout((()=>l(t.linkHref("next"))),1e3)})).fail(((e,t,r)=>{n([e,t,r]),this._refreshFailedAssets(s),this.reportOzFailure("syncReadFailure",e,t,r)}))};l(e,0)}))}get(e){return this.assetMap[e]}_batchRequested(){this.successCheckAssetId=this.successCheckP=this.assetUpdateQueue=this.syncResolve=this.syncReject=this.syncPromise=null}_makeBatchSyncRequestJP(e){return new Promise(((t,r)=>this.requestP("POST",this.href,JSON.stringify(e)).done((e=>t(e))).fail((()=>r()))))}async _doSyncUpdate(){const{syncPromise:e}=this,t=this.syncResolve,r=this.syncReject,i=this.assetUpdateQueue,s=i.filter((e=>!e._excludeFromRequest)),{successCheckP:o}=this;this._batchRequested(),++this.pendingRequestCount;const a=[];let l=0;for(;l<s.length;)a.push(s.slice(l,l+100)),l+=100;let u=a.shift();try{const s=await this._makeBatchSyncRequestJP(u),o=new ar(s).linkHref("/rels/future_updates");for(this._readSyncForSuccessJP(o,i,e).then((()=>{n.Z.is_enabled("debug")&&console.log("sync complete"),t()})).catch((e=>{let[t]=e;n.Z.is_enabled("debug")&&console.warn("sync failed"),r([t])})).finally((()=>{--this.pendingRequestCount}));a.length>0;)u=a.shift(),await this._makeBatchSyncRequestJP(u)}catch(e){for(const e of u)this.get(e.id)?.refreshP();r()}}},ru=(0,i.Z)(tu.prototype,"pendingRequestCount",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.Z)(tu.prototype,"_doSyncUpdate",[eu],Object.getOwnPropertyDescriptor(tu.prototype,"_doSyncUpdate"),tu.prototype),tu);var nu=r(982201);const su=function(){class e extends Yl{getTotalCountHref(){var e;return e={},null!=this.options.exclude&&(e.exclude=this.options.exclude),null!=this.options.subtype&&(e.subtype=this.options.subtype),`${this.href}/count?${nu.param(e)}`}debugCreateEmptyAssetP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r;return r=nu.Deferred(),this.pageP(0).then((()=>{var i,n,s,o,a;return s={size:1234,name:"DEBUG_LONGFILENAMEFOROVERFLOWTESTING.JPG"},(o=Yl.defaultPayloadForUpload({file:s},e,t)).subtype="image",o.payload.captureDate=e.toISOString(),o.payload.importSource.importedBy=N.Z.account.id,o.payload.importSource.originalWidth=o.payload.importSource.originalHeight=Math.floor(2264*Math.random())+1e3,n=this.createUuid(),i=`${this.href}/${n}`,a=`${i}/revisions/${this.createUuid()}`,this.requestP("PUT",a,JSON.stringify(o)).done((e=>r.resolve(a,n)))})).fail((()=>r.reject())),r.promise()}createNewEmptyAssetP(e,t,r){var i;return i=nu.Deferred(),null==r?i.reject():(this.pageP(0).then((()=>{var n,s,o,a;return(o=Yl.defaultPayloadForUpload(e,r)).subtype=gr.ozSubtype(e.file),o.payload.captureDate="0000-00-00T00:00:00",o.payload.importSource.importedBy=t.id,null!=e.sha256&&(o.payload.importSource.sha256=e.sha256),s=this.createUuid(),n=`${this.href}/${s}`,a=`${n}/revisions/${this.createUuid()}`,this.requestP("PUT",a,JSON.stringify(o)).done((e=>i.resolve(a,s)))})).fail((()=>i.reject())),i.promise())}async debugCopyAssetAsProxyOnlyJP(e){var t,r,i,n,s,o,a;return e.hasExternalDevelopSettings()?Promise.reject("no support for external develop settings"):((n=e.cloneAttributes().payload).importSource.willNotUploadMaster=!0,(i=ee()({},{payload:n},Yl.defaultPayloadForNewAsset(new Date))).subtype=e.attributes.subtype,i.captureDate=e.attributes.captureDate,r=this.createUuid(),o=`${t=`${this.href}/${r}`}/revisions/${a=this.createUuid()}`,await this.requestJP("PUT",o,JSON.stringify(i)),s=`${t}/revisions/${a}/proxies/${this.createUuid()}`,await this.requestJP("PUT",`${s}`,JSON.stringify({file_href:e.linkFullPath("/rels/proxy_type/2560")}),{headers:{"X-Generate-Renditions":"all","X-Async-Copy":!0}}),t)}deleteManyP(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var i,n,s;for(n=void 0,i=0;i<e.length;)s=e.slice(i,i+=100),n=n?n.pipe((e=>()=>this._deleteManyP(e,t))(s)):this._deleteManyP(s,t);return n.then((()=>{var t,i,n,s,o,a,l,u,c;for(s=[],o=0,l=e.length;o<l;o++)i=e[o],null!=(n=this.index(i))&&s.push(n);for(s.sort((function(e,t){return e-t})),c=0,t=a=0,u=s.length;a<u;t=++a)n=s[t],this._models.splice(n-c++,1);return null!=this.totalCount&&r&&(this.totalCount-=e.length),s.length>0&&this._reindex(),s}))}deleteManyJP(e,t){var r;return r=this._deleteManyJP(e,t),this._deleteMany(e),r}restoreManyJP(e,t){return this._restoreManyJP(e,t)}_deleteManyJP(e,t){return N.Z.catalogContext.catalogUpdates.deleteManyAssetIdsJP(e)}_restoreManyJP(e,t){return N.Z.catalogContext.catalogUpdates.restoreManyAssetIdsJP(e)}_deleteManyP(e,t){return this.requestP("DELETE",this.href,`asset_ids=${e.join("%3B")}`,{contentType:"application/x-www-form-urlencoded;charset=UTF-8"}).fail(((e,r,i)=>{var n;return n=null!=t?`${t}Failure`:"deleteAssetsFailure",this.reportOzFailure(n,e,r,i)}))}}return e.prototype.model=jo,e.prototype.modelName="CatalogAsset",e}.call(void 0);const ou=function(){class e extends Lo{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{embed:"asset;spaces;user"})}}return e.prototype.model=Bl,e}.call(void 0);var au=r(982201),lu=[].indexOf;const uu=function(){class e extends su{isOrdered(){return 0===this.length||""!==this.at(0).getOrder()}addAssetsP(e){var t,r;return r=function(){var r,i,n;for(n=[],r=0,i=e.length;r<i;r++)t=e[r],n.push(t.id);return n}(),this._addAssetIdsP(r)}addAssetIdsP(e){return this._addAssetIdsP(e)}addOrderedAssetIdsP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._doInsertIdsOrderingP(e,t,r)}hasOrdering(e){var t,r,i,n;for(t=r=0,i=e.length;r<i;t=++r)if(e[t].id!==(null!=(n=this.at(t))?n.id:void 0))return!1;return!0}addOrderedAssetsP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._doOrderingP(e,t,r)}reorderAssetIdsP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var i,n;return i=function(){var t,r,i;for(i=[],t=0,r=e.length;t<r;t++)n=e[t],i.push(this.get(n));return i}.call(this),this._doOrderingP(i,t,r)}reorderAssetsP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._doOrderingP(e,t,r)}addAndReorderAssetsP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._doOrderingP(e,t,r)}_doInsertIdsOrderingP(e,t,r){var i,n,s;return!this.finished&&(r||!this.isOrdered()||t>=this.length||-1===t)?this.allP().then((()=>this._doInsertIdsOrderingP(e,t,r))):(-1===t&&(t=this.length),this.isOrdered()&&!r?null!=(n=this._getOrdersForInsert(e.length,t))?this._applyReorderDataP(e,n,[],[]):this._doInsertIdsOrderingP(e,t,!0):null==(s=this._getOrders(e.length+this.length))?(A.Z.reportFailure("albumAssetLex64ReindexFailure"),au.Deferred().reject()):(i=s.splice(t,e.length),this._applyReorderDataP(e,i,this.models,s)))}_doOrderingP(e,t,r){var i,n,s,o,a,l,u,c,d,h,p,f,g,m,y,v;if(!this.finished&&(r||!this.isOrdered()||t>=this.length))return this.allP().then((()=>this._doOrderingP(e,t,r)));for(-1===t&&(t=this.length),f=0,u=0,h=e.length;u<h;u++)i=e[u],null==this.index(i.id)&&f++;if(this.isOrdered()&&!r){if(null==(y=this._getOrdersForInsert(e.length,t)))return this._doOrderingP(e,t,!0);n=e}else{if(null==(y=this._getOrders(f+this.length)))return A.Z.reportFailure("albumAssetLex64ReindexFailure"),au.Deferred().reject();for(n=[],l=c=0,v=this.length;c<=v;l=c+=1)l===t&&n.push(...e),l<this.length&&(s=this.models[l],lu.call(e,s)<0&&n.push(s))}for(g=[],m=[],o=[],a=[],l=d=0,p=n.length;d<p;l=++d)i=n[l],null!=this.index(i.id)?(o.push(i),a.push(y[l])):(g.push(i),m.push(y[l]));return this._applyReorderDataP(g,m,o,a)}_getOrdersForInsert(e,t){var r,i;if(!(t-1>=0&&t-1<this.length&&""===(i=this.at(t-1).getOrder())||t<this.length&&""===(r=this.at(t).getOrder())))return this._getOrders(e,i,r)}_getOrders(e,t,r){var i,n,s,o,a;if(!_("getLex64Orders")){if(1===e)return null!=(s=null!=t&&null!=r?K.insertBetween(t,r,"middle"):null!=t?K.insertAfter(t,"middle"):null!=r?K.insertBefore(r,"middle"):K.MIDPOINT)?[s]:void 0;for(n=null!=t?t:null!=r?K.insertBefore(r,"middle"):K.MIDPOINT,o=[],i=1,a=e;i<=a;i+=1){if(null==(s=null!=r?K.insertBetween(n,r,"low"):K.insertAfter(n,"low")))return;o.push(s),n=s}return o}}_applyReorderDataP(e,t,r,i){var s,o,a,l,u,c,d,h,p,f,g,m,y,v,b,_,w,P,S,x;if(a=au.Deferred(),n.Z.is_enabled("debug_verbose")&&(console.log("applying reorder"),console.log(`current order: ${function(){var e,t,r,i;for(i=[],e=0,t=(r=this.models).length;e<t;e++)s=r[e],i.push(s.getOrder());return i}.call(this).join(" ")}`),console.log(`new asset orders: ${t.join(" ")}`),console.log(`existing asset orders: ${i.join(" ")}`)),x=(new Date).toISOString(),v=!0,P=[],e.length>0)if(y=[],"string"==typeof(u=e[0])||u instanceof String)v=!1,(y=e).length<=5?(w=this._addAssetIdsP(y,t,x).then((()=>new ou(this.href,y).loadP())).then((e=>{var t,r;for(r in t=e.assets)s=t[r],this._add(s);return a.notify("optimistically-applied"),e.error_count>0&&(A.Z.reportFailure("assetInsertFailure"),n.Z.is_enabled("debug")&&console.log(`${e.error_count} failures inserting ${y.length} assets`,e.errors)),this._sortByOrder()})),P.push(w)):(v=!1,P.push(this._addAssetIdsP(y,t,x)));else{for(c=d=0,f=e.length;d<f;c=++d)(s=e[c]).setOrder(t[c]),this._add(s),y.push(s.id);a.notify("optimistically-applied"),P.push(this._addAssetIdsP(y,t,x))}if(r.length>0){for(c=h=0,g=r.length;h<g;c=++h)(s=r[c]).order=i[c];o=r.map((function(e){return{id:e.id,payload:{userUpdated:x,order:e.order}}})),r.length>10?P.push(this._debouncedBulkUpdateAttributesJP("updateOrder",o)):P.push(this._bulkUpdateAttributesP(o))}if(v?this._sortByOrder():this.markDirty(),n.Z.is_enabled("debug")){for(b={},null,_=0,l=0,p=0,m=(S=this.models).length;p<m;p++)null==(s=S[p]).order?n.Z.is_enabled("debug_verbose")&&console.error("Asset with null order (this is legal at the end)",s):s.order<null?(console.error("Asset out of order",s),++_):b.hasOwnProperty(s.order)&&(console.error("Duplicate asset order",s.order,s),++l),b[s.order]=!0;_>0&&A.Z.report("albumAssetOutOfOrder",{count:_}),l>0&&A.Z.report("albumAssetDuplicateOrder",{count:l})}return au.when(...P).then(a.resolve).fail(a.reject),a.promise()}_sortByOrder(){return this.modelsBindable.sort((function(e,t){var r,i,n,s,o,a;return(n=e.getOrder())!==(a=t.getOrder())?""===n?1:""===a?-1:n>a?1:-1:(r=e.payload().captureDate)!==(s=t.payload().captureDate)?r>s?1:-1:(i=e.attributes.created)>(o=t.attributes.created)?1:i<o?-1:0})),this._reindex()}deleteAssetsP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r;return r=e.map((function(e){return e.id})),this.deleteAssetIdsP(r,t)}deleteAssetIdsP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r,i,n,s;for(n=0,s=e.length;n<s;n++)r=e[n],null!=(i=this.index(r))&&this._delete(i);return null!=t?t.then((()=>this.deleteManyP(e,"removeAssetsFromAlbum",!1))):this.deleteManyP(e,"removeAssetsFromAlbum",!1)}async _getOrdersForAppendJP(e){var t;if(null!=this.parentAlbum){try{t=await this.parentAlbum.getLastOrderedAssetP()}catch(e){}if(null!=t&&""!==t.getOrder())return this._getOrders(e.length,t.getOrder())}}async _addAssetIdsV2JP(e,t,r){var i,n,s,o,a,l;for(null==t&&(t=await this._getOrdersForAppendJP(e)),null==r&&(r=(new Date).toISOString()),50,l=[],n=o=0,a=(s=t?e.map((function(e,r){return[e,t[r]]})):e.map((function(e){return[e]}))).length-1,50;o<=a;n=o+=50)i=s.slice(n,n+50),l.push(await this._doAddAssetIdsV2JP(i,r));return l}_addAssetIdsP(){var e,t;return t=this._addAssetIdsV2JP(...arguments),e=au.Deferred(),t.then((t=>e.resolve(...null!=t?t:[])),(t=>e.reject(...null!=t?t:[]))),e}_doAddAssetIdsP(e,t,r){var i,n;return n=au.Deferred(),i=t&&t.length===e.length?e.map((function(e,i){return{id:e,payload:{userCreated:r,userUpdated:r,order:t[i]}}})):e.map((function(e){return{id:e,payload:{userCreated:r,userUpdated:r}}})),this.requestP("PUT",this.href,JSON.stringify({resources:i})).always(((e,t)=>t>=200&&t<300||null!=e.errors&&403===t?n.resolve(e,t):n.reject(e,t))),n.promise()}_doAddAssetIdsV2JP(e,t){return this.safeToJSPromise(this._doAddAssetIdsV2P(e,t))}_doAddAssetIdsV2P(e,t){var r,i;return i=au.Deferred(),r=e.map((function(e){var r,i,n;return[i,n]=e,r={id:i,payload:{userCreated:t,userUpdated:t}},null!=n&&(r.payload.order=n),r})),this.requestP("PUT",this.href,JSON.stringify({resources:r})).always(((e,t)=>t>=200&&t<300||null!=e.errors&&403===t?i.resolve(e,t):i.reject(e,t))),i.promise()}getTotalCountHref(){var e;return!0===this.options.album_filters?null:(e={},null!=this.options.exclude&&(e.exclude=this.options.exclude),null!=this.options.subtype&&(e.subtype=this.options.subtype),`${this.href}/count?${au.param(e)}`)}_deleteManyP(e,t){return this.requestP("DELETE",this.href,`asset_ids=${e.join("%3B")}`,{contentType:"application/x-www-form-urlencoded;charset=UTF-8"}).fail(((e,r,i)=>{var n;return n=null!=t?`${t}Failure`:"deleteAssetsFailure",this.reportOzFailure(n,e,r,i)}))}_debouncedBulkUpdateAttributesJP(e,t){var r,i;return null==(r=this.debouncedRequests)[e]&&(r[e]={}),this.debouncedRequests[e].assetData=t,i=()=>(null!=this.debouncedRequests[e].timeout&&clearTimeout(this.debouncedRequests[e].timeout),this.debouncedRequests[e].timeout=setTimeout((()=>this._bulkUpdateAttributesP(this.debouncedRequests[e].assetData).done((()=>(this.debouncedRequests[e].resolve(),this.debouncedRequests[e]=null))).fail((()=>this.debouncedRequests[e].reject()))),5e3)),null!=this.debouncedRequests[e].promise?i():this.debouncedRequests[e].promise=new Promise(((t,r)=>(this.debouncedRequests[e].resolve=t,this.debouncedRequests[e].reject=r,i()))),this.debouncedRequests[e].promise}_bulkUpdateAttributesP(e){var t;return t={resources:e},this.requestP("POST",this.href,JSON.stringify(t)).then((()=>{var e,r,i,n,s,o,a;for(a=[],r=0,i=(n=t.resources).length;r<i;r++)null!=(null!=(s=(e=n[r]).payload)?s.order:void 0)?a.push(null!=(o=this.get(e.id))?o.setOrder(e.payload.order):void 0):a.push(void 0);return a}))}getReviewedAssetsP(e,t){return null!=this.proofingAssetsDeferred?this.proofingAssetsDeferred:this.proofingAssetsDeferred=this.allP().then((r=>{var i,n,s,o,a,l,u,c;for(n=[],this.proofingClientIdList=new Set,this.proofingClientList=new Set,this.selectedAssetsForFiltering=new Set,this.commentedAssetsForFiltering=new Set,this.selectedPromises=[],this.commentedPromises=[],c=r=>{var i,s;return i=r.getLikesHref(e),(s=new vn(i)).allP().then((()=>{var e,i,o,a,l;for(l=[],i=0,o=(a=s.modelsBindable.base).length;i<o;i++)e=a[i].author,this.proofingClientIdList.has(e.id)||this.proofingClientList.add(e),this.proofingClientIdList.add(e.id),e.id===t&&"all_clients"!==t?(this.selectedAssetsForFiltering.add(r),l.push(n.push(r))):l.push(void 0);return l}))},u=r=>{var i,s;return i=r.getCommentsHref(e),(s=new gn(i)).allP().then((()=>{var e,i,o,a,l;for(l=[],i=0,o=(a=s.modelsBindable.base).length;i<o;i++)e=a[i].author,this.proofingClientIdList.has(e.id)||this.proofingClientList.add(e),this.proofingClientIdList.add(e.id),e.id===t&&"all_clients"!==t?(this.commentedAssetsForFiltering.add(r),l.push(n.push(r))):l.push(void 0);return l}))},o=0,a=r.length;o<a;o++)i=r[o],t?(i.getLikesCount(e)>0&&("all_clients"===t&&(this.selectedAssetsForFiltering.add(i),n.push(i)),this.selectedPromises.push(c(i))),i.getCommentCount(e)>0&&("all_clients"===t&&(this.commentedAssetsForFiltering.add(i),n.push(i)),this.commentedPromises.push(u(i)))):(l=i.getLikesCount(e),i.isLikedByUser(e)&&(l-=1),this.reviewSelectedCount+=l,s=i.getCommentCount(e),(l>0||s>0)&&n.push(i));return this.selectAndCommentPromises=this.selectedPromises.concat(this.commentedPromises),au.when(...this.selectAndCommentPromises).always((()=>this.proofingAssetsDeferred=null)).then((function(){return n.sort((function(t,r){return r.getLikesCount(e)-t.getLikesCount(e)}))}))}))}async deleteRedundantLayoutSegmentsJP(){var e,t,r,i,n,s;for(r=new Set,n=null,t=0,i=(s=this.models).length;t<i;t++)(e=s[t]).isLayoutSegment()?(null!=n&&(n.layoutSegmentHasText?e.layoutSegmentHasText||r.add(e.id):r.add(n.id)),n=e):n=null;if(r.size>0)return await this.deleteAssetIdsP(Array.from(r))}async deleteAllLayoutSegmentsJP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t,r,i,n,s,o;for(n=[],r=i=0,s=(o=this.models).length;i<s;r=++i)t=o[r],e&&0===r||t.isLayoutSegment()&&n.push(t.id);if(n.length>0)return await this.deleteAssetIdsP(n)}validateLayoutSegmentsJP(){var e,t,r,i,n,s;for(s=[],t=r=0,i=(n=this.models).length;r<i;t=++r)(e=n[t]).isLayoutSegment()?s.push(e.migrateNameToTitleP()):s.push(void 0);return s}}return e.prototype.model=Bl,e.prototype.modelName="CatalogAlbumAsset",e.prototype.debouncedRequests={},e}.call(void 0);class cu extends Hl{setAttributes(e){return this.order=e.payload?.order,super.setAttributes(e)}markAssetsDirty(){super.markAssetsDirty()}getOrder(){return this.order||""}_getAssetsLink(){return`${this.linkHref("self")}/assets`}_refreshP(e){return e=e||`${this.href}?embed=spaces;asset`,super._refreshP(e)}}class du extends cu{_createDefaultAssetOptions(){return{embed:"spaces;asset",order_after:"-",subtype:"image;video",exclude:"incomplete"}}removeManyAssetsP(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.assets.deleteAssetsP(e,t);{let t;t=e.length>0&&("string"==typeof e[0]||e[0]instanceof String)?e:e.map((e=>e.id));const r=this.getAttribute("payload").cover?.id,i=null!=r&&t.includes(r),n=this.assets.deleteManyP(e,"removeAssetsFromAlbum");return i?n.then((()=>this.deleteAlbumCoverP())):n}}isShared(){return!0}}du.prototype.assetListClass=uu;const hu=du;var pu,fu,gu,mu,yu=r(982201);let vu=(pu=class extends fn{constructor(e){super(),this.albumsPerFetch=10,this.maxParallelFetches=5,(0,C.Z)(this,"initialized",fu,this),(0,C.Z)(this,"requestQueue",gu,this),(0,C.Z)(this,"allPProgress",mu,this),this.loadAlbumsCallback=e,this.albums=[],this.reset()}_addAssets(e){let t;for(t of e)this._add(t);this.totalCount=this.length=this._models.length}reset(){return null==this.albums?this:this._dirty?(super.reset(),this.initialized=!1,this):this}_setupFetchUrls(){this.fetchUrls=[];let e=0;for(;e<this.albums.length;){const t=Math.min(this.albums.length,e+this.albumsPerFetch),r=this.albums.slice(e,t).map((e=>e.id));this.fetchUrls.push(N.Z.catalogContext.href+`/albums/assets?album_ids=${r.join("%2C")}`),e+=this.albumsPerFetch}}_setupNextFetchUrl(){this.fetchUrl=this.fetchUrls.shift()}_fetchP(){if(null==this.fetchUrl)return yu.Deferred().reject().promise();if(this.fetching)return this.fetching;return(this.fetching=this.requestP("GET",this.fetchUrl)).always((()=>{this.fetching=void 0})).fail(((e,t,r)=>{null!=this.modelName?this.reportOzFailure(`fetchP${this.modelName}Failure`,e,t,r):this.reportOzFailure("fetchPFailure",e,t,r),this._dirty=!0})).done((e=>{const t=this._addFetchedData(e);if(this.page++,0===t.length)this.fetchUrl=void 0;else{const t=e.links?.[this.nextPageLink||"next"]?.href,r=new Se(e.base);this.fetchUrl=r.fullHref(t),null==this.fetchUrl&&this._setupNextFetchUrl()}null==this.fetchUrl&&(this.finished=!0,this.totalCount=this._models.length)}))}fetchP(){if(!this.initialized)return this.loadAlbumsCallback().then((e=>(this.albums=e,this._setupFetchUrls(),this._setupNextFetchUrl(),this.initialized=!0,this.fetchP())));if(this.finished)return yu.Deferred().reject().promise();if(this.fetching)return this.fetching.promise();const e=this.fetching=this._fetchP();return e.fail((()=>{this._dirty=!0})).always((()=>{this.fetching=void 0})),e}_addFetchedData(e){const{albums:t}=e;for(let n=0;n<t.length;n++){var r=t[n];const s=this.albums?.find((e=>e.id===r.id));if(null!=s)for(const o of r.resources){var i;o.base=e.base,i=new this.model(o,this),s.assets._add(i),n<t.length-1&&(s.assets.finished=!0),this._add(i)}}return t}_fetchAndAddAllP(e){if(null==e)return yu.Deferred().reject().promise();return this.requestWithRetryP("GET",e,void 0,void 0,1).fail(((e,t,r)=>{null!=this.modelName?this.reportOzFailure(`fetchP${this.modelName}Failure`,e,t,r):this.reportOzFailure("fetchPFailure",e,t,r),this._dirty=!0})).then((e=>{const t=e.albums.reduce(((e,t)=>e+t.resources.length),0);this.allPProgress+=e.albums.length/this.albums.length*100,n.Z.is_enabled("debug_best_photos")&&console.log(`Adding ${t} assets from ${e.albums.length} albums, ~${this.allPProgress.toFixed(0)}% done`),this._addFetchedData(e);const r=e.links?.next?.href,i=new Se(e.base).fullHref(r);return!i||this._fetchAndAddAllP(i)}))}_parallelAllP(){if(!this.initialized)return this.loadAlbumsCallback().then((e=>(this.albums=e,this._setupFetchUrls(),this.initialized=!0,this._parallelAllP())));if(this.finished)return yu.Deferred().reject().promise();this.allPProgress=0,this.requestQueue=new li(this.maxParallelFetches);const e=e=>()=>this._fetchAndAddAllP(e);for(;this.fetchUrls.length>0;){const t=this.fetchUrls.shift();this.requestQueue.enqueuePromise(e(t))}const t=this.requestQueue.promise();return t.fail((()=>{this._dirty=!0})).done((()=>{this.finished=!0})).always((()=>{this.requestQueue=null})),t}async allJP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return await this.allP(e)}allP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?this.finished?yu.Deferred().resolve(this.models.slice()).promise():this._parallelAllP().then((()=>this.allP(e))):super.allP()}totalCountP(){let e;const t=yu.Deferred(),r=[];for(e of this.albums)r.push(e.assets.totalCountP());return yu.when(...r).then((()=>{for(e of(this.totalCount=0,this.albums))this.totalCount+=e.assets.totalCount;t.resolve(this.totalCount)})).fail((()=>{t.reject()})),t.promise()}get hasLoadingProgress(){return null!=this.requestQueue}createP(e,t){n.Z.is_enabled("debug")&&console.log("createP is unimplemented in this paged list")}_addCreatedP(e){n.Z.is_enabled("debug")&&console.log("_addCreatedP is unimplemented in this paged list")}deleteP(e){n.Z.is_enabled("debug")&&console.log("deleteP is unimplemented in this paged list")}},fu=(0,i.Z)(pu.prototype,"initialized",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gu=(0,i.Z)(pu.prototype,"requestQueue",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mu=(0,i.Z)(pu.prototype,"allPProgress",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pu);vu.prototype.model=Bl,vu.prototype.modelName="CatalogAlbumAsset";const bu=function(){class e extends Gl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r;null==t&&(t={subtype:"topic",order_after:"-"}),super(e,t),r=()=>this.allP(),this.allAssets=new vu(r)}setParentAlbum(e){return this.parentAlbum=e,this}get assets(){return this.allAssets}addAlbum(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r,i,n,s,o,a;if(this.get(e.id)&&this._delete(this.index(e.id)),!t)for(t=0,r=0,i=(n=this.models).length;r<i&&!(n[r].getOrder()>e.getOrder());r++)++t;return this._models.splice(t,0,e),this._reindex(t),this.length=this.models.length,"cluster"===(null!=(s=this.parentAlbum)?s.getSubtype():void 0)?null!=(o=this.allAssets)?o.markDirty():void 0:null!=(a=this.allAssets)?a.reinitialize(this.models):void 0}getAssetPosition(e){var t,r,i,n,s,o,a;for(t=i=0,s=this.length;i<s;t=i+=1)for(r=n=0,o=(a=this.at(t)).assets.length;n<o;r=n+=1)if(a.assets.at(r).id===e)return[t,r]}getTopicAlbumContaining(e){var t,r;if([t,r]=this.getAssetPosition(e),t>=0)return this.at(t)}getAssetAt(e,t){var r;return null!=(r=this.at(e))?r.assets.at(t):void 0}getAssetPositionBefore(e){var t,r;return[r,t]=this.getAssetPosition(e),--t<0&&--r,r<0?null:[r,t]}getAssetBefore(e){var t;return(t=this.getAssetPositionBefore(e))?this.getAssetAt(...t):null}getAssetPositionAfter(e){var t,r;return[r,t]=this.getAssetPosition(e),++t>=this.at(r).length&&++r,r>=this.length?null:[r,t]}getAssetAfter(e){var t;return(t=this.getAssetPositionAfter(e))?this.getAssetAt(...t):null}markAssetsDirty(){var e,t,r,i;for(e=0,t=(r=this.models).length;e<t;e++)r[e].assets.markDirty();return null!=(i=this.allAssets)?i.markDirty():void 0}resetAssets(){var e,t,r,i,n;for(t=0,r=(i=this.models).length;t<r;t++)(e=i[t]).assets.reset(e.assets.options);return null!=(n=this.allAssets)?n.reset():void 0}areAssetsDirty(){var e,t;return null!=(e=null!=(t=this.allAssets)?t.isDirty():void 0)&&e}areAllAssetsLoaded(){var e,t;return null!=(e=null!=(t=this.allAssets)?t.finished:void 0)&&e}get totalCount(){var e;return(null!=(e=this.allAssets)?e.finished:void 0)?this.allAssets.length:0}set totalCount(e){}loadAssetsP(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this.markAssetsDirty(),this.resetAssets()),this.allAssets.allP(e)}}return e.prototype.model=cu,e.prototype.modelName="TopicAlbum",e}.call(void 0);const _u=function(){class e extends bu{getCreateHref(){return`${N.Z.catalogContext.href}/albums/${this.createUuid()}`}}return e.prototype.model=hu,e.prototype.modelName="CatalogTopicAlbum",e}.call(void 0),wu="viewer",Pu="contributor",Au="editor";var Su,xu;let Cu=(Su=class extends ar{constructor(){super(...arguments),(0,C.Z)(this,"user",xu,this)}setAttributes(e){return super.setAttributes(e),null!=e.user&&(this.user=new jr(e.user)),this}_refreshP(e){return e=e||`${this.href}?embed=user`,super._refreshP(e)}getFullName(){return this.attributes.full_name}async _setAbandonedJP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{const e={payload:{status:"abandoned"}};e.payload.userUpdated=(new Date).toISOString(),await this.requestJP("POST",this.href,JSON.stringify(e)),A.Z.report("setStatusAbandoned")}catch(t){const[r,i,s]=t,o=2;n.Z.is_enabled("debug")&&G._forceFailNextRequest&&(e=o);const a=e<o&&(0===i||i>=500);a?A.Z.report("setStatusAbandonedRetry"):this.reportOzFailure("setStatusAbandonedFailure",r,i,s);try{if(a)return this._setAbandonedJP(e+1)}catch(e){}}}async setAbandonedJP(){return await this._setAbandonedJP()}isContributorRole(){return"accepted"===this.attributes.payload.status&&this.attributes.payload.role===Pu}isEditorRole(){return"accepted"===this.attributes.payload.status&&this.attributes.payload.role===Au}canContribute(){return this.isContributorRole()||this.isEditorRole()}canEdit(){return this.isEditorRole()}get role(){return this.attributes.payload.role}},xu=(0,i.Z)(Su.prototype,"user",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Su);class Ou extends Cu{get status(){return this.attributes.payload.status}get userCreated(){return new Date(this.attributes.payload.userCreated)}async setRoleViewerJP(){return await this.updateAttributesP("setUserRoleViewer",{payload:{role:wu}})}async setRoleContributorJP(){return await this.updateAttributesP("setUserRoleContributor",{payload:{role:Pu}})}async setRoleEditorJP(){return await this.updateAttributesP("setUserRoleEditor",{payload:{role:Au}})}async setStatusRemovedJP(){return await this.updateAttributesP("setUserStatusRemoved",{payload:{status:"removed"}})}}var ku,Eu,Tu;let Iu=(ku=class extends ar{constructor(){super(...arguments),(0,C.Z)(this,"user",Eu,this),(0,C.Z)(this,"spaceUser",Tu,this)}setAttributes(e){return super.setAttributes(e),null!=e.user&&(this.user=new jr(e.user)),null!=e.space_user&&(this.spaceUser=new Ou(e.space_user)),this}_refreshP(e){return e=e||`${this.href}?embed=user`,super._refreshP(e)}get status(){return this.attributes.payload.status}get role(){if(null!=this.attributes.payload.role)return this.attributes.payload.role}async acceptJP(){const e=await this.safeToJSPromise(this.updateAttributesP("inviteRequestAccept",{payload:{status:"approved",role:"viewer"}}));let t=1e3;for(;t<64e3&&(await this.refreshP(),null==this.attributes.space_user);)t*=2;return e}async declineJP(){return await this.updateAttributesP("inviteRequestDecline",{payload:{status:"rejected"}})}async setRoleViewerJP(){return await this.updateAttributesP("inviteRoleViewer",{payload:{role:wu}})}async setRoleContributorJP(){return await this.updateAttributesP("inviteRoleContributor",{payload:{role:Pu}})}async setRoleEditorJP(){return await this.updateAttributesP("inviteRoleEditor",{payload:{role:Au}})}isSingleUse(){return"single_use"===this.attributes.subtype}isRequest(){return"request"===this.attributes.subtype}getEmail(){return this.attributes.payload?.email}},Eu=(0,i.Z)(ku.prototype,"user",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tu=(0,i.Z)(ku.prototype,"spaceUser",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ku);const Du=function(){class e extends fn{createP(e){var t;return t={subtype:"single_use",payload:{status:"open",role:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewer",email:e}},super.createP(this.getCreateHref(),t)}async createJP(e,t){return await this.createP(e,t)}getCreateHref(){return`${new URL(this.href).pathname}/${this.createUuid()}`}_deleteP(e){var t,r;return r=this.index(e),t=this.at(r).href,this.requestP("DELETE",t).fail(((e,t,r)=>null!=this.modelName?this.reportOzFailure(`delete${this.modelName}Failure`,e,t,r):this.reportOzFailure("deleteOzResourceFailure",e,t,r)))}async deleteAllJP(){var e,t,r,i,n,s,o;if(this.models.length>0){for(s=[],i=[],this.models.forEach((e=>(i.push(e.id),s.push(this._deleteP(e.id))))),await Promise.all(s),o=[],e=0,n=i.length;e<n;e++)r=i[e],null!=(t=this.index(r))?o.push(this._delete(t)):o.push(void 0);return o}}}return e.prototype.model=Iu,e.prototype.modelName="CatalogSpaceInvite",e}.call(void 0);const Ru=function(){class e extends fn{}return e.prototype.model=jr,e.prototype.modelName="User",e}.call(void 0);const ju=function(){class e extends Ru{}return e.prototype.model=Cu,e.prototype.modelName="SpaceUser",e}.call(void 0);const Zu=function(){class e extends ju{_deleteP(e){var t,r;return r=this.index(e),t=this.at(r).href,this.requestP("DELETE",t).fail(((e,t,r)=>null!=this.modelName?this.reportOzFailure(`delete${this.modelName}Failure`,e,t,r):this.reportOzFailure("deleteOzResourceFailure",e,t,r)))}async deleteAllJP(){var e,t,r,i,n,s,o;if(this.models.length>0){for(i=[],o=[],this.models.forEach((e=>(o.push(e.id),i.push(this._deleteP(e.id))))),await Promise.all(i),n=[],e=0,r=o.length;e<r;e++)s=o[e],null!=(t=this.index(s))?n.push(this._delete(t)):n.push(void 0);return n}}}return e.prototype.model=Ou,e.prototype.modelName="CatalogSpaceUser",e}.call(void 0);var Nu,Fu,Lu=r(982201);let Mu=(Nu=class e extends en{constructor(e){super(),(0,C.Z)(this,"_models",Fu,this),this.initializedWithAssetsP=Lu.Deferred(),this.pageSize=100,this.reset(),this.addAssets(e)}setAssets(e){return this._dirty=!0,this.reset(),this.addAssets(e)}addAssets(e){if(null!=e){for(const t of e)this._add(t);return this.totalCount=e.length,this.initializedWithAssetsP.resolve()}}fetchP(){return this.finished||console.log("Finished is not true in LocalPagedlist"),Lu.Deferred().reject().promise()}async allJP(){return await this.allP()}allP(){return Lu.Deferred().resolve(this.models.slice()).promise()}indexP(t){return this.initializedWithAssetsP.then((()=>e.prototype.__proto__.indexP.call(this,t)))}get assets(){return this}},Fu=(0,i.Z)(Nu.prototype,"_models",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nu);var Uu,$u,zu,Hu=r(982201);const Ju=e=>e.asset.base=e.base;let qu=(0,nn.Z)(Co)(($u=class extends So{constructor(e){Ju(e),super(e.asset),(0,C.Z)(this,"hackSpaceContext",zu,this),this.albumAssetRelativeUrl=e.links.self.href,this.order=e.payload?.order}refreshP(){const e=this._linkBase.fullHref(this.albumAssetRelativeUrl)+"?"+Hu.param({embed:"asset;user"});return this.requestP("GET",e).done((e=>(this.order=e.payload?.order,Ju(e),this.setAttributes(e.asset))))}setHackSpaceContext(e){this.hackSpaceContext=e}setRatingP(e){console.error("if you implement this be sure you understand the confusing rating model")}setRatingJP(e){console.error("if you implement this be sure you understand the confusing rating model")}setFlagP(e){console.error("if you implement this be sure you understand the confusing review model")}setFlagJP(e){console.error("if you implement this be sure you understand the confusing review model")}getRating(){const e=this.hackSpaceContext?.owner?.id;return null==e?(console.error("SpaceAsset.getRating ownerAccountId not retrievable"),0):super.getRating(e)}getFlag(){const e=this.hackSpaceContext?.owner?.id;return null==e?(console.error("SpaceAsset.getFlag ownerAccountId not retrievable"),0):super.getFlag(e)}getOrder(){return this.order||""}getReportAbuseHref(){return`/abuse_reports?asset-href=${this.linkFullPath("self")}`}getLikesCount(){return n.Z.is_enabled("lots_of_likes")?7*this.attributes.links["/rels/favorites"]?.count:this.attributes.links["/rels/favorites"]?.count}getLikesHref(){return this.linkHref("/rels/favorites")}_getLikeUrl(){return this.linkHref("/rels/this_user_favorite")}isLiked(){return this.getLikesCount()>0}isLikedByUser(){return this.isLiked()&&null!=this._getLikeUrl()}likeP(){return this.requestP("PUT",`${this.getLikesHref()}/${this.createUuid()}`,"{}")}unLikeP(){const e=this._getLikeUrl();if(null!=e)return this.requestP("DELETE",e,"{}")}getCommentCount(){return this.attributes.links["/rels/comments"]?.count}getCommentsHref(){return this.linkHref("/rels/comments")}hasComments(){return this.getCommentCount()>0}},zu=(0,i.Z)($u.prototype,"hackSpaceContext",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uu=$u))||Uu;qu.pollAssetUntilAvailableJP=function(e){let t=!1,r=!1;return So.pollAssetUntilCheckJP(So,e,(e=>!!e.hasAnyRendition()||(t?r:(t=!0,setTimeout((()=>r=!0),5e3),!1))))};const Vu=function(){var e,t;let r=(e=class extends Yl{constructor(){super(...arguments),(0,C.Z)(this,"hackSpaceContext",t,this)}setHackSpaceContext(e){var t,r,i,n,s;if(this.hackSpaceContext!==e){for(this.hackSpaceContext=e,s=[],r=0,i=(n=this.models).length;r<i;r++)t=n[r],s.push(t.setHackSpaceContext(e));return s}}_add(){return(arguments.length<=0?void 0:arguments[0]).setHackSpaceContext(this.hackSpaceContext),super._add(...arguments)}getReviewedAssetLikeCountP(e){return this.allP().then((t=>{var r,i;for(this.reviewSelectedCount=0,r=0,i=t.length;r<i;r++)t[r].isLikedByUser(e)&&(this.reviewSelectedCount+=1);return this.reviewSelectedCount}))}},t=(0,i.Z)(e.prototype,"hackSpaceContext",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),e);return r.prototype.model=qu,r.prototype.modelName="SpaceAsset",r}.call(void 0);class Bu extends Hl{_createDefaultAssetOptions(){let e;return e=this.hasDisplaySettings()?"image;video;layout_segment":"image;video",{embed:"asset",order_after:"-",exclude:"incomplete",subtype:e}}set assets(e){this._assets=e}get assets(){return this.getAssets(this._defaultAssetOptions)}getAssets(){const e=super.getAssets(...arguments);return e.setHackSpaceContext(this.getAnySpaceHack()),e}_getAssetsLink(){return`${this.linkHref("self")}/assets`}isShared(){return!0}getGalleryLink(){return this.attributes.payload?.web_space_href}getName(e){let t=this.attributes.payload?.name||"";return null!=e&&t.length>e&&(t=t.substr(0,e)),t}getReportAbuseHref(){return`/abuse_reports?album-href=${this.linkFullPath("self")}`}getChildAlbumsLink(){return this.linkHref("/rels/child_albums")}getSpace(){if(null==this.spaces)return null;for(let e=0,t=this.spaces.length;e<t;e++){const t=this.spaces.at(e),r=t.getSubType();if("gallery"!==r&&"review"!==r)return t}}setSpace(e){var t;return null!==(t=this.spaces)&&void 0!==t||(this.spaces=new Mu([])),this.spaces.addAssets([e]),this.spaces}getReviewSpace(){return null}getAnySpaceHack(){return null!=this.spaces?this.spaces.at(0):null}}Bu.prototype.coverClass=jo,Bu.prototype.assetListClass=Vu;const Wu=Bu;var Gu=r(982201);const Xu=function(){class e extends fn{createManyP(e,t){var r,i;return r=`${e.href}/resources`,i={resources:t},this.requestP("PUT",r,JSON.stringify(i)).done((()=>this.markDirty())).fail(((e,t,r)=>this.reportOzFailure("addSpaceAlbumResourcesFailure",e,t,r)))}createP(e,t){var r,i,n;return i=`${e.href}/resources`,n=`/v2/spaces/${e.id}/albums/${t.id}`,r={resources:[t]},super.createP(i,r,n)}deleteManyP(e,t){var r,i;return i={resource_ids:t.join(";")},r=`${e}/resources?`+Gu.param(i),this.requestP("DELETE",r).done((()=>{var e,r,i,n,s;for(s=[],e=0,n=t.length;e<n;e++)r=t[e],null!=(i=this.index(r))?s.push(this._delete(i)):s.push(void 0);return s})).fail(((e,t,r)=>this.reportOzFailure("deleteSpaceAlbumResourcesFailure",e,t,r)))}}return e.prototype.model=Wu,e.prototype.modelName="SpaceAlbum",e}.call(void 0);var Ku,Yu,Qu,ec,tc,rc,ic,nc,sc=r(982201);let oc=(Ku=class extends ar{constructor(e,t){var r;super(e),(0,C.Z)(this,"albums",Yu,this),(0,C.Z)(this,"userAndOwnerRefreshPromise",Qu,this),(0,C.Z)(this,"owner",ec,this),(0,C.Z)(this,"user",tc,this),(0,C.Z)(this,"users",rc,this),(0,C.Z)(this,"inMaintenance",ic,this),(0,C.Z)(this,"inInvalid",nc,this),null!==(r=this.users)&&void 0!==r||(this.users=new ju(`${this.linkHref("self")}/users?embed=user`))}get author(){return this.attributes.payload.profile_info?.author}get description(){return this.attributes.payload.profile_info?.description}get firstAlbum(){return this.albums?.at(0)}get ownerCatalogId(){const e=this.linkFullPath("/rels/catalog");return e?.split("catalogs/")[1]}setAttributes(e){var t;let r;if(super.setAttributes(e),e.resources?.length>0){let t;r=[];for(const i of e.resources)"album"===i.type&&(i.base=e.base,t=new Wu(i),t.setSpace(this),r.push(t));if(null!=this.albums)for(let e=0;e<r.length;e++){t=r[e];const i=this.albums.at(e);if(i.id!==t.id||i.attributes.updated!==t.attributes.updated){r.length>0&&(this.albums=new Mu(r));break}}else r.length>0&&(this.albums=new Mu(r))}return null!==(t=this.albums)&&void 0!==t||(this.albums=new Xu(this.linkHref("/rels/space_resources"))),null!=e.space_user&&(e.space_user.base=e.base,this.user=new Cu(e.space_user)),null!=e.owner&&(e.owner.base=e.base,this.owner=new jr(e.owner)),this}webHref(){return this.linkHref("/rels/web_space")}hasCatalog(){return null!=this.attributes.links?.["/rels/catalog"]}isOwner(){return this.hasCatalog()}hasLegacyFilters(){return!0!==this.attributes.payload.presentationFilters}getSubType(){return this.attributes.subtype}getSharesHref(){return`${window.location.origin}/shares/${this.id}`}_refreshP(e){return e="shared"===this.getSubType()?e||`${this.href}?embed=owner%3Bspace_user%3Bfirst_resource`:e||`${this.href}?embed=owner%3Bspace_user`,super._refreshP(e).then((()=>{if(this.inMaintenance)return this.inMaintenance=!1})).fail(((e,t,r)=>{503===t&&(this.inMaintenance=!0),404===t&&(this.isInvalid=!0)}))}ensureUserAndOwnerP(){return null!=this.userAndOwnerRefreshPromise?this.userAndOwnerRefreshPromise:null!=this.user&&null!=this.owner||this.inMaintenance||this.isInvalid?sc.Deferred().resolve():(this.userAndOwnerRefreshPromise=this.refreshP(),this.userAndOwnerRefreshPromise.always((()=>{this.userAndOwnerRefreshPromise=null})))}ensureUserAndOwnerJP(){return this.safeToJSPromise(this.ensureUserAndOwnerP())}getAvatarHref(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"large";const{host:t}=Ss,{ownerId:r}=window.SharesConfig;if(!t||!r)return;const i=e=>e<10?`0${e}`:`${e}`,n=new Date;return`${t}/v2/avatars/${r}/${`${n.getFullYear()}${i(n.getMonth()+1)}${i(n.getDate())}000000`}/${e}`}downloadEnabled(){return!0===this.attributes.payload.download||!0===this.user?.canEdit()}isPrivate(){return!0===this.attributes.payload.private}isMetadataVisible(){return!0===this.attributes.payload.metadata||!0===this.user?.canEdit()}isLocationVisible(){return!0===this.attributes.payload.location||!0===this.user?.canEdit()}isReview(){return"review"===this.attributes?.subtype&&!this.isPrivate()}getReviewCount(){return null!=this.attributes.payload?.count&&this.attributes.payload?.count>0?this.attributes.payload.count:null}hasReviewCount(){return this.getReviewCount>0}isGallerySpace(){return"gallery"===this.attributes?.subtype}_isCommentsFavoritesDisabled(e){return!(!this.isGallerySpace()||null!=e)||e}isCommentsDisabled(){return this._isCommentsFavoritesDisabled(this.attributes.payload.comments_disabled)}isFavoritesDisabled(){return this._isCommentsFavoritesDisabled(this.attributes.payload.favorites_disabled)}commentsAndLikesEnabled(){return!(!0===this.attributes.payload.comments_disabled||!0===this.attributes.payload.favorites_disabled)}async _ensureUploadPermissionsJP(){return await this.ensureUserAndOwnerJP(),this.user?.canContribute()||this.isOwner()?null==this.owner?Promise.reject("The owner info must be loaded"):"shared"!==this.getSubType()?Promise.reject("Only shared subtype spaces can be contributed to."):null==this.firstAlbum?Promise.reject("This space has no space album to contribute to."):void 0:Promise.reject("You must have contribute access to the space")}async copyAssetToSpaceJP(e,t){let r,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];await this._ensureUploadPermissionsJP(),e.hasExternalDevelopSettings()&&(r=await e.getDevelopSettingsJP());const o=e.cloneAttributes().payload;if(delete o.copy,delete o.importSource?.localAssetId,delete o.importSource?.lrcatStoreProviderId,delete o.importSource?.lrcatImageId,delete o.importSource?.status,0===Object.keys(null!=o.importSource?o.importSource:{}).length&&delete o.importSource,delete o.autoTags,delete o.aesthetics,delete o.bestFrame,delete o.blur,delete o.cropHints,delete o.quality,delete o.changedAtTime,delete o.changedOnDevice,delete o.stacks,delete o.ratings,s.includes("ratings")||0!==e.getRating()&&(o.ratings={},o.ratings[this.owner.id]={rating:e.getRating(),date:(new Date).toISOString()}),delete o.reviews,s.includes("reviews")||"unflagged"!==e.getFlag()&&(o.reviews={},o.reviews[this.owner.id]={flag:e.getFlag(),date:(new Date).toISOString()}),s.includes("location")&&(delete o.location,null!=o.xmp?.iptcCore&&(delete o.xmp.iptcCore.CountryCode,delete o.xmp.iptcCore.Location,0===Object.keys(o.xmp.iptcCore).length&&delete o.xmp.iptcCore),null!=o.xmp?.photoshop&&(delete o.xmp.photoshop.City,delete o.xmp.photoshop.Country,delete o.xmp.photoshop.State,0===Object.keys(o.xmp.photoshop).length&&delete o.xmp.photoshop)),s.includes("keywords")&&null!=o.xmp?.dc&&(delete o.xmp.dc.subject,0===Object.keys(o.xmp.dc).length&&delete o.xmp.dc),e.developHasPixelMasks()){const t=e.getAux();o.aux=e.getDevelopPixelMaskIds().reduce(((e,r)=>(e[r]=Object.assign({},t[r]),e)),{})}const a=ee()({},{payload:o},Yl.defaultPayloadForNewAsset(t));a.subtype=e.attributes.subtype,a.captureDate=e.attributes.captureDate;const l=this.createUuid(),u=`/v2/spaces/${this.id}/assets/${l}`,c=this.createUuid(),d=`${`${this.firstAlbum.href}/assets/${l}`}/revisions/${c}`;if(await this.requestJP("PUT",d,JSON.stringify(a)),null!=r){n.Z.is_enabled("debug")&&console.log("Copying asset with external develop settings..."),e.developHasPixelMasks()&&await e.copyAuxToSpaceAssetJP(this.id,l,c);const t=`${u}/revisions/${c}/xmp/develop`;await this.requestJP("PUT",t,r,{contentType:"application/rdf+xml"})}if(e.hasMaster()){const t=`${u}/revisions/${c}/master`;i={"X-Generate-Renditions":"all","X-Async-Copy":!0},i["X-Generate-Proxies"]="all",s.length>0&&(i["X-Redact-Meta"]=s.join(",")),await this.requestJP("PUT",`${t}`,JSON.stringify({file_href:e.linkFullPath("/rels/master")}),{headers:i})}else if(e.isProxyOnly()){const t=`${u}/revisions/${c}/proxies/${this.createUuid()}`;await this.requestJP("PUT",`${t}`,JSON.stringify({file_href:e.linkFullPath("/rels/proxy_type/2560")}),{headers:{"X-Generate-Renditions":"all","X-Async-Copy":!0}})}await qu.pollAssetUntilAvailableJP(u),this.firstAlbum.markAssetsDirty(!0)}createNewEmptyAssetP(e,t,r){const i=sc.Deferred();return this._ensureUploadPermissionsJP().then((()=>{if(null==r)return i.reject("You must provide a batch time for uploads.");const n=Yl.defaultPayloadForUpload(e,r);n.subtype=gr.ozSubtype(e.file),n.payload.captureDate="0000-00-00T00:00:00",n.payload.importSource.importedBy=t.id,null!=e.sha256&&(n.payload.importSource.sha256=e.sha256);const s=this.createUuid(),o=`/v2/spaces/${this.id}/assets/${s}`,a=this.createUuid(),l=`${`${this.firstAlbum.href}/assets/${s}`}/revisions/${a}`,u=`${o}/revisions/${a}`;return this.requestP("PUT",l,JSON.stringify(n)).then((()=>{i.resolve(u,s)})).fail(((e,t,r)=>{i.reject(e,t,r)}))}),(e=>{i.reject(e)})),i.promise()}getSlideshowEmbedHref(e){return null==e?`${window.location.origin}/embed/shares/${this.id}/slideshow?background_color=%23191919&color=%23cccdcd`:"Light"===e.getPresentationStyleId()?`${window.location.origin}/embed/shares/${this.id}/slideshow?background_color=%23FBFBFB&color=%23707070`:`${window.location.origin}/embed/shares/${this.id}/slideshow?background_color=%232D2D2D&color=%23999999`}getSlideshowEmbedCode(e){return`<div class='lr_embed' style='position: relative; padding-bottom: 50%; height: 0; overflow: hidden;'><iframe id='iframe' src='${this.getSlideshowEmbedHref(e)||""}' frameborder='0'style='width:100%; height:100%; position: absolute; top:0; left:0;' ></iframe></div>`}},Yu=(0,i.Z)(Ku.prototype,"albums",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qu=(0,i.Z)(Ku.prototype,"userAndOwnerRefreshPromise",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ec=(0,i.Z)(Ku.prototype,"owner",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tc=(0,i.Z)(Ku.prototype,"user",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rc=(0,i.Z)(Ku.prototype,"users",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ic=(0,i.Z)(Ku.prototype,"inMaintenance",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nc=(0,i.Z)(Ku.prototype,"inInvalid",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ku);var ac,lc,uc,cc,dc,hc;let pc=(ac=yt.byVal,lc=class extends tr{constructor(){super(...arguments),(0,C.Z)(this,"private",uc,this)}},uc=(0,i.Z)(lc.prototype,"private",[ac],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lc),fc=(cc=yt.byRef(pc),dc=class extends sr{constructor(){super(...arguments),(0,C.Z)(this,"payload",hc,this)}},hc=(0,i.Z)(dc.prototype,"payload",[cc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dc);var gc,mc,yc=r(982201);let vc=(gc=class extends oc{constructor(){super(...arguments),(0,C.Z)(this,"invites",mc,this)}setAttributes(e){var t,r;super.setAttributes(e),null!==(t=this.invites)&&void 0!==t||(this.invites=new Du(`${this.linkHref("self")}/invites?embed=user`)),null!==(r=this.users)&&void 0!==r||(this.users=new Zu(`${this.linkHref("self")}/users?embed=user`))}async loadAllInvitesAndUsersJP(){const e=[];return e.push(this.invites.allJP()),e.push(this.users.allJP()),await Promise.all(e)}hasShortWebHref(){return this.webHref()?.length<30}pollForShortWebHrefP(){const e=yc.Deferred();if(this.hasShortWebHref())e.resolve();else{let r=0;var t=()=>(r++,this.refreshP().done((()=>{!this.hasShortWebHref()&&r<5?setTimeout(t,350):this.hasShortWebHref()?e.resolve():(A.Z.reportFailure("pollForShortUrlFailure"),e.reject())})).fail((()=>{e.reject()})));t()}return e.promise()}getFilterFlags(){return this.attributes.payload.filters?.flags||[]}enableNewPresentationFiltersP(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.updateAttributesP("enableSpacePresentationFilters",{payload:{presentationFilters:e}})}setDownloadEnabledP(e){return this.downloadEnabled()===e?yc.Deferred().resolve():this.updateAttributesP("setSpaceDownloadEnabled",{payload:{download:e}})}async setAllowInviteRequestsJP(e){if("shared"===this.attributes.subtype)return await this.updateAttributesP("setAllowInviteRequests",{payload:{allowInviteRequests:e}})}get allowInviteRequests(){return!0===this.attributes.payload.allowInviteRequests}isOwner(){return!0}get hideUrl(){return!0===this.attributes.payload.hide_url}async reenableProofingJP(e){return await this.updateAttributesP("reshareAlbum",{payload:e})}async disableProofingJP(e){return await this.updateAttributesP("unshareAlbum",{payload:e})}},mc=(0,i.Z)(gc.prototype,"invites",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gc);vc.prototype.attributeClass=fc;const bc=vc;var _c,wc,Pc=r(982201);let Ac=(_c=class extends Mu{constructor(e){super(),(0,C.Z)(this,"_models",wc,this)}reset(){return this._dirty?(this._models=new je,this.indices={},this.page=0,this.pageSize=100,this.finished=!1,this.length=0,this.totalCount=null,this._dirty=!1,this):this}fetchP(){return this.finished?Pc.Deferred().reject().promise():Pc.Deferred()}get assets(){return this}},wc=(0,i.Z)(_c.prototype,"_models",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_c);var Sc,xc,Cc,Oc,kc,Ec,Tc,Ic,Dc=r(982201);let Rc=(Sc=class e extends Hl{constructor(){super(...arguments),(0,C.Z)(this,"currentProofingClient",xc,this),(0,C.Z)(this,"isProofLoading",Cc,this),(0,C.Z)(this,"proofingClientList",Oc,this),(0,C.Z)(this,"selectedAssetsForFiltering",kc,this),(0,C.Z)(this,"commentedAssetsForFiltering",Ec,this),(0,C.Z)(this,"spaces",Tc,this),(0,C.Z)(this,"reviewAssets",Ic,this)}_getAttributesMiddleware(){return[Xl(this)]}setAttributes(e){var t;(super.setAttributes(e),"cluster"===this.getSubtype()&&(this.attributes.incomplete=e.incomplete),["cluster","project"].includes(this.getSubtype())&&null==this.topics&&(this.topics=this._createTopics()),this._initSpaces(),n.Z.is_enabled("collaborative_proofing"))&&(null!==(t=this.reviewAssets)&&void 0!==t||(this.reviewAssets=new Ac),this.reviewAssets.space=this.spaces)}markAssetsDirty(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];super.markAssetsDirty(e),this.topics?.markAssetsDirty()}_createDefaultAssetOptions(){return{embed:"asset;spaces;user",order_after:"-",subtype:"image;video",exclude:"incomplete"}}_createTopics(){return new _u(this.linkHref("/rels/child_albums")).setParentAlbum(this)}set assets(e){this._assets=e}get assets(){return this.isCluster()||this.isProjectV1()?this.topics?.assets:this.getAssets(this._defaultAssetOptions)}_initSpaces(){if(this.spaces=new je,null!=this.attributes.spaces)for(const e of this.attributes.spaces)e.base=this.attributes.base,this.spaces.push(new bc(e))}hasOpenInviteRequests(){const e=this.getSpace();if(!(e?.invites.length>0))return!1;return e.invites.models.filter((e=>e.isRequest()&&"open"===e.status)).length>0}isSharePublic(){const e=this.getSpace();return null!=e&&!e.isPrivate()}isShared(){const e=this.getSpace();if(null==e)return!1;if(!e.isPrivate())return!0;if(e.allowInviteRequests||!e.hideUrl)return!0;if(null!=e.users){if(null!=e.users.modelsBindable.find((e=>"accepted"===e.status)))return!0}if(null!=e.invites){if(null!=e.invites.modelsBindable.find((e=>"open"===e.status)))return!0}return!1}async isSharedJP(){if(this.isShared())return!0;const e=this.getSpace();return null!=e&&(await e.loadAllInvitesAndUsersJP(),this.isShared())}getFilterFlags(){let e=[];const t=this.getSpace();return null!=t&&(e=t.getFilterFlags()),e}getSpace(){if(null==this.spaces)return null;for(let e=0,t=this.spaces.length;e<t;e++){const t=this.spaces.at(e),r=t.getSubType();if("gallery"!==r&&"review"!==r)return t}}async hasAnyRejectedAssetsJP(){return(await this.getAssets({flag:"reject",subtype:"image;video",limit:1},!0).pageP(0)).length>0}async canSafelyConvertLegacyShareFiltersJP(){const e=this.getSpace();if(null!=e){if(e.hasLegacyFilters()){const e=this.getFilterFlags();if(0===e.length||3===e.length){const e=await this.hasAnyRejectedAssetsJP();return Promise.resolve(!e)}return 1===e.length&&e.includes("pick")||e.includes("pick")&&e.includes("unflagged")?Promise.resolve(!0):Promise.resolve(!1)}return Promise.resolve(!1)}return Promise.resolve(!1)}async safeConvertLegacyShareFiltersJP(){const e=this.getSpace();if(null!=e&&e.hasLegacyFilters()){if(await this.canSafelyConvertLegacyShareFiltersJP()){const t=this.getFilterFlags();if(1===t.length&&t.includes("pick")){const t=this.updateAttributesP("safeConvertFilters",{presentation:{filters:{pickedOnly:!0}}}),r=e.enableNewPresentationFiltersP();await Dc.when([t,r]),A.Z.report("albumSafeLegacyFilterConversion",{pickedOnly:!0})}else await e.enableNewPresentationFiltersP(),A.Z.report("albumSafeLegacyFilterConversion");return Promise.resolve()}}return Promise.reject()}hasPublicReview(){let e=!1;const t=this.getReviewSpace();return null!=t&&(e=!t.isPrivate()),e}getReviewSpace(){if(null==this.spaces)return null;for(let e=0,t=this.spaces.length;e<t;e++){const t=this.spaces.at(e);if("review"===t.getSubType())return t}}hasGallerySpace(){if(null!=this.spaces)for(let e=0,t=this.spaces.length;e<t;e++){if("gallery"===this.spaces.at(e).getSubType())return!0}}updateAttributeP(e,t,r){const i={};return i[t]=r,super.updateAttributeP(e,"payload",i)}renameP(e){return this.updateAttributesP("renameAlbum",{payload:{name:e}})}async setNameJP(e){return await this.renameP(e)}async setStoryTitleJP(e){return await this.updateAttributesP("setAlbumTitle",{payload:{story:{title:e}}})}async deleteStoryTitleJP(){return await this.updateAttributesP("setAlbumTitle",{payload:{story:{title:null}}})}async setStoryAuthorJP(e){return await this.updateAttributesP("setAlbumAuthor",{payload:{story:{author:e}}})}async deleteStoryAuthorJP(){return await this.updateAttributesP("setAlbumAuthor",{payload:{story:{author:null}}})}reparentP(e){return null!=e?this.updateAttributesP("reparentAlbum",{payload:{parent:{id:e}}}):this.updateAttributesP("reparentAlbum",{payload:{parent:null}})}setSlideshowSettingsP(e){const t=this.getSlideshowSettings();return Dc.extend(t,e),this.updateAttributesP("setSlideshowSettings",{payload:{presentation:{slideshow:e}}})}setPresentationSettingsP(e){const t=this.getPresentationSettings();return Dc.extend(!0,t,e),this.updateAttributesP("setPresentationSettings",{payload:{presentation:e}})}setPresentationFilterPickedOnlyP(e){return this.updateAttributesP("setPresentationFilterPickedOnlyP",{payload:{presentation:{filters:{pickedOnly:e}}}}).then((()=>{this.markFilteredAssetsDirty()}))}setPresentationFilterRatingAtLeastP(e){let t;return t=0===e?"clearPresentationFilterRatingAtLeastP":"setPresentationFilterRatingAtLeastP",this.updateAttributesP(t,{payload:{presentation:{filters:{ratingAtLeast:e}}}}).then((()=>{this.markFilteredAssetsDirty()}))}clearPresentationFilterSettingsP(){return this.updateAttributesP("clearPresentationFiltersP",{payload:{presentation:{filters:null}}}).then((()=>{this.markFilteredAssetsDirty()}))}saveCoverSettingsP(e){const t=this.getCoverSettings();return Dc.extend(t,e),this.updateAttributesP("setCoverSettings",{payload:{presentation:{cover:e}}})}resetCoverCropSettingsP(){return this.updateAttributesP("setCoverCropSettings",{payload:{presentation:{cover:{cropHints:{}}}}})}hideInOrganizeP(){return this.updateAttributesP("hideInOrganize",{payload:{hideInOrganize:!0,parent:null}})}showInOrganizeP(){return this.updateAttributesP("hideInOrganize",{payload:{hideInOrganize:!1}})}deleteSpaceP(e){return this.requestP("DELETE",e.href).then((()=>(this.markAssetsDirty(),this.refreshP())))}async createSpaceJP(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"shared";if(!["review","shared"].includes(r))throw"This method needs to be updated for the new space subtype";const i=this._linkBase.fullHref(`spaces/${this.createUuid()}`),n=(new Date).toISOString();e.userCreated=n,e.userUpdated=n;const s={payload:e,subtype:r,resources:[{id:this.id,type:"album"}]};this.markAssetsDirty();try{const e={"If-None-Match":this.id};await this.requestJP("PUT",i,JSON.stringify(s),{headers:e}),await this.refreshP(),t="shared"===r?this.getSpace():this.getReviewSpace();try{return await t.pollForShortWebHrefP()}catch(e){}}catch(e){const[i,n,s]=e;if(412!==n)throw this.reportOzFailure("createSpaceFailure",i,n,s),e;if(await this.refreshP(),t="shared"===r?this.getSpace():this.getReviewSpace(),null==t)throw this.reportOzFailure("createSpace412RefreshFailure",i,n,s),e}}createSpaceP(e){const t=Dc.Deferred();return this.createSpaceJP.then((e=>t.resolve(e)),(e=>t.reject(e))),t.promise()}_getAssetsLink(){return this.linkHref("self")+"/assets"}hasAssetsP(e){e=Dc.extend({limit:1},e);return new uu(this._getAssetsLink(),e).pageP(0).then((e=>e.length>0))}removeManyAssetsP(e){let t,r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=e.length>0&&("string"==typeof e[0]||e[0]instanceof String)?e:e.map((e=>e.id)),r=i?this.assets.deleteAssetsP(e):this.assets.deleteManyP(t,"removeAssetsFromAlbum"),this.assetsIdsRemoved(t,!0),r}assetsIdsRemoved(e){const t=this.getAttribute("payload").cover?.id,r=null!=t&&e.includes(t);r&&this.deleteAlbumCoverP();const i=this._coverFallbackAsset?.id;(null!=i&&e.includes(i)||r)&&this.markAssetsDirty(!0)}deleteAssetsLocally(e){this.assets.deleteLocally(e)}coverIsSet(){return null!=this.getAttribute("payload").cover}setAlbumCoverP(e){let t;null!=e?(t={},t.id=e):t=null;const r=Dc.Deferred().resolve().promise();return Dc.when(this.updateAttributesP("setAlbumCover",{payload:{cover:t}}),r).done((()=>null!=e?this.assets.getP(t.id).done((e=>this._setCover(e))):this._setCover(null)))}async setAlbumCoverJP(e){return await this.setAlbumCoverP(e)}deleteAlbumCoverP(){return this._setCover(null),this.updateAttributesP("deleteAlbumCover",{payload:{cover:null}})}addAsset(e){const t=new Bl(e);return t.refreshP().done((()=>{this.assets.index(t.id)>=0||this.assets._add(t)}))}_refreshP(e){return e=e||`${this.href}?embed=spaces`,super._refreshP(e)}isProjectV1(){return null!=this.attributes?.payload?.presentation?.portfolio||"project"===this.getSubtype()&&1===this.attributes?.payload?.publishInfo?.version}isCluster(){return"cluster"===this.getSubtype()}createClustersP(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=`${this.href}/clusters`;t.length>0&&(r+=`?${t}`);let i={};return n.Z.is_enabled("best_photos_trust_oz_ignore_ratings_flags")&&(i={weights:{importance_weights:{rating:[0,0,0,0,0,0],hasTitle:0,hasCaption:0,flags:{pick:0,reject:0,unflagged:0}}}}),this.requestP("POST",r,JSON.stringify(i)).then(((t,r,i)=>{const s=i.getResponseHeader("Location"),o=new e(s);return n.Z.is_enabled("debug_best_photos")&&(o.debugClusterRequestId=i.getResponseHeader("x-request-id")),o}))}refreshUntilClusteringCompletesP(e){const t=Dc.Deferred(),r=1e3;let i=0,s=0;var o=()=>null==e||e()?r*i>=18e4?(A.Z.report("bestPhotosClusterTimeout"),void t.reject("timeout")):this.refreshP().done((()=>{s=0,++i,!0===this.attributes.incomplete||n.Z.is_enabled("best_photos_load_forever")?(n.Z.is_enabled("debug")&&console.log("Still clustering."),setTimeout(o,r)):(n.Z.is_enabled("debug")&&console.log("Clustering complete!"),t.resolve())})).fail((()=>{++s,s<=2?(A.Z.report("bestPhotosClusterRefreshRetry"),setTimeout(o,r)):(A.Z.report("bestPhotosClusterFail"),t.reject("fail"))})):t.reject("aborted");return o(),t.promise()}loadClustersP(){return this.topics.loadAssetsP(!1,!0)}getReviewedAssetsP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all_clients";const r=this.getReviewSpace();return null!=r?(this.isProofLoading=!0,e&&this.assets.markDirty().reset(),this.reviewAssets.markDirty().reset(),this.assets.getReviewedAssetsP(r,t).done((e=>{this.proofingClientList=this.assets.proofingClientList,this.selectedAssetsForFiltering=this.assets.selectedAssetsForFiltering,this.commentedAssetsForFiltering=this.assets.commentedAssetsForFiltering,this.reviewAssets.addAssets(e)})).always((()=>{this.currentProofingClient=t,this.reviewAssets.finished=!0,this.isProofLoading=!1}))):(this.reviewAssets.finished=!0,Dc.Deferred().resolve([]).promise())}splitAtAssetP(e,t,r,i){let n;return"first"===t?(n="left",e=this.assets.at(0).id):n=t,this.createNewLayoutSegmentP(e,n,r,i)}createNewLayoutSegmentP(e,t,r,i){const n=this.createUuid(),s=`${N.Z.catalogContext.href}/assets/${n}/revisions/${this.createUuid()}`,o={payload:{name:null!=r?r:"",description:null!=i?i:""},subtype:"layout_segment"};return this.requestP("PUT",s,JSON.stringify(o)).then((()=>{const r=this.assets.index(e);if(!(r>=0))return Dc.Deferred().reject(`Unknown asset id ${e}`);let i=r;return"right"===t&&i++,this.assets.addOrderedAssetIdsP([n],i)}))}convertToDisplay(){0===this.attributes.payload.presentation.explore.version&&this.attributes.dispatch("convertToDisplay"),1===this.attributes.payload.presentation.slideshow?.version&&this.setSlideshowSettingsP(this.getSlideshowSettings().convertV1Properties().toJSON())}},xc=(0,i.Z)(Sc.prototype,"currentProofingClient",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cc=(0,i.Z)(Sc.prototype,"isProofLoading",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oc=(0,i.Z)(Sc.prototype,"proofingClientList",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kc=(0,i.Z)(Sc.prototype,"selectedAssetsForFiltering",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ec=(0,i.Z)(Sc.prototype,"commentedAssetsForFiltering",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tc=(0,i.Z)(Sc.prototype,"spaces",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ic=(0,i.Z)(Sc.prototype,"reviewAssets",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sc);Rc.prototype.coverClass=jo,Rc.prototype.assetListClass=uu;const jc=Rc;const Zc=function(){class e extends Gl{_add(e,t){var r,i,n,s,o;if(t){for(n=0,i=(o=this.models).length-1;n<=i;)if(s=Math.floor(n+(i-n)/2),(r=aa.localeCompare(o[s],e))<0)n=s+1;else{if(!(r>0))break;i=s-1}return this._models.splice(n,0,e),this._reindex(n)}return super._add(e)}deleteP(e){var t,r;if(null!=(r=(t=this.get(e)).getSpace()))this.requestP("DELETE",r.href).fail(((e,t,r)=>this.reportOzFailure("deleteSpaceForAlbumDeleteFailure",e,t,r)));else if(t.isCluster()||t.isProjectV1())return super.deleteP(e,{child_albums:!0});return super.deleteP(e)}getTotalCountHref(){return"topic"===this.options.subtype?`${this.href}/count?subtype=topic`:`${this.href}/count?subtype=collection`}}return e.prototype.model=jc,e.prototype.modelName="CatalogAlbum",e}.call(void 0);var Nc,Fc;let Lc=(Nc=class extends ar{constructor(){super(...arguments),(0,C.Z)(this,"albums",Fc,this)}setAttributes(e){var t;super.setAttributes(e),null!==(t=this.albums)&&void 0!==t||(this.albums=new Xu(this.linkHref("/rels/space_resources")))}addManyResourcesP(e){return this.albums.createManyP(this,e)}addResourceP(e){return this.albums.createP(this,e)}getResourcesP(){return this.albums.reset(),this.albums.allP()}deleteManyResourcesP(e){return this.albums.deleteManyP(this.href,e)}webHref(){return this.linkHref("/rels/web_space")}getLongWebHref(){return`${this._linkBase.hostUrl}/gallery/${this.id}`}getAuthor(){var e;return null!==(e=this.attributes.payload?.profile_info?.author)&&void 0!==e?e:""}getDescription(){var e;return null!==(e=this.attributes.payload?.profile_info?.description)&&void 0!==e?e:""}},Fc=(0,i.Z)(Nc.prototype,"albums",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nc);var Mc=r(982201);const Uc=function(){class e extends fn{createNewGallerySpaceP(e){var t,r;return r=`${this.href}/${this.createUuid()}`,t={payload:{download:!1,location:!1,metadata:!1,private:!1,gallery_type:"public_profile",profile_info:{author:e},comments_disabled:!0,favorites_disabled:!0},subtype:this.subtype,resources:[]},this.createP(r,t)}deleteAllGallerySpacesP(){return this.allP().then((e=>{var t,r,i,n,s;for(n=[],t=0,r=e.length;t<r;t++)s=e[t],i=this.deleteP(s.id),n.push(i);return Mc.when(...n)}))}}return e.prototype.model=Lc,e.prototype.modelName="CatalogGallerySpace",e.prototype.subtype="gallery",e}.call(void 0);const $c=class extends So{setAttributes(e){return super.setAttributes(e),this.name=e.payload.name,this}getName(){return this.name}};const zc=function(){class e extends su{constructor(e){super(e,{subtype:"person"})}getNameForId(e){var t;return(null!=(t=this.get(e))?t.getName():void 0)||""}}return e.prototype.model=$c,e.prototype.modelName="CatalogPerson",e}.call(void 0);class Hc extends Hl{setAttributes(e){return this.order=e.payload?.order,super.setAttributes(e)}getOrder(){return this.order||""}}const Jc=function(){class e extends Gl{constructor(e){super(e,{subtype:"collection_set"})}}return e.prototype.model=Hc,e.prototype.modelName="CollectionSetAlbum",e}.call(void 0);class qc extends Hc{reparentP(e){return null!=e?this.updateAttributesP("reparentFolder",{payload:{parent:{id:e}}}):this.updateAttributesP("reparentFolder",{payload:{parent:null}})}}qc.prototype.assetListClass=uu;const Vc=qc;const Bc=function(){class e extends Jc{}return e.prototype.model=Vc,e.prototype.modelName="CatalogCollectionSetAlbum",e}.call(void 0);var Wc,Gc,Xc,Kc,Yc,Qc,ed,td,rd,id,nd,sd,od,ad=r(982201);let ld=(Wc=class extends ar{constructor(e){super(e),(0,C.Z)(this,"photoCount",Gc,this),(0,C.Z)(this,"videoCount",Xc,this),(0,C.Z)(this,"photoExcludedIncompleteCount",Kc,this),(0,C.Z)(this,"videoExcludedIncompleteCount",Yc,this),(0,C.Z)(this,"photoDeletedCount",Qc,this),(0,C.Z)(this,"videoDeletedCount",ed,this),(0,C.Z)(this,"countsDirty",td,this),(0,C.Z)(this,"incompleteCountsDirty",rd,this),(0,C.Z)(this,"deletedCountsDirty",id,this),(0,C.Z)(this,"allPhotosRestoreInProgress",nd,this),(0,C.Z)(this,"peopleCount",sd,this),(0,C.Z)(this,"peopleCountDirty",od,this),this.uploadedAssets=new je,this.uploadTime=new Date}get assetCount(){return this.photoCount+this.videoCount}get assetIncompleteCount(){return this.photoExcludedIncompleteCount+this.videoExcludedIncompleteCount}get assetDeletedCount(){return this.photoDeletedCount+this.videoDeletedCount}get assetDeletedCountsLoaded(){return!this.deletedCountsDirty}get assetIncompleteCountsLoaded(){return!this.incompleteCountsDirty}get assetCountsLoaded(){return!this.countsDirty}get assetPeopleCount(){return this.peopleCount}setAttributes(e){var t,r,i,s,o;(super.setAttributes(e),null!==(t=this.assets)&&void 0!==t||(this.assets=new su(`${this.linkHref("self")}/assets`,{subtype:"image;video"})),null!==(r=this.albums)&&void 0!==r||(this.albums=new Zc(`${this.linkHref("self")}/albums`,{subtype:"collection",embed:"spaces",limit:500})),null!==(i=this.collectionSetAlbums)&&void 0!==i||(this.collectionSetAlbums=new Bc(`${this.linkHref("self")}/albums`)),this.cachedAssets={},this.cachedSearchAssets={},this.cachedUnwantedAssets=null,this.catalogUpdates=new iu(this.linkHref("/rels/updates")),null!==(s=this.gallerySpaces)&&void 0!==s||(this.gallerySpaces=new Uc(`${this.linkHref("self")}/spaces`,{subtype:"gallery"})),n.Z.is_enabled("face_detection"))&&(null!==(o=this.persons)&&void 0!==o||(this.persons=new zc(`${this.linkHref("self")}/assets`)),this.persons.allP())}getPersonAssets(){var e;return null!==(e=this.personAssets)&&void 0!==e||(this.personAssets=new zc(`${this.linkHref("self")}/assets`)),this.personAssets}getImageAssets(){var e;return null!==(e=this.photoAssets)&&void 0!==e||(this.photoAssets=new su(`${this.linkHref("self")}/assets`,{subtype:"image"})),this.photoAssets}getProjectAlbums(){var e;return null!==(e=this.projectAlbums)&&void 0!==e||(this.projectAlbums=new Zc(`${this.linkHref("self")}/albums`,{subtype:"project"})),this.projectAlbums}getClusterAlbums(){return new Zc(`${this.linkHref("self")}/albums`,{subtype:"cluster"})}cleanupClusterAlbumsP(){const e=this.getClusterAlbums();return e.allP().done((()=>{e.models.sort(((e,t)=>t.getOzCreatedDate()-e.getOzCreatedDate()));const t=e.models.slice(5,7);n.Z.is_enabled("debug")&&console.log(`Cleaning up ${t.length} albums`);const r=t.map((e=>e.id)),i=t=>()=>e.deleteP(t),s=new li(1);for(const e of r)s.enqueuePromise(i(e));return s.promise().done((()=>{n.Z.is_enabled("debug")&&console.log("Done cleaning up clusters.")}))}))}getName(){return this.attributes.name}getAssets(e){var t,r;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=oi()(e);null!==(r=(t=this.cachedAssets)[n])&&void 0!==r||(t[n]=new su(`${this.href}/assets`,e));const s=this.cachedAssets[n];return i&&s.reset(),s}getSearchAssets(e,t,r,i,n){var s,o,a;const l={search:e,filters:t,sortBy:r,sortDir:i,insertedAssetsLength:null!==(s=n?.length)&&void 0!==s?s:0},u=oi()(l);return null!==(a=(o=this.cachedSearchAssets)[u])&&void 0!==a||(o[u]=new Ko(this,e,t,r,i,n)),this.cachedSearchAssets[u]}getUnwantedAssets(){var e;return null!==(e=this.cachedUnwantedAssets)&&void 0!==e?e:this.cachedUnwantedAssets=new ta(this)}getUnwantedAssetsForPolling(){var e;return null!==(e=this.cachedUnwantedAssetsForPolling)&&void 0!==e?e:this.cachedUnwantedAssetsForPolling=new ta(this)}markSearchAssetsDirty(){for(const e of Object.values(this.cachedSearchAssets))e.markDirty();this.cachedSearchAssets={}}markAssetsDirty(){this.assets?.markDirty(),this.countsDirty=!0,this.incompleteCountsDirty=!0,this.deletedCountsDirty=!0,this.allPhotosRestoreInProgress=!0,this.markSearchAssetsDirty(),n.Z.is_enabled("unwanted_photos")&&this.cachedUnwantedAssets?.markDirty();for(const e of Object.values(this.cachedAssets))e.markDirty()}assetUpdated(){this.trigger("assetUpdated")}allCountsP(){return null!=this.loadingCountsP?this.loadingCountsP:this.countsDirty?this.loadingCountsP=this.requestP("GET",`${this.href}/assets/count?subtype=image%3Bvideo&exclude=incomplete`).then((e=>(this.photoCount=e?.subtype_counts?.image||0,this.videoCount=e?.subtype_counts?.video||0,this.countsDirty=!1,this.allPhotosRestoreInProgress=!1,[this.photoCount,this.videoCount]))).always((()=>this.loadingCountsP=void 0)):ad.Deferred().resolve([this.photoCount,this.videoCount])}errorCountsP(){return null!=this.loadingErrorCountsP?this.loadingErrorCountsP:this.incompleteCountsDirty?this.loadingErrorCountsP=this.requestP("GET",`${this.href}/assets/count?subtype=image%3Bvideo&exclude=complete`).then((e=>(this.photoExcludedIncompleteCount=e?.subtype_counts?.image||0,this.videoExcludedIncompleteCount=e?.subtype_counts?.video||0,this.incompleteCountsDirty=!1,[this.photoExcludedIncompleteCount,this.videoExcludedIncompleteCount]))).always((()=>this.loadingErrorCountsP=void 0)):ad.Deferred().resolve([this.photoExcludedIncompleteCount,this.videoExcludedIncompleteCount])}deletedCountsP(){return null!=this.loadingDeletedCountsP?this.loadingDeletedCountsP:this.deletedCountsDirty?this.loadingDeletedCountsP=this.requestP("GET",`${this.href}/assets/count?subtype=deleted_image%3Bdeleted_video`).then((e=>(this.photoDeletedCount=e?.subtype_counts?.deleted_image||0,this.videoDeletedCount=e?.subtype_counts?.deleted_video||0,this.deletedCountsDirty=!1,[this.photoDeletedCount,this.videoDeletedCount]))).always((()=>this.loadingDeletedCountsP=void 0)):ad.Deferred().resolve([this.photoDeletedCount,this.videoDeletedCount])}peopleCountP(){return null!=this.loadingPeopleCountP?this.loadingPeopleCountP:this.peopleCountDirty?this.loadingPeopleCountP=this.requestP("GET",`${this.href}/assets/count?subtype=person`).then((e=>(this.peopleCount=e?.subtype_counts?.person||0,this.peopleCountDirty=!1,this.peopleCount))).always((()=>this.loadingPeopleCountP=void 0)):ad.Deferred().resolve([this.photoExcludedIncompleteCount,this.videoExcludedIncompleteCount])}getConnections(){return this.attributes.payload.settings?.universal?.connections||{}}addConnectionToSettingsP(e){if(this.attributes.payload.settings?.universal?.connections?.[e])return ad.Deferred().resolve();const t=(new Date).toISOString(),r={universal:{connections:{}}};r.universal.connections[e]={created:t};const i={payload:{settings:r}};return this.updateAttributesP("catalogConnection",i)}removeConnectionFromSettingsP(e){if(!this.attributes.payload.settings?.universal?.connections?.[e])return ad.Deferred().resolve();const t={universal:{connections:{}}};t.universal.connections[e]=null;const r={payload:{settings:t}};return this.updateAttributesP("catalogConnection",r)}async submitSearchFeedbackJP(e){return await this.requestP("PUT",`${this.href}/feedback`,JSON.stringify(e))}},Gc=(0,i.Z)(Wc.prototype,"photoCount",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Xc=(0,i.Z)(Wc.prototype,"videoCount",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Kc=(0,i.Z)(Wc.prototype,"photoExcludedIncompleteCount",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Yc=(0,i.Z)(Wc.prototype,"videoExcludedIncompleteCount",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Qc=(0,i.Z)(Wc.prototype,"photoDeletedCount",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ed=(0,i.Z)(Wc.prototype,"videoDeletedCount",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),td=(0,i.Z)(Wc.prototype,"countsDirty",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),rd=(0,i.Z)(Wc.prototype,"incompleteCountsDirty",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),id=(0,i.Z)(Wc.prototype,"deletedCountsDirty",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),nd=(0,i.Z)(Wc.prototype,"allPhotosRestoreInProgress",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sd=(0,i.Z)(Wc.prototype,"peopleCount",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),od=(0,i.Z)(Wc.prototype,"peopleCountDirty",[j.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wc);const ud=function(){class e extends fn{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/v2/catalogs",{role:"any",subtype:n.Z.is_enabled("hatch_catalog")?"hatch":"lightroom;X-lightroom"})}createCatalogP(){var e,t;return null!=this.creating?this.creating:(t=`/v2/catalogs/${this.createUuid()}`,e={subtype:"lightroom",payload:{name:"lightroom"}},this.creating=this.createP(t,e).always((()=>this.creating=null)))}}return e.prototype.model=ld,e.prototype.modelName="Catalog",e}.call(void 0);var cd=r(252118);const dd=new class{getCatalogP(){if(this.catalogDeferred)return this.catalogDeferred.promise;this.catalogDeferred=new un.Z;let e=new ud(`${N.Z.hostOverride}/v2/catalogs`);return e.fetchP().done((()=>{0===e.numLoaded()?this.catalogDeferred.reject("failed to load catalog"):this.catalogDeferred.resolve(e.at(0))})).fail((e=>{h.Z.noticeError(e),this.catalogDeferred.reject("failed to load catalog")})),this.catalogDeferred.promise}getProjectWithSourceAlbumIdForServiceIdP(e,t){return this.getProjectsForServiceIdP(t).then((t=>{let r;for(let i=t.length,n=0;n<i;n++){let i=t[n],s=i.attributes.payload.sourceAlbum,o=i.attributes.payload.publishInfo;if(s&&s.id===e&&!o.deleted){r=i;break}}return r}))}getProjectsP(){return this.getCatalogP().then((e=>e.getProjectAlbums().allP()))}getCollectionsP(){return this.getCatalogP().then((e=>e.albums.allP()))}getCollectionWithIdP(e){return this.getCatalogP().then((t=>t.albums.getP(e)))}getAssetsOfCollectionWithIdP(e){return this.getCollectionWithIdP(e).then((e=>{let t={subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"};return e.setDefaultAssetOptions(t),e.assets.allP().then((t=>({album:e,assets:t})))}))}getProjectsForServiceIdP(e){return this.getProjectsP().then((t=>t.reduce(((t,r)=>{let i=r.attributes.payload.publishInfo;return i&&i.serviceId===e&&t.push(r),t}),[])))}publishProjectSnapshotOfCollectionWithIdForServiceIdP(e,t){return this.getProjectWithSourceAlbumIdForServiceIdP(e,t).then((r=>r?Promise.reject("source album is currently published"):this.getCatalogP().then((r=>r.albums.getP(e).then((e=>{if("collection"!==e.attributes.subtype)return Promise.reject("source album not of subtype collection");let i=r.getProjectAlbums(),n=[];return e.assets.allP().then((r=>{n=r.map((e=>e.id));let s=(new Date).toISOString(),o={subtype:"project",payload:{sourceAlbum:{id:e.id},publishInfo:{version:2,serviceId:t,created:s,updated:s}}},a=e.attributes.payload.cover;return a&&(o.payload.cover={id:a.id}),i.createP(e.name||e.id,o)})).then((e=>e.assets.addOrderedAssetIdsP(n,0).then((()=>e))))}))))))}republishSourceAlbumSnapshotOfProjectWithIdForServiceIdP(e,t,r){return this.getProjectWithIdForServiceIdP(e,t).then((e=>{let t=e.attributes.payload.sourceAlbum;return t?this.getCollectionWithIdP(t.id).then((t=>{let r={subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"};return e.setDefaultAssetOptions(r),t.setDefaultAssetOptions(r),Promise.all([e.assets.allP(),t.assets.allP()]).then((t=>{let r=t[0],i=t[1],n=r.map((e=>e.id)),s=i.map((e=>e.id));return e.removeManyAssetsP(n).then((()=>e.assets.addOrderedAssetIdsP(s,0).then((()=>{let t={payload:{publishInfo:{updated:(new Date).toISOString()}}};return e.updateAttributesP("setPublishInfo",t)}))))}))}),(t=>e)):e}))}getProjectWithIdForServiceIdP(e,t){return this.getProjectsForServiceIdP(t).then((t=>t.find((t=>t.id===e))||Promise.reject("no matching album")))}updateProjectWithIdForServiceIdP(e,t,r){return this.getProjectWithIdForServiceIdP(e,t).then((e=>{let t={payload:r};return e.updateAttributesP("setPublishInfo",t)}))}deleteProjectWithIdForServiceIdP(e,t){return this.getCatalogP().then((r=>this.getProjectWithIdForServiceIdP(e,t).then((e=>r.getProjectAlbums().deleteP(e.id)))))}deleteOrphanedProjectWithIdP(e){return this.getCatalogP().then((t=>this.getProjectsP().then((r=>{r.find((t=>t.id===e));return t.getProjectAlbums().deleteP(e)}))))}getAssetsOfProjectWithIdForServiceIdP(e,t){return this.getProjectWithIdForServiceIdP(e,t).then((e=>{let t={subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"};return e.setDefaultAssetOptions(t),e.assets.allP().then((t=>({album:e,assets:t})))}))}updateAssetsOfProjectWithIdForServiceIdP(e,t,r){return this.getProjectWithIdForServiceIdP(e,t).then((e=>{let t={subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"};return e.setDefaultAssetOptions(t),e.assets.allP().then((t=>{let i=r.map((e=>({id:e.id,payload:e.infoOverlay})));return e.assets._bulkUpdateAttributesP(i)}))}))}addAssetsToProjectWithIdForServiceIdP(e,t,r){return this.getProjectWithIdForServiceIdP(e,t).then((e=>e.assets.addOrderedAssetIdsP(r,0)))}removeAssetsFromProjectWithIdForServiceIdP(e,t,r){return this.getProjectWithIdForServiceIdP(e,t).then((e=>e.removeManyAssetsP(r)))}publishV1SnapshotOfAlbumWithIdForServiceIdP(e,t){return this.getProjectWithSourceAlbumIdForServiceIdP(e,t).then((r=>r?Promise.reject("source album is currently published"):this.getCatalogP().then((r=>r.albums.getP(e).then((e=>{if("collection"!==e.attributes.subtype)return Promise.reject("source album not of subtype collection");let i=r.getProjectAlbums();var n=[];return e.assets.allP().then((r=>{n=r.map((e=>e.id));let s=(new Date).toISOString(),o={subtype:"project",payload:{sourceAlbum:{id:e.id},publishInfo:{version:1,serviceId:t,created:s,updated:s}}};return i.createP(e.name||e.id,o)})).then((t=>{let r={subtype:"topic",payload:{order:"Uzzz",parent:{id:t.id}}},n=e.attributes.payload.cover;return n&&(r.payload.cover={id:n.id}),i.createP(e.name||e.id,r)})).then((e=>e.assets.addOrderedAssetIdsP(n,0).then((()=>e))))}))))))}deleteV1ProjectWithIdForServiceIdP(e,t){return this.getCatalogP().then((r=>this.getProjectWithIdForServiceIdP(e,t).then((e=>e.topics.allP().then((t=>r.getProjectAlbums().deleteP(e.id)))))))}deleteOrphanedTopicsP(){return this.getCatalogP().then((e=>{let t=new Zc(`${e.linkHref("self")}/albums`,{subtype:"topic"});return t.allP().then((e=>{let r=[];e.forEach((e=>{e.attributes.payload.parent||r.push(t.deleteP(e.id))}));let i=r.length;return Promise.all(r).then((function(){return"number of deleted topics without a parent: "+i}))}))}))}};var hd,pd,fd,gd,md,yd,vd,bd,_d;const{LrSDK:wd}=window,Pd=3e3;function Ad(){return new Promise(((e,t)=>{let r=new ud(`${N.Z.hostOverride}/v2/catalogs`);r.fetchP().done((()=>{if(0===r.numLoaded())t("failed to load catalog");else{let t=r.at(0),i=new Zc(`${t.linkHref("self")}/albums`,{});e(i)}})).fail((e=>{h.Z.noticeError(e),t("failed to load catalog")}))}))}function Sd(e){return e.assets.allP().then((()=>{let t=e.attributes.toJSON();return t.resources=e.assets.models.map((e=>{let t=e.attributes.toJSON();return delete t.base,{asset:t}})),t}))}function xd(e,t){if("project"!==t.attributes.subtype)return Promise.reject("not a valid project");let r=t.attributes.payload.sourceAlbum;return r?e.getP(r.id).then((e=>function(e,t){let r={subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"};return e.setDefaultAssetOptions(r),t.setDefaultAssetOptions(r),Promise.all([e.assets.allP(),t.assets.allP()]).then((r=>{let i=r[0],n=r[1],s=i.map((e=>e.id)),o=n.map((e=>e.id)),a=t.assets.models.map((e=>{let t=e.attributes.toJSON();return delete t.base,{asset:t}}));return e.removeManyAssetsP(s).then((()=>e.assets.addOrderedAssetIdsP(o,0).then((()=>a))))}))}(t,e).then((e=>{let r={payload:{publishInfo:{updated:(new Date).toISOString()}}};return t.updateAttributesP("setPublishInfo",r).then((()=>{let r=t.attributes.toJSON();return r.resources=e,r}))}))),(e=>Sd(t))):Sd(t)}let Cd=(hd=o("debug_projects"),pd=o("debug_projects"),fd=o("debug_projects"),gd=o("debug_projects"),md=o("debug_projects"),yd=o("debug_projects"),vd=o("debug_projects"),bd=o("debug_projects"),_d=class extends ye{initialize(e){try{if(e.features){let t=Object.getOwnPropertyNames(e.features);for(const r of t)n.Z._override(r,e.features[r])}Y.Z.token=e.token,Y.Z.environment=wd.environment,Y.Z.clientId=e.clientId,Y.Z.ozHost="prod"===wd.environment?"https://photos.adobe.io":"https://photos-stage.adobe.io",V.reset(),N.Z.hostOverride=Y.Z.ozHost,cd.Z.isReady||(cd.Z.setGetTokenMethod((()=>this._token)),cd.Z.setAuthReady()),ye.setAuthHeaders(Y.Z.token,Y.Z.clientId),N.Z.authErrorCallback=()=>h.Z.report("ozAuthError"),h.Z.reportApiCall("LrCatalog.initialize")}catch(e){h.Z.noticeError(e),console.log("Could not initialize LrCatalog",e)}e.disableAnalytics||(0,he.Z)(Y.Z)}getEntitlementStatusP(){return h.Z.reportApiCall("LrCatalog.getEntitlementStatusP"),ni.getCurrentP().then((e=>{let t;return e&&(t=e.getStatus()),t||"unknown"}))}isEmptyP(){return new Promise(((e,t)=>{let r=new ud(`${N.Z.hostOverride}/v2/catalogs`);r.fetchP().done((()=>{let t=0===r.numLoaded();h.Z.report("isCatalogEmptyCheck",{value:t?"empty":"not empty"}),e(t)})).fail((t=>{h.Z.report("isCatalogEmptyCheck",{value:"missing"}),e(!0)}))}))}unpublishProjectP(e){return h.Z.reportApiCall("LrCatalog.unpublishProjectP"),Ad().then((t=>t.getP(e).then((e=>"topic"===e.attributes.subtype&&e.attributes.payload.parent?t.getP(e.attributes.payload.parent.id).then((e=>{let t=(new Date).toISOString();return e.updateAttributesP("setPublishInfo",{payload:{publishInfo:{updated:t,deleted:!0}}}).then((()=>!0))})):function(e){if("project"!==e.attributes.subtype)return Promise.reject("not a valid project");let t=(new Date).toISOString();return e.updateAttributesP("setPublishInfo",{payload:{publishInfo:{updated:t,deleted:!0}}}).then((()=>!0))}(e)))))}republishProjectP(e){return h.Z.reportApiCall("LrCatalog.republishProjectP"),Ad().then((t=>t.getP(e).then((e=>"topic"===e.attributes.subtype&&e.attributes.payload.parent?t.getP(e.attributes.payload.parent.id).then((r=>{let i=r.attributes.payload.sourceAlbum;return i?t.getP(i.id).then((t=>function(e,t){let r={subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"};return e.setDefaultAssetOptions(r),t.setDefaultAssetOptions(r),Promise.all([e.assets.allP(),t.assets.allP()]).then((r=>{let i=r[0],n=r[1],s=i.map((e=>e.id)),o=n.map((e=>e.id)),a=e.attributes.toJSON();return a.resources=t.assets.models.map((e=>{let t=e.attributes.toJSON();return delete t.base,{asset:t}})),e.removeManyAssetsP(s).then((()=>e.assets.addOrderedAssetIdsP(o,0).then((()=>a))))}))}(e,t).then((e=>{let t={payload:{publishInfo:{updated:(new Date).toISOString()}}};return r.updateAttributesP("setPublishInfo",t).then((()=>e))}))),(t=>Sd(e))):Sd(e)})):xd(t,e)))))}_isRenditionValidP(e){return ae.Z.requestOzUrlP("HEAD",e).then((e=>!0)).catch((e=>!1))}get2560RenditionRelativeUrlP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h.Z.reportApiCall("get2560RenditionRelativeUrlP");var i=t.links["/rels/rendition_type/2560"];if(i&&!i.invalid&&!r)return this._isRenditionValidP(e+i.href).then((r=>r?i.href:this.get2560RenditionRelativeUrlP(e,t,!0)));if(!t.links["/rels/master"]&&!t.links["/rels/proxy_type/2560"])return Promise.reject("no proxy or master file");if(!t.revision_ids||t.revision_ids.length<1)return Promise.reject("no revisions");let n=t.revision_ids[t.revision_ids.length-1],s=t.links["/rels/rendition_create"].href.replace("{revision_id}",n),o=e+s.replace("{rendition_id}","");return new Promise(((r,n)=>{var s=0;let a=e=>{(s+=Pd)>=9e4?n("timed out"):setTimeout((()=>{ae.Z.requestOzUrlP("HEAD",e).then((e=>{r(i.href)})).catch((t=>{a(e)}))}),Pd)};ae.Z.requestOzUrlP("POST",o,null,{"x-generate-renditions":"2560"}).then((r=>{(r=r.responseObject)&&r.links&&r.links["/rels/rendition_type/2560"]?(i=r.links["/rels/rendition_type/2560"],a(e+i.href)):n(`failed request to create rendition for asset id ${t.id}`)})).catch((e=>{n(`failed request to create rendition for asset id ${t.id}`)}))}))}getFullsizeRenditionRelativeUrlP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h.Z.reportApiCall("getFullsizeRenditionRelativeUrlP");let i=t.links["/rels/rendition_type/fullsize"];if(i&&!i.invalid&&!r)return this._isRenditionValidP(e+i.href).then((r=>r?i.href:this.getFullsizeRenditionRelativeUrlP(e,t,!0)));let n=t.links["/rels/master"];if(!n)return Promise.reject("no master file");if(!((t.payload||{}).develop||{}).xmpCameraRaw&&"image/jpeg"===n.content_type)return Promise.resolve(n.href);if(!t.revision_ids||t.revision_ids.length<1)return Promise.reject("no revisions");let s=t.revision_ids[t.revision_ids.length-1],o=t.links["/rels/rendition_create"].href.replace("{revision_id}",s),a=e+o.replace("{rendition_id}","");return new Promise(((r,n)=>{var s=0;let o=e=>{(s+=Pd)>=9e4?n("timed out"):setTimeout((()=>{ae.Z.requestOzUrlP("HEAD",e).then((e=>{r(i.href)})).catch((t=>{o(e)}))}),Pd)};ae.Z.requestOzUrlP("POST",a,null,{"x-generate-renditions":"fullsize"}).then((r=>{(r=r.responseObject)&&r.links&&r.links["/rels/rendition_type/fullsize"]?(i=r.links["/rels/rendition_type/fullsize"],o(e+i.href)):n(`failed request to create rendition for asset id ${t.id}`)})).catch((e=>{n(`failed request to create rendition for asset id ${t.id}`)}))}))}getImageP(e){return h.Z.reportApiCall("LrCatalog.getImageP"),ae.Z.getOzUrlP(e,"blob").then((e=>e.response))}assetUrlP(e){return h.Z.reportApiCall("LrCatalog.assetUrlP"),new Promise(((t,r)=>{let i=new ud(`${N.Z.hostOverride}/v2/catalogs`);i.fetchP().done((()=>{let r=i.at(0),n=r._linkBase.fullHref(`catalogs/${r.id}/assets/${e}`);t(n)})).fail((e=>{h.Z.noticeError(e),r(e)}))}))}getAssetP(e){return h.Z.reportApiCall("LrCatalog.getAssetP"),new Promise(((t,r)=>{this.requestP("GET",e).done((e=>{t(e)})).fail((e=>{h.Z.noticeError(e),r(e)}))}))}xmpForAssetP(e){return h.Z.reportApiCall("LrCatalog.xmpForAssetP"),new Promise(((t,r)=>{let i=e.payload?.develop?.xmpCameraRaw;if(e.links["/rels/xmp"]){let n=`${e.base}${e.links["/rels/xmp"].href}`;this.requestP("GET",n,null,{contentType:null}).done((e=>{t(((e,t)=>{if(!e)return t;if(!t)return e;let i=new DOMParser,n=i.parseFromString(e,"text/xml"),s=n.documentElement.getElementsByTagName("parsererror");if(s&&s.length>0)return void r(s[0].innerText);let o=i.parseFromString(t,"text/xml");if(s=n.documentElement.getElementsByTagName("parsererror"),s&&s.length>0)r(s[0].innerText);else try{let e=n.getElementsByTagName("rdf:Description")[0]||n.getElementsByTagName("Description")[0],t=o.getElementsByTagName("rdf:Description")[0]||o.getElementsByTagName("Description")[0];for(const[r,i]of Object.entries(t.attributes))e.setAttribute(i.nodeName,i.nodeValue);for(;t.firstChild;)e.appendChild(t.firstChild);return(new XMLSerializer).serializeToString(n)}catch(e){throw new Error("Invalid XMP")}})(e,i))})).fail((e=>{h.Z.noticeError(e),r(e)}))}else t(i)}))}async publishProjectSnapshotOfCollectionWithIdP(e){h.Z.reportApiCall("LrCatalog.publishProjectSnapshotOfCollectionWithIdP");let t=await oe.getProjectManagerP(),r=await t.createProjectFromCollectionWithIdP(e),i=(new Date).toISOString(),n={userUpdated:i,publishInfo:{created:i,updated:i}};return await t.updateProjectWithIdP(r,n),r}async republishSourceAlbumSnapshotOfProjectWithIdP(e){h.Z.reportApiCall("LrCatalog.republishSourceAlbumSnapshotOfProjectWithIdP");let t=await oe.getProjectManagerP();await t.resetProjectWithIdFromSourceCollectionP(e);let r=(new Date).toISOString(),i={userUpdated:r,publishInfo:{updated:r}};return t.updateProjectWithIdP(e,i)}async getProjectsP(){return h.Z.reportApiCall("LrCatalog.getProjectsP"),(await oe.getProjectManagerP()).getDeepCopyOfProjectListP()}async getProjectWithIdP(e){return h.Z.reportApiCall("LrCatalog.getProjectWithIdP"),(await oe.getProjectManagerP()).getDeepCopyOfProjectWithIdP(e)}async getCollectionWithIdP(e){h.Z.reportApiCall("LrCatalog.getCollectionWithIdP");let t=await oe.getCollectionWithIdP(e);return JSON.parse(JSON.stringify(t))}async getAssetsOfCollectionWithIdP(e){return h.Z.reportApiCall("LrCatalog.getAssetsOfCollectionWithIdP"),oe.getAssetsOfCollectionWithIdP(e)}async createProjectWithAssetIdsP(e,t){return h.Z.reportApiCall("LrCatalog.createProjectWithAssetIdsP"),(await oe.getProjectManagerP()).createProjectWithAssetIdsP(e,t)}async createProjectFromCollectionWithIdP(e){return h.Z.reportApiCall("LrCatalog.createProjectFromCollectionWithIdP"),(await oe.getProjectManagerP()).createProjectFromCollectionWithIdP(e)}async resetProjectWithIdFromSourceCollectionP(e){return h.Z.reportApiCall("LrCatalog.resetProjectWithIdFromSourceCollectionP"),(await oe.getProjectManagerP()).resetProjectWithIdFromSourceCollectionP(e)}async updateProjectWithIdP(e,t){return h.Z.reportApiCall("LrCatalog.updateProjectWithIdP"),(await oe.getProjectManagerP()).updateProjectWithIdP(e,t)}async deleteProjectWithIdP(e){return h.Z.reportApiCall("LrCatalog.deleteProjectWithIdP"),(await oe.getProjectManagerP()).deleteProjectWithIdP(e)}async getAssetsOfProjectWithIdP(e){return h.Z.reportApiCall("LrCatalog.getAssetsOfProjectWithIdP"),(await oe.getProjectManagerP()).getAssetsOfProjectWithIdP(e)}async getUncachedProjectsP(){return(await oe.getProjectManagerP()).getUncachedProjectsP()}async getUncachedProjectWithIdP(e){return(await oe.getProjectManagerP()).getUncachedProjectWithIdP(e)}async deleteProjectWithIdForServiceIdP(e,t){return(await oe.getProjectManagerForServiceIdP(t)).deleteProjectWithIdP(e)}async deleteChildAlbumsOfProjectWithIdForServiceIdP(e,t){return(await oe.getProjectManagerForServiceIdP(t)).deleteChildAlbumsOfProjectWithIdP(e)}deleteOrphanedProjectWithIdP(e){return dd.deleteOrphanedProjectWithIdP(e)}publishV1SnapshotOfAlbumWithIdP(e){let t=Y.Z.clientId;return dd.publishV1SnapshotOfAlbumWithIdForServiceIdP(e,t).then((e=>e.attributes.toJSON()))}deleteOrphanedTopicsP(){return dd.deleteOrphanedTopicsP()}selfTestP(e){return de.runP(e)}},(0,i.Z)(_d.prototype,"getUncachedProjectsP",[hd],Object.getOwnPropertyDescriptor(_d.prototype,"getUncachedProjectsP"),_d.prototype),(0,i.Z)(_d.prototype,"getUncachedProjectWithIdP",[pd],Object.getOwnPropertyDescriptor(_d.prototype,"getUncachedProjectWithIdP"),_d.prototype),(0,i.Z)(_d.prototype,"deleteProjectWithIdForServiceIdP",[fd],Object.getOwnPropertyDescriptor(_d.prototype,"deleteProjectWithIdForServiceIdP"),_d.prototype),(0,i.Z)(_d.prototype,"deleteChildAlbumsOfProjectWithIdForServiceIdP",[gd],Object.getOwnPropertyDescriptor(_d.prototype,"deleteChildAlbumsOfProjectWithIdForServiceIdP"),_d.prototype),(0,i.Z)(_d.prototype,"deleteOrphanedProjectWithIdP",[md],Object.getOwnPropertyDescriptor(_d.prototype,"deleteOrphanedProjectWithIdP"),_d.prototype),(0,i.Z)(_d.prototype,"publishV1SnapshotOfAlbumWithIdP",[yd],Object.getOwnPropertyDescriptor(_d.prototype,"publishV1SnapshotOfAlbumWithIdP"),_d.prototype),(0,i.Z)(_d.prototype,"deleteOrphanedTopicsP",[vd],Object.getOwnPropertyDescriptor(_d.prototype,"deleteOrphanedTopicsP"),_d.prototype),(0,i.Z)(_d.prototype,"selfTestP",[bd],Object.getOwnPropertyDescriptor(_d.prototype,"selfTestP"),_d.prototype),_d);wd.catalog||(wd.catalog=new Cd),wd.provide&&wd.provide("catalog",wd.catalog);wd.catalog},645491:(e,t,r)=>{"use strict";r(65912);var i=r(665238);const n=new class{constructor(){this.standAloneMode="stand-alone",this.embeddedMode="embedded",this.returnAfterSingleSelect=!1,this.singleSelect=!1,this.showConnectedProjects=!1,this.publishProjects=!1,this.ignorePublishedProjects=!1,this.softImportLimit=1/0,this.allowImportEntireAlbum=!1,this.headerStyle="full",this.mode=this.standAloneMode,this.externalUrlHandler=void 0,this.initialSearch=void 0,this.browseOnlyCollections=!1,this.showConnectedProjects=!1,this.browseProjectId=void 0,this.browseAlbums=!1,this.preferredLanguage=void 0,this.colorStop="dark"}};function s(e,t){return e.createElement(t)}function o(e,t){e.appendChild(t)}var a=r(323335),l=r.n(a),u=r(979985);class c{constructor(){this._index=[],this._regexps=[]}register(e,t){if(e instanceof RegExp)this._regexps.push({name:e,fn:t});else if(Array.isArray(e))for(var r=0,i=e.length;r<i;++r)this.register(e[r],t);else this._index["_"+e]=t}get(e){for(var t=this._regexps,r=0,i=t.length;r<i;++r){var n=t[r];if(n.name.test(e))return n.fn}return this._index["_"+e]}}var d=r(898950);class h extends d.Z{constructor(){super(...arguments),this.exports=new c,this.imports=new c,this.templateImports=new c}getImport(e){return this.imports.get(e)}registerImport(e,t){this.imports.register(e,t)}getTemplateImport(e){return this.templateImports.get(e)}registerTemplateImport(e,t){this.templateImports.register(e,t)}}const p=new h;var f=r(411199);const g=f.Z.makeClassDecorator((function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:p).exports.register(t,e),Object.defineProperty(e.prototype,"_export",{value:t,enumerable:!1,configurable:!0})}));var m=r(446074),y=r(495440);const v=f.Z.makePropertyDecorator(((e,t,r,i,n)=>{"number"==typeof i?(n=i,i=y.Z):(i||(i=y.Z),"number"!=typeof n&&(n=0));let s=f.Z.getInitialValue(r),o="_task_"+t;delete r.value,delete r.writable,r.get=function(){if(e===this)return s;let r,a=this[o];if(a)return a;let l=()=>{this.isDisposed||s.apply(this,r)};return a=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];r=t,i.push(l,n)},a.cancel=()=>{i.remove(l)},Object.defineProperty(this,o,{value:a,enumerable:!1}),Object.defineProperty(this,t,{value:a,enumerable:!1}),a}}));var b=r(35609);r(467111),r(357866),r(460626),r(54923),r(249560);const _={};class w extends d.Z{constructor(){super(),Object.defineProperty(this,"_id",{enumerable:!1,value:_.id});var e=_.props;if("object"==typeof e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=this._port.importValue(e[t]))}dispose(){super.dispose(),this._port.disposeImport(this)}callMethod(e,t){this._port.callMethod(this,e,t)}callMethodWithPromise(e,t){return this._port.callMethodWithPromise(this,e,t)}}class P extends Error{constructor(e,t){super(e),this.remoteStack=t}toString(){return this.message+"\n"+this.remoteStack}}var A=r(293533),S=r(331248);class x{constructor(e){this.value=e}}var C,O,k=r(681500),E=r.n(k),T=r(429350),I=r.n(T);let D=g("Port")((O=class extends d.Z{constructor(e){super(),this.exportedValues={},this.exportedTypes={},this.importedValues={},this.pendingResults={},this.pendingMessages=[],this.importedTypes={},this.register=e,this.loaded=new Promise(((e,t)=>this._loadedPromise={resolve:e,reject:t}))}dispose(){var e=this.importedValues;if(this.importedValues=null,e)for(let t in e){e[t].dispose()}if(this.exportedValues)for(let e in this.exportedValues){const t=this.exportedValues[e];t===this||t.selfManaged||t.dispose()}super.dispose()}postMessages(){}handleMessages(e){this.isDisposed||e&&e.forEach(this.handleMessage)}postMessage(e,t){this.pendingMessages.push({type:e,values:t}),this.flushMessagesSoon()}flushMessagesSoon(){var e=this.pendingMessages;this.pendingMessages=[],this.postMessages(e)}handleMessage(e){let{type:t,values:r}=e;switch(t){case"dispose":this.disposeExport(r._id);break;case"callMethod":this.handleCallMethod(r);break;case"result":this.handleResult(r);break;case"error":this.handleError(r);break;case"type":this.handleType(r);break;case"init":this.handleInit(r)}}postInit(){this._postInitPosted||(this._postInitPosted=!0,this.postMessage("init",{workerId:this.exportValue(this)}))}handleInit(e){let{workerId:t}=e;this.main=this.importValue(t),this.postInit(),this._loadedPromise.resolve(this)}handleType(e){let{className:t,methods:r,selfManaged:i}=e;this.getImportType(t,r,i)}getImportType(e,t,r){if(this.importedTypes.hasOwnProperty(e))return this.importedTypes[e];var i=this.register.getImport(e);if(i){var n=i;i=class extends n{}}else{var s=e.split("::"),o=this.register.getTemplateImport(s[0]);o?(i=o(s[1],e),Object.defineProperty(i.prototype,"_import",{enumerable:!1,value:e})):(i=class extends w{},this.register.registerImport(e,i),Object.defineProperty(i.prototype,"_import",{enumerable:!1,value:e}),Object.defineProperty(i.prototype,"_interceptor",{enumerable:!1,value:i}))}if(t&&t.length){var a=i.prototype._interceptor;if(!a)throw new Error("No @Import decorator found for "+e);t.forEach((e=>{let{name:t}=e;Object.defineProperty(a.prototype,t+"Async",{enumerable:!1,value:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];this.callMethod(t,r)},configurable:!0}),Object.defineProperty(a.prototype,t,{enumerable:!1,value:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.callMethodWithPromise(t,r)},configurable:!0})})),Object.defineProperty(a.prototype,"_export",{enumerable:!1,value:e,configurable:!0}),Object.defineProperty(a.prototype,"_publicMethods",{enumerable:!1,value:t,configurable:!0})}return Object.defineProperty(i.prototype,"selfManaged",{enumerable:!1,value:r}),Object.defineProperty(i.prototype,"_port",{enumerable:!1,value:this}),this.importedTypes[e]=i,i}handleCallMethod(e){let{thisId:t,method:r,args:i,responseId:n}=e;var s=this.importValue(t);if(!s)throw new Error("Invalid this object for call method call.");var o,a=i&&this.importValue(i)||[];try{var l=s[r];if(!l)throw new Error(`No method ${r} detected on ${s._export}.`);if(!s._publicMethods||!I()(s._publicMethods,(e=>{let{name:t}=e;return t===r})))throw new Error(`Method ${r} is not public on ${s._export}.`);if("function"!=typeof l)throw new Error(`Property ${r} on ${s._export} is not a function.`);o=l.apply(s,a)}catch(e){return void(n?this.postMessage("error",{responseId:n,message:e.toString(),stack:e.stack}):console.error(e.toString()+e.stack))}if(n){if(o&&o.then&&"function"==typeof o.then)return void o.then((e=>{this.postMessage("result",{responseId:n,result:this.exportValue(e)})})).catch((e=>{this.postMessage("error",{responseId:n,message:e.toString(),stack:e.stack})}));this.postMessage("result",{responseId:n,result:this.exportValue(o)})}}popResponsePromise(e){var t=this.pendingResults;if(!t.hasOwnProperty(e))throw new Error(`Invalid response id received as result from the other thread: ${e}`);var r=t[e];return delete t[e],r}handleResult(e){let{responseId:t,result:r}=e;var i=this.popResponsePromise(t),n=this.importValue(r);i.resolve(n)}handleError(e){let{responseId:t,message:r,stack:i}=e;var n=this.popResponsePromise(t);console.error(i),n.reject(new P(r,i))}callMethod(e,t,r){this.postMessage("callMethod",{thisId:this.exportValue(e),method:t,args:r?this.exportValue(r):null})}callMethodWithPromise(e,t,r){return new Promise(((i,n)=>{var s=E()("responseId");this.pendingResults[s]={resolve:i,reject:n},this.postMessage("callMethod",{responseId:s,thisId:this.exportValue(e),method:t,args:r?this.exportValue(r):null})}))}exportObject(e){var t=(0,A.Z)(e);return this.exportedValues.hasOwnProperty(t)||(this.exportedValues[t]=e,this.exportedTypes.hasOwnProperty(e._export)||(this.exportedTypes[e._export]=!0,this.postMessage("type",{className:e._export,methods:e._publicMethods,selfManaged:!e.dispose||e.selfManaged}))),{_id:t,_export:e._export}}disposeExport(e){var t=this.exportedValues;if(t.hasOwnProperty(e)){var r=t[e];if(!r||r.selfManaged)return;r.dispose(),r.isDisposed&&delete t[e]}}exportValue(e){if(e){if(this.isOpaqueValue(e))return e;if(Array.isArray(e))return e.map(this.exportValue);if("object"==typeof e){if(e instanceof x)return{_opaqueValue:!0,_wrappedValue:e.value};if(e._import&&e._port===this)return{_import:e._import,_id:e._id};if(e._export)return this.exportObject(e);let t={};for(let r in e)t[r]=this.exportValue(e[r]);return t}}return e}importObject(e){var t=e._id,r=this.importedValues.hasOwnProperty(t)?this.importedValues[t]:null;if(!r){var i=e._export||"BaseImport",n=this.getImportType(i);_.id=e._id,_.props=e._props,Array.isArray(e._ctorArgs)&&e._ctorArgs.length>0?S.Z.Reflect&&S.Z.Reflect.construct?r=S.Z.Reflect.construct(n,e._ctorArgs):(r=Object.create(n.prototype),n.apply(r,e._ctorArgs)):r=new n,this.importedValues[t]=r}return r}disposeImport(e){var t=this.importedValues;t&&(delete t[e._id],e.selfManaged||this.postMessage("dispose",{_id:e._id}))}isOpaqueValue(e){return e instanceof ArrayBuffer||e instanceof Uint8Array||e instanceof Int8Array||S.Z.Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array||S.Z.NSObject&&e instanceof S.Z.NSObject}importValue(e){if(e){if(this.isOpaqueValue(e))return e;if(Array.isArray(e))return e.map(this.importValue);if("object"==typeof e){if(e._opaqueValue)return new x(e._wrappedValue);if(e._export)return this.importObject(e);if(e._import)return this.exportedValues[e._id];let t={};for(let r in e)t[r]=this.importValue(e[r]);return t}}return e}},(0,u.Z)(O.prototype,"postMessages",[b.Z],Object.getOwnPropertyDescriptor(O.prototype,"postMessages"),O.prototype),(0,u.Z)(O.prototype,"flushMessagesSoon",[v],Object.getOwnPropertyDescriptor(O.prototype,"flushMessagesSoon"),O.prototype),(0,u.Z)(O.prototype,"handleMessage",[m.Z],Object.getOwnPropertyDescriptor(O.prototype,"handleMessage"),O.prototype),(0,u.Z)(O.prototype,"exportValue",[m.Z],Object.getOwnPropertyDescriptor(O.prototype,"exportValue"),O.prototype),(0,u.Z)(O.prototype,"importValue",[m.Z],Object.getOwnPropertyDescriptor(O.prototype,"importValue"),O.prototype),C=O))||C;var R=r(902049);class j extends D{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:p)}initiateConnection(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";this.channel=new window.MessageChannel,this.port=this.channel.port1,e.postMessage(JSON.stringify({kind:"torq-message-channel-init",name:r}),t,[this.channel.port2]),this.channel.port1.onmessage=e=>{this.handleChannelMessage(e)}}waitForConnection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";var r=new R.Z,i=function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.addEventListener(t,r,i),()=>e.removeEventListener(t,r,i)}(window,"message",(e=>{if(/torq-message-channel-init/.test(e.data))try{var n=JSON.parse(e.data);"torq-message-channel-init"===n.kind&&n.name===t&&(this.port=e.ports[0],this.port.onmessage=e=>{this.handleChannelMessage(e)},i(),this.postInit(),r.resolve())}catch(e){}}));return r.promise}handleInit(){super.handleInit(...arguments),this.postInit()}handleChannelMessage(e){try{this.handleMessages(e.data)}catch(e){return void console.error(e)}}postMessages(e){this.port.postMessage(e)}}const Z=new h;var N=r(49891),F=r(42733),L=r(656833),M=(r(666222),r(533111),r(4987)),U=r(252118);const $=f.Z.makePropertyDecorator((function(e,t,r){e.hasOwnProperty("_publicMethods")||Object.defineProperty(e,"_publicMethods",{enumerable:!1,value:e._publicMethods?e._publicMethods.slice():[]});for(var i=arguments.length,n=new Array(i>3?i-3:0),s=3;s<i;s++)n[s-3]=arguments[s];e._publicMethods.push({name:t,args:n}),r.value=f.Z.getInitialValue(r)}));var z,H;let J=g("StreamDelegate")((H=class extends d.Z{constructor(e){super(),this.stream=e,e.attach(this)}write(e){this.trigger("data",e)}dispose(){super.dispose(),this.stream&&(this.stream.detach(),this.stream=null)}},(0,u.Z)(H.prototype,"write",[$],Object.getOwnPropertyDescriptor(H.prototype,"write"),H.prototype),z=H))||z;const{LrSDK:q}=window;class V extends d.Z{initialize(e){try{if(e.features)for(const[t,r]of Object.entries(e.features))M.Z._override(t,r);i.Z.token=e.token,i.Z.environment=q.environment,i.Z.clientId=e.clientId,i.Z.ozHost="prod"===q.environment?"https://photos.adobe.io":"https://photos-stage.adobe.io",U.Z.isReady||(U.Z.setGetTokenMethod((()=>this._token)),U.Z.setAuthReady()),this.disableAnalytics=!!e.disableAnalytics,this.disableAnalytics||(0,L.Z)(i.Z),Object.keys(n).forEach((t=>{e.hasOwnProperty(t)&&(n[t]=e[t])})),this._config=e,this._iframes={},this.browseCount=0}catch(e){F.Z.noticeError(e),console.log("Could not initialize LrImporter",e)}}attachCatalogBrowserP(e){if(F.Z.reportApiCall("LrImporter.attachCatalogBrowserP"),F.Z.beginTiming("importerBrowse"),!i.Z.token)return Promise.reject("There must be a valid IMS token");e.textContent="";var t=(0,A.Z)(e);let r;return new Promise(((a,u)=>{var c=`${window.location.protocol}//${window.location.hostname}`+(window.location.port?":"+window.location.port:""),d=new j(Z);d.waitForConnection(c,"lr-importer-browser");var h=s(document,"div");h.style.position="absolute",h.style.top=0,h.style.left=0,h.style.bottom=0,h.style.right=0;var p=s(document,"iframe");p.style.position="relative",p.style.width="100%",p.style.height="100%",p.style.border="none";var f={source:c,session:F.Z.sessionGuid,count:++this.browseCount};return p.src=q.baseURL+`sdk/LrImporter.html?${l().stringify(f)}`,p.id="lrimporter-iframe",e.dataset.importerStatus="loading",r=t=>{e.dataset.importerStatus=t},o(h,p),o(e,h),this._iframes[t]=h,d.loaded.then((()=>{var e=d.main,t={disableAnalytics:this.disableAnalytics,features:this.features};Object.assign(t,i.Z,n),t.externalUrlHandler=!!t.externalUrlHandler,e.initialize(t).then((t=>{t&&(this.streamDelegate=this.link(new J(t)),this.listenTo(this.streamDelegate,"data",this._handleRemoteMessage),this.on("status-change",r)),a({iframe:h,importer:e})})).catch((e=>{u(e),F.Z.noticeError(e)}))}))})).then((e=>e.importer.browse().then((e=>(this.stopListening(this.streamDelegate,"data",this._handleRemoteMessage),this.disposeLink(this.streamDelegate),this.off("status-change",r),F.Z.reportWithTiming("importerBrowse",{api:"LrImporter.attachCatalogBrowserP",value:e?1:0,count:e?e.resources.length:0}),e))))).catch((e=>(console.log("Could not create lr-importer iframe",e),F.Z.noticeError(e),Promise.reject(e))))}detachCatalogBrowser(e){F.Z.reportApiCall("LrImporter.detachCatalogBrowser");var t=(0,A.Z)(e);t&&this._iframes[t]?function(e){if(e.remove)e.remove();else{var t=e.parentNode;t&&t.removeChild(e)}}(this._iframes[t]):console.error("No LrImporter found for",e)}browseCatalogInWindowP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{maxWidth:1920,maxHeight:1080};if(F.Z.reportApiCall("LrImporter.browseCatalogInWindowP"),F.Z.beginTiming("importerBrowse"),!i.Z.token)return Promise.reject("There must be a valid IMS token");var t=new j(Z);t.waitForConnection(u,"lr-importer-browser");var r=Math.min(e.maxHeight,window.screen.availHeight),s=Math.min(e.maxWidth,window.screen.availWidth),o=window.screen.availTop+window.screen.availHeight/2-r/2,a=window.screen.availLeft+window.screen.availWidth/2-s/2,u=`${window.location.protocol}//${window.location.hostname}`+(window.location.port?":"+window.location.port:""),c=`menubar=yes,resizable=yes,scrollbars=no,status=yes,width=${s},height=${r},top=${o},left=${a}`,d={source:u,session:F.Z.sessionGuid},h=q.baseURL+`sdk/LrImporter.html?${l().stringify(d)}`,p=window.open(h,"lr_importer_window",c);(p.outerWidth<screen.availWidth||p.outerHeight<screen.availHeight)&&(p.moveTo(0,0),p.resizeTo(screen.availWidth,screen.availHeight));var f=N.Z.background;return N.Z.background=!0,new Promise(((e,r)=>{this._windowCloseHandler=t=>{F.Z.reportWithTiming("importerBrowse",{api:"LrImporter.browseCatalogInWindowP",value:0,count:0}),e(null)},t.loaded.then((()=>{var e=t.main,r={disableAnalytics:this.disableAnalytics,features:this.features};return Object.assign(r,i.Z,n),r.externalUrlHandler=!!r.externalUrlHandler,e.initialize(r).then((t=>(t&&(this.streamDelegate=this.link(new J(t)),this.listenTo(this.streamDelegate,"data",this._handleRemoteMessage)),e.browse()))).then((e=>(p.close(),N.Z.background=f,t.dispose(),this.stopListening(this.streamDelegate,"data",this._handleRemoteMessage),this.disposeLink(this.streamDelegate),F.Z.reportWithTiming("importerBrowse",{api:"LrImporter.browseCatalogInWindowP",value:e?1:0,count:e?e.resources.length:0}),this._windowCloseHandler=void 0,e))).catch((e=>(F.Z.noticeError(e),this._windowCloseHandler=void 0,Promise.reject(e))))})).then((t=>{e(t)})).catch((e=>{r(e)}))}))}enableFeature(e){M.Z._override(e,!0)}get softImportLimit(){return n.softImportLimit}set softImportLimit(e){F.Z.setAttribute("softImportLimit",e),n.softImportLimit=e}set preferredLanguage(e){F.Z.setAttribute("preferredLanguage",e),n.preferredLanguage=e}get returnAfterSingleSelect(){return n.returnAfterSingleSelect}set returnAfterSingleSelect(e){F.Z.setAttribute("returnAfterSingleSelect",e),n.returnAfterSingleSelect=e}get singleSelect(){return n.singleSelect}set singleSelect(e){F.Z.setAttribute("singleSelect",e),n.singleSelect=e}get initialSearch(){return n.initialSearch}set initialSearch(e){F.Z.setAttribute("initialSearch",!0),n.initialSearch=e}get browseProjectId(){return n.browseProjectId}set browseProjectId(e){F.Z.setAttribute("browseProjectId",!0),n.browseProjectId=e}get browseOnlyCollections(){return n.browseOnlyCollections}set browseOnlyCollections(e){F.Z.setAttribute("browseOnlyCollections",e),n.browseOnlyCollections=e}get browseAlbums(){return n.browseAlbums}set browseAlbums(e){F.Z.setAttribute("browseAlbums",e),n.browseAlbums=e}get showConnectedProjects(){return n.showConnectedProjects}set showConnectedProjects(e){F.Z.setAttribute("showConnectedProjects",e),n.showConnectedProjects=e}get publishProjects(){return n.publishProjects}set publishProjects(e){F.Z.setAttribute("publishProjects",e),n.publishProjects=e}get ignorePublishedProjects(){return n.ignorePublishedProjects}set ignorePublishedProjects(e){F.Z.setAttribute("ignorePublishedProjects",e),n.ignorePublishedProjects=e}get allowImportEntireAlbum(){return n.allowImportEntireAlbum}set allowImportEntireAlbum(e){F.Z.setAttribute("allowImportEntireAlbum",e),n.allowImportEntireAlbum=e}get headerStyle(){return n.headerStyle}set headerStyle(e){F.Z.setAttribute("headerStyle",e),n.headerStyle=e}get mode(){return n.mode}set mode(e){F.Z.setAttribute("mode",e),n.mode=e}get colorStop(){return n.colorStop}set colorStop(e){F.Z.setAttribute("colorStop",e),n.colorStop=e}_handleRemoteMessage(e){switch(e.name){case"remote-analytics-set-attribute":let t=e.args[0];F.Z.setAttribute(t.name,t.value);break;case"remote-analytics-report":let r=e.args[0];F.Z.report(r.action,r.variables);break;case"remote-analytics-notice-error":let i=e.args[0];F.Z.report("jsError",{message:i.message,errorName:i.name,errorStackTrace:i.stack,url:i.url,automation:M.Z.is_enabled("automation"),noticed:!0}),F.Z.noticeError(new Error("LrImporterRemote noticed error"));break;case"remote-status-change":let s={unknown:"loading",partial:"loading",complete:"ready",missing:"missing",empty:"empty",maintenance:"maintenance"};this.trigger("status-change",s[e.args[0]]);break;case"remote-open-url":n.externalUrlHandler(e.args[0]);break;case"remote-log":console.log("REMOTE LOG",e.args[0]);break;case"remote-window-close":this._windowCloseHandler&&this._windowCloseHandler();break;default:console.log("Unknown remote event",e.name)}}}q.importer||(q.importer=new V),q.provide&&q.provide("importer",q.importer);q.importer},42733:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i,n=r(979985),s=r(670402),o=r(12838),a=r(898950),l=r(125748),u=o.Z.parseQueryFromUrl(window.location.href),c=u.session,d=u.count||0;const h=new(i=class extends a.Z{constructor(){super(),this.reset()}reset(){this.messages=[],this.timings=[],this.collectors=[],this.attributes={browseCount:d}}addCollector(e){for(const[t,r]of Object.entries(this.attributes))e.setAttribute(t,r);this.collectors.push(e)}_callCollectorMethods(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.collectors.forEach((t=>t[e](...r)))}setAttribute(e,t){this.attributes[e]!==t&&(this._callCollectorMethods("setAttribute",e,t),this.attributes[e]=t)}noticeError(e){e||(e=new Error("Unknown error")),this._callCollectorMethods("noticeError",e)}report(e,t){this._callCollectorMethods("report",e,t)}reportApiCall(e,t){this._callCollectorMethods("reportApiCall",e,t)}beginTiming(e){this.timings[e]=performance.now()}reportWithTiming(e,t){var r=this.timings[e];if(r){var i=performance.now(),n=i-r;this._callCollectorMethods("reportTimed",e,r,i,n,t),delete this.timings[e]}else this.report(e,t)}get sessionGuid(){return c||this.generateGUID()}generateGUID(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}getUserGuidP(e){if(!this.guidPromise){let t=`${"prod"===e.environment?"https://photos.adobe.io":"https://photos-stage.adobe.io"}/v2/accounts/00000000000000000000000000000000`;this.guidPromise=l.Z.getOzUrlP(t).then((e=>`${e.responseObject.wcd_guid}@AdobeID`)).catch((e=>"UnknownUserGuid"))}return this.guidPromise}},(0,n.Z)(i.prototype,"sessionGuid",[s.Z],Object.getOwnPropertyDescriptor(i.prototype,"sessionGuid"),i.prototype),i)},656833:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var i=r(42733);class n{constructor(){this.attributes=[],i.Z.addCollector(this)}setAttribute(e,t){console.log(`Analytics Set Atribute ${e}=${t}`),this.attributes[e]=t}noticeError(e){console.error("Analytics Error",e)}report(e,t){console.log("Analytics Action",e,Object.assign({},t,this.attributes))}reportTimed(e,t,r,i,n){console.log("Analytics Timing",e,i,Object.assign({},n,this.attributes))}reportApiCall(e,t){console.log("Analytics API Call",e,Object.assign({},t,this.attributes))}}var s,o=r(979985),a=r(446074),l=r(670402),u=r(314463);const c=new(s=class extends u.Z{register(){"loading"!==document.readyState?setTimeout(this.run,0):document.addEventListener("DOMContentLoaded",this.exec)}exec(){this.run()}},(0,o.Z)(s.prototype,"exec",[a.Z],Object.getOwnPropertyDescriptor(s.prototype,"exec"),s.prototype),s);var d;const h='<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset="utf-8">\n        <title></title>\n        <script id="lr-organizer-nr-snippet" type="text/javascript">\n            window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(t){try{c.console&&console.log(t)}catch(e){}}var o,i=t("ee"),a=t(19),c={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(c.console=!0,o.indexOf("dev")!==-1&&(c.dev=!0),o.indexOf("nr_dev")!==-1&&(c.nrDev=!0))}catch(s){}c.nrDev&&i.on("internal-error",function(t){r(t.stack)}),c.dev&&i.on("fn-err",function(t,e,n){r(n.stack)}),c.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(c,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,o){try{h?h-=1:i("err",[o||new UncaughtException(t,e,n)])}catch(c){try{i("ierr",[c,(new Date).getTime(),!0])}catch(s){}}return"function"==typeof f&&f.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function o(t){i("err",[t,(new Date).getTime()])}var i=t("handle"),a=t(20),c=t("ee"),s=t("loader"),f=window.onerror,u=!1,h=0;s.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(d){"stack"in d&&(t(12),t(11),"addEventListener"in window&&t(6),s.xhrWrappable&&t(13),u=!0)}c.on("fn-start",function(t,e,n){u&&(h+=1)}),c.on("fn-err",function(t,e,n){u&&(this.thrown=!0,o(n))}),c.on("fn-end",function(){u&&!this.thrown&&h>0&&(h-=1)}),c.on("internal-error",function(t){i("ierr",[t,(new Date).getTime(),!0])})},{}],3:[function(t,e,n){t("loader").features.ins=!0},{}],4:[function(t,e,n){function r(){j++,S=y.hash,this[u]=Date.now()}function o(){j--,y.hash!==S&&i(0,!0);var t=Date.now();this[l]=~~this[l]+t-this[u],this[h]=t}function i(t,e){x.emit("newURL",[""+y,e])}function a(t,e){t.on(e,function(){this[e]=Date.now()})}var c="-start",s="-end",f="-body",u="fn"+c,h="fn"+s,d="cb"+c,p="cb"+s,l="jsTime",m="fetch",v="addEventListener",w=window,y=w.location;if(w[v]){var g=t(9),b=t(10),x=t(8),E=t(6),T=t(12),O=t(7),R=t(13),P=t("ee"),D=P.get("tracer");t(14),t("loader").features.spa=!0;var S,N=w[v],j=0;P.on(u,r),P.on(d,r),P.on(h,o),P.on(p,o),P.buffer([u,h,"xhr-done","xhr-resolved"]),E.buffer([u]),T.buffer(["setTimeout"+s,"clearTimeout"+c,u]),R.buffer([u,"new-xhr","send-xhr"+c]),O.buffer([m+c,m+"-done",m+f+c,m+f+s]),x.buffer(["newURL"]),g.buffer([u]),b.buffer(["propagate",d,p,"executor-err","resolve"+c]),D.buffer([u,"no-"+u]),a(R,"send-xhr"+c),a(P,"xhr-resolved"),a(P,"xhr-done"),a(O,m+c),a(O,m+"-done"),x.on("pushState-end",i),x.on("replaceState-end",i),N("hashchange",i,!0),N("load",i,!0),N("popstate",function(){i(0,j>1)},!0)}},{}],5:[function(t,e,n){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t("ee"),i=t("handle"),a=t(12),c=t(11),s="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",h="bstResource",d="resource",p="-start",l="-end",m="fn"+p,v="fn"+l,w="bstTimer",y="pushState";t("loader").features.stn=!0,t(8);var g=NREUM.o.EV;o.on(m,function(t,e){var n=t[0];n instanceof g&&(this.bstStart=Date.now())}),o.on(v,function(t,e){var n=t[0];n instanceof g&&i("bst",[n,e,this.bstStart,Date.now()])}),a.on(m,function(t,e,n){this.bstStart=Date.now(),this.bstType=n}),a.on(v,function(t,e){i(w,[e,this.bstStart,Date.now(),this.bstType])}),c.on(m,function(){this.bstStart=Date.now()}),c.on(v,function(t,e){i(w,[e,this.bstStart,Date.now(),"requestAnimationFrame"])}),o.on(y+p,function(t){this.time=Date.now(),this.startPath=location.pathname+location.hash}),o.on(y+l,function(t){i("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+s]?window.performance[f](u,function(t){i(h,[window.performance.getEntriesByType(d)]),window.performance["c"+s]()},!1):window.performance[f]("webkit"+u,function(t){i(h,[window.performance.getEntriesByType(d)]),window.performance["webkitC"+s]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}},{}],6:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&o(e)}function o(t){c.inPlace(t,[u,h],"-",i)}function i(t,e){return t[1]}var a=t("ee").get("events"),c=t(21)(a,!0),s=t("gos"),f=XMLHttpRequest,u="addEventListener",h="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=s(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?c(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(h+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],7:[function(t,e,n){function r(t,e,n){var r=t[e];"function"==typeof r&&(t[e]=function(){var t=r.apply(this,arguments);return o.emit(n+"start",arguments,t),t.then(function(e){return o.emit(n+"end",[null,e],t),e},function(e){throw o.emit(n+"end",[e],t),e})})}var o=t("ee").get("fetch"),i=t(19);e.exports=o;var a=window,c="fetch-",s=c+"body-",f=["arrayBuffer","blob","json","text","formData"],u=a.Request,h=a.Response,d=a.fetch,p="prototype";u&&h&&d&&(i(f,function(t,e){r(u[p],e,s),r(h[p],e,s)}),r(a,"fetch",c),o.on(c+"end",function(t,e){var n=this;e?e.clone().arrayBuffer().then(function(t){n.rxSize=t.byteLength,o.emit(c+"done",[null,e],n)}):o.emit(c+"done",[t],n)}))},{}],8:[function(t,e,n){var r=t("ee").get("history"),o=t(21)(r);e.exports=r,o.inPlace(window.history,["pushState","replaceState"],"-")},{}],9:[function(t,e,n){var r=t("ee").get("mutation"),o=t(21)(r),i=NREUM.o.MO;e.exports=r,i&&(window.MutationObserver=function(t){return this instanceof i?new i(o(t,"fn-")):i.apply(this,arguments)},MutationObserver.prototype=i.prototype)},{}],10:[function(t,e,n){function r(t){var e=a.context(),n=c(t,"executor-",e),r=new f(n);return a.context(r).getCtx=function(){return e},a.emit("new-promise",[r,e],e),r}function o(t,e){return e}var i=t(21),a=t("ee").get("promise"),c=i(a),s=t(19),f=NREUM.o.PR;e.exports=a,f&&(window.Promise=r,["all","race"].forEach(function(t){var e=f[t];f[t]=function(n){function r(t){return function(){a.emit("propagate",[null,!o],i),o=o||!t}}var o=!1;s(n,function(e,n){Promise.resolve(n).then(r("all"===t),r(!1))});var i=e.apply(f,arguments),c=f.resolve(i);return c}}),["resolve","reject"].forEach(function(t){var e=f[t];f[t]=function(t){var n=e.apply(f,arguments);return t!==n&&a.emit("propagate",[t,!0],n),n}}),f.prototype["catch"]=function(t){return this.then(null,t)},f.prototype=Object.create(f.prototype,{constructor:{value:r}}),s(Object.getOwnPropertyNames(f),function(t,e){try{r[e]=f[e]}catch(n){}}),a.on("executor-start",function(t){t[0]=c(t[0],"resolve-",this),t[1]=c(t[1],"resolve-",this)}),a.on("executor-err",function(t,e,n){t[1](n)}),c.inPlace(f.prototype,["then"],"then-",o),a.on("then-start",function(t,e){this.promise=e,t[0]=c(t[0],"cb-",this),t[1]=c(t[1],"cb-",this)}),a.on("then-end",function(t,e,n){this.nextPromise=n;var r=this.promise;a.emit("propagate",[r,!0],n)}),a.on("cb-end",function(t,e,n){a.emit("propagate",[n,!0],this.nextPromise)}),a.on("propagate",function(t,e,n){this.getCtx&&!e||(this.getCtx=function(){if(t instanceof Promise)var e=a.context(t);return e&&e.getCtx?e.getCtx():this})}),r.toString=function(){return""+f})},{}],11:[function(t,e,n){var r=t("ee").get("raf"),o=t(21)(r),i="equestAnimationFrame";e.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],12:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function o(t,e,n){this.method=n,this.timerDuration="number"==typeof t[1]?t[1]:0,t[0]=a(t[0],"fn-",this,n)}var i=t("ee").get("timer"),a=t(21)(i),c="setTimeout",s="setInterval",f="clearTimeout",u="-start",h="-";e.exports=i,a.inPlace(window,[c,"setImmediate"],c+h),a.inPlace(window,[s],s+h),a.inPlace(window,[f,"clearImmediate"],f+h),i.on(s+u,r),i.on(c+u,o)},{}],13:[function(t,e,n){function r(t,e){h.inPlace(e,["onreadystatechange"],"fn-",c)}function o(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),h.inPlace(t,v,"fn-",c)}function i(t){w.push(t),l&&(g=-g,b.data=g)}function a(){for(var t=0;t<w.length;t++)r([],w[t]);w.length&&(w=[])}function c(t,e){return e}function s(t,e){for(var n in t)e[n]=t[n];return e}t(6);var f=t("ee"),u=f.get("xhr"),h=t(21)(u),d=NREUM.o,p=d.XHR,l=d.MO,m="readystatechange",v=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],w=[];e.exports=u;var y=window.XMLHttpRequest=function(t){var e=new p(t);try{u.emit("new-xhr",[e],e),e.addEventListener(m,o,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(s(p,y),y.prototype=p.prototype,h.inPlace(y.prototype,["open","send"],"-xhr-",c),u.on("send-xhr-start",function(t,e){r(t,e),i(e)}),u.on("open-xhr-start",r),l){var g=1,b=document.createTextNode(g);new l(a).observe(b,{characterData:!0})}else f.on("fn-end",function(t){t[0]&&t[0].type===m||a()})},{}],14:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<h;r++)t.removeEventListener(u[r],this.listener,!1);if(!e.aborted){if(n.duration=(new Date).getTime()-this.startTime,4===t.readyState){e.status=t.status;var i=o(t,this.lastSize);if(i&&(n.rxSize=i),this.sameOrigin){var a=t.getResponseHeader("X-NewRelic-App-Data");a&&(e.cat=a.split(", ").pop())}}else e.status=0;n.cbTime=this.cbTime,f.emit("xhr-done",[t],t),c("xhr",[e,n,this.startTime])}}}function o(t,e){var n=t.responseType;if("json"===n&&null!==e)return e;var r="arraybuffer"===n||"blob"===n||"json"===n?t.response:t.responseText;return l(r)}function i(t,e){var n=s(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}var a=t("loader");if(a.xhrWrappable){var c=t("handle"),s=t(15),f=t("ee"),u=["load","error","abort","timeout"],h=u.length,d=t("id"),p=t(18),l=t(17),m=window.XMLHttpRequest;a.features.xhr=!0,t(13),f.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,p&&(p>34||p<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],o=this;if(n&&r){var i=l(r);i&&(n.txSize=i)}this.startTime=(new Date).getTime(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof e.onload))&&o.end(e)}catch(n){try{f.emit("internal-error",[n])}catch(r){}}};for(var a=0;a<h;a++)e.addEventListener(u[a],this.listener,!1)}),f.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),f.on("xhr-load-added",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],e)}),f.on("removeEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],e)}),f.on("fn-start",function(t,e,n){e instanceof m&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=(new Date).getTime()))}),f.on("fn-end",function(t,e){this.xhrCbStart&&f.emit("xhr-cb-time",[(new Date).getTime()-this.xhrCbStart,this.onload,e],e)})}},{}],15:[function(t,e,n){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],16:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[(new Date).getTime()].concat(c(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(19),c=t(20),s=t("ee").get("tracer"),f=NREUM;"undefined"==typeof window.newrelic&&(newrelic=f);var u=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],h="api-",d=h+"ixn-";a(u,function(t,e){f[e]=o(h+e,!0,"api")}),f.addPageAction=o(h+"addPageAction",!0),f.setCurrentRouteName=o(h+"routeName",!0),e.exports=newrelic,f.interaction=function(){return(new r).get()};var p=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(d+"tracer",[Date.now(),t,n],r),function(){if(s.emit((o?"":"no-")+"fn-start",[Date.now(),r,o],n),o)try{return e.apply(this,arguments)}finally{s.emit("fn-end",[Date.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){p[e]=o(d+e)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,(new Date).getTime()])}},{}],17:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],18:[function(t,e,n){var r=0,o=navigator.userAgent.match(/Firefox[\\/\\s](\\d+\\.\\d+)/);o&&(r=+o[1]),e.exports=r},{}],19:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],20:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],21:[function(t,e,n){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(20),a="nr@original",c=Object.prototype.hasOwnProperty,s=!1;e.exports=function(t,e){function n(t,e,n,o){function nrWrapper(){var r,a,c,s;try{a=this,r=i(arguments),c="function"==typeof n?n(r,a):n||{}}catch(f){d([f,"",[r,a,o],c])}u(e+"start",[r,a,o],c);try{return s=t.apply(a,r)}catch(h){throw u(e+"err",[r,a,h],c),h}finally{u(e+"end",[r,a,s],c)}}return r(t)?t:(e||(e=""),nrWrapper[a]=t,h(t,nrWrapper),nrWrapper)}function f(t,e,o,i){o||(o="");var a,c,s,f="-"===o.charAt(0);for(s=0;s<e.length;s++)c=e[s],a=t[c],r(a)||(t[c]=n(a,f?c+o:o,i,c))}function u(n,r,o){if(!s||e){var i=s;s=!0;try{t.emit(n,r,o)}catch(a){d([a,n,r,o])}s=i}}function h(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){d([r])}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return e}function d(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=o),n.inPlace=f,n.flag=a,n}},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?s(t,c,i):i()}function n(n,r,o){if(!d.aborted){t&&t(n,r,o);for(var i=e(o),a=l(n),c=a.length,s=0;s<c;s++)a[s].apply(i,r);var f=u[y[n]];return f&&f.push([g,n,r,i]),i}}function p(t,e){w[t]=l(t).concat(e)}function l(t){return w[t]||[]}function m(t){return h[t]=h[t]||o(n)}function v(t,e){f(t,function(t,n){e=e||"feature",y[n]=e,e in u||(u[e]=[])})}var w={},y={},g={on:p,emit:n,get:m,listeners:l,context:e,buffer:v,abort:a,aborted:!1};return g}function i(){return new r}function a(){(u.api||u.feature)&&(d.aborted=!0,u=d.backlog={})}var c="nr@context",s=t("gos"),f=t(19),u={},h={},d=e.exports=o();d.backlog=u},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!b++){var t=g.info=NREUM.info,e=h.getElementsByTagName("script")[0];if(setTimeout(f.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return f.abort();s(w,function(e,n){t[e]||(t[e]=n)}),c("mark",["onload",a()],null,"api");var n=h.createElement("script");n.src="https://"+t.agent,e.parentNode.insertBefore(n,e)}}function o(){"complete"===h.readyState&&i()}function i(){c("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var c=t("handle"),s=t(19),f=t("ee"),u=window,h=u.document,d="addEventListener",p="attachEvent",l=u.XMLHttpRequest,m=l&&l.prototype;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:l,REQ:u.Request,EV:u.Event,PR:u.Promise,MO:u.MutationObserver},t(16);var v=""+location,w={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-spa-1016.min.js"},y=l&&m&&m[d]&&!/CriOS/.test(navigator.userAgent),g=e.exports={offset:a(),origin:v,features:{},xhrWrappable:y};h[d]?(h[d]("DOMContentLoaded",i,!1),u[d]("load",r,!1)):(h[p]("onreadystatechange",o),u[p]("onload",r)),c("mark",["firstbyte",a()],null,"api");var b=0},{}]},{},["loader",2,14,5,3,4]);\n            ;NREUM.info={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"b3a229b3da",applicationID:"<APPID>",sa:1}\n        <\/script>\n\n        <script type="text/javascript">\n            "use strict";\n            var port, kind, client;\n            var origin = "<ORIGIN>";\n\n            function report(action, view, variables) {\n                var data = {};\n\n                if (kind) data.kind = kind;\n                if (view) data.view = view;\n                if (client) data.client = client;\n                for (var key in variables) {\n                    data[key] = variables[key];\n                }\n\n                console.log("Page action", action, data);\n                if (window.newrelic) {\n                    window.newrelic.addPageAction(action, data);\n                }\n            }\n\n            function handleCall(event) {\n                window.newrelic[event.data.method].apply(newrelic, event.data.args);\n            }\n\n            function handleInit(event) {\n                if (!/lr-organizer-nr-init/.test(event.data) || event.origin !== origin) return;\n\n                try {\n                    var data = JSON.parse(event.data);\n                    if (data.kind === \'lr-organizer-nr-init\') {\n                        port = event.ports[0];\n                        port.onmessage = handleCall;\n                        window.removeEventListener(\'message\', handleInit);\n                    }\n                }\n                catch(error) {}\n            }\n\n            window.addEventListener(\'message\', handleInit);\n\n        <\/script>\n    </head>\n    <body></body>\n</html>\n'.replace("<ORIGIN>",window.location.origin);let p=(d=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;this.iFrame=e,this.messages=[],this.iFrame.addEventListener("load",(e=>{this.isLoaded=!0;var t=new window.MessageChannel;this.port=t.port1;var r=window.location.origin||`${window.location.protocol}//${window.location.host}`;this.iFrame.contentWindow.postMessage(JSON.stringify({kind:"lr-organizer-nr-init"}),r,[t.port2]),this.messages?.forEach((e=>this._postMessage(e))),this.messages&&delete this.messages}),!1);const r=window?.LrSDK?.environment;t=t.replace("<APPID>","prod"===r?41710945:41710984),this.iFrame.setAttribute("srcdoc",t),"srcdoc"in this.iFrame||this.iFrame.setAttribute("src","javascript: window.frameElement.getAttribute('srcdoc');"),this.iFrame.style.display="none",c.push((()=>{document.body.appendChild(this.iFrame)}));new MessageChannel;this.isLoaded=!1}setCustomAttribute(e,t){this._callRemote("setCustomAttribute",e,t)}addPageAction(e,t){this._callRemote("addPageAction",e,t)}noticeError(e){this._callRemote("noticeError",JSON.stringify(e,["message","arguments","type","name","stack"]))}setErrorHandler(){}_callRemote(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this._postMessage({method:e,args:r},window.location.origin)}_postMessage(e){this.isLoaded?this.port.postMessage(e):this.messages.push(e)}static get instance(){var e=document.getElementById("lr-new-relic-iframe");return e||((e=document.createElement("iframe")).id="lr-new-relic-iframe",e.proxy=new this(e)),e.proxy}},(0,o.Z)(d,"instance",[l.Z],Object.getOwnPropertyDescriptor(d,"instance"),d),d);var f,g=r(4987);let m=(f=class{constructor(){this.newrelic=p.instance,this.newrelic.setErrorHandler(this.errorHandler),i.Z.addCollector(this)}setAttribute(e,t){this.newrelic.setCustomAttribute(e,t)}noticeError(e){this.newrelic.noticeError(e),this.errorHandler(e,!0)}report(e,t){this.newrelic.addPageAction(e,t)}reportTimed(e,t,r,i,n){var s=Object.assign({},n);s.duration=i,this.report(e,s)}reportApiCall(e,t){var r=Object.assign({},t);r.apiName=e,this.report("apiCall",r)}errorHandler(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?this.report("jsError",{message:e.message,errorName:e.name,errorStackTrace:e.stack,url:window.location.toString(),automation:g.Z.is_enabled("automation"),noticed:t}):this.report("jsError",{message:"Unknown error",errorName:"Unknown",url:window.location.toString(),automation:g.Z.is_enabled("automation"),noticed:t}),!1}},(0,o.Z)(f.prototype,"errorHandler",[a.Z],Object.getOwnPropertyDescriptor(f.prototype,"errorHandler"),f.prototype),f);function y(e){g.Z.is_enabled("automation")&&new n,i.Z.getUserGuidP(e).then((e=>{i.Z.setAttribute("guid",e)}),(e=>{})),new m,i.Z.setAttribute("clientId",e.clientId),i.Z.setAttribute("sessionGuid",i.Z.sessionGuid),i.Z.setAttribute("environment",e.environment)}},624943:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var i,n,s,o,a,l,u,c,d=r(873898),h=r(979985),p=r(785919);r(4987);const f=new(i=class{constructor(){this.XMP_CAMERA_RAW_MAX_LENGTH=10240,this.MAX_COMMENT_LENGTH=1023,(0,d.Z)(this,"account",n,this),(0,d.Z)(this,"userDefaults",s,this),(0,d.Z)(this,"catalogContext",o,this),(0,d.Z)(this,"spaceContext",a,this),(0,d.Z)(this,"spaces",l,this),(0,d.Z)(this,"lastAssetEditTime",u,this),(0,d.Z)(this,"_savingEditCount",c,this),this._hostOverride="https://lightroom.adobe.com",this._callbacks=[],this.defaultPageSize=100,this.haveNginxProxy=!0,this.authErrorCallback=void 0}get hostOverride(){return this._hostConfig}set hostOverride(e){this._hostConfig=e,this._callbacks.forEach((e=>e(this)))}startAssetEdit(){this._savingEditCount++}endAssetEdit(){this._savingEditCount--}get savingEdit(){return this._savingEditCount>0}get isNewUser(){if(!this.account.isSubscriber())return!1;const e=this.account.subscriptionStartDate(),t=new Date;return Math.floor((t-e)/864e5)<7}watch(e){this._callbacks.push(e)}},n=(0,h.Z)(i.prototype,"account",[p.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=(0,h.Z)(i.prototype,"userDefaults",[p.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=(0,h.Z)(i.prototype,"catalogContext",[p.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=(0,h.Z)(i.prototype,"spaceContext",[p.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=(0,h.Z)(i.prototype,"spaces",[p.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=(0,h.Z)(i.prototype,"lastAssetEditTime",[p.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=(0,h.Z)(i.prototype,"_savingEditCount",[p.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i)},665238:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=new class{constructor(){this.token=!1,this.environment="prod",this.clientId="PhotoSDK3rdParty1",this.ozHost="https://photos.adobe.io"}}},125748:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(665238),n=r(902049);const s=new class{set session(e){i.Z.token=e.accessToken,i.Z.clientId=e.apiKey,i.Z.ozHost=e.host}getOzUrlP(e,t,r){return this.requestOzUrlP("GET",e,t,void 0,r)}requestOzUrlP(e,t,r,s,o){var a=new n.Z,l=new XMLHttpRequest;if(/^http/.test(t)||(i.Z.ozHost||console.error("Please initialize OzProvider with an ozHost"),t=`${i.Z.ozHost}${t}`),l.open(e,t,!0),l.setRequestHeader("x-api-key",i.Z.clientId),l.setRequestHeader("x-creativesdk-versions","CreativeSDK/0.1.<development>"),l.setRequestHeader("Authorization",`Bearer ${i.Z.token}`),s)for(const[e,t]of Object.entries(s))l.setRequestHeader(e,t);return r&&(l.responseType=r),l.onload=()=>{if(200<=l.status&&l.status<300){var e={response:l.response,contentType:l.getResponseHeader("content-type"),type:l.responseType};if("application/json"===e.contentType||"application/json;charset=utf-8"===e.contentType)try{e.responseObject=JSON.parse(this._trimWhileExpression(l.responseText))}catch(e){return console.log("Failed JSON Parse"),console.log("URL",t),console.log("Response",l.responseText),void a.reject("Failed JSON Parse")}""!==l.responseType&&"text"!==l.responseType||(e.responseText=l.responseText),a.resolve(e)}else a.reject(l.status)},o&&o.then((()=>{l.abort(),a.reject("aborted")})),l.onerror=()=>{var e=`XHR call to Oz failed with status ${l.status}`;a.reject(e),console.error(e)},l.send(),a.promise}_trimWhileExpression(e){return e.replace(/^while\s*\(\s*1\s*\)\s*{\s*}\s*/,"")}}},181285:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var i=r(394454),n=r(935603),s=(r(315258),r(179795),r(624943)),o=r(747652),a=r(252118),l=r(503195),u=r(977660),c=r(4987),d=r(619487),h=r(752470);var p=(0,n.Z)("fetchCall"),f=(0,n.Z)("decodeProfileStatus");class g{constructor(){Object.defineProperty(this,f,{value:y}),Object.defineProperty(this,p,{value:m}),this.readyJP=new Promise(((e,t)=>{this._readyResolve=e,this._readyReject=t})),this._init()}get status(){if(c.Z.is_enabled("debug_account_trial_expired"))return l.Z.FREEMIUM;if(c.Z.is_enabled("debug_account_sub_expired"))return l.Z.EXPIRED;if(c.Z.is_enabled("debug_just_access_platform"))return this._apStatus;if([l.Z.BLOCKED,l.Z.SUBSCRIBER].includes(this._apStatus))return this._apStatus;{const e=s.Z.account;return null!=e?e.isTrialExpired()?l.Z.FREEMIUM:e.isSubscriptionExpired()?l.Z.EXPIRED:"trial"===e.getStatus()?l.Z.TRIAL:"subscriber"===e.getStatus()?l.Z.SUBSCRIBER:"created"===e.getStatus()?l.Z.FREEMIUM:l.Z.UNKNOWN:l.Z.UNKNOWN}}get haveCatalogAccess(){return[l.Z.TRIAL,l.Z.SUBSCRIBER].includes(this.status)}get canViewDiscoverMode(){return[l.Z.FREEMIUM,l.Z.TRIAL_EXPIRED].includes(this.status)}async _init(){const e=a.Z.signedIn;try{await Promise.all([a.Z.readyJP,this._fetchProfileStatusWithTimeout()]),a.Z.signedIn&&!e&&await this._fetchProfileStatusWithTimeout(),null==this.status&&a.Z.signedIn?this._readyReject():this._readyResolve()}catch(e){this._readyReject(),console.error("Access Platform initialization failed:",e)}}async _fetchProfileStatusWithTimeout(){if(c.Z.is_enabled("debug_just_access_platform"))return this._fetchProfileStatus();await new Promise(((e,t)=>{let r=!1;const i=c.Z.is_enabled("debug_access_platform_timeout")?0:3e3,n=setTimeout((()=>{c.Z.is_enabled("debug")&&console.log("Access Platorm init timeout -- falling back to Oz"),d.Z.report("accessPlatformTimeoutFailure"),r=!0,e()}),i);this._fetchProfileStatus().then((()=>{r||(clearTimeout(n),e())}),(()=>{r||(clearTimeout(n),e())}))}))}async _fetchProfileStatus(){if(this._apStatus=l.Z.UNKNOWN,a.Z.signedIn)try{const e=await(0,i.Z)(this,p)[p]();if(200===e.status){const t=await e.json(),r=(0,i.Z)(this,f)[f](t);switch(r){case"PROFILE_AVAILABLE":this._apStatus=l.Z.SUBSCRIBER;break;case"PROFILE_UNAVAILABLE":this._apStatus=l.Z.FREEMIUM;break;case"PROFILE_EXPIRED":this._apStatus=l.Z.EXPIRED;break;case"PROFILE_DENIED":this._apStatus=l.Z.BLOCKED;break;default:this._apStatus=l.Z.UNKNOWN}c.Z.is_enabled("debug_access_platform_blocked")&&(this._apStatus=l.Z.BLOCKED),c.Z.is_enabled("debug")&&console.log(`Access Platform Status: profileStatus: ${r} ozStatus: ${s.Z.account?.getStatus()} webStatus: ${this.status}`)}else this._apStatus=l.Z.UNKNOWN}catch(e){console.error("Access Platform initialization failed:",e),d.Z.report("accessPlatformInitFailure"),this._apStatus=l.Z.UNKNOWN}}}async function m(){const e=u.Z.isProd?"production":"stage",{host:t}=o.environments[e];return await fetch(`https://${t}/webapps/access_profile/v3?include_profiles_as_string=true`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"LightroomMobileWeb1",Authorization:`Bearer ${a.Z.getToken()}`},body:JSON.stringify({appDetails:{nglAppId:"LightroomWebApp1",nglAppVersion:"1.0",locale:h.Z.locale}})})}function y(e){return JSON.parse(atob(e?.asnp?.payload||"")).profileStatus}g.readyJP=void 0,g._apStatus=l.Z.UNKNOWN;const v=new g},503195:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i={SUBSCRIBER:"subscriber",TRIAL:"trial",TRIAL_EXPIRED:"trial_expired",EXPIRED:"expired",FREEMIUM:"freemium",BLOCKED:"blocked",UNKNOWN:"unknown"}},252118:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});class i{constructor(){i.readyJP=new Promise((e=>{this._readyResolve=e}))}setGetTokenMethod(e){this.getTokenMethod=e}setAuthReady(){this.isReady=!0,this._readyResolve()}getToken(){if(null!=this.getTokenMethod)return this.getTokenMethod()}get readyJP(){return i.readyJP}get signedIn(){return null!=this.getToken()}}i.readyJP=void 0,i.isReady=!1;const n=new i},4987:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i,n,s=r(873898),o=r(979985),a=r(785919),l=r(738817),u=r(330918),c=r.n(u);const d=new(i=class{constructor(){(0,s.Z)(this,"features",n,this);const{features:e}=this;for(const t of c())e.add(t);{var t;const e=null!==(t=window.MidwayFeatures)&&void 0!==t?t:window.PageResources?.features.enabled_features;if(e)for(const[t,r]of Object.entries(e))this._override(t,r)}}is_enabled(e){return this.features.has(e)}all_enabled(){return Array.from(this.features)}prerelease_enabled(){return!0===window?.PageResources?.features.prerelease}prerelease_features(){return window?.PageResources?.features.prerelease_hash}cb_prerelease_enabled(){return!0===window?.PageResources?.features.cb_prerelease}cb_prerelease_features(){return window?.PageResources?.features.cb_prerelease_hash}_override(e,t){"string"!=typeof e||e.length<1||(t?this.features.add(e):this.features.delete(e))}},n=(0,o.Z)(i.prototype,"features",[a.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l.Z}}),i);window.Feature=d;const h=d},754992:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});r(315258);var i=r(972586),n=r(346958),s=r(902049),o=r(4987),a=r(619487),l=r(882660),u=r(17848);const c=e=>{if(e){return(e instanceof URL?e:new URL(e,window.location.href)).toString()}};var d=r(252118),h=r(108856).Z;const p=new n.Z;class f{static get cookieOptions(){return{path:"/",secure:!0,domain:window.location.hostname.replace(/^f\d+\./,""),sameSite:"lax"}}static setSignedIn(e,t){p.set("lrw_token",e,{expires:t,...this.cookieOptions})}static setSignedOut(){p.remove("lrw_token",this.cookieOptions)}constructor(){if(this.callbacks={},h.sdk||h.embed)f.readyJP=Promise.resolve(),this.readyOrRenderTimeoutDeferred=new s.Z,this.readyOrRenderTimeoutDeferred.resolve();else{this.readyOrRenderTimeoutDeferred=new s.Z,this.renderTimeout=!1,setTimeout((()=>{d.Z.isReady||(this.renderTimeout=!0,this.readyOrRenderTimeoutDeferred.resolve())}),2e3);const{hostname:e}=window.location,t=document.documentElement.lang.replace("-","_"),{hostnames:r,scope:n}=l,{client_id:a,env:u}=r[e]||r.default,c={client_id:a,locale:t,scope:n,autoValidateToken:!0===window.imsForceValidateToken,environment:u};d.Z.setGetTokenMethod((()=>this.getToken())),f.readyJP=new Promise(((e,t)=>{const r={...c,onReady:()=>{if(n.isSignedInUser()){const{token:e,expire:t}=n.getAccessToken();if(f.setSignedIn(e,t),!this.isSignedIn()&&"/cookies"!==window.location.pathname)return void(window.location.href="/cookies")}else f.setSignedOut();o.Z.is_enabled("debug_delay_ims_ready")?setTimeout((()=>e(n)),5e3):e(n)},onError:(e,r)=>{console.error("login status error:",e,r),f.setSignedOut(),t()}},n=new i.AdobeIMS(r);this.adobeid=r,this.adobeIMS=n,n.initialize()})),f.readyJP.then((()=>{this.renderTimeout||this.readyOrRenderTimeoutDeferred.resolve(),d.Z.setAuthReady()})).catch((()=>{this.renderTimeout||this.readyOrRenderTimeoutDeferred.reject()}))}}async checkEduPrivacySettings(){const e=(await this.getProfileJP()).tags;null!=e&&(e.includes("edu")||e.includes("edu_k12")||e.includes("edu_hed"))&&u.Z.updateSettingsForEduAccount()}get readyJP(){return f.readyJP}get readyOrRenderTimeoutJP(){return this.readyOrRenderTimeoutDeferred.promise}set locale(e){this.adobeid?this.adobeid.locale=e.replace("-","_"):window?.adobeid&&(window.adobeid.locale=e.replace("-","_"))}on(e,t){var r,i;null!==(i=(r=this.callbacks)[e])&&void 0!==i||(r[e]=[]),this.callbacks[e].push(t)}isSignedIn(){return null!=this.getToken()}getSigninRedirectUrl(e){const t=c(e),{hostname:r,href:i}=window.location;return`https://${r}/signin?redirect=${encodeURIComponent(null!=t?t:i)}`}signIn(e){a.Z.flush(),this.adobeIMS.signIn({redirect_uri:this.getSigninRedirectUrl(e)})}signOut(e){this.signingOut||(a.Z.flush(),this.signingOut=!0,f.setSignedOut(),this.callbacks.signOut?.forEach((e=>e())),e=c(e),this.adobeIMS.signOut({redirect_uri:e}))}signUp(e){a.Z.flush(),null==e?this.adobeIMS.signUp():(e=c(e),this.adobeIMS.signUp({redirect_uri:this.getSigninRedirectUrl(e),el:!0}))}socialSignIn(e,t){a.Z.flush(),null==t?this.adobeIMS.signInWithSocialProvider(e):(t=c(t),this.adobeIMS.signInWithSocialProvider(e,{redirect_uri:this.getSigninRedirectUrl(t)}))}getToken(){return p.get("lrw_token")}async getTokenJP(){if(await this.readyJP,this.adobeIMS.isSignedInUser())return this.getToken();throw new Error("Cannot get token for unauthenticated user")}async getProfileJP(){if(await this.readyJP,!this.adobeIMS.isSignedInUser())throw new Error("Cannot get profile for unauthenticated user");try{return await this.adobeIMS.getProfile()}catch(e){throw console.error("getProfile error",e),e}}}f.readyJP=void 0;const g=new f},619487:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var i=r(739861),n=r(394454),s=r(935603),o=(r(315258),r(898950)),a=r(346958),l=r(898544),u=r.n(l),c=r(624943),d=r(435007),h=r(4987),p=r(752470),f=r(330476),g=r(670825),m=r(83302),y=r(413077),v=r(895224),b=r(545385),_=r(471546),w=r(252118);var P=(0,s.Z)("features");const A=new class{constructor(){Object.defineProperty(this,P,{writable:!0,value:new Set}),this.readyJP=h.Z.is_enabled("floodgate")?this.init():Promise.resolve()}enabled(e){return(0,n.Z)(this,P)[P].has(e)}async init(){const e=new AbortController,t=setTimeout((()=>e.abort("TimeoutError")),5e3);try{await this._init(e)}catch(t){"TimeoutError"===e.signal.reason?Z.reportFailure("floodgateTimeoutFailure"):Z.reportFailure("floodgateInitFailure"),console.error("floodgate initialization failed",t)}clearTimeout(t)}async _init(e){await w.Z.readyJP;const t=w.Z.getToken();if(h.Z.is_enabled("debug_floodgate_timeout")&&await new Promise((e=>setTimeout(e,5500))),t){var r;const[i,s]={"lightroom.adobe.com":["https://p13n.adobe.io","LrWebFloodgateProd"]}[window.location.hostname]||["https://p13n-stage.adobe.io","LrWebFloodgateStage"],o=await fetch(`${i}/fg/api/v3/feature?clientId=${s}`,{headers:{Authorization:`Bearer ${t}`,"x-api-key":s},signal:e.signal}),a=null!==(r=(await o.json())?.releases?.[0]?.features)&&void 0!==r?r:[];for(const e of a)(0,n.Z)(this,P)[P].add(e);h.Z.is_enabled("debug")&&console.log("Floodgate features: ",a.join(","))}}};var S=r(17848),x=r(183241),C=r(108856).Z;const O=(0,g.Z)("metrics_track:info"),k=(0,g.Z)("metrics_report:info"),E=(0,g.Z)("metrics_verbose:info"),T=new a.Z,I=new URLSearchParams(window.location.search);var D=(0,s.Z)("getSanitizedUrl");class R extends o.Z{constructor(){var e;(super(),Object.defineProperty(this,D,{value:j}),C.sdk)?this.disabled=!0:(this.disabled=!1,this.setPage(null!==(e=window.metricsPageName)&&void 0!==e?e:"unknown"),this.setViewChangeSource("pageLoad"),this.initPromise=this._initializeJP().then((()=>this.initPromise=null)).catch((e=>{h.Z.is_enabled("debug")&&console.error("Metrics initialization failed. Error:",e)})),this.reportPageLoad(),this.watch((()=>p.Z.locale),(e=>{null!=e&&this._updateLocale()})))}get ingestPage(){return d.pageNames[this.page]}setPage(e){null!=d.pageNames[e]?(this.page=e,this.wildcardPath||(this.wildcardPath="/")):console.error("Invalid page name key",e)}spaPageChanged(e){this.ingestPage!==d.pageNames[e]&&(this.setPage(e),this.reportPageLoad(!0))}async _initializeJP(){await Promise.all([new Promise((e=>v.Z.complete.push(e))),p.Z.readyJP,w.Z.readyJP,_.Z.readyJP,S.Z.consentedJP,h.Z.is_enabled("floodgate")?A.readyJP:Promise.resolve()]),await this._initializeIngestJP();try{this._debuglogMetricStatus()}catch{}}_updateLocale(){var e;(this._canTrackIngest()&&(this._ingestDefaultPayload["event.language"]=p.Z.getLocaleWithUnderscore()),this._canReportAdobe())&&window.digitalData._set("digitalData.page.pageInfo.language",null!==(e=p.Z.locale?.toLowerCase())&&void 0!==e?e:"us")}async _getImsUtilsJP(){const{default:e}=await new i.Z(((e,t)=>Promise.all([r.e(72586),r.e(53763)]).then(r.bind(r,754992)).then(e,t)));return e}async _initializeIngestJP(){if(this.disabled)return;const e={async getAccessToken(e){let t;try{await w.Z.readyJP,t=w.Z.getToken()}catch{}e(null,t)},getAgent(e,t){t(null,{keepalive:!0})}};this._debugLog&&(e.log=e=>E(e));const t="2.2.0",r={ENVIRONMENT:(()=>{switch(window.location.hostname){case"lightroom.adobe.com":return"prod";case"stage.adobelr.com":return"stage";default:return"dev"}})(),ALLOW_NO_TOKEN:!0,ANALYTICS_MAX_QUEUED_EVENTS:100,ANALYTICS_API_KEY:"LightroomMobileWeb1",ANALYTICS_X_PRODUCT:`${window.location.hostname}/${t}`,ANALYTICS_PROJECT:"lr-web-service"};this._ingest=new(u())(e,r),this._ingest.enable(!0),this._ingestDefaultPayload={"event.language":p.Z.getLocaleWithUnderscore(),"event.session_guid":"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),"event.offline":!1,"event.user_agent":navigator.userAgent,"event.category":"WEB","event.referrer":document.referrer,"source.name":"Lightroom","source.platform":"Web","source.device":m.Z.mobile?"mobile":"desktop","source.version":t};const i=I,n=[];i.has("sdid")&&n.push(`sdid=${i.get("sdid")}`),i.has("promoid")&&n.push(`promoid=${i.get("promoid")}`);const{account:s}=c.Z;if(null!=s){this._ingestDefaultPayload["event.user_guid"]=s.getWCDGuid();const e=A.enabled("twp_unconverted")?"subscriber_twp":s.getStatus();this._ingestDefaultPayload["user.service_level"]=e}const o=await this._getImsUtilsJP(),{adobeid:a}=o;let l;if(null!=a?.client_id&&(this._ingestDefaultPayload["source.client_id"]=a.client_id),!C.sdk)try{l=await o.getProfileJP()}catch{}if(null!=l){const e=l.serviceAccounts?.[0];null!=e&&(this._ingestDefaultPayload["user.service_code"]=e.serviceCode)}await Promise.all([_.Z.readyJP,b.Z.readyJP]),null!=b.Z.code&&(this._ingestDefaultPayload["custom.country_code"]=b.Z.code),null!=T.get("lrig")&&(this._ingestDefaultPayload["event.context_guid"]="internal");const d=await _.Z.loadVisitorGuid();if(null!=d&&(this._ingestDefaultPayload["event.visitor_guid"]=d),await x.Z.readyJP,x.Z.active&&(n.push("test_id=LRW012"),this._ingestDefaultPayload["exp.treatment_id"]=x.Z.variant),n.length>0&&(this._ingestDefaultPayload["exp.campaign_id"]=n.join("&")),this._debugLog){E("Ingest common variables:");for(const e in this._ingestDefaultPayload){const t=this._ingestDefaultPayload[e];E(`\t${e}: ${t}`)}}}setAdobePageVariables(e){this.pageVariables=e}setNewNavigationContext(e){this.navView=e,this.contextSequence=1}setViewChangeSource(e){this.viewChangeSource=e}reportViewChange(e,t,r){this.view=e,this.wildcardPath=t,this._reportAdobeViewChange(this.view),this._reportNRViewChange(this.view,this.wildcardPath,r)}reportWithView(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._report(t,e,r)}report(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._report(e,this.view,t)}track(e,t,r){let i,n;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];if(1===o.length){const e=o[0];"string"==typeof e||e instanceof String?i=e:n=e}else o.length>1&&([i,n]=o);this._track(e,t,r,i,n)}_debuglogMetricStatus(){h.Z.is_enabled("debug")&&(null!=this.debugLogTimeout&&clearTimeout(this.debugLogTimeout),this.debugLogTimeout=setTimeout((()=>{console.group("Metrics State"),console.log("Adobe metrics (Launch) enabled : ",this._canReportAdobe()),console.log("NewRelic metrics enabled: ",this._canReportNewrelic()),console.log("Ingest metrics enabled: ",null!=this._ingest),console.groupEnd(),this.debugLogTimeout=null}),500))}reportAdobeOnly(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._report(e,this.view,t,"adobe")}reportNROnly(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._report(e,this.view,t,"newrelic")}reportPageLoad(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{const{page:t,ingestPage:r}=this;if(null!=t){const i=(0,n.Z)(this,D)[D]();"Landing"===r?this.track(r,"Default","page","render",{"event.url":i}):this.track("Default","Page",r,"render",{"event.url":i});const s=e;this._reportAdobeViewChange(`${t}Load`,s),this.flush()}else h.Z.is_enabled("debug")&&console.error("No page name on page load.")}catch(e){console.error(`Error: ${e}`)}}reportFailure(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.failure="true",this._report(e,this.view,t)}reportClickWithView(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.reportWithView(e,t,r)}get _debugLog(){return!this.disabled&&(h.Z.is_enabled("debug_log_metrics_track")||h.Z.is_enabled("debug_log_metrics_report")||h.Z.is_enabled("debug_log_metrics_verbose"))}async _report(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{if(h.Z.is_enabled("automation")&&(r.automation=!0),this._debugLog){if(this.initPromise)try{await this.initPromise}catch{return}const n=null!=t?` view[${t}]`:"";let s;s="adobe"===i?"Adobe":"newrelic"===i?"NewRelic":"",k(`${s}: [${e}]${n} path[${this.wildcardPath}]`,r);for(const e in r){const t=r[e];E(`\t\t${e}: ${t}`)}}null!=i&&"adobe"!==i||this._reportAdobe(e,t,r),null!=i&&"newrelic"!==i||this._reportNR(e,t,r);const n={};for(const e in r){const t=r[e];"automation"!==e&&(n[`lrw.${e}`]=t)}null!=i&&"adobe"!==i||this._track("Legacy","Metric",e,"click",n,"ingest")}catch(e){return console.log(`Error: ${e}`)}}async _reportNR(e,t,r){if(!this._canReportNewrelic())return;const i={page:this.page};if(this.initPromise)try{await this.initPromise}catch{return}null!=t&&(i.view=t);for(const e in r){const t=r[e];i[e]=t}i.visitor_guid=window._satellite?.getVisitorId().getMarketingCloudVisitorID(),window.newrelic.addPageAction(e,i)}async _reportNRViewChange(e,t,r){if(this.initPromise)try{await this.initPromise}catch{return}const i=`${window.location.host}${t}`,{newrelic:n}=window,s=n?.interaction();if(this._debugLog){var o;const t=[];for(const e in r){const i=r[e];t.push(`query-${e}=${i}`)}null==this.viewChangeSource&&console.warn("No view change source"),k(`NewRelic View: view[${e}], interaction[${i}], changeSource[${null!==(o=this.viewChangeSource)&&void 0!==o?o:""}] vars[${t.join("&")}]`)}if(this._canReportNewrelic())if(null!=s){s.setName(i),s.setAttribute("view",e),null!=this.viewChangeSource&&(s.setAttribute("view-change-source",this.viewChangeSource),this.viewChangeSource=null);for(const e in r){const t=r[e];s.setAttribute(`query-${e}`,t)}s.save()}else this.viewChangeSource=null}_canReport(){return!this.disabled&&[S.f.CORE,S.f.PERFORMANCE].every((e=>S.Z.consentedGroups.includes(e)))}_canReportAdobe(){return this._canReport()&&null!=window.digitalData&&null!=window._satellite}_canReportNewrelic(){return this._canReport()&&null!=window.newrelic}_canTrackIngest(){return this._canReport()&&null!=this._ingest}_initAdobeLaunchGlobals(){var e;this.adobeLaunchGlobalsInitialized||(window.digitalData._set("digitalData.page.pageInfo.siteSection","lightroom.adobe.com"),window.digitalData._set("digitalData.page.pageInfo.language",null!==(e=p.Z.locale?.toLowerCase())&&void 0!==e?e:"us"),window.digitalData._set("digitalData.page.pageInfo.legacyMarketSegment","com"),window.digitalData._set("digitalData.lightroom.test","lr_no_test"),window.digitalData._set("digitalData.page.pageInfo.pageName",this.page),window.digitalData._set("digitalData.primaryProduct.productInfo.productName","Lightroom"),this.adobeLaunchGlobalsInitialized=!0)}_debugGetDigitalDataPageInfo(){const e=Object.assign({},window.digitalData.page.pageInfo);return delete e.location,delete e.queryParameters,e}async _reportAdobe(e,t,r){if(this._canReportAdobe()){if(this.initPromise)try{await this.initPromise}catch{return}if(this._initAdobeLaunchGlobals(),window.digitalData._set("digitalData.primaryEvent.eventInfo.eventName",`${e}`),window.digitalData._set("digitalData.page.attributes",r),window._satellite.track("event",{digitalData:window.digitalData._snapshot()}),this._debugLog){const t=window.digitalData;E(`Report Launch event [${e}]`);const r=Object.assign({eventName:t.primaryEvent.eventInfo.eventName},this._debugGetDigitalDataPageInfo(),t.page.attributes);E("\t\tDigitalData",window.digitalData);for(const e in r){const t=r[e];E(`\t\t${e}: ${JSON.stringify(t)}`)}}window.digitalData._delete("digitalData.primaryEvent.eventInfo.eventName"),window.digitalData._delete("digitalData.page.attributes")}}async _reportAdobeViewChange(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._canReportAdobe())return;const r=this.page;if(this.initPromise)try{await this.initPromise}catch{return}this._initAdobeLaunchGlobals(),window.digitalData._set("digitalData.page.pageInfo.pageName",r),window.digitalData._set("digitalData.page.pageInfo.template",e);const i=t?"state":"event";window._satellite.track(i,{digitalData:window.digitalData._snapshot()}),this._debugLog&&(k(`Adobe Launch View: view[${e}] hierarchy[${this.wildcardPath}] asPageLoad: ${t}`),this._canReportAdobe()||k("\t\tNOT ACTUALLY SENDING"),E("\t\tDigitalData",window.digitalData))}async _track(e,t,r,i,n){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{var o;if(h.Z.is_enabled("automation"))null!==(o=n)&&void 0!==o||(n={}),n.automation=!0,f.q.metricTriggered(`${e}:${t}:${r}`);let a=`${null!=e?e:""}:${null!=t?t:""}:${null!=r?r:""}`;if(null!=i&&(a+=`:${i}`),this._debugLog){if(this.initPromise)try{await this.initPromise}catch{return}let e;e="adobe"===s?"Adobe":"newrelic"===s?"NewRelic":"ingest"===s?"Ingest":"",O(`${e}: ${a} path[${this.wildcardPath}]`),this._canTrackIngest()||O("\t\tNOT ACTUALLY TRACKING");for(const e in n){const t=n[e];O(`\t\t${e}: ${t}`)}}null!=s&&"adobe"!==s||this._reportAdobe(a,this.view,n),null!=s&&"newrelic"!==s||this._reportNR(a,this.view,n),null!=s&&"ingest"!==s||this._trackIngest(e,t,r,i,n)}catch(e){return console.error(`Error: ${e}`)}}async _trackIngest(e,t,r,i,n){if(this.initPromise)try{await this.initPromise}catch{return}if(!this._canTrackIngest())return;let s=y.Z.extend(!0,{},this._ingestDefaultPayload);if(s=y.Z.extend(s,n),null!=r&&(s["event.subtype"]=r.toLowerCase().replace(/[^a-z\-]/,"")),null!=t&&(s["event.subcategory"]=t),null!=i&&(s["event.type"]=i.toLowerCase().replace(/[^a-z\-]/,"")),null!=e&&(s["event.workflow"]=e),h.Z.is_enabled("debug")&&"Legacy"!==e){let e,t;null!=i&&(e=Boolean(i.match(/[^a-z\-]/))),null!=r&&(t=Boolean(r.match(/[^a-z\-]/))),(e||t)&&console.warn("invalid metric format",{type:i,action:r})}this._ingestDefaultPayload["event.contextSequence"]=this.contextSequence++,this._ingest.postEvent(s)}flush(){this._flush()}async _flush(){if(this.initPromise)try{await this.initPromise}catch{return}this._ingest?.flush(!0)}}function j(){const e=window.location,t=new URLSearchParams(e.search);t.delete("code"),t.delete("password");const r=t.size>0?`?${t.toString()}`:"";return`${e.host}${e.pathname}${r}`}const Z=new R},17848:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u,f:()=>a});r(315258);var i=r(346958),n=r(4987),s=r(895224);const o=new i.Z,a={CORE:"C0001",PERFORMANCE:"C0002",EXTEND:"C0003",ADVERTISING:"C0004"};class l{get consented(){return l.consented}get consentedJP(){return l.consentedJP}get consentedGroups(){return l.consentedGroups}async updateSettingsForEduAccount(){try{await l.consentedJP}catch{if(null==window.adobePrivacy)return}if(window.adobePrivacy.activeCookieGroups().includes("C0004")&&null!=document.cookie){const e="OptanonConsent",t=e=>document.cookie.split(`${e}=`)[1].split(";")[0];try{const r=t(e);if(r&&(-1!==r.indexOf("C0004:1")||-1!==r.indexOf("C0004%3A1"))){const t=r.replace("C0004:1","C0004:0").replace("C0004%3A1","C0004%3A0"),i=new Date((new Date).setFullYear((new Date).getFullYear()+1)),n=window.location.hostname,s=n.endsWith(".adobe.com")?".adobe.com":n,o="; expires="+i.toUTCString(),a=`; domain= ${s}`,l=`${e}=${t}${o}${a}${"; path=/"}${"; SameSite=Lax"}`;document.cookie=l}}catch(e){console.error("Error updating cookie",e)}}if(await window.adobePrivacy.loadOneTrust(),null!=window.Optanon){const e=window.Optanon.GetDomainData().Groups.find((e=>"C0004"===e.OptanonGroupId)).Cookies.map((e=>e.Name)).sort();for(const t of e){n.Z.is_enabled("debug")&&console.log(`deleting marketing cookie ${t}`);try{o.remove(t)}catch{console.error(`error removing cookie '${t}'`)}}}}constructor(){var e;window.adobePrivacy?.hasUserProvidedConsent()?(l.consented=!0,l.consentedGroups=null!==(e=window.adobePrivacy?.activeCookieGroups?.())&&void 0!==e?e:[],l.consentedJP=Promise.resolve()):l.consentedJP=new Promise(((e,t)=>{const r=()=>{var t;l.consented=!0,l.consentedGroups=null!==(t=window.adobePrivacy?.activeCookieGroups?.())&&void 0!==t?t:[],e()},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"privacy not consented";l.consented=!1,l.consentedGroups=[],t(e)};window.addEventListener("adobePrivacy:PrivacyConsent",r),window.addEventListener("adobePrivacy:PrivacyReject",i),window.addEventListener("adobePrivacy:PrivacyCustom",r),s.Z.interactive.push((()=>{null==window.adobePrivacy&&i("privacy script did not load")}))}));n.Z.is_enabled("debug")&&l.consentedJP.finally((()=>{null==window.adobePrivacy?console.log("Privacy Status: script not loaded (not on VPN?)"):l.consented?console.log("Privacy Status: consented"):console.log("Privacy Status: rejected")})),l.consentedJP.catch((()=>{}))}}l.consented=void 0,l.consentedGroups=[],l.consentedJP=void 0;const u=new l},83302:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=new class{constructor(){this.userAgent=null}get _userAgent(){return this.userAgent?this.userAgent:window.navigator.userAgent}_version(e){const t=this._userAgent.match(e);if(t&&t.length>1){const e=parseInt(t[1],10);if(t.length>2){return{major:e,minor:parseInt(t[2],10)}}return e}}get iOS(){return this._version(/(?:CPU iPhone|iPod|iPad; CPU) OS ([0-9]+)_([0-9]+)/)}get edge(){return this._version(/Edge\/([\d]+)\./)}get edgeChromium(){return this._version(/Edg\/([\d]+)\./)}get android(){return/Android|Silk/.test(this._userAgent)}get silk(){return/Silk/.test(this._userAgent)}get ie(){return/MSIE|Trident/.test(this._userAgent)}get mobile(){return/Mobile|Android/i.test(this._userAgent)}get win(){return/Windows/.test(this._userAgent)}get win32(){return this.win&&!/Win64|WOW64/.test(this._userAgent)}get mac(){return!this.silk&&/Macintosh/.test(this._userAgent)}get chrome(){return this._version(/Chrome\/([\d]+)/i)}get safari(){if(/Safari/i.test(this._userAgent)&&!/(?:CriOS|Silk|Android)/i.test(this._userAgent))return this._version(/Version\/([\d]+)/)}get safariMajorMinor(){if(/Safari/i.test(this._userAgent)&&!/(?:CriOS|Silk|Android)/i.test(this._userAgent))return this._version(/Version\/([\d]+)\.([\d]+)/)}get firefox(){return this._version(/Firefox\/([\d]+)/)}}},540882:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var i,n,s,o=r(873898),a=r(979985),l=r(670402),u=r(785919),c=r(902049),d=r(898950),h=r(956508);function p(e,t,r,i){if(0===t.length)return e;var n=t[0],s=t.slice(1),o=`{${n}}`,a=e.split(o).map((e=>p(e,s,r,i))),l=[].concat(a.shift());if(i)var u=r[n];else(u={})[n]=r[n];for(var c of a)l=l.concat(u,c);return i?l.join(""):l}let f=(i=class extends d.Z{constructor(){super(),(0,o.Z)(this,"locale",n,this),(0,o.Z)(this,"translations",s,this),this._readyDeferred=new c.Z,this._isReady=!1,this.watch((()=>this.locale),(e=>{null==e||this._isReady||(this._isReady=!0,this._readyDeferred.resolve())}))}get readyJP(){return this._readyDeferred.promise}get language_display_name(){return this.locale_hash[this.locale]}get language_code(){return this.locale.split("-")[0]}translate(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var i=e.indexOf("="),n=e.slice(0,i),s=e.slice(i+1),o=this.translations?this.translations[n]:void 0;return o=o||s,n.match(/^\$\$\$/)||console.log(`ZString should start with '$$$': ${e}`),t&&(o=p(o,Object.getOwnPropertyNames(t),t,r)),o}addTextTranslations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("en-US"===this.locale)return;const{translations:r}=this,i="$".repeat(3)+t;for(let t of e.split("\n")){const{length:e}=t,n='"'===t.charAt(0)?1:0,s='"'===t.charAt(e-1)?e-1:e;if(t=t.substring(n,s),t.startsWith(i)){const[e,i]=t.split("=");r[e]=i.replace(/\\["']/g,(e=>e[1])).replace(/\\n/g,(e=>"\n"))}}}getLocaleWithUnderscore(){this.locale.replace("-","_")}humanFileSizeValue(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const r=1024;let i=0;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])i=3,e/=Math.pow(r,i);else for(;Math.abs(e)>=r&&i<t;)e/=r,++i;return[e,i]}humanFileSize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=[this.translate("$$$/js/zstring/common/bytes=B"),this.translate("$$$/js/zstring/common/kilobytes=KB"),this.translate("$$$/js/zstring/common/megabytes=MB"),this.translate("$$$/js/zstring/common/gigabytes=GB"),this.translate("$$$/js/zstring/common/terabytes=TB")],[n,s]=this.humanFileSizeValue(e,r,i.length);t=s<1?0:t;const o=this.translate("$$$/js/zstring/common/decimal_separator=.");return this.translate("$$$/js/zstring/common/storage_format={number} {unit}",{number:n.toFixed(t).replace(".",o),unit:i[s]})}humanCountValue(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const r=1e3;let i;for(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?(i=2,e/=Math.pow(r,i)):i=0;Math.abs(e)>=r&&i<t;)e/=r,++i;return[e,i]}humanCount(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=["",this.translate("$$$/js/zstring/common/thousand=K"),this.translate("$$$/js/zstring/common/million=M"),this.translate("$$$/js/zstring/common/billion=B"),this.translate("$$$/js/zstring/common/trillion=T")],[n,s]=this.humanCountValue(e,r,i.length);s<1&&(t=0);const o=this.translate("$$$/js/zstring/common/decimal_separator=."),a=n.toFixed(t).replace(/\.0+$/,"").replace(".",o);return this.translate("$$$/js/zstring/compact_storage_format={count}{units}",{count:a,units:i[s]})}humanDurationValue(e,t){const r=[1e3,60,60,24];let i=0;for(;Math.abs(e)>=r[0]&&i<t;)e/=r[0],r.shift(),++i;return[e,i]}humanDuration(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=this.translate("$$$/js/zstring/duration={duration} {unit_string}"),s=[this.translate("$$$/js/zstring/common/milliseconds=ms"),this.translate("$$$/js/zstring/common/seconds=seconds"),this.translate("$$$/js/zstring/common/minutes=minutes"),this.translate("$$$/js/zstring/common/hours=hours"),this.translate("$$$/js/zstring/common/days=days")],o=[this.translate("$$$/js/zstring/common/milliseconds=ms"),this.translate("$$$/js/zstring/common/second=second"),this.translate("$$$/js/zstring/common/minute=minute"),this.translate("$$$/js/zstring/common/hour=hour"),this.translate("$$$/js/zstring/common/day=day")],a=[this.translate("$$$/js/zstring/common/milliseconds_short=ms"),this.translate("$$$/js/zstring/common/seconds_short=sec"),this.translate("$$$/js/zstring/common/minutes_short=min"),this.translate("$$$/js/zstring/common/hours_short=hr")];let l,u;[l,u]=i?this.humanDurationValue(e,a.length):this.humanDurationValue(e,s.length),t>0&&(l=Math.ceil(l/t)*t);const c=l.toFixed(r);let d;return d=i?a[u]:"1"===c?o[u]:s[u],n.replace("{duration}",c).replace("{unit_string}",d)}humanDimensions(e){const t=e[0],r=e[1];return null!=t&&null!=r?`${Math.round(t)} x ${Math.round(r)}`:""}humanNumber(e){const t=this.translate("$$$/js/zstring/common/decimal_separator=."),r=this.translate("$$$/js/zstring/common/thousand_separator=,");return e.toString().replace(".",t).replace(/\B(?=(\d{3})+(?!\d))/g,r)}ok_string(){return this.translate("$$$/zstring/common/ok=OK")}cancel_string(){return this.translate("$$$/zstring/common/cancel=Cancel")}continue_string(){return this.translate("$$$/zstring/common/continue=Continue")}submit_string(){return this.translate("$$$/zstring/common/submit=Submit")}close_string(){return this.translate("$$$/zstring/common/close=Close")}retry_string(){return this.translate("$$$/zstring/common/retry=Retry")}or_cap_string(){return this.translate("$$$/zstring/common/or_caps=OR")}or_string(){return this.translate("$$$/zstring/common/or=or")}back_string(){return this.translate("$$$/js/zstring/common/back=Back")}on_string(){return this.translate("$$$/js/zstring/common/on=On")}off_string(){return this.translate("$$$/js/zstring/common/off=Off")}next_string(){return this.translate("$$$/js/zstring/common/next=Next")}try_again_string(){return this.translate("$$$/js/zstring/common/try_again=Try Again")}get_started_string(){return this.translate("$$$/js/zstring/common/get_started=Get Started")}select_files_string(){return this.translate("$$$/js/zstring/common/select_files=Select files…")}add_photos_string(){return this.translate("$$$/js/zstring/common/add_photos=Add photos")}get locale_hash(){const e={};for(const t of h.supported){const r=h.display_names[t];r&&(e[t]=r)}return e}},n=(0,a.Z)(i.prototype,"locale",[u.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=(0,a.Z)(i.prototype,"translations",[u.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,a.Z)(i.prototype,"locale_hash",[l.Z],Object.getOwnPropertyDescriptor(i.prototype,"locale_hash"),i.prototype),i)},670825:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var i=r(901073),n=r.n(i),s=r(71371),o=r(4987);const a=/^debug_log_((?:_(?!_)|[^_])*[^_])(?:__(.*))?/,l=[];for(const e of o.Z.all_enabled()){const t=a.exec(e);if(null!=t){const[,e,r="*"]=t;l.push(`${e}:${r}`)}}const u=l.join(",");n().enable(u),s.Z.enable(u);const c=n()},176262:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(412770);function n(e){return function(t){if(e){Array.isArray(e)||(e=[e]);for(const r of e)(0,i.Z)(t,r)}}}},471546:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(4987),n=r(108856).Z;class s{get launchEnvironment(){return"lightroom.adobe.com"===window.location.hostname?"production":"stage"}get readyJP(){return s.readyJP}async loadVisitorGuid(){return null==s.visitorGuidPromise&&(s.visitorGuidPromise=this._loadVisitorGuid()),await s.visitorGuidPromise}async _loadVisitorGuid(){return await this.readyJP,await new Promise((e=>{if(this.visitorGuid=window._satellite?.getVisitorId().getMarketingCloudVisitorID((e=>this.visitorGuid=e)),this.visitorGuid)return void e();let t=0;const r=window.setInterval((()=>{const i=window.s_adblightroomweb?.marketingCloudVisitorID;t++,(null!=i||t>25)&&(this.visitorGuid=i,clearInterval(r),e())}),200)})),this.visitorGuid}constructor(){if(n.sdk)s.readyJP=Promise.resolve();else{window.marketingtech={adobe:{launch:{property:"global",environment:this.launchEnvironment},target:!0,audienceManager:!1}};const e=async()=>{const e=new Promise((async(e,t)=>{i.Z.is_enabled("disable_adobe_launch_and_metrics")?t("Adobe Launch disabled by debug feature"):(null==window.__satelliteLoadedPromise&&await Promise.resolve().then(r.t.bind(r,349130,23)),await window.__satelliteLoadedPromise,e())})),t=new Promise(((e,t)=>{setTimeout((()=>t("Adobe Launch timeout")),7500)}));await Promise.any([e,t])};s.readyJP=e()}i.Z.is_enabled("debug")&&s.readyJP.then((()=>{console.log("Adobe Launch Status: initialized")}),(e=>console.log("Adobe Launch Status: error initializing",e)))}}s.readyJP=void 0,s.visitorGuidPromise=void 0;const o=new s},183241:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var i=r(873898),n=r(979985),s=r(785919),o=r(902049),a=r(898950),l=r(4987),u=r(252118),c=r(181285),d=r(471546),h=r(619487),p=r(83302);const f="LrDefaultTestMbox";var g,m;const y=new o.Z;const v=new(g=class extends a.Z{constructor(){super(),(0,i.Z)(this,"_variant",m,this),l.Z.is_enabled("voulez_vous")&&window.requestAnimationFrame((()=>this._initTestEnablement()))}_initTestEnablement(){this._initialize().then((()=>y.resolve()),(()=>y.reject()))}async _initialize(){if(await Promise.all([d.Z.readyJP,c.Z.readyJP]),l.Z.is_enabled("voulez_vous")&&!p.Z.mobile&&(c.Z.canViewDiscoverMode||!u.Z.signedIn))try{if(l.Z.is_enabled("debug)")&&console.log("Enabling DiscoverV1 test"),l.Z.is_enabled("force_discover_v1_a_variant"))return void(this._variant="A");if(l.Z.is_enabled("force_discover_v1_b_variant")||l.Z.is_enabled("take_a_chance_on_me"))return void(this._variant="B");await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!l.Z.is_enabled("automation"))return await new Promise(((r,i)=>{const n=!(!p.Z.iOS&&!p.Z.android);let s=!!l.Z.is_enabled("debug_target_timeout");setTimeout((()=>{s&&!l.Z.is_enabled("debug_target_timeout")||(r(),s=!0,console.error("target initialization timeout error"),h.Z.reportFailure("targetTimeoutFailure"))}),1e4),null!=window.adobe.target?window.adobe.target.getOffer({mbox:e,params:{mobile:n,...t},success:function(t){const i=t[0]?.content?.at(0)?.variant;l.Z.is_enabled("debug")&&console.log(`Target getOffer ${e} success, variant: ${i}, offer:`,t),s||(r(i),s=!0)},error:function(e,t){console.log("Target getOffer error",e,t),s||(r(),s=!0)}}):s||(s=!0,r())}))}(f).then((e=>{this._variant=e,l.Z.is_enabled("debug)")&&console.log("DiscoverV1 variant",e)}))}catch(e){console.error("DiscoverV1 test not initialized:",e)}}get variant(){return this._variant}get readyJP(){return y.promise}get active(){return!!l.Z.is_enabled("voulez_vous")&&null!=this.variant}get aGroupActive(){return!!l.Z.is_enabled("voulez_vous")&&"A"===this.variant}get bGroupActive(){return!!l.Z.is_enabled("voulez_vous")&&"B"===this.variant}},m=(0,n.Z)(g.prototype,"_variant",[s.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g)},413077:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const i=function(){let e=!1;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if("boolean"==typeof r[0]&&(e=r[0],r.shift()),!e)return Object.assign(...r);const s={},o=e=>{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&("[object Object]"===e[t]?.toString()?s[t]=i(!0,s[t],e[t]):void 0!==e[t]&&(s[t]=e[t]))};for(const e of r)o(e);return s},n={extend:i}},545385:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var i,n,s,o=r(873898),a=r(979985),l=r(785919),u=r(898950);const c=new(s=class e extends u.Z{constructor(){super(),(0,o.Z)(this,"_code",n,this),this._resolved=!1,e.readyJP=new Promise((e=>{this._readyResolve=e})),setTimeout((()=>{this._resolved||(this._resolved=!0,this._readyResolve())}),5e3)}get code(){return this._code}set code(e){this._code=e,null==e||this._resolved||(this._resolved=!0,this._readyResolve())}},s.readyJP=void 0,i=s,n=(0,a.Z)(i.prototype,"_code",[l.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i)},12838:(e,t,r)=>{"use strict";var i;r.d(t,{Z:()=>n}),i=/\+/g;const n={parsePathFromUrl:function(e){return e.split("#")[0].split("?")[0]},parseQueryFromUrl:function(e){var t;return null==(t=e.split("?")[1])?{}:(t=t.split("#")[0],this.parseQuery(t))},parseQuery:function(e){var t,r,n,s,o,a,l;if(0===(null!=e?e:"").length)return{};for(a={},t=0,r=(o=e.split("&")).length;t<r;t++)if(1===(s=(n=o[t]).split("=")).length)a[n]="";else{if(2!==s.length)continue;l=decodeURIComponent(s[1].replace(i," ")),a[s[0]]=l}return a}}},977660:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=new(function(){class e{get hostName(){return(null!==window?window.location.hostname:void 0)||this.prodHostName}get pathName(){return(null!==window?window.location.pathname:void 0)||""}get isProd(){return this.hostName===this.prodHostName}get isStage(){return!this.isProd}objectToUrlParamString(e){return new URLSearchParams(e).toString()}}return e.prototype.prodHostName="lightroom.adobe.com",e}.call(void 0))},412770:(e,t,r)=>{"use strict";var i;function n(e,t,r){var n,s,o,a,l,u;for(s in o=Object.getOwnPropertyDescriptors(t.prototype),r&&(a=new Set(r)),u=[],o)if(n=o[s],null!=a||"constructor"!==s)if(null==a||a.has(s)){if(null!=e.prototype[s])throw new Error(`Mixin method ${null!=(l=t.prototype.constructor)?l.name:void 0}.${s} hides ${i(e,s)}.${s}`);u.push(Object.defineProperty(e.prototype,s,n))}else u.push(void 0);return u}r.d(t,{Z:()=>n}),i=function(e,t){var r;return r=function(e){return e.hasOwnProperty(t)?e.constructor.name:r(Object.getPrototypeOf(e))},r(e.prototype)}},330476:(e,t,r)=>{"use strict";r.d(t,{q:()=>i});var i,n,s,o,a,l,u,c=r(873898),d=r(979985),h=r(785919),p=r(898950),f=r(4987);f.Z.is_enabled("automation")?(o=function(e,t){var r;return(r=document.createElement("a")).download=t,r.href=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)},s={},a={},l=class extends p.Z{metricTriggered(e){return null==a[e]&&(a[e]=0),a[e]++}constructor(){super(),(0,c.Z)(this,"forceGridHover",u,this),this.forceGridHover=f.Z.is_enabled("automation_force_grid_hover")}},u=(0,d.Z)(l.prototype,"forceGridHover",[h.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=l,window.Automation=i=new i,window.AutomationManager=n={set:function(e,t,r){return s[e]=t,window.Automation[e]=r},remove:function(e){return delete window.Debug[e],delete s[e]}},n.set("scrollGridto","Scroll the current torq grid to (left, top)",(function(e,t){return setTimeout((function(){var r,i,n,s,o;return null!=(null!=(i=window.Automation.controller)&&null!=(n=i.virtualScroll)&&null!=(s=n.scroll)?s.scrollTo:void 0)?window.Automation.controller.virtualScroll.scroll.scrollTo(e,t):null!=(null!=(o=window.Automation.controller.scroll)?o.scrollTo:void 0)&&"function"==typeof(r=window.Automation.controller.scroll).scrollTo?r.scrollTo(e,t):void 0}),300)})),n.set("animateGridto","Animate the current torq grid to (left, top)",(function(e,t){var r,i,n;return null!=(r=window.Automation.controller)&&null!=(i=r.virtualScroll)&&null!=(n=i.scroll)&&"function"==typeof n.animateTo?n.animateTo(e,t):void 0})),n.set("setGridHover","true/false - Force torq grid to hovered state",(function(e){return window.Automation.forceGridHover=e})),n.set("getVisibleGridAssets","idsOnly(=true), includePartiallyVisible(=false) - Get visible grid assets",(function(e,t){var r;return null!=(r=window.Automation.controller)?r.getAssetsInView(e,t):void 0})),n.set("getInviteLinkForEmail","Get the invite link for a share invite on the currently viewed album (email)",(function(e){var t;return null!=(t=window.Automation.controller)?t.automationGetInviteLinkForEmail(e):void 0})),n.set("didMetricTrigger","Check if a metric was triggered. Pass a count if you need to confirm the number of times it fired.",(function(e,t){return null!=a[e]&&(null==t||a[e]===t)})),n.set("clearMetricCache","Clears the cache used to track automation for metrics.",(function(){return a={}})),n.set("downloadRendition","In Loupe view, download the 2048 renditon for the current image",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2048";var t,r,i;return null==(t=window.Automation.asset)?console.error("Automation.downloadRendition() will only work in Loupe view"):(i=t.getRenditionHref("2048"),o(i,r=`image${e}.jpg`),r)})),n.set("getNamedVersionMasks","In Loupe view, get the masks (an object) for a named version at the given index",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t;return null==(t=window.Automation.asset)?console.error("Automation.getNamedVersionMasks() will only work in Loupe view"):t.namedVersions.at(e).getDevelopPixelMasks()})),n.set("deleteAllDiscovers","Delete discovers for the current logged-in author. Will delete all by default, or `numToDelete` if given.",(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,r,i;return null==(null!=(i=null!=(t=window.Automation.controller)?t.scope.store:void 0)&&null!=(r=i.author)?r.me:void 0)?console.error("Error accessing store"):await i.author.me.debugDeleteAllDiscovers(e)})),n.set("resetProfileEdits","Reset your author profile in Community.",(async function(){var e,t,r;return null==(null!=(r=null!=(e=window.Automation.controller)?e.scope.store:void 0)&&null!=(t=r.author)?t.me:void 0)?console.error("Error accessing store"):await r.author.me.debugResetAllProfileEdits()})),n.set("help","list available commands",(function(){var e,t,r;for(t in r="",s)e=s[t],r+=`\n${t}:${Array(22-t.length).join(" ")}${e}`;return r}))):(window.Automation=i={},window.AutomationManager=n={set:function(){},remove:function(){}})},895224:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i,n,s=r(979985),o=r(446074),a=r(314463),l=[].indexOf;i=class extends a.Z{constructor(e,t){super(),this.readyState=e,this.eventName=t}register(){var e;return e=document.readyState,l.call(this.readyState,e)>=0?setTimeout(this.run,0):window.addEventListener(this.eventName,this.exec)}exec(){return this.run()}},(0,s.Z)(i.prototype,"exec",[o.Z],Object.getOwnPropertyDescriptor(i.prototype,"exec"),i.prototype);const u={interactive:new(n=i)(["interactive","complete"],"DOMContentLoaded"),complete:new n(["complete"],"load")}},330918:e=>{e.exports=["develop_healing_early_access","figment","editor_download","target_all_humans","floodgate","lrw_14309_fix","upgrade_party_supplies","eclipse","must_make_additional_object_selections","voulez_vous","sample_lotties","bob_ross","pick_your_poison","lrw_15233_fix","profile_image_upload","research_survey","sdk_sp_search","aretuza_debug_scroll_top","lens_blur_cpf"]},747652:e=>{e.exports={environments:{stage:{host:"aps-web-stage.adobe.io"},production:{host:"aps-web.adobe.io"}}}},965529:e=>{e.exports={hostnames:{"lightroom.adobe.com":{api_host:"pps.adobe.io",api_key:"LrWebPPSProd"},"dev.adobelr.com":{api_host:"pps-stage.adobe.io",api_key:"LrWebPPSStage"},default:{api_host:"pps-stage.adobe.io",api_key:"LrWebPPSStage"}}}},882660:e=>{e.exports={hostnames:{"lightroom.adobe.com":{client_id:"LightroomMobileWeb1"},"dev.adobelr.com":{client_id:"LightroomMobileWeb1",env:"stg1"},default:{client_id:"LightroomMobileWeb1",env:"stg1"}},scope:"AdobeID,openid,gnav,creative_sdk,creative_cloud,additional_info.roles,portfolio.sdk.accounts,portfolio.sdk.import,pps.read,pps.write,pps.image_write,firefly_api"}},5081:e=>{e.exports={"lightroom-production":{name:"prod",host:"adobesearch.adobe.io",unwanted_host:"uss-lr-organize.adobe.io",unwanted_app_token:"8494d9d7-11a2-48de-b0cc-f928d4ddb13f",host_fac:"adobesearch.adobe.io",host_lr:"adobesearch-lr.adobe.io",api_key:"LrWebUssService"},"lightroom-stage":{name:"stage",host:"adobesearch-stage.adobe.io",unwanted_host:"uss-lr-organize-stage.adobe.io",unwanted_app_token:"6ac45059-41a0-4fda-869b-14051fd7c71c",host_fac:"adobesearch-fac-stage.adobe.io",host_lr:"adobesearch-lr-stage.adobe.io",api_key:"LrWebUssService"}}},435007:e=>{e.exports={pageNames:{"abuse-report":"abuse-report",academy:"academy",insights:"insights",author:"author",debug:"debug","community-blocking":"community-blocking","community-featured-edits":"community-featured-edits","community-guidelines":"community-guidelines",discover:"discover",downloader:"downloader",gallery:"gallery",home:"home",homepage:"Landing",landing:"Landing",learn:"learn",libraries:"libraries",news:"news",share:"share","try-edit":"try-edit","try-web":"try-web",tv:"tv",unauthorized:"unauthorized",unsupported:"unsupported",unknown:"unknown","update-lightroom":"update-lightroom"}}},956508:e=>{e.exports={supported:["cs-CZ","da-DK","de-DE","en-GB","en-US","es-ES","es-MX","fi-FI","fr-CA","fr-FR","hi-IN","hu-HU","id-ID","it-IT","ja-JP","ko-KR","nb-NO","nl-NL","pl-PL","pt-BR","ru-RU","sv-SE","th-TH","tr-TR","uk-UA","vi-VN","zh-CN","zh-TW"],display_names:{"en-US":"English, US","en-GB":"English, UK","ja-JP":"日本語","zh-CN":"简体中文","zh-TW":"繁體中文","de-DE":"Deutsch","pt-BR":"Português, Brasil","es-ES":"Español, España","es-MX":"Español, México","fr-CA":"Français, Canada","fr-FR":"Français, France","id-ID":"Bahasa Indonesia","it-IT":"Italiano","ko-KR":"한국어","ru-RU":"Русский","nl-NL":"Nederlands","sv-SE":"Svenska","th-TH":"ภาษาไทย","uk-UA":"Українська","hi-IN":"हिन्दी","hu-HU":"Magyar","cs-CZ":"Čeština","da-DK":"Dansk","fi-FI":"Suomi","nb-NO":"Norsk","pl-PL":"Polski","tr-TR":"Türkçe","vi-VN":"Tiếng Việt","zz-ZZ":"Mock Test"},urls:{ad_choices_url:"https://www.adobe.com/${adobecom_country_fragment}privacy/opt-out.html#interest-based-ads",privacy_url:"http://www.adobe.com/${adobecom_country_fragment}privacy.html",terms_url:"http://www.adobe.com/${adobecom_country_fragment}legal/general-terms.html",privacy_url_for_shares:"http://www.adobe.com/${adobecom_country_fragment}privacy/policy-linkfree.html",terms_url_for_shares:"http://www.adobe.com/${adobecom_country_fragment}legal/general-terms.html",support_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom-cc.html",cpra_personal_info_url:"https://www.adobe.com/privacy/us-rights.html",bonanza_feedback_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom-cc/using/in-app-feedback-program.html",signup_url:{locales:{"zh-CN":"https://www.adobe.com/creativecloud/photography.html",default:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography.html"}},renew_url:"https://account.adobe.com?promoid=2SLRC4PQ&mv=other",renew_stage_url:"https://stage.account.adobe.com?promoid=2SLRC4PQ&mv=other",subscribe_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=2NVQC8FR&mv=other",upgrade_storage_url:"http://www.adobe.com/go/lrcc_upgrade",hdr_blog_max23_url:"http://www.adobe.com/go/hdr_explained",stage_account_url:"https://stage.account.adobe.com",download_lightroom_url:"https://creative.adobe.com/products/download/lightroom?locale=${locale}",welcome_download_lightroom_url:"https://creative.adobe.com/products/download/lightroom?sdid=5F1G8NTM&mv=other&locale=${locale}",welcome_to_lightroom_try_for_free_url:"https://creative.adobe.com/products/download/lightroom?promoid=Z2G1FY7X&mv=other&locale=${locale}",pricing_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=XFWLHGM1&mv=other&locale=${locale}",pricing_a_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=D4P81RPV&mv=other&locale=${locale}",pricing_b_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=DZTGZWKM&mv=other&locale=${locale}",pricing_c_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=DW3G119N&mv=other&locale=${locale}",plans_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=VKW3KGR6&mv=other",plans_a_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FR7NZ55F&mv=other&locale=${locale}",plans_b_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=DRCF151P&mv=other&locale=${locale}",plans_c_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FHRLZDMH&mv=other&locale=${locale}",trial_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=X2PHHV1S&mv=other",trial_a_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=D8F91MYT&mv=other&locale=${locale}",trial_b_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=DD5B1J7S&mv=other&locale=${locale}",trial_c_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=DMMD18RQ&mv=other&locale=${locale}",trial_header_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=F89JZN3K&mv=other&locale=${locale}",trial_header_a_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FVYPZ1FD&mv=other&locale=${locale}",trial_header_b_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FZPQYWPC&mv=other&locale=${locale}",trial_header_c_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=G4FRYRYB&mv=other&locale=${locale}",buy_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=F4KHZRTL&mv=other&locale=${locale}",buy_a_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=CZY71WFW&mv=other&locale=${locale}",buy_b_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=FD1KZJCJ&mv=other&locale=${locale}",buy_c_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=FMHMZ8WG&mv=other&locale=${locale}",lrmobile_branch_url:"https://lightroom.app.link/friy7F70Xcb",lrmobile_branch_a_url:"https://lightroom.app.link/Pc0Kq9aDypb",lrmobile_branch_b_url:"https://lightroom.app.link/qAVbnBrDypb",lrmobile_branch_c_url:"https://lightroom.app.link/AAZFytvDypb",lrmobile_branch_qrcode_url:"https://lightroom.app.link/TSsswqZnQxb",retired_trial_6_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=LLVYT9J4&mv=other&locale=${locale}",retired_trial_7_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=LVC1T222&mv=other&locale=${locale}",retired_buy_1_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=DHWC1DHR&mv=other&locale=${locale}",ccp_help_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/how-to/get-started-photography.html",learn_more_url:"http://www.adobe.com/${adobecom_country_fragment}products/lightroom-mobile.html",lrmobile_iphone_url:"https://itunes.apple.com/${country_code_downcase}/app/adobe-lightroom/id878783582?ls=1&mt=8",lrmobile_ipad_url:"https://itunes.apple.com/${country_code_downcase}/app/adobe-lightroom/id804177739?ls=1&mt=8",lrmobile_android_url:"https://play.google.com/store/apps/details?id=com.adobe.lrmobile",photoshop_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop.html",support_file_sync_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/kb/sync-different-lightroom-desktop-catalog-with-mobile.html",support_fileformats_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/help/supported-file-formats.html",lr_support_fileformats_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/help/supported-file-formats.html"},adobecom_language_codes:{"bg-BG":"bg","cs-CZ":"cz","da-DK":"dk","de-AT":"at","de-CH":"ch_de","de-DE":"de","de-LU":"lu_de","en-AU":"au","en-BE":"be_en","en-CA":"ca","en-CY":"cy_en","en-GB":"uk","en-GR":"gr_en","en-HK":"hk_en","en-IE":"ie","en-IL":"il_en","en-IN":"in","en-LU":"lu_en","en-MT":"mt","en-NZ":"nz","en-sea":"sea","en-UK":"uk","en-US":null,"es-ES":"es","es-LA":"la","es-MX":"mx","et-EE":"ee","fi-FI":"fi","fr-BE":"be_fr","fr-CA":"ca_fr","fr-CH":"ch_fr","fr-FR":"fr","fr-LU":"lu_fr","he-IL":"il_he","hi-IN":"in_hi","hu-HU":"hu","it-CH":"ch_it","id-ID":"sea","it-IT":"it","ja-JP":"jp","ko-KR":"kr","lt-LT":"lt","lv-LV":"lv","nb-NO":"no","nl-BE":"be_nl","nl-NL":"nl","pl-PL":"pl","pt-BR":"br","pt-PT":"pt","ro-RO":"ro","ru-RU":"ru","sk-SK":"sk","sl-SI":"si","sv-SE":"se","th-TH":"sea","tr-TR":"tr","uk-UA":"ua","vi-VN":"sea","zh-CN":"cn","zh-HK":"hk_zh","zh-TW":"tw","zz-ZZ":null}}},666222:(e,t)=>{t.r=function(){return function(e){for(var t=0,r=0,i=0,n=1,s=[],o=0,a=function(){var e=4022871197,t=function(t){t=t.toString();for(var r=0;r<t.length;r++){var i=.02519603282416938*(e+=t.charCodeAt(r));i-=e=i>>>0,e=(i*=e)>>>0,e+=4294967296*(i-=e)}return 2.3283064365386963e-10*(e>>>0)};return t.version="Mash 0.9",t}(),l=(t=a(" "),r=a(" "),i=a(" "),0);l<8;l++)s[l]=a(" ");0==e.length&&(e=[+new Date]);for(var u=0;u<e.length;u++){(t-=a(e[u]))<0&&(t+=1),(r-=a(e[u]))<0&&(r+=1),(i-=a(e[u]))<0&&(i+=1);for(l=0;l<8;l++)s[l]-=a(e[u]),s[l]<0&&(s[l]+=1)}var c=function(){o=8*s[o]|0;var e=s[o],a=2091639*t+2.3283064365386963e-10*n;return t=r,r=i,i=a-(n=0|a),s[o]-=i,s[o]<0&&(s[o]+=1),e};return c.uint32=function(){return 4294967296*c()},c.fract53=function(){return c()+11102230246251565e-32*(2097152*c()|0)},c.addNoise=function(){for(var e=arguments.length-1;e>=0;e--)for(l=0;l<8;l++)s[l]-=a(arguments[e]),s[l]<0&&(s[l]+=1)},c.version="Kybos 0.9",c.args=e,c}(Array.prototype.slice.call(arguments))}},891218:function(){function e(e){this.size=0,this.limit=e,this._keymap={}}e.prototype.put=function(e,t){var r={key:e,value:t};if(this._keymap[e]=r,this.tail?(this.tail.newer=r,r.older=this.tail):this.head=r,this.tail=r,this.size===this.limit)return item=this.shift(),item.value&&item.value.dispose&&item.value.dispose(),item;this.size++},e.prototype.shift=function(){var e=this.head;return e&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):this.head=void 0,e.newer=e.older=void 0,delete this._keymap[e.key]),e},e.prototype.get=function(e,t){var r=this._keymap[e];if(void 0!==r)return r===this.tail||(r.newer&&(r===this.head&&(this.head=r.newer),r.newer.older=r.older),r.older&&(r.older.newer=r.newer),r.newer=void 0,r.older=this.tail,this.tail&&(this.tail.newer=r),this.tail=r),t?r:r.value},e.prototype.find=function(e){return this._keymap[e]},e.prototype.set=function(e,t){var r,i=this.get(e,!0);return i?(r=i.value,i.value=t):(r=this.put(e,t))&&(r=r.value),r},e.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.head=t.newer):t.older?(t.older.newer=void 0,this.tail=t.older):this.head=this.tail=void 0,this.size--,t.value},e.prototype.removeAll=function(){this.head=this.tail=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?e.prototype.keys=function(){return Object.keys(this._keymap)}:e.prototype.keys=function(){var e=[];for(var t in this._keymap)e.push(t);return e},e.prototype.forEach=function(e,t,r){var i;if(!0===t?(r=!0,t=void 0):"object"!=typeof t&&(t=this),r)for(i=this.tail;i;)e.call(t,i.key,i.value,this),i=i.older;else for(i=this.head;i;)e.call(t,i.key,i.value,this),i=i.newer},e.prototype.toJSON=function(){for(var e=[],t=this.head;t;)e.push({key:t.key.toJSON(),value:t.value.toJSON()}),t=t.newer;return e},e.prototype.toString=function(){for(var e="",t=this.head;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ");return e},"object"==typeof this&&(this.LRUCache=e)},109986:()=>{},979985:(e,t,r)=>{"use strict";function i(e,t,r,i,n){var s={};return Object.keys(i).forEach((function(e){s[e]=i[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}r.d(t,{Z:()=>i})},394454:(e,t,r)=>{"use strict";function i(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}r.d(t,{Z:()=>i})},935603:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=0;function n(e){return"__private_"+i+++"_"+e}},873898:(e,t,r)=>{"use strict";function i(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}r.d(t,{Z:()=>i})}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={id:e,loaded:!1,exports:{}};return n[e].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}o.m=n,o.c=s,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"==typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"==typeof r.then)return r}var n=Object.create(null);o.r(n);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,o.d(n,s),n},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,r)=>(o.f[r](e,t),t)),[])),o.u=e=>(53763===e?"shared_utils/ImsUtils":e)+"."+{53763:"de468a3e3203d9741fd4",72586:"e971e19e9a8212b6a2df"}[e]+".js",o.miniCssF=e=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},i="LrWeb:",o.l=(e,t,n,s)=>{if(r[e])r[e].push(t);else{var a,l;if(void 0!==n)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==i+n){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",i+n),a.src=e),r[e]=[t];var h=(t,i)=>{a.onerror=a.onload=null,clearTimeout(p);var n=r[e];if(delete r[e],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(i))),t)return t(i)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.p="/modern/",(()=>{var e={34746:0,43392:0,53763:0,72586:0};o.f.j=(t,r)=>{var i=o.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var n=new Promise(((r,n)=>i=e[t]=[r,n]));r.push(i[2]=n);var s=o.p+o.u(t),a=new Error;o.l(s,(r=>{if(o.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var n=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",a.name="ChunkLoadError",a.type=n,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,n,[s,a,l]=r,u=0;if(s.some((t=>0!==e[t]))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(l)l(o)}for(t&&t(r);u<s.length;u++)n=s[u],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0},r=self.webpackChunkLrWeb=self.webpackChunkLrWeb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),o.nc=void 0;o(o.s=645491)})();